{"value":[{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\App.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027outcome\u0027 is assigned a value but never used.","line":127,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":127,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, lazy, Suspense } from \u0027react\u0027;\nimport { BrowserRouter, Routes, Route, Navigate, useNavigate } from \u0027react-router-dom\u0027;\nimport { AuthProvider } from \u0027./context/AuthProvider\u0027;\nimport { useAuth } from \u0027./context/AuthContext\u0027;\nimport { logger } from \u0027./utils/logger\u0027;\nimport { StudyProvider } from \u0027./context/StudyProvider\u0027;\nimport { ProjectProvider } from \u0027./context/ProjectProvider\u0027;\nimport { PomodoroProvider } from \u0027./context/PomodoroProvider\u0027;\nimport { ToastProvider } from \u0027./context/ToastProvider\u0027;\nimport { ConfirmProvider } from \u0027./context/ConfirmProvider\u0027;\nimport { UIThemeProvider } from \u0027./context/UIThemeProvider\u0027;\nimport { SyncStatusWatcher } from \u0027./components/SyncStatusWatcher\u0027;\nimport { AudioProvider } from \u0027./context/AudioProvider\u0027;\nimport { MainLayout } from \u0027./layouts/MainLayout\u0027;\nimport { LoginPage } from \u0027./features/auth/LoginPage\u0027;\nimport { LoadingSpinner } from \u0027./components/ui/LoadingSpinner\u0027;\nimport { GlobalSearch } from \u0027./components/GlobalSearch\u0027;\nimport { NotificationPermissionBanner } from \u0027./components/NotificationPermissionBanner\u0027;\nimport { OnboardingTour } from \u0027./components/onboarding/OnboardingTour\u0027;\nimport { PWAPrompt } from \u0027./components/PWAPrompt\u0027;\nimport { Analytics } from \u0027@vercel/analytics/react\u0027;\nimport { SpeedInsights } from \u0027@vercel/speed-insights/react\u0027;\n\n// Lazy load pages for better initial bundle size\nconst Dashboard = lazy(() =\u003e import(\u0027./features/dashboard/Dashboard\u0027).then(module =\u003e ({ default: module.Dashboard })));\nconst Calendar = lazy(() =\u003e import(\u0027./features/calendar/Calendar\u0027).then(module =\u003e ({ default: module.Calendar })));\nconst ThemeList = lazy(() =\u003e import(\u0027./features/lists/ThemeList\u0027).then(module =\u003e ({ default: module.ThemeList })));\nconst ProjectList = lazy(() =\u003e import(\u0027./features/lists/ProjectList\u0027).then(module =\u003e ({ default: module.ProjectList })));\nconst GoalList = lazy(() =\u003e import(\u0027./features/lists/GoalList\u0027).then(module =\u003e ({ default: module.GoalList })));\nconst TaskList = lazy(() =\u003e import(\u0027./features/lists/TaskList\u0027).then(module =\u003e ({ default: module.TaskList })));\nconst AnalyticsPage = lazy(() =\u003e import(\u0027./features/analytics/AnalyticsPage\u0027).then(module =\u003e ({ default: module.AnalyticsPage })));\nconst Settings = lazy(() =\u003e import(\u0027./features/settings/Settings\u0027).then(module =\u003e ({ default: module.Settings })));\nconst SummariesPage = lazy(() =\u003e import(\u0027./features/summaries/SummariesPage\u0027).then(module =\u003e ({ default: module.SummariesPage })));\nconst SummaryDemo = lazy(() =\u003e import(\u0027./pages/SummaryDemo\u0027));\n\n\nfunction LoadingFallback() {\n  return (\n    \u003cdiv className=\"flex items-center justify-center h-full w-full\"\u003e\n      \u003cdiv className=\"flex flex-col items-center gap-4\"\u003e\n        \u003cLoadingSpinner size=\"lg\" variant=\"primary\" /\u003e\n        \u003cp className=\"text-slate-400 text-sm animate-pulse\"\u003eCarregando...\u003c/p\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n  );\n}\n\n// Wrapper to provide navigation prop to Dashboard\nconst DashboardWrapper = ({ setIsSummaryModalOpen, setIsMissionModalOpen }: { setIsSummaryModalOpen: (v: boolean) =\u003e void, setIsMissionModalOpen: (v: boolean) =\u003e void }) =\u003e {\n  const navigate = useNavigate();\n  return (\n    \u003cDashboard\n      onNavigate={(path) =\u003e navigate(`/${path}`)}\n      onOpenSummaryModal={() =\u003e setIsSummaryModalOpen(true)}\n      setIsMissionModalOpen={setIsMissionModalOpen}\n    /\u003e\n  );\n};\n\nfunction AppContent() {\n  const { user } = useAuth();\n  const [isSummaryModalOpen, setIsSummaryModalOpen] = useState(false);\n  const [isMissionModalOpen, setIsMissionModalOpen] = useState(false);\n  const [isSearchOpen, setIsSearchOpen] = useState(false);\n\n  // Global Search Shortcut (Ctrl+K / Cmd+K)\n  useEffect(() =\u003e {\n    const handleKeyDown = (e: KeyboardEvent) =\u003e {\n      if ((e.ctrlKey || e.metaKey) \u0026\u0026 e.key === \u0027k\u0027) {\n        e.preventDefault();\n        setIsSearchOpen(true);\n      }\n    };\n\n    window.addEventListener(\u0027keydown\u0027, handleKeyDown);\n    return () =\u003e window.removeEventListener(\u0027keydown\u0027, handleKeyDown);\n  }, []);\n\n  // --- HARD RESET FOR FRESH START (GUEST ONLY) ---\n  useEffect(() =\u003e {\n    // Guest UUID detected or just run once for current session request\n    if (user?.id === \u002700000000-0000-0000-0000-000000000001\u0027) {\n      const hasReset = sessionStorage.getItem(\u0027guest_reset_v3\u0027);\n      if (!hasReset) {\n        logger.info(\"ðŸ§¹ Executing Hard Reset for Guest Session...\");\n        // Purge App Data (Preserve \u0027app_user\u0027 to keep login)\n        localStorage.removeItem(\u0027study_themes_backup\u0027);\n        localStorage.removeItem(\u0027deleted_theme_ids\u0027);\n        localStorage.removeItem(\u0027sync_queue_v1\u0027);\n        localStorage.removeItem(\u0027daily_unlocked_subthemes\u0027);\n        localStorage.removeItem(\u0027active_focus_session\u0027);\n\n        // Mark as done for this tab session\n        sessionStorage.setItem(\u0027guest_reset_v3\u0027, \u0027true\u0027);\n\n        // Force Reload to ensure contexts re-initialize empty\n        window.location.reload();\n      }\n    }\n  }, [user]);\n\n  // PWA Install Prompt\n  const [deferredPrompt, setDeferredPrompt] = useState\u003cany\u003e(null);\n  const [showPWAPrompt, setShowPWAPrompt] = useState(false);\n\n  useEffect(() =\u003e {\n    const handler = (e: Event) =\u003e {\n      e.preventDefault();\n      setDeferredPrompt(e);\n      // Show prompt after 30s (not immediately)\n      setTimeout(() =\u003e {\n        const dismissed = localStorage.getItem(\u0027pwa_prompt_dismissed\u0027);\n        if (!dismissed) {\n          setShowPWAPrompt(true);\n        }\n      }, 30000);\n    };\n\n    window.addEventListener(\u0027beforeinstallprompt\u0027, handler);\n    return () =\u003e window.removeEventListener(\u0027beforeinstallprompt\u0027, handler);\n  }, []);\n\n  const handlePWAInstall = async () =\u003e {\n    if (!deferredPrompt) return;\n\n    deferredPrompt.prompt();\n    const { outcome } = await deferredPrompt.userChoice;\n\n    logger.info(\u0027PWA installed\u0027);\n\n    setDeferredPrompt(null);\n    setShowPWAPrompt(false);\n  };\n\n  const handlePWADismiss = () =\u003e {\n    setShowPWAPrompt(false);\n    localStorage.setItem(\u0027pwa_prompt_dismissed\u0027, \u0027true\u0027);\n  };\n\n  // If not logged in, show Login Page directly (Personal Use Mode)\n  if (!user) {\n    return \u003cLoginPage /\u003e;\n  }\n\n  return (\n    \u003cStudyProvider key={user.id}\u003e {/* Key forces reset when user changes */}\n      \u003cProjectProvider\u003e\n        \u003cPomodoroProvider\u003e\n          {/* Global Search Modal */}\n          \u003cGlobalSearch isOpen={isSearchOpen} onClose={() =\u003e setIsSearchOpen(false)} /\u003e\n\n          {/* Notification Permission Banner */}\n          \u003cNotificationPermissionBanner /\u003e\n\n          {/* Onboarding Tour */}\n          \u003cOnboardingTour /\u003e\n\n          {/* PWA Install Prompt */}\n          {showPWAPrompt \u0026\u0026 (\n            \u003cPWAPrompt\n              onInstall={handlePWAInstall}\n              onDismiss={handlePWADismiss}\n            /\u003e\n          )}\n\n          \u003cMainLayout\n            isSummaryModalOpen={isSummaryModalOpen}\n            setIsSummaryModalOpen={setIsSummaryModalOpen}\n            isMissionModalOpen={isMissionModalOpen}\n            setIsMissionModalOpen={setIsMissionModalOpen}\n          \u003e\n            \u003cSuspense fallback={\u003cLoadingFallback /\u003e}\u003e\n              \u003cRoutes\u003e\n                \u003cRoute path=\"/\" element={\u003cNavigate to=\"/dashboard\" replace /\u003e} /\u003e\n                \u003cRoute path=\"/dashboard\" element={\u003cDashboardWrapper setIsSummaryModalOpen={setIsSummaryModalOpen} setIsMissionModalOpen={setIsMissionModalOpen} /\u003e} /\u003e\n                \u003cRoute path=\"/calendar\" element={\u003cCalendar /\u003e} /\u003e\n                \u003cRoute path=\"/summaries\" element={\u003cSummariesPage /\u003e} /\u003e\n                \u003cRoute path=\"/themes\" element={\u003cThemeList /\u003e} /\u003e\n                \u003cRoute path=\"/projects\" element={\u003cProjectList /\u003e} /\u003e\n                \u003cRoute path=\"/goals\" element={\u003cGoalList /\u003e} /\u003e\n                \u003cRoute path=\"/tasks\" element={\u003cTaskList /\u003e} /\u003e\n                \u003cRoute path=\"/analytics\" element={\u003cAnalyticsPage /\u003e} /\u003e\n                \u003cRoute path=\"/settings\" element={\u003cSettings /\u003e} /\u003e\n                \u003cRoute path=\"/summary-demo\" element={\u003cSummaryDemo /\u003e} /\u003e\n                \u003cRoute path=\"*\" element={\u003cNavigate to=\"/dashboard\" replace /\u003e} /\u003e\n              \u003c/Routes\u003e\n            \u003c/Suspense\u003e\n          \u003c/MainLayout\u003e\n        \u003c/PomodoroProvider\u003e\n      \u003c/ProjectProvider\u003e\n    \u003c/StudyProvider\u003e\n  );\n}\n\nfunction App() {\n  return (\n    \u003cBrowserRouter\u003e\n      \u003cAuthProvider\u003e\n        \u003cToastProvider\u003e\n          \u003cConfirmProvider\u003e\n            \u003cUIThemeProvider\u003e\n              \u003cAudioProvider\u003e\n                \u003cSyncStatusWatcher /\u003e\n                \u003cAppContent /\u003e\n              \u003c/AudioProvider\u003e\n            \u003c/UIThemeProvider\u003e\n          \u003c/ConfirmProvider\u003e\n        \u003c/ToastProvider\u003e\n      \u003c/AuthProvider\u003e\n\n      {/* Vercel Analytics \u0026 Speed Insights */}\n      \u003cAnalytics /\u003e\n      \u003cSpeedInsights /\u003e\n    \u003c/BrowserRouter\u003e\n  );\n}\n\nexport default App;\n\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\__tests__\\startup.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\GlobalSearch.tsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`handleSelectResult` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\GlobalSearch.tsx:44:25\n  42 |                     e.preventDefault();\n  43 |                     if (results[selectedIndex]) {\n\u003e 44 |                         handleSelectResult(results[selectedIndex]);\n     |                         ^^^^^^^^^^^^^^^^^^ `handleSelectResult` accessed before it is declared\n  45 |                     }\n  46 |                     break;\n  47 |                 case \u0027Escape\u0027:\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\GlobalSearch.tsx:63:5\n  61 |     }, [results]);\n  62 |\n\u003e 63 |     const handleSelectResult = (result: SearchResult) =\u003e {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\u003e 64 |         onClose();\n     | ^^^^^^^^^^^^^^^^^^\n\u003e 65 |\n     â€¦\n     | ^^^^^^^^^^^^^^^^^^\n\u003e 81 |         }\n     | ^^^^^^^^^^^^^^^^^^\n\u003e 82 |     };\n     | ^^^^^^^ `handleSelectResult` is declared here\n  83 |\n  84 |     const getResultIcon = (type: SearchResult[\u0027type\u0027]) =\u003e {\n  85 |         switch (type) {","line":44,"column":25,"nodeType":null,"endLine":44,"endColumn":43},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: \u0027handleSelectResult\u0027. Either include it or remove the dependency array.","line":56,"column":8,"nodeType":"ArrayExpression","endLine":56,"endColumn":49,"suggestions":""}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from \u0027react\u0027;\r\nimport { Search, X, CheckSquare, Target, BookOpen, FileText, ArrowRight } from \u0027lucide-react\u0027;\r\nimport { useGlobalSearch, type SearchResult } from \u0027../hooks/useGlobalSearch\u0027;\r\nimport { useNavigate } from \u0027react-router-dom\u0027;\r\n\r\ninterface GlobalSearchProps {\r\n    isOpen: boolean;\r\n    onClose: () =\u003e void;\r\n}\r\n\r\nexport const GlobalSearch: React.FC\u003cGlobalSearchProps\u003e = ({ isOpen, onClose }) =\u003e {\r\n    const [query, setQuery] = useState(\u0027\u0027);\r\n    const [selectedIndex, setSelectedIndex] = useState(0);\r\n    const results = useGlobalSearch(query);\r\n    const inputRef = useRef\u003cHTMLInputElement\u003e(null);\r\n    const navigate = useNavigate();\r\n\r\n    // Focus input when modal opens\r\n    useEffect(() =\u003e {\r\n        if (isOpen) {\r\n            inputRef.current?.focus();\r\n            setQuery(\u0027\u0027);\r\n            setSelectedIndex(0);\r\n        }\r\n    }, [isOpen]);\r\n\r\n    // Keyboard navigation\r\n    useEffect(() =\u003e {\r\n        const handleKeyDown = (e: KeyboardEvent) =\u003e {\r\n            if (!isOpen) return;\r\n\r\n            switch (e.key) {\r\n                case \u0027ArrowDown\u0027:\r\n                    e.preventDefault();\r\n                    setSelectedIndex(prev =\u003e Math.min(prev + 1, results.length - 1));\r\n                    break;\r\n                case \u0027ArrowUp\u0027:\r\n                    e.preventDefault();\r\n                    setSelectedIndex(prev =\u003e Math.max(prev - 1, 0));\r\n                    break;\r\n                case \u0027Enter\u0027:\r\n                    e.preventDefault();\r\n                    if (results[selectedIndex]) {\r\n                        handleSelectResult(results[selectedIndex]);\r\n                    }\r\n                    break;\r\n                case \u0027Escape\u0027:\r\n                    e.preventDefault();\r\n                    onClose();\r\n                    break;\r\n            }\r\n        };\r\n\r\n        window.addEventListener(\u0027keydown\u0027, handleKeyDown);\r\n        return () =\u003e window.removeEventListener(\u0027keydown\u0027, handleKeyDown);\r\n    }, [isOpen, results, selectedIndex, onClose]);\r\n\r\n    // Reset selected index when results change\r\n    useEffect(() =\u003e {\r\n        setSelectedIndex(0);\r\n    }, [results]);\r\n\r\n    const handleSelectResult = (result: SearchResult) =\u003e {\r\n        onClose();\r\n\r\n        // Navigate based on result type\r\n        switch (result.type) {\r\n            case \u0027task\u0027:\r\n                navigate(\u0027/tasks\u0027);\r\n                // TODO: Open task details modal\r\n                break;\r\n            case \u0027goal\u0027:\r\n                navigate(\u0027/goals\u0027);\r\n                // TODO: Open goal details modal\r\n                break;\r\n            case \u0027theme\u0027:\r\n            case \u0027subtheme\u0027:\r\n                navigate(\u0027/themes\u0027);\r\n                // TODO: Open theme details modal\r\n                break;\r\n        }\r\n    };\r\n\r\n    const getResultIcon = (type: SearchResult[\u0027type\u0027]) =\u003e {\r\n        switch (type) {\r\n            case \u0027task\u0027:\r\n                return \u003cCheckSquare className=\"w-5 h-5 text-purple-400\" /\u003e;\r\n            case \u0027goal\u0027:\r\n                return \u003cTarget className=\"w-5 h-5 text-blue-400\" /\u003e;\r\n            case \u0027theme\u0027:\r\n                return \u003cBookOpen className=\"w-5 h-5 text-orange-400\" /\u003e;\r\n            case \u0027subtheme\u0027:\r\n                return \u003cFileText className=\"w-5 h-5 text-orange-300\" /\u003e;\r\n        }\r\n    };\r\n\r\n    const getResultBadge = (type: SearchResult[\u0027type\u0027]) =\u003e {\r\n        const badges = {\r\n            task: { label: \u0027Tarefa\u0027, color: \u0027bg-purple-500/20 text-purple-300 border-purple-500/30\u0027 },\r\n            goal: { label: \u0027Meta\u0027, color: \u0027bg-blue-500/20 text-blue-300 border-blue-500/30\u0027 },\r\n            theme: { label: \u0027Tema\u0027, color: \u0027bg-orange-500/20 text-orange-300 border-orange-500/30\u0027 },\r\n            subtheme: { label: \u0027Subtema\u0027, color: \u0027bg-orange-500/20 text-orange-200 border-orange-500/20\u0027 }\r\n        };\r\n\r\n        const badge = badges[type];\r\n        return (\r\n            \u003cspan className={`px-2 py-0.5 text-xs font-medium rounded-full border ${badge.color}`}\u003e\r\n                {badge.label}\r\n            \u003c/span\u003e\r\n        );\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        \u003cdiv className=\"fixed inset-0 z-[9999] flex items-start justify-center pt-[15vh] px-4\"\u003e\r\n            {/* Backdrop */}\r\n            \u003cdiv\r\n                className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\"\r\n                onClick={onClose}\r\n            /\u003e\r\n\r\n            {/* Search Modal */}\r\n            \u003cdiv className=\"relative w-full max-w-2xl bg-slate-800/95 backdrop-blur-xl border border-slate-700/50 rounded-3xl shadow-2xl overflow-hidden\"\u003e\r\n                {/* Search Input */}\r\n                \u003cdiv className=\"flex items-center gap-3 p-4 border-b border-slate-700/50\"\u003e\r\n                    \u003cSearch className=\"w-5 h-5 text-slate-400 flex-shrink-0\" /\u003e\r\n                    \u003cinput\r\n                        ref={inputRef}\r\n                        type=\"text\"\r\n                        placeholder=\"Buscar em tarefas, metas, temas...\"\r\n                        value={query}\r\n                        onChange={(e) =\u003e setQuery(e.target.value)}\r\n                        className=\"flex-1 bg-transparent text-white placeholder-slate-500 outline-none text-lg\"\r\n                    /\u003e\r\n                    \u003cbutton\r\n                        onClick={onClose}\r\n                        className=\"p-1 hover:bg-slate-700/50 rounded-lg transition-colors\"\r\n                    \u003e\r\n                        \u003cX className=\"w-5 h-5 text-slate-400\" /\u003e\r\n                    \u003c/button\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* Results */}\r\n                \u003cdiv className=\"max-h-[60vh] overflow-y-auto custom-scrollbar\"\u003e\r\n                    {query.trim().length \u003c 2 ? (\r\n                        \u003cdiv className=\"p-8 text-center text-slate-500\"\u003e\r\n                            \u003cSearch className=\"w-12 h-12 mx-auto mb-3 opacity-50\" /\u003e\r\n                            \u003cp className=\"text-sm\"\u003eDigite pelo menos 2 caracteres para buscar\u003c/p\u003e\r\n                            \u003cp className=\"text-xs mt-2 opacity-70\"\u003eUse â†‘â†“ para navegar, Enter para selecionar\u003c/p\u003e\r\n                        \u003c/div\u003e\r\n                    ) : results.length === 0 ? (\r\n                        \u003cdiv className=\"p-8 text-center text-slate-500\"\u003e\r\n                            \u003cSearch className=\"w-12 h-12 mx-auto mb-3 opacity-50\" /\u003e\r\n                            \u003cp className=\"text-sm\"\u003eNenhum resultado encontrado\u003c/p\u003e\r\n                            \u003cp className=\"text-xs mt-2 opacity-70\"\u003eTente buscar por outro termo\u003c/p\u003e\r\n                        \u003c/div\u003e\r\n                    ) : (\r\n                        \u003cdiv className=\"p-2\"\u003e\r\n                            {results.map((result, index) =\u003e (\r\n                                \u003cbutton\r\n                                    key={result.id}\r\n                                    onClick={() =\u003e handleSelectResult(result)}\r\n                                    className={`\r\n                                        w-full flex items-start gap-3 p-3 rounded-xl transition-all text-left\r\n                                        ${index === selectedIndex\r\n                                            ? \u0027bg-slate-700/50 border border-slate-600/50\u0027\r\n                                            : \u0027hover:bg-slate-700/30 border border-transparent\u0027\r\n                                        }\r\n                                    `}\r\n                                \u003e\r\n                                    {/* Icon */}\r\n                                    \u003cdiv className=\"mt-1\"\u003e\r\n                                        {getResultIcon(result.type)}\r\n                                    \u003c/div\u003e\r\n\r\n                                    {/* Content */}\r\n                                    \u003cdiv className=\"flex-1 min-w-0\"\u003e\r\n                                        \u003cdiv className=\"flex items-center gap-2 mb-1\"\u003e\r\n                                            \u003ch3 className=\"text-white font-medium truncate\"\u003e\r\n                                                {result.title}\r\n                                            \u003c/h3\u003e\r\n                                            {getResultBadge(result.type)}\r\n                                        \u003c/div\u003e\r\n\r\n                                        {result.description \u0026\u0026 (\r\n                                            \u003cp className=\"text-sm text-slate-400 line-clamp-1\"\u003e\r\n                                                {result.description}\r\n                                            \u003c/p\u003e\r\n                                        )}\r\n\r\n                                        \u003cdiv className=\"flex items-center gap-2 mt-1 text-xs text-slate-500\"\u003e\r\n                                            {result.parentTheme \u0026\u0026 (\r\n                                                \u003cspan\u003eem {result.parentTheme}\u003c/span\u003e\r\n                                            )}\r\n                                            {result.category \u0026\u0026 (\r\n                                                \u003cspan className=\"capitalize\"\u003e{result.category}\u003c/span\u003e\r\n                                            )}\r\n                                            {result.date \u0026\u0026 (\r\n                                                \u003cspan\u003e{new Date(result.date).toLocaleDateString(\u0027pt-BR\u0027)}\u003c/span\u003e\r\n                                            )}\r\n                                        \u003c/div\u003e\r\n                                    \u003c/div\u003e\r\n\r\n                                    {/* Arrow indicator */}\r\n                                    {index === selectedIndex \u0026\u0026 (\r\n                                        \u003cArrowRight className=\"w-5 h-5 text-slate-400 flex-shrink-0 mt-1\" /\u003e\r\n                                    )}\r\n                                \u003c/button\u003e\r\n                            ))}\r\n                        \u003c/div\u003e\r\n                    )}\r\n                \u003c/div\u003e\r\n\r\n                {/* Footer */}\r\n                {results.length \u003e 0 \u0026\u0026 (\r\n                    \u003cdiv className=\"px-4 py-2 border-t border-slate-700/50 flex items-center justify-between text-xs text-slate-500\"\u003e\r\n                        \u003cspan\u003e{results.length} resultado{results.length !== 1 ? \u0027s\u0027 : \u0027\u0027} encontrado{results.length !== 1 ? \u0027s\u0027 : \u0027\u0027}\u003c/span\u003e\r\n                        \u003cdiv className=\"flex items-center gap-3\"\u003e\r\n                            \u003cspan className=\"flex items-center gap-1\"\u003e\r\n                                \u003ckbd className=\"px-1.5 py-0.5 bg-slate-700/50 rounded text-slate-400\"\u003eâ†‘â†“\u003c/kbd\u003e\r\n                                Navegar\r\n                            \u003c/span\u003e\r\n                            \u003cspan className=\"flex items-center gap-1\"\u003e\r\n                                \u003ckbd className=\"px-1.5 py-0.5 bg-slate-700/50 rounded text-slate-400\"\u003eEnter\u003c/kbd\u003e\r\n                                Abrir\r\n                            \u003c/span\u003e\r\n                            \u003cspan className=\"flex items-center gap-1\"\u003e\r\n                                \u003ckbd className=\"px-1.5 py-0.5 bg-slate-700/50 rounded text-slate-400\"\u003eEsc\u003c/kbd\u003e\r\n                                Fechar\r\n                            \u003c/span\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n                )}\r\n            \u003c/div\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\InstallPWAHint.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\NotificationPermissionBanner.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\NotificationPermissionBanner.tsx:14:13\n  12 |         const dismissed = localStorage.getItem(\u0027notification_banner_dismissed\u0027);\n  13 |         if (dismissed || hasPermission || !isSupported) {\n\u003e 14 |             setIsDismissed(true);\n     |             ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  15 |             return;\n  16 |         }\n  17 |","line":14,"column":13,"nodeType":null,"endLine":14,"endColumn":27}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from \u0027react\u0027;\r\nimport { Bell, X, Check } from \u0027lucide-react\u0027;\r\nimport { useNotifications } from \u0027../hooks/useNotifications\u0027;\r\n\r\nexport const NotificationPermissionBanner: React.FC = () =\u003e {\r\n    const { isSupported, hasPermission, requestPermission } = useNotifications();\r\n    const [isVisible, setIsVisible] = useState(false);\r\n    const [isDismissed, setIsDismissed] = useState(false);\r\n\r\n    useEffect(() =\u003e {\r\n        // Check if user has already dismissed or granted permission\r\n        const dismissed = localStorage.getItem(\u0027notification_banner_dismissed\u0027);\r\n        if (dismissed || hasPermission || !isSupported) {\r\n            setIsDismissed(true);\r\n            return;\r\n        }\r\n\r\n        // Show banner after 5 seconds\r\n        const timer = setTimeout(() =\u003e {\r\n            setIsVisible(true);\r\n        }, 5000);\r\n\r\n        return () =\u003e clearTimeout(timer);\r\n    }, [hasPermission, isSupported]);\r\n\r\n    const handleAllow = async () =\u003e {\r\n        const granted = await requestPermission();\r\n        if (granted) {\r\n            setIsVisible(false);\r\n            localStorage.setItem(\u0027notification_banner_dismissed\u0027, \u0027true\u0027);\r\n        }\r\n    };\r\n\r\n    const handleDismiss = () =\u003e {\r\n        setIsVisible(false);\r\n        setIsDismissed(true);\r\n        localStorage.setItem(\u0027notification_banner_dismissed\u0027, \u0027true\u0027);\r\n    };\r\n\r\n    if (!isVisible || isDismissed) return null;\r\n\r\n    return (\r\n        \u003cdiv className=\"fixed bottom-20 left-1/2 -translate-x-1/2 z-[9998] max-w-md w-full px-4 animate-in slide-in-from-bottom-5 fade-in\"\u003e\r\n            \u003cdiv className=\"bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl shadow-2xl border border-white/20 p-5\"\u003e\r\n                \u003cdiv className=\"flex items-start gap-4\"\u003e\r\n                    \u003cdiv className=\"w-12 h-12 rounded-xl bg-white/20 flex items-center justify-center flex-shrink-0\"\u003e\r\n                        \u003cBell className=\"w-6 h-6 text-white\" /\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    \u003cdiv className=\"flex-1\"\u003e\r\n                        \u003ch3 className=\"text-white font-bold text-lg mb-1\"\u003e\r\n                            Ative as NotificaÃ§Ãµes! ðŸ””\r\n                        \u003c/h3\u003e\r\n                        \u003cp className=\"text-white/90 text-sm mb-4\"\u003e\r\n                            Receba lembretes de revisÃµes espaÃ§adas e nunca perca uma tarefa importante.\r\n                        \u003c/p\u003e\r\n\r\n                        \u003cdiv className=\"flex gap-2\"\u003e\r\n                            \u003cbutton\r\n                                onClick={handleAllow}\r\n                                className=\"bg-white text-blue-600 px-4 py-2 rounded-lg font-bold text-sm hover:bg-blue-50 transition-all flex items-center gap-2 shadow-lg\"\r\n                            \u003e\r\n                                \u003cCheck className=\"w-4 h-4\" /\u003e\r\n                                Permitir\r\n                            \u003c/button\u003e\r\n                            \u003cbutton\r\n                                onClick={handleDismiss}\r\n                                className=\"bg-white/10 text-white px-4 py-2 rounded-lg font-medium text-sm hover:bg-white/20 transition-all\"\r\n                            \u003e\r\n                                Agora NÃ£o\r\n                            \u003c/button\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    \u003cbutton\r\n                        onClick={handleDismiss}\r\n                        className=\"text-white/70 hover:text-white transition-colors\"\r\n                    \u003e\r\n                        \u003cX className=\"w-5 h-5\" /\u003e\r\n                    \u003c/button\u003e\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\PWAPrompt.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\SyncStatusWatcher.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\ThemeToggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\__tests__\\ErrorBoundary.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\__tests__\\LoadingSpinner.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\analytics\\ConsistencyHeatmap.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\collaboration\\CollaboratorBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\collaboration\\ShareButton.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027itemId\u0027 is defined but never used.","line":16,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":11}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \u0027react\u0027;\r\nimport { Users } from \u0027lucide-react\u0027;\r\nimport { ShareModal } from \u0027./ShareModal\u0027;\r\nimport type { Collaborator } from \u0027../../types\u0027;\r\n\r\ninterface ShareButtonProps {\r\n    itemId: string;\r\n    itemTitle: string;\r\n    itemType: \u0027theme\u0027 | \u0027project\u0027;\r\n    collaborators?: Collaborator[];\r\n    onAddCollaborator?: (email: string, role: Collaborator[\u0027role\u0027]) =\u003e void;\r\n    onRemoveCollaborator?: (userId: string) =\u003e void;\r\n}\r\n\r\nexport const ShareButton: React.FC\u003cShareButtonProps\u003e = ({\r\n    itemId,\r\n    itemTitle,\r\n    itemType,\r\n    collaborators = [],\r\n    onAddCollaborator,\r\n    onRemoveCollaborator,\r\n}) =\u003e {\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n\r\n    return (\r\n        \u003c\u003e\r\n            \u003cbutton\r\n                onClick={() =\u003e setIsModalOpen(true)}\r\n                className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-slate-800 hover:bg-slate-700 text-slate-300 hover:text-white transition-all text-sm\"\r\n                title=\"Compartilhar\"\r\n            \u003e\r\n                \u003cUsers className=\"w-4 h-4\" /\u003e\r\n                {collaborators.length \u003e 0 \u0026\u0026 (\r\n                    \u003cspan className=\"text-xs\"\u003e{collaborators.length}\u003c/span\u003e\r\n                )}\r\n            \u003c/button\u003e\r\n\r\n            \u003cShareModal\r\n                isOpen={isModalOpen}\r\n                onClose={() =\u003e setIsModalOpen(false)}\r\n                itemTitle={itemTitle}\r\n                itemType={itemType}\r\n                collaborators={collaborators}\r\n                onAddCollaborator={onAddCollaborator}\r\n                onRemoveCollaborator={onRemoveCollaborator}\r\n            /\u003e\r\n        \u003c/\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\collaboration\\ShareModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027onChangeRole\u0027 is defined but never used.","line":25,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \u0027react\u0027;\r\nimport { Modal } from \u0027../ui/Modal\u0027;\r\nimport { X, Mail, UserPlus, Link2, Copy, Check, Shield, Eye, Edit, Crown } from \u0027lucide-react\u0027;\r\nimport type { Collaborator } from \u0027../../types\u0027;\r\n\r\ninterface ShareModalProps {\r\n    isOpen: boolean;\r\n    onClose: () =\u003e void;\r\n    itemTitle: string;\r\n    itemType: \u0027theme\u0027 | \u0027project\u0027;\r\n    collaborators?: Collaborator[];\r\n    onAddCollaborator?: (email: string, role: Collaborator[\u0027role\u0027]) =\u003e void;\r\n    onRemoveCollaborator?: (userId: string) =\u003e void;\r\n    onChangeRole?: (userId: string, role: Collaborator[\u0027role\u0027]) =\u003e void;\r\n}\r\n\r\nexport const ShareModal: React.FC\u003cShareModalProps\u003e = ({\r\n    isOpen,\r\n    onClose,\r\n    itemTitle,\r\n    itemType,\r\n    collaborators = [],\r\n    onAddCollaborator,\r\n    onRemoveCollaborator,\r\n    onChangeRole,\r\n}) =\u003e {\r\n    const [email, setEmail] = useState(\u0027\u0027);\r\n    const [selectedRole, setSelectedRole] = useState\u003cCollaborator[\u0027role\u0027]\u003e(\u0027viewer\u0027);\r\n    const [copied, setCopied] = useState(false);\r\n\r\n    const handleAddCollaborator = () =\u003e {\r\n        if (email \u0026\u0026 onAddCollaborator) {\r\n            onAddCollaborator(email, selectedRole);\r\n            setEmail(\u0027\u0027);\r\n            setSelectedRole(\u0027viewer\u0027);\r\n        }\r\n    };\r\n\r\n    const handleCopyLink = () =\u003e {\r\n        const shareLink = `${window.location.origin}/share/${itemType}/${Date.now()}`;\r\n        navigator.clipboard.writeText(shareLink);\r\n        setCopied(true);\r\n        setTimeout(() =\u003e setCopied(false), 2000);\r\n    };\r\n\r\n    const roleIcons = {\r\n        owner: Crown,\r\n        editor: Edit,\r\n        viewer: Eye,\r\n    };\r\n\r\n    const roleColors = {\r\n        owner: \u0027text-amber-400\u0027,\r\n        editor: \u0027text-blue-400\u0027,\r\n        viewer: \u0027text-slate-400\u0027,\r\n    };\r\n\r\n    const roleLabels = {\r\n        owner: \u0027ProprietÃ¡rio\u0027,\r\n        editor: \u0027Editor\u0027,\r\n        viewer: \u0027Visualizador\u0027,\r\n    };\r\n\r\n    return (\r\n        \u003cModal isOpen={isOpen} onClose={onClose} maxWidth=\"2xl\"\u003e\r\n            \u003cdiv className=\"p-6\"\u003e\r\n                {/* Header */}\r\n                \u003cdiv className=\"flex items-center justify-between mb-6\"\u003e\r\n                    \u003cdiv\u003e\r\n                        \u003ch2 className=\"text-2xl font-bold text-white\"\u003eCompartilhar {itemType === \u0027theme\u0027 ? \u0027Tema\u0027 : \u0027Projeto\u0027}\u003c/h2\u003e\r\n                        \u003cp className=\"text-slate-400 text-sm mt-1\"\u003e{itemTitle}\u003c/p\u003e\r\n                    \u003c/div\u003e\r\n                    \u003cbutton\r\n                        onClick={onClose}\r\n                        className=\"text-slate-400 hover:text-white transition-colors\"\r\n                    \u003e\r\n                        \u003cX className=\"w-6 h-6\" /\u003e\r\n                    \u003c/button\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* Add Collaborator */}\r\n                \u003cdiv className=\"mb-6\"\u003e\r\n                    \u003clabel className=\"block text-sm font-bold text-slate-400 uppercase mb-2\"\u003e\r\n                        Convidar Pessoa\r\n                    \u003c/label\u003e\r\n                    \u003cdiv className=\"flex gap-2\"\u003e\r\n                        \u003cdiv className=\"relative flex-1\"\u003e\r\n                            \u003cMail className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500\" /\u003e\r\n                            \u003cinput\r\n                                type=\"email\"\r\n                                value={email}\r\n                                onChange={(e) =\u003e setEmail(e.target.value)}\r\n                                placeholder=\"email@exemplo.com\"\r\n                                className=\"w-full bg-slate-900/50 border border-slate-700 rounded-lg pl-10 pr-4 py-2 text-white placeholder-slate-500 focus:border-blue-500 focus:outline-none\"\r\n                                onKeyPress={(e) =\u003e e.key === \u0027Enter\u0027 \u0026\u0026 handleAddCollaborator()}\r\n                            /\u003e\r\n                        \u003c/div\u003e\r\n                        \u003cselect\r\n                            value={selectedRole}\r\n                            onChange={(e) =\u003e setSelectedRole(e.target.value as Collaborator[\u0027role\u0027])}\r\n                            className=\"bg-slate-900/50 border border-slate-700 rounded-lg px-3 py-2 text-white focus:border-blue-500 focus:outline-none\"\r\n                        \u003e\r\n                            \u003coption value=\"viewer\"\u003eVisualizador\u003c/option\u003e\r\n                            \u003coption value=\"editor\"\u003eEditor\u003c/option\u003e\r\n                        \u003c/select\u003e\r\n                        \u003cbutton\r\n                            onClick={handleAddCollaborator}\r\n                            disabled={!email}\r\n                            className=\"bg-blue-600 hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-bold transition-all flex items-center gap-2\"\r\n                        \u003e\r\n                            \u003cUserPlus className=\"w-4 h-4\" /\u003e\r\n                            Adicionar\r\n                        \u003c/button\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* Share Link */}\r\n                \u003cdiv className=\"mb-6 p-4 bg-slate-900/50 border border-slate-700 rounded-lg\"\u003e\r\n                    \u003cdiv className=\"flex items-center justify-between mb-2\"\u003e\r\n                        \u003cdiv className=\"flex items-center gap-2\"\u003e\r\n                            \u003cLink2 className=\"w-4 h-4 text-slate-400\" /\u003e\r\n                            \u003cspan className=\"text-sm font-bold text-slate-400 uppercase\"\u003eLink de Compartilhamento\u003c/span\u003e\r\n                        \u003c/div\u003e\r\n                        \u003cbutton\r\n                            onClick={handleCopyLink}\r\n                            className=\"flex items-center gap-2 text-sm text-blue-400 hover:text-blue-300 transition-colors\"\r\n                        \u003e\r\n                            {copied ? (\r\n                                \u003c\u003e\r\n                                    \u003cCheck className=\"w-4 h-4\" /\u003e\r\n                                    Copiado!\r\n                                \u003c/\u003e\r\n                            ) : (\r\n                                \u003c\u003e\r\n                                    \u003cCopy className=\"w-4 h-4\" /\u003e\r\n                                    Copiar\r\n                                \u003c/\u003e\r\n                            )}\r\n                        \u003c/button\u003e\r\n                    \u003c/div\u003e\r\n                    \u003cp className=\"text-xs text-slate-500\"\u003e\r\n                        Qualquer pessoa com este link pode visualizar\r\n                    \u003c/p\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* Collaborators List */}\r\n                \u003cdiv\u003e\r\n                    \u003clabel className=\"block text-sm font-bold text-slate-400 uppercase mb-3\"\u003e\r\n                        Colaboradores ({collaborators.length})\r\n                    \u003c/label\u003e\r\n\r\n                    {collaborators.length === 0 ? (\r\n                        \u003cdiv className=\"text-center py-8 text-slate-500\"\u003e\r\n                            \u003cShield className=\"w-12 h-12 mx-auto mb-2 opacity-50\" /\u003e\r\n                            \u003cp className=\"text-sm\"\u003eNenhum colaborador ainda\u003c/p\u003e\r\n                            \u003cp className=\"text-xs mt-1\"\u003eAdicione pessoas para colaborar neste {itemType === \u0027theme\u0027 ? \u0027tema\u0027 : \u0027projeto\u0027}\u003c/p\u003e\r\n                        \u003c/div\u003e\r\n                    ) : (\r\n                        \u003cdiv className=\"space-y-2 max-h-64 overflow-y-auto custom-scrollbar\"\u003e\r\n                            {collaborators.map(collaborator =\u003e {\r\n                                const RoleIcon = roleIcons[collaborator.role];\r\n\r\n                                return (\r\n                                    \u003cdiv\r\n                                        key={collaborator.userId}\r\n                                        className=\"flex items-center justify-between p-3 bg-slate-900/30 border border-slate-700 rounded-lg hover:bg-slate-900/50 transition-colors\"\r\n                                    \u003e\r\n                                        \u003cdiv className=\"flex items-center gap-3\"\u003e\r\n                                            {/* Avatar */}\r\n                                            \u003cdiv className=\"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold\"\u003e\r\n                                                {collaborator.name.charAt(0).toUpperCase()}\r\n                                            \u003c/div\u003e\r\n\r\n                                            {/* Info */}\r\n                                            \u003cdiv\u003e\r\n                                                \u003cp className=\"text-white font-medium\"\u003e{collaborator.name}\u003c/p\u003e\r\n                                                \u003cp className=\"text-xs text-slate-500\"\u003e{collaborator.email}\u003c/p\u003e\r\n                                            \u003c/div\u003e\r\n                                        \u003c/div\u003e\r\n\r\n                                        {/* Role */}\r\n                                        \u003cdiv className=\"flex items-center gap-2\"\u003e\r\n                                            \u003cRoleIcon className={`w-4 h-4 ${roleColors[collaborator.role]}`} /\u003e\r\n                                            \u003cspan className=\"text-sm text-slate-400\"\u003e{roleLabels[collaborator.role]}\u003c/span\u003e\r\n\r\n                                            {collaborator.role !== \u0027owner\u0027 \u0026\u0026 onRemoveCollaborator \u0026\u0026 (\r\n                                                \u003cbutton\r\n                                                    onClick={() =\u003e onRemoveCollaborator(collaborator.userId)}\r\n                                                    className=\"ml-2 text-slate-500 hover:text-red-400 transition-colors\"\r\n                                                \u003e\r\n                                                    \u003cX className=\"w-4 h-4\" /\u003e\r\n                                                \u003c/button\u003e\r\n                                            )}\r\n                                        \u003c/div\u003e\r\n                                    \u003c/div\u003e\r\n                                );\r\n                            })}\r\n                        \u003c/div\u003e\r\n                    )}\r\n                \u003c/div\u003e\r\n\r\n                {/* Info Footer */}\r\n                \u003cdiv className=\"mt-6 pt-4 border-t border-white/10\"\u003e\r\n                    \u003cdiv className=\"flex items-start gap-2 text-xs text-slate-500\"\u003e\r\n                        \u003cShield className=\"w-4 h-4 mt-0.5\" /\u003e\r\n                        \u003cdiv\u003e\r\n                            \u003cp\u003e\u003cstrong\u003eVisualizador:\u003c/strong\u003e Pode ver conteÃºdo\u003c/p\u003e\r\n                            \u003cp\u003e\u003cstrong\u003eEditor:\u003c/strong\u003e Pode editar e adicionar\u003c/p\u003e\r\n                            \u003cp\u003e\u003cstrong\u003eProprietÃ¡rio:\u003c/strong\u003e Controle total\u003c/p\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n        \u003c/Modal\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\forms\\ColorPicker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\forms\\DaySelector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\forms\\DurationStepper.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\forms\\ImageUpload.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\forms\\PrioritySelector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\forms\\SymbolPicker.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027X\u0027 is defined but never used.","line":4,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":29},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\forms\\SymbolPicker.tsx:40:17\n  38 |         if (saved) {\n  39 |             try {\n\u003e 40 |                 setRecentSymbols(JSON.parse(saved));\n     |                 ^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  41 |             } catch (e) {\n  42 |                 console.error(\u0027Failed to parse recent symbols\u0027, e);\n  43 |             }","line":40,"column":17,"nodeType":null,"endLine":40,"endColumn":33}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from \u0027react\u0027;\r\nimport { Input } from \u0027../ui/Input\u0027;\r\nimport { IconRenderer } from \u0027../ui/IconRenderer\u0027;\r\nimport { Search, Sparkles, X, ChevronDown } from \u0027lucide-react\u0027;\r\nimport { cn } from \u0027../../lib/utils\u0027;\r\n\r\ninterface SymbolPickerProps {\r\n    value: string;\r\n    onChange: (value: string) =\u003e void;\r\n    placeholder?: string;\r\n    className?: string;\r\n}\r\n\r\nconst POPULAR_ICONS = [\r\n    \u0027Book\u0027, \u0027BookOpen\u0027, \u0027Target\u0027, \u0027CheckSquare\u0027, \u0027Clock\u0027, \u0027Flame\u0027, \u0027Zap\u0027, \u0027Brain\u0027,\r\n    \u0027Code\u0027, \u0027GraduationCap\u0027, \u0027Trophy\u0027, \u0027Star\u0027, \u0027Palette\u0027, \u0027Dumbbell\u0027, \u0027Heart\u0027,\r\n    \u0027Music\u0027, \u0027Coffee\u0027, \u0027Languages\u0027, \u0027Globe\u0027, \u0027Mountain\u0027, \u0027Stethoscope\u0027, \u0027Wallet\u0027,\r\n    \u0027Briefcase\u0027, \u0027Car\u0027, \u0027Plane\u0027, \u0027Map\u0027, \u0027Camera\u0027, \u0027Smartphone\u0027, \u0027Laptop\u0027, \u0027Rocket\u0027,\r\n    \u0027Library\u0027, \u0027PenTool\u0027, \u0027Search\u0027, \u0027Bell\u0027, \u0027Calendar\u0027, \u0027Mail\u0027, \u0027MessageCircle\u0027,\r\n    \u0027Shield\u0027, \u0027Key\u0027, \u0027Lock\u0027, \u0027User\u0027, \u0027Settings\u0027, \u0027Home\u0027, \u0027Compass\u0027\r\n];\r\n\r\nconst POPULAR_EMOJIS = [\r\n    \u0027ðŸ“š\u0027, \u0027ðŸŽ¯\u0027, \u0027âœ…\u0027, \u0027â°\u0027, \u0027ðŸ”¥\u0027, \u0027âš¡\u0027, \u0027ðŸ§ \u0027, \u0027ðŸ’»\u0027, \u0027ðŸŽ“\u0027, \u0027ðŸ†\u0027,\r\n    \u0027â­\u0027, \u0027ðŸŽ¨\u0027, \u0027ðŸ’ª\u0027, \u0027â¤ï¸\u0027, \u0027ðŸŽµ\u0027, \u0027â˜•\u0027, \u0027ðŸŒ\u0027, \u0027ðŸ”ï¸\u0027, \u0027ðŸ¥\u0027, \u0027ðŸ’¼\u0027,\r\n    \u0027ðŸš€\u0027, \u0027ðŸ“\u0027, \u0027ðŸƒ\u0027, \u0027ðŸ§˜\u0027, \u0027ðŸŽ\u0027, \u0027ðŸ’°\u0027, \u0027ðŸ”‘\u0027, \u0027ðŸ”’\u0027, \u0027ðŸ \u0027, \u0027âœ¨\u0027\r\n];\r\n\r\nexport const SymbolPicker: React.FC\u003cSymbolPickerProps\u003e = ({ value, onChange, placeholder = \u0027âœ¨\u0027, className }) =\u003e {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [activeTab, setActiveTab] = useState\u003c\u0027icons\u0027 | \u0027emojis\u0027 | \u0027recent\u0027\u003e(\u0027icons\u0027);\r\n    const [recentSymbols, setRecentSymbols] = useState\u003cstring[]\u003e([]);\r\n    const [searchQuery, setSearchQuery] = useState(\u0027\u0027);\r\n    const containerRef = useRef\u003cHTMLDivElement\u003e(null);\r\n\r\n    useEffect(() =\u003e {\r\n        const saved = localStorage.getItem(\u0027recent_symbols\u0027);\r\n        if (saved) {\r\n            try {\r\n                setRecentSymbols(JSON.parse(saved));\r\n            } catch (e) {\r\n                console.error(\u0027Failed to parse recent symbols\u0027, e);\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() =\u003e {\r\n        const handleClickOutside = (event: MouseEvent) =\u003e {\r\n            if (containerRef.current \u0026\u0026 !containerRef.current.contains(event.target as Node)) {\r\n                setIsOpen(false);\r\n            }\r\n        };\r\n\r\n        if (isOpen) {\r\n            document.addEventListener(\u0027mousedown\u0027, handleClickOutside);\r\n        }\r\n        return () =\u003e {\r\n            document.removeEventListener(\u0027mousedown\u0027, handleClickOutside);\r\n        };\r\n    }, [isOpen]);\r\n\r\n    const handleSymbolClick = (symbol: string) =\u003e {\r\n        onChange(symbol);\r\n        saveRecentSymbol(symbol);\r\n        setIsOpen(false);\r\n    };\r\n\r\n    const saveRecentSymbol = (symbol: string) =\u003e {\r\n        if (!symbol.trim()) return;\r\n\r\n        setRecentSymbols(prev =\u003e {\r\n            const filtered = prev.filter(e =\u003e e !== symbol);\r\n            const updated = [symbol, ...filtered].slice(0, 15);\r\n            localStorage.setItem(\u0027recent_symbols\u0027, JSON.stringify(updated));\r\n            return updated;\r\n        });\r\n    };\r\n\r\n    const filteredIcons = POPULAR_ICONS.filter(icon =\u003e\r\n        icon.toLowerCase().includes(searchQuery.toLowerCase())\r\n    );\r\n\r\n    return (\r\n        \u003cdiv className={cn(\"relative inline-block w-full\", className)} ref={containerRef}\u003e\r\n            {/* Trigger Button */}\r\n            \u003cbutton\r\n                type=\"button\"\r\n                onClick={() =\u003e setIsOpen(!isOpen)}\r\n                className={cn(\r\n                    \"w-full flex items-center justify-between gap-2 px-3 h-10 bg-slate-900/40 hover:bg-slate-800/60 border border-white/10 rounded-xl transition-all group\",\r\n                    isOpen \u0026\u0026 \"ring-2 ring-blue-500/30 border-blue-500/50\"\r\n                )}\r\n            \u003e\r\n                \u003cdiv className=\"flex items-center gap-2 overflow-hidden\"\u003e\r\n                    \u003cdiv className=\"w-6 h-6 flex-shrink-0 flex items-center justify-center bg-slate-950/50 rounded-lg group-hover:scale-110 transition-transform\"\u003e\r\n                        \u003cIconRenderer icon={value} size={16} className=\"text-blue-400\" /\u003e\r\n                    \u003c/div\u003e\r\n                    \u003cspan className=\"text-xs text-slate-400 truncate font-medium\"\u003e\r\n                        {value || placeholder || \"Escolher...\"}\r\n                    \u003c/span\u003e\r\n                \u003c/div\u003e\r\n                \u003cChevronDown className={cn(\"w-3.5 h-3.5 text-slate-500 transition-transform\", isOpen \u0026\u0026 \"rotate-180\")} /\u003e\r\n            \u003c/button\u003e\r\n\r\n            {/* Popover Picker */}\r\n            {isOpen \u0026\u0026 (\r\n                \u003cdiv className=\"absolute left-0 bottom-full mb-2 w-[280px] bg-slate-900 border border-white/10 rounded-2xl shadow-2xl z-[100] animate-in fade-in zoom-in-95 duration-200 origin-bottom-left overflow-hidden\"\u003e\r\n                    \u003cdiv className=\"p-3 space-y-3 bg-slate-950/20\"\u003e\r\n                        {/* Search \u0026 Custom Input */}\r\n                        \u003cdiv className=\"relative group p-1\"\u003e\r\n                            \u003cInput\r\n                                value={value}\r\n                                onChange={e =\u003e onChange(e.target.value)}\r\n                                className=\"text-center h-10 bg-slate-950 border-white/10 text-lg focus:border-blue-500/50\"\r\n                                placeholder={placeholder}\r\n                            /\u003e\r\n                            \u003cdiv className=\"absolute inset-y-0 left-4 flex items-center pointer-events-none opacity-50\"\u003e\r\n                                \u003cIconRenderer icon={value} size={18} className=\"text-blue-400\" /\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n\r\n                        {/* Tabs */}\r\n                        \u003cdiv className=\"flex bg-slate-950/50 p-1 rounded-xl border border-white/5\"\u003e\r\n                            {[\r\n                                { id: \u0027icons\u0027, label: \u0027Ãcones\u0027, icon: Sparkles },\r\n                                { id: \u0027emojis\u0027, label: \u0027Emojis\u0027, icon: Sparkles },\r\n                                { id: \u0027recent\u0027, label: \u0027Recentes\u0027, icon: Search }\r\n                            ].map(tab =\u003e (\r\n                                \u003cbutton\r\n                                    key={tab.id}\r\n                                    type=\"button\"\r\n                                    onClick={() =\u003e setActiveTab(tab.id as any)}\r\n                                    className={cn(\r\n                                        \"flex-1 flex items-center justify-center gap-1.5 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all\",\r\n                                        activeTab === tab.id\r\n                                            ? \"bg-blue-600 text-white shadow-lg\"\r\n                                            : \"text-slate-500 hover:text-slate-300\"\r\n                                    )}\r\n                                \u003e\r\n                                    {tab.label}\r\n                                \u003c/button\u003e\r\n                            ))}\r\n                        \u003c/div\u003e\r\n\r\n                        {/* Content area */}\r\n                        \u003cdiv className=\"min-h-[160px]\"\u003e\r\n                            {activeTab === \u0027icons\u0027 \u0026\u0026 (\r\n                                \u003cdiv className=\"space-y-3 animate-in fade-in duration-300\"\u003e\r\n                                    \u003cdiv className=\"relative mx-1\"\u003e\r\n                                        \u003cSearch className=\"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-500\" /\u003e\r\n                                        \u003cinput\r\n                                            type=\"text\"\r\n                                            placeholder=\"Buscar Ã­cone...\"\r\n                                            value={searchQuery}\r\n                                            onChange={e =\u003e setSearchQuery(e.target.value)}\r\n                                            className=\"w-full bg-slate-950/80 border border-white/5 rounded-lg pl-8 pr-3 py-2 text-[11px] text-white outline-none focus:border-blue-500/30 transition-all\"\r\n                                        /\u003e\r\n                                    \u003c/div\u003e\r\n                                    \u003cdiv className=\"grid grid-cols-6 gap-2 max-h-[160px] overflow-y-auto px-1 custom-scrollbar\"\u003e\r\n                                        {filteredIcons.map(iconName =\u003e (\r\n                                            \u003cbutton\r\n                                                key={iconName}\r\n                                                type=\"button\"\r\n                                                onClick={() =\u003e handleSymbolClick(iconName)}\r\n                                                className={cn(\r\n                                                    \"aspect-square flex items-center justify-center rounded-lg border transition-all\",\r\n                                                    value === iconName\r\n                                                        ? \"bg-blue-600 border-blue-400 text-white\"\r\n                                                        : \"bg-slate-800/40 border-white/5 text-slate-400 hover:bg-slate-700 hover:text-white\"\r\n                                                )}\r\n                                                title={iconName}\r\n                                            \u003e\r\n                                                \u003cIconRenderer icon={iconName} size={18} /\u003e\r\n                                            \u003c/button\u003e\r\n                                        ))}\r\n                                    \u003c/div\u003e\r\n                                \u003c/div\u003e\r\n                            )}\r\n\r\n                            {activeTab === \u0027emojis\u0027 \u0026\u0026 (\r\n                                \u003cdiv className=\"grid grid-cols-6 gap-2 max-h-[160px] overflow-y-auto px-1 animate-in fade-in duration-300 custom-scrollbar\"\u003e\r\n                                    {POPULAR_EMOJIS.map(emoji =\u003e (\r\n                                        \u003cbutton\r\n                                            key={emoji}\r\n                                            type=\"button\"\r\n                                            onClick={() =\u003e handleSymbolClick(emoji)}\r\n                                            className={cn(\r\n                                                \"aspect-square flex items-center justify-center rounded-lg border text-xl transition-all\",\r\n                                                value === emoji\r\n                                                    ? \"bg-blue-600 border-blue-400\"\r\n                                                    : \"bg-slate-800/40 border-white/5 hover:bg-slate-700\"\r\n                                            )}\r\n                                        \u003e\r\n                                            {emoji}\r\n                                        \u003c/button\u003e\r\n                                    ))}\r\n                                \u003c/div\u003e\r\n                            )}\r\n\r\n                            {activeTab === \u0027recent\u0027 \u0026\u0026 (\r\n                                \u003cdiv className=\"animate-in fade-in duration-300 px-1\"\u003e\r\n                                    {recentSymbols.length \u003e 0 ? (\r\n                                        \u003cdiv className=\"grid grid-cols-6 gap-2\"\u003e\r\n                                            {recentSymbols.map((symbol, idx) =\u003e (\r\n                                                \u003cbutton\r\n                                                    key={`${symbol}-${idx}`}\r\n                                                    type=\"button\"\r\n                                                    onClick={() =\u003e handleSymbolClick(symbol)}\r\n                                                    className={cn(\r\n                                                        \"aspect-square flex items-center justify-center rounded-lg border transition-all\",\r\n                                                        value === symbol\r\n                                                            ? \"bg-blue-600 border-blue-400 text-white\"\r\n                                                            : \"bg-slate-800/40 border-white/5 text-slate-400 hover:bg-slate-700 hover:text-white\"\r\n                                                    )}\r\n                                                \u003e\r\n                                                    \u003cIconRenderer icon={symbol} size={symbol.length \u003e 4 ? 18 : 22} /\u003e\r\n                                                \u003c/button\u003e\r\n                                            ))}\r\n                                        \u003c/div\u003e\r\n                                    ) : (\r\n                                        \u003cdiv className=\"py-8 text-center\"\u003e\r\n                                            \u003cp className=\"text-[10px] text-slate-500 font-bold uppercase tracking-wider\"\u003eNenhum sÃ­mbolo recente\u003c/p\u003e\r\n                                        \u003c/div\u003e\r\n                                    )}\r\n                                \u003c/div\u003e\r\n                            )}\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n            )}\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\gamification\\AchievementModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\gamification\\Badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\gamification\\LevelBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\gamification\\XPBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\layout\\GlobalActionBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\layout\\Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\layout\\LayoutModals.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\layout\\MobileBottomNav.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\layout\\Sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\onboarding\\OnboardingTour.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\onboarding\\OnboardingTour.tsx:26:17\n  24 |             if (element) {\n  25 |                 const rect = element.getBoundingClientRect();\n\u003e 26 |                 setTargetRect(rect);\n     |                 ^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  27 |                 // Scroll into view\n  28 |                 element.scrollIntoView({ behavior: \u0027smooth\u0027, block: \u0027center\u0027 });\n  29 |             } else {","line":26,"column":17,"nodeType":null,"endLine":26,"endColumn":30},{"ruleId":"prefer-const","severity":2,"message":"\u0027style\u0027 is never reassigned. Use \u0027const\u0027 instead.","line":58,"column":13,"nodeType":"Identifier","messageId":"useConst","endLine":58,"endColumn":39,"fix":"@{range=System.Object[]; text=const style: React.CSSProperties = {\r\n            position: \u0027fixed\u0027,\r\n            zIndex: 10001,\r\n        };}"}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":1,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from \u0027react\u0027;\r\nimport { X, ArrowRight, ArrowLeft, CheckCircle } from \u0027lucide-react\u0027;\r\nimport { useOnboarding } from \u0027../../hooks/useOnboarding\u0027;\r\n\r\nexport const OnboardingTour: React.FC = () =\u003e {\r\n    const {\r\n        isActive,\r\n        currentStep,\r\n        totalSteps,\r\n        currentStepData,\r\n        nextStep,\r\n        prevStep,\r\n        skipOnboarding,\r\n        completeOnboarding,\r\n        progress,\r\n    } = useOnboarding();\r\n\r\n    const [targetRect, setTargetRect] = useState\u003cDOMRect | null\u003e(null);\r\n\r\n    // Update target element position when step changes\r\n    useEffect(() =\u003e {\r\n        if (currentStepData?.target) {\r\n            const element = document.querySelector(currentStepData.target);\r\n            if (element) {\r\n                const rect = element.getBoundingClientRect();\r\n                setTargetRect(rect);\r\n                // Scroll into view\r\n                element.scrollIntoView({ behavior: \u0027smooth\u0027, block: \u0027center\u0027 });\r\n            } else {\r\n                setTargetRect(null);\r\n            }\r\n        } else {\r\n            setTargetRect(null);\r\n        }\r\n    }, [currentStepData]);\r\n\r\n    if (!isActive) return null;\r\n\r\n    const isFirstStep = currentStep === 0;\r\n    const isLastStep = currentStep === totalSteps - 1;\r\n    const isCenterPlacement = currentStepData?.placement === \u0027center\u0027;\r\n\r\n    // Position calculation for tooltip\r\n    const getTooltipStyle = (): React.CSSProperties =\u003e {\r\n        if (isCenterPlacement || !targetRect) {\r\n            return {\r\n                position: \u0027fixed\u0027,\r\n                top: \u002750%\u0027,\r\n                left: \u002750%\u0027,\r\n                transform: \u0027translate(-50%, -50%)\u0027,\r\n                zIndex: 10001,\r\n            };\r\n        }\r\n\r\n        const placement = currentStepData?.placement || \u0027bottom\u0027;\r\n        const offset = 20;\r\n\r\n        let style: React.CSSProperties = {\r\n            position: \u0027fixed\u0027,\r\n            zIndex: 10001,\r\n        };\r\n\r\n        switch (placement) {\r\n            case \u0027top\u0027:\r\n                style.left = targetRect.left + targetRect.width / 2;\r\n                style.top = targetRect.top - offset;\r\n                style.transform = \u0027translate(-50%, -100%)\u0027;\r\n                break;\r\n            case \u0027bottom\u0027:\r\n                style.left = targetRect.left + targetRect.width / 2;\r\n                style.top = targetRect.bottom + offset;\r\n                style.transform = \u0027translateX(-50%)\u0027;\r\n                break;\r\n            case \u0027left\u0027:\r\n                style.left = targetRect.left - offset;\r\n                style.top = targetRect.top + targetRect.height / 2;\r\n                style.transform = \u0027translate(-100%, -50%)\u0027;\r\n                break;\r\n            case \u0027right\u0027:\r\n                style.left = targetRect.right + offset;\r\n                style.top = targetRect.top + targetRect.height / 2;\r\n                style.transform = \u0027translateY(-50%)\u0027;\r\n                break;\r\n        }\r\n\r\n        return style;\r\n    };\r\n\r\n    return (\r\n        \u003c\u003e\r\n            {/* Overlay */}\r\n            \u003cdiv className=\"fixed inset-0 bg-slate-950/80 backdrop-blur-sm z-[10000] animate-in fade-in duration-300\"\u003e\r\n                {/* Spotlight effect */}\r\n                {targetRect \u0026\u0026 !isCenterPlacement \u0026\u0026 (\r\n                    \u003cdiv\r\n                        className=\"absolute border-4 border-blue-500 rounded-2xl animate-pulse\"\r\n                        style={{\r\n                            left: targetRect.left - 8,\r\n                            top: targetRect.top - 8,\r\n                            width: targetRect.width + 16,\r\n                            height: targetRect.height + 16,\r\n                            boxShadow: \u00270 0 0 4000px rgba(2, 6, 23, 0.8)\u0027,\r\n                        }}\r\n                    /\u003e\r\n                )}\r\n            \u003c/div\u003e\r\n\r\n            {/* Tooltip Card */}\r\n            \u003cdiv\r\n                className=\"max-w-md w-full bg-gradient-to-br from-slate-900 to-slate-800 border-2 border-blue-500 rounded-2xl shadow-2xl p-6 animate-in zoom-in-95 duration-300\"\r\n                style={getTooltipStyle()}\r\n            \u003e\r\n                {/* Header */}\r\n                \u003cdiv className=\"flex items-start justify-between mb-4\"\u003e\r\n                    \u003cdiv className=\"flex-1\"\u003e\r\n                        \u003cdiv className=\"flex items-center gap-2 mb-2\"\u003e\r\n                            \u003cspan className=\"text-xs font-bold text-blue-400 uppercase tracking-wider\"\u003e\r\n                                Passo {currentStep + 1} de {totalSteps}\r\n                            \u003c/span\u003e\r\n                        \u003c/div\u003e\r\n                        \u003ch3 className=\"text-xl font-bold text-white\"\u003e\r\n                            {currentStepData?.title}\r\n                        \u003c/h3\u003e\r\n                    \u003c/div\u003e\r\n                    \u003cbutton\r\n                        onClick={skipOnboarding}\r\n                        className=\"text-slate-400 hover:text-white transition-colors ml-2\"\r\n                        title=\"Pular tutorial\"\r\n                    \u003e\r\n                        \u003cX className=\"w-5 h-5\" /\u003e\r\n                    \u003c/button\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* Description */}\r\n                \u003cp className=\"text-slate-300 mb-6 leading-relaxed\"\u003e\r\n                    {currentStepData?.description}\r\n                \u003c/p\u003e\r\n\r\n                {/* Progress Bar */}\r\n                \u003cdiv className=\"mb-6\"\u003e\r\n                    \u003cdiv className=\"h-1.5 bg-slate-700 rounded-full overflow-hidden\"\u003e\r\n                        \u003cdiv\r\n                            className=\"h-full bg-gradient-to-r from-blue-500 to-purple-500 rounded-full transition-all duration-500\"\r\n                            style={{ width: `${progress}%` }}\r\n                        /\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* Actions */}\r\n                \u003cdiv className=\"flex items-center justify-between gap-3\"\u003e\r\n                    {!isFirstStep \u0026\u0026 (\r\n                        \u003cbutton\r\n                            onClick={prevStep}\r\n                            className=\"flex items-center gap-2 px-4 py-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-700 transition-all\"\r\n                        \u003e\r\n                            \u003cArrowLeft className=\"w-4 h-4\" /\u003e\r\n                            Voltar\r\n                        \u003c/button\u003e\r\n                    )}\r\n\r\n                    {isFirstStep \u0026\u0026 (\r\n                        \u003cbutton\r\n                            onClick={skipOnboarding}\r\n                            className=\"px-4 py-2 rounded-lg text-slate-400 hover:text-white transition-all\"\r\n                        \u003e\r\n                            Pular Tutorial\r\n                        \u003c/button\u003e\r\n                    )}\r\n\r\n                    \u003cbutton\r\n                        onClick={isLastStep ? completeOnboarding : nextStep}\r\n                        className=\"ml-auto bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white px-6 py-2 rounded-lg font-bold transition-all flex items-center gap-2 shadow-lg shadow-blue-500/20\"\r\n                    \u003e\r\n                        {isLastStep ? (\r\n                            \u003c\u003e\r\n                                Finalizar\r\n                                \u003cCheckCircle className=\"w-4 h-4\" /\u003e\r\n                            \u003c/\u003e\r\n                        ) : (\r\n                            \u003c\u003e\r\n                                PrÃ³ximo\r\n                                \u003cArrowRight className=\"w-4 h-4\" /\u003e\r\n                            \u003c/\u003e\r\n                        )}\r\n                    \u003c/button\u003e\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n        \u003c/\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\settings\\BackupSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027isImporting\u0027 is assigned a value but never used.","line":16,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef } from \u0027react\u0027;\r\nimport { Save, Upload, FileCheck, AlertTriangle, X } from \u0027lucide-react\u0027;\r\nimport { useStudy } from \u0027../../context/StudyContext\u0027;\r\nimport { useAuth } from \u0027../../context/AuthContext\u0027;\r\nimport { usePomodoroContext } from \u0027../../context/PomodoroContext\u0027;\r\nimport { Card } from \u0027../ui/Card\u0027;\r\nimport { exportToJSON, validateBackupData, readJSONFile, formatFileSize, type BackupData } from \u0027../../utils/exportData\u0027;\r\nimport { useToast } from \u0027../../context/ToastContext\u0027;\r\n\r\nexport const BackupSection: React.FC = () =\u003e {\r\n    const { themes, tasks, goals, gamification, zenMode } = useStudy();\r\n    const { profile } = useAuth();\r\n    const { settings } = usePomodoroContext();\r\n    const { showToast } = useToast();\r\n\r\n    const [isImporting, setIsImporting] = useState(false);\r\n    const [selectedFile, setSelectedFile] = useState\u003cFile | null\u003e(null);\r\n    const [previewData, setPreviewData] = useState\u003cBackupData | null\u003e(null);\r\n    const fileInputRef = useRef\u003cHTMLInputElement\u003e(null);\r\n\r\n    const handleExport = () =\u003e {\r\n        const data: BackupData = {\r\n            timestamp: new Date().toISOString(),\r\n            profile,\r\n            settings,\r\n            themes,\r\n            tasks,\r\n            goals,\r\n            gamification,\r\n            zenMode\r\n        };\r\n\r\n        exportToJSON(data);\r\n        showToast(\u0027Backup baixado com sucesso!\u0027, \u0027success\u0027);\r\n    };\r\n\r\n    const handleFileSelect = async (e: React.ChangeEvent\u003cHTMLInputElement\u003e) =\u003e {\r\n        const file = e.target.files?.[0];\r\n        if (!file) return;\r\n\r\n        setSelectedFile(file);\r\n\r\n        try {\r\n            const data = await readJSONFile(file);\r\n            const validation = validateBackupData(data);\r\n\r\n            if (!validation.valid) {\r\n                showToast(validation.error || \u0027Arquivo invÃ¡lido\u0027, \u0027error\u0027);\r\n                setSelectedFile(null);\r\n                setPreviewData(null);\r\n                return;\r\n            }\r\n\r\n            setPreviewData(data);\r\n        } catch (error: any) {\r\n            showToast(error.message || \u0027Erro ao ler o arquivo\u0027, \u0027error\u0027);\r\n            setSelectedFile(null);\r\n            setPreviewData(null);\r\n        }\r\n    };\r\n\r\n    const handleImport = () =\u003e {\r\n        if (!previewData) return;\r\n\r\n        // TODO: Implement actual import logic\r\n        // This would need to be integrated with the StudyProvider\r\n        // to restore all the data\r\n        console.log(\u0027Importing data:\u0027, previewData);\r\n\r\n        showToast(\u0027âš ï¸ Funcionalidade em desenvolvimento\u0027, \u0027warning\u0027);\r\n\r\n        // Reset\r\n        setSelectedFile(null);\r\n        setPreviewData(null);\r\n        setIsImporting(false);\r\n    };\r\n\r\n    const handleCancel = () =\u003e {\r\n        setSelectedFile(null);\r\n        setPreviewData(null);\r\n        setIsImporting(false);\r\n        if (fileInputRef.current) {\r\n            fileInputRef.current.value = \u0027\u0027;\r\n        }\r\n    };\r\n\r\n    return (\r\n        \u003cdiv className=\"space-y-4\"\u003e\r\n            {/* Export Card */}\r\n            \u003cCard className=\"bg-slate-900/50 border-slate-800\"\u003e\r\n                \u003cdiv className=\"flex items-center justify-between\"\u003e\r\n                    \u003cdiv\u003e\r\n                        \u003ch3 className=\"font-bold text-slate-200 flex items-center gap-2\"\u003e\r\n                            \u003cSave className=\"w-5 h-5 text-emerald-400\" /\u003e\r\n                            Exportar Dados (JSON)\r\n                        \u003c/h3\u003e\r\n                        \u003cp className=\"text-xs text-slate-500 mt-1\"\u003e\r\n                            Baixe uma cÃ³pia completa dos seus temas, tarefas e progresso.\r\n                        \u003c/p\u003e\r\n                        \u003cdiv className=\"flex items-center gap-4 mt-2 text-xs text-slate-600\"\u003e\r\n                            \u003cspan\u003eðŸ“¦ {themes.length} temas\u003c/span\u003e\r\n                            \u003cspan\u003eâœ“ {tasks.length} tarefas\u003c/span\u003e\r\n                            \u003cspan\u003eðŸŽ¯ {goals.length} metas\u003c/span\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n                    \u003cbutton\r\n                        onClick={handleExport}\r\n                        className=\"bg-emerald-950 hover:bg-emerald-900 text-emerald-400 border border-emerald-800 px-4 py-2 rounded-lg font-bold text-sm transition-all flex items-center gap-2 shadow-lg shadow-emerald-900/20\"\r\n                    \u003e\r\n                        \u003cSave className=\"w-4 h-4\" /\u003e\r\n                        Baixar Backup\r\n                    \u003c/button\u003e\r\n                \u003c/div\u003e\r\n            \u003c/Card\u003e\r\n\r\n            {/* Import Card */}\r\n            \u003cCard className=\"bg-slate-900/50 border-slate-800\"\u003e\r\n                \u003cdiv className=\"flex items-center justify-between\"\u003e\r\n                    \u003cdiv className=\"flex-1\"\u003e\r\n                        \u003ch3 className=\"font-bold text-slate-200 flex items-center gap-2\"\u003e\r\n                            \u003cUpload className=\"w-5 h-5 text-blue-400\" /\u003e\r\n                            Importar Backup\r\n                        \u003c/h3\u003e\r\n                        \u003cp className=\"text-xs text-slate-500 mt-1\"\u003e\r\n                            Restaure seus dados a partir de um arquivo de backup.\r\n                        \u003c/p\u003e\r\n                    \u003c/div\u003e\r\n                    \u003cdiv\u003e\r\n                        \u003cinput\r\n                            ref={fileInputRef}\r\n                            type=\"file\"\r\n                            accept=\".json\"\r\n                            onChange={handleFileSelect}\r\n                            className=\"hidden\"\r\n                            id=\"backup-file-input\"\r\n                        /\u003e\r\n                        \u003clabel\r\n                            htmlFor=\"backup-file-input\"\r\n                            className=\"bg-blue-950 hover:bg-blue-900 text-blue-400 border border-blue-800 px-4 py-2 rounded-lg font-bold text-sm transition-all flex items-center gap-2 cursor-pointer shadow-lg shadow-blue-900/20\"\r\n                        \u003e\r\n                            \u003cUpload className=\"w-4 h-4\" /\u003e\r\n                            Selecionar Arquivo\r\n                        \u003c/label\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* File Preview */}\r\n                {selectedFile \u0026\u0026 previewData \u0026\u0026 (\r\n                    \u003cdiv className=\"mt-4 p-4 bg-slate-950/50 border border-blue-500/30 rounded-lg\"\u003e\r\n                        \u003cdiv className=\"flex items-start justify-between mb-3\"\u003e\r\n                            \u003cdiv className=\"flex items-center gap-2\"\u003e\r\n                                \u003cFileCheck className=\"w-5 h-5 text-blue-400\" /\u003e\r\n                                \u003cdiv\u003e\r\n                                    \u003cp className=\"text-sm font-bold text-blue-300\"\u003e{selectedFile.name}\u003c/p\u003e\r\n                                    \u003cp className=\"text-xs text-slate-500\"\u003e{formatFileSize(selectedFile.size)}\u003c/p\u003e\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n                            \u003cbutton\r\n                                onClick={handleCancel}\r\n                                className=\"text-slate-500 hover:text-slate-300 transition-colors\"\r\n                            \u003e\r\n                                \u003cX className=\"w-4 h-4\" /\u003e\r\n                            \u003c/button\u003e\r\n                        \u003c/div\u003e\r\n\r\n                        \u003cdiv className=\"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4\"\u003e\r\n                            \u003cdiv className=\"bg-slate-900/50 p-2 rounded-lg\"\u003e\r\n                                \u003cp className=\"text-xs text-slate-500\"\u003eTemas\u003c/p\u003e\r\n                                \u003cp className=\"text-lg font-bold text-orange-400\"\u003e{previewData.themes.length}\u003c/p\u003e\r\n                            \u003c/div\u003e\r\n                            \u003cdiv className=\"bg-slate-900/50 p-2 rounded-lg\"\u003e\r\n                                \u003cp className=\"text-xs text-slate-500\"\u003eTarefas\u003c/p\u003e\r\n                                \u003cp className=\"text-lg font-bold text-purple-400\"\u003e{previewData.tasks.length}\u003c/p\u003e\r\n                            \u003c/div\u003e\r\n                            \u003cdiv className=\"bg-slate-900/50 p-2 rounded-lg\"\u003e\r\n                                \u003cp className=\"text-xs text-slate-500\"\u003eMetas\u003c/p\u003e\r\n                                \u003cp className=\"text-lg font-bold text-blue-400\"\u003e{previewData.goals.length}\u003c/p\u003e\r\n                            \u003c/div\u003e\r\n                            \u003cdiv className=\"bg-slate-900/50 p-2 rounded-lg\"\u003e\r\n                                \u003cp className=\"text-xs text-slate-500\"\u003eBackup de\u003c/p\u003e\r\n                                \u003cp className=\"text-xs font-bold text-slate-300\"\u003e\r\n                                    {new Date(previewData.timestamp).toLocaleDateString(\u0027pt-BR\u0027)}\r\n                                \u003c/p\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n\r\n                        \u003cdiv className=\"bg-amber-950/30 border border-amber-800/50 rounded-lg p-3 mb-3\"\u003e\r\n                            \u003cdiv className=\"flex items-start gap-2\"\u003e\r\n                                \u003cAlertTriangle className=\"w-4 h-4 text-amber-400 flex-shrink-0 mt-0.5\" /\u003e\r\n                                \u003cp className=\"text-xs text-amber-200\"\u003e\r\n                                    \u003cspan className=\"font-bold\"\u003eAtenÃ§Ã£o:\u003c/span\u003e Importar substituirÃ¡ todos os seus dados atuais.\r\n                                    Recomendamos fazer um backup antes.\r\n                                \u003c/p\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n\r\n                        \u003cdiv className=\"flex justify-end gap-2\"\u003e\r\n                            \u003cbutton\r\n                                onClick={handleCancel}\r\n                                className=\"px-4 py-2 rounded-lg text-slate-400 hover:text-slate-200 font-medium text-sm transition-colors\"\r\n                            \u003e\r\n                                Cancelar\r\n                            \u003c/button\u003e\r\n                            \u003cbutton\r\n                                onClick={handleImport}\r\n                                className=\"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold text-sm transition-all flex items-center gap-2 shadow-lg shadow-blue-500/20\"\r\n                            \u003e\r\n                                \u003cUpload className=\"w-4 h-4\" /\u003e\r\n                                Restaurar Backup\r\n                            \u003c/button\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n                )}\r\n            \u003c/Card\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\templates\\TemplateCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\templates\\TemplateGallery.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\timeline\\Timeline.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\timeline\\TimelineItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\timeline\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\ui\\AnimatedContainer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\ui\\Button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\ui\\Card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\ui\\CommandPalette.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\ui\\ConfirmationModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027createContext\u0027 is defined but never used.","line":1,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":30},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\ui\\ConfirmationModal.tsx:31:9\n  29 |\n  30 |     useEffect(() =\u003e {\n\u003e 31 |         setMounted(true);\n     |         ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  32 |         if (isOpen) {\n  33 |             document.body.style.overflow = \u0027hidden\u0027;\n  34 |         } else {","line":31,"column":9,"nodeType":null,"endLine":31,"endColumn":19}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useState, useEffect } from \u0027react\u0027;\r\nimport { createPortal } from \u0027react-dom\u0027;\r\nimport { AlertTriangle, X } from \u0027lucide-react\u0027;\r\nimport { cn } from \u0027../../lib/utils\u0027;\r\nimport { motion, AnimatePresence } from \u0027framer-motion\u0027;\r\n\r\ninterface ConfirmationModalProps {\r\n    isOpen: boolean;\r\n    onClose: () =\u003e void;\r\n    onConfirm: () =\u003e void;\r\n    title: string;\r\n    description: string;\r\n    confirmText?: string;\r\n    cancelText?: string;\r\n    type?: \u0027danger\u0027 | \u0027warning\u0027 | \u0027info\u0027;\r\n}\r\n\r\nexport const ConfirmationModal: React.FC\u003cConfirmationModalProps\u003e = ({\r\n    isOpen,\r\n    onClose,\r\n    onConfirm,\r\n    title,\r\n    description,\r\n    confirmText = \u0027Confirmar\u0027,\r\n    cancelText = \u0027Cancelar\u0027,\r\n    type = \u0027danger\u0027\r\n}) =\u003e {\r\n    const [mounted, setMounted] = useState(false);\r\n\r\n    useEffect(() =\u003e {\r\n        setMounted(true);\r\n        if (isOpen) {\r\n            document.body.style.overflow = \u0027hidden\u0027;\r\n        } else {\r\n            document.body.style.overflow = \u0027unset\u0027;\r\n        }\r\n        return () =\u003e {\r\n            document.body.style.overflow = \u0027unset\u0027;\r\n        };\r\n    }, [isOpen]);\r\n\r\n    if (!mounted) return null;\r\n\r\n    const colorStyles = {\r\n        danger: {\r\n            icon: \u0027text-red-500\u0027,\r\n            bgIcon: \u0027bg-red-500/10\u0027,\r\n            border: \u0027border-red-500/20\u0027,\r\n            button: \u0027bg-red-600 hover:bg-red-700\u0027,\r\n            buttonRing: \u0027focus:ring-red-500\u0027\r\n        },\r\n        warning: {\r\n            icon: \u0027text-amber-500\u0027,\r\n            bgIcon: \u0027bg-amber-500/10\u0027,\r\n            border: \u0027border-amber-500/20\u0027,\r\n            button: \u0027bg-amber-600 hover:bg-amber-700\u0027,\r\n            buttonRing: \u0027focus:ring-amber-500\u0027\r\n        },\r\n        info: {\r\n            icon: \u0027text-blue-500\u0027,\r\n            bgIcon: \u0027bg-blue-500/10\u0027,\r\n            border: \u0027border-blue-500/20\u0027,\r\n            button: \u0027bg-blue-600 hover:bg-blue-700\u0027,\r\n            buttonRing: \u0027focus:ring-blue-500\u0027\r\n        }\r\n    }[type];\r\n\r\n    return createPortal(\r\n        \u003cAnimatePresence\u003e\r\n            {isOpen \u0026\u0026 (\r\n                \u003cdiv className=\"fixed inset-0 z-[100] flex items-center justify-center p-4\"\u003e\r\n                    {/* Backdrop */}\r\n                    \u003cmotion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        onClick={onClose}\r\n                        className=\"absolute inset-0 bg-slate-950/80 backdrop-blur-sm\"\r\n                    /\u003e\r\n\r\n                    {/* Modal Content */}\r\n                    \u003cmotion.div\r\n                        initial={{ scale: 0.95, opacity: 0, y: 20 }}\r\n                        animate={{ scale: 1, opacity: 1, y: 0 }}\r\n                        exit={{ scale: 0.95, opacity: 0, y: 20 }}\r\n                        transition={{ type: \"spring\", duration: 0.3 }}\r\n                        className={cn(\r\n                            \"relative w-full max-w-sm bg-slate-900 border rounded-2xl shadow-2xl p-6 overflow-hidden\",\r\n                            colorStyles.border\r\n                        )}\r\n                    \u003e\r\n                        {/* Noise Texture */}\r\n                        \u003cdiv className=\"absolute inset-0 bg-[url(\u0027https://grainy-gradients.vercel.app/noise.svg\u0027)] opacity-5 mix-blend-overlay pointer-events-none\" /\u003e\r\n\r\n                        \u003cdiv className=\"relative z-10\"\u003e\r\n                            \u003cdiv className=\"flex items-start gap-4\"\u003e\r\n                                \u003cdiv className={cn(\"p-3 rounded-full flex-shrink-0\", colorStyles.bgIcon)}\u003e\r\n                                    \u003cAlertTriangle className={cn(\"w-6 h-6\", colorStyles.icon)} /\u003e\r\n                                \u003c/div\u003e\r\n                                \u003cdiv className=\"flex-1\"\u003e\r\n                                    \u003ch3 className=\"text-lg font-bold text-white leading-none mb-2 pt-1\"\u003e{title}\u003c/h3\u003e\r\n                                    \u003cp className=\"text-sm text-slate-400 leading-relaxed\"\u003e{description}\u003c/p\u003e\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n\r\n                            \u003cdiv className=\"mt-6 flex items-center justify-end gap-3\"\u003e\r\n                                \u003cbutton\r\n                                    onClick={onClose}\r\n                                    className=\"px-4 py-2 rounded-xl text-sm font-medium text-slate-400 hover:text-white hover:bg-white/5 transition-colors\"\r\n                                \u003e\r\n                                    {cancelText}\r\n                                \u003c/button\u003e\r\n                                \u003cbutton\r\n                                    onClick={() =\u003e {\r\n                                        onConfirm();\r\n                                        onClose();\r\n                                    }}\r\n                                    className={cn(\r\n                                        \"px-4 py-2 rounded-xl text-sm font-bold text-white shadow-lg transition-all transform active:scale-95\",\r\n                                        colorStyles.button\r\n                                    )}\r\n                                \u003e\r\n                                    {confirmText}\r\n                                \u003c/button\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n\r\n                        {/* Close X */}\r\n                        \u003cbutton\r\n                            onClick={onClose}\r\n                            className=\"absolute top-4 right-4 text-slate-500 hover:text-white transition-colors\"\r\n                        \u003e\r\n                            \u003cX className=\"w-5 h-5\" /\u003e\r\n                        \u003c/button\u003e\r\n                    \u003c/motion.div\u003e\r\n                \u003c/div\u003e\r\n            )}\r\n        \u003c/AnimatePresence\u003e,\r\n        document.body\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\ui\\DatePicker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\ui\\IconRenderer.tsx","messages":[{"ruleId":"no-control-regex","severity":2,"message":"Unexpected control character(s) in regular expression: \\x00.","line":53,"column":49,"nodeType":"Literal","messageId":"unexpected","endLine":53,"endColumn":63}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \u0027react\u0027;\r\nimport * as LucideIcons from \u0027lucide-react\u0027;\r\nimport type { LucideProps } from \u0027lucide-react\u0027;\r\n\r\ninterface IconRendererProps extends LucideProps {\r\n    icon?: string;\r\n    fallback?: React.ReactNode;\r\n}\r\n\r\nexport const IconRenderer: React.FC\u003cIconRendererProps\u003e = ({ icon, fallback, ...props }) =\u003e {\r\n    if (!icon) return fallback || null;\r\n\r\n    // Safety check: if icon is not a string, it might be a React element or other renderable type\r\n    if (typeof icon !== \u0027string\u0027) {\r\n        return (icon as any) || fallback || null;\r\n    }\r\n\r\n    // Type casting to access Lucide icons by string name\r\n    const Icons = LucideIcons as any;\r\n\r\n    // Try to find the icon: check direct export, then check if it\u0027s under \u0027icons\u0027 or \u0027default\u0027\r\n    let LucideIcon = Icons[icon];\r\n\r\n    // Some versions or build setups might put them under .icons or .default\r\n    if (!LucideIcon \u0026\u0026 Icons.icons) LucideIcon = Icons.icons[icon];\r\n    if (!LucideIcon \u0026\u0026 Icons.default \u0026\u0026 Icons.default[icon]) LucideIcon = Icons.default[icon];\r\n\r\n    if (LucideIcon \u0026\u0026 (typeof LucideIcon === \u0027function\u0027 || typeof LucideIcon === \u0027object\u0027)) {\r\n        return \u003cLucideIcon {...props} /\u003e;\r\n    }\r\n\r\n    // Check if it\u0027s an image URL\r\n    const isImageUrl = icon.startsWith(\u0027http\u0027) || icon.startsWith(\u0027/\u0027);\r\n\r\n    if (isImageUrl) {\r\n        return (\r\n            \u003cimg\r\n                src={icon}\r\n                alt=\"icon\"\r\n                className={props.className}\r\n                style={{\r\n                    width: props.size || 24,\r\n                    height: props.size || 24,\r\n                    objectFit: \u0027cover\u0027,\r\n                    borderRadius: \u00274px\u0027\r\n                }}\r\n            /\u003e\r\n        );\r\n    }\r\n\r\n    // Heuristic: If it\u0027s a short string (1-3 chars), it\u0027s likely an emoji\r\n    // Or if it contains non-ASCII characters\r\n    const isProbablyEmoji = icon.length \u003c= 4 || /[^\\x00-\\x7F]/.test(icon);\r\n\r\n    if (isProbablyEmoji) {\r\n        return (\r\n            \u003cspan\r\n                className={props.className}\r\n                style={{\r\n                    fontSize: props.size || \u00271.5em\u0027,\r\n                    lineHeight: 1,\r\n                    display: \u0027inline-flex\u0027,\r\n                    alignItems: \u0027center\u0027,\r\n                    justifyContent: \u0027center\u0027\r\n                }}\r\n            \u003e\r\n                {icon}\r\n            \u003c/span\u003e\r\n        );\r\n    }\r\n\r\n    // Default fallback if icon name not found and not an emoji\r\n    return fallback || \u003cspan className={props.className}\u003e{icon}\u003c/span\u003e;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\ui\\Input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\ui\\LoadingSpinner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\ui\\Modal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\ui\\OfflineIndicator.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027CheckCircle2\u0027 is defined but never used.","line":2,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":48},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\ui\\OfflineIndicator.tsx:42:13\n  40 |             return () =\u003e clearTimeout(timer);\n  41 |         } else {\n\u003e 42 |             setIsVisible(true);\n     |             ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  43 |         }\n  44 |     }, [status]);\n  45 |","line":42,"column":13,"nodeType":null,"endLine":42,"endColumn":25}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from \u0027react\u0027;\r\nimport { Wifi, WifiOff, RefreshCw, CheckCircle2 } from \u0027lucide-react\u0027;\r\nimport { cn } from \u0027../../lib/utils\u0027;\r\nimport { SyncQueueService } from \u0027../../services/SyncQueueService\u0027;\r\n\r\nexport const OfflineIndicator = () =\u003e {\r\n    const [status, setStatus] = useState\u003c\u0027synced\u0027 | \u0027syncing\u0027 | \u0027offline\u0027 | \u0027error\u0027\u003e(SyncQueueService.getStatus());\r\n    const [isVisible, setIsVisible] = useState(false);\r\n\r\n    useEffect(() =\u003e {\r\n        // Subscribe to sync queue updates\r\n        const unsubscribe = SyncQueueService.subscribe((newStatus) =\u003e {\r\n            setStatus(newStatus);\r\n        });\r\n\r\n        // Also listen to online/offline events globally\r\n        const handleOnline = () =\u003e {\r\n            // Let SyncQueue handle the logic, but trigger update\r\n            setStatus(SyncQueueService.getStatus());\r\n        };\r\n        const handleOffline = () =\u003e {\r\n            // Immediate feedback\r\n            setStatus(\u0027offline\u0027);\r\n        };\r\n\r\n        window.addEventListener(\u0027online\u0027, handleOnline);\r\n        window.addEventListener(\u0027offline\u0027, handleOffline);\r\n\r\n        return () =\u003e {\r\n            unsubscribe();\r\n            window.removeEventListener(\u0027online\u0027, handleOnline);\r\n            window.removeEventListener(\u0027offline\u0027, handleOffline);\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() =\u003e {\r\n        if (status === \u0027synced\u0027) {\r\n            // Show \"Synced\" briefly then hide\r\n            const timer = setTimeout(() =\u003e setIsVisible(false), 2000);\r\n            return () =\u003e clearTimeout(timer);\r\n        } else {\r\n            setIsVisible(true);\r\n        }\r\n    }, [status]);\r\n\r\n    if (!isVisible \u0026\u0026 status === \u0027synced\u0027) return null;\r\n\r\n    return (\r\n        \u003cdiv className={cn(\r\n            \"fixed bottom-4 right-4 z-50 flex items-center gap-2 px-4 py-2 rounded-full font-bold text-xs shadow-2xl transition-all duration-500 transform\",\r\n            isVisible ? \"translate-y-0 opacity-100\" : \"translate-y-10 opacity-0\",\r\n            status === \u0027offline\u0027 \u0026\u0026 \"bg-slate-900 border border-red-500/20 text-red-400\",\r\n            status === \u0027syncing\u0027 \u0026\u0026 \"bg-slate-900 border border-blue-500/20 text-blue-400\",\r\n            status === \u0027synced\u0027 \u0026\u0026 \"bg-slate-900 border border-emerald-500/20 text-emerald-400\",\r\n            status === \u0027error\u0027 \u0026\u0026 \"bg-red-500 text-white\"\r\n        )}\u003e\r\n            {status === \u0027offline\u0027 \u0026\u0026 (\r\n                \u003c\u003e\r\n                    \u003cWifiOff className=\"w-3.5 h-3.5\" /\u003e\r\n                    \u003cspan\u003eOFFLINE - Modo Local\u003c/span\u003e\r\n                \u003c/\u003e\r\n            )}\r\n            {status === \u0027syncing\u0027 \u0026\u0026 (\r\n                \u003c\u003e\r\n                    \u003cRefreshCw className=\"w-3.5 h-3.5 animate-spin\" /\u003e\r\n                    \u003cspan\u003eSincronizando...\u003c/span\u003e\r\n                \u003c/\u003e\r\n            )}\r\n            {status === \u0027synced\u0027 \u0026\u0026 (\r\n                \u003c\u003e\r\n                    \u003cWifi className=\"w-3.5 h-3.5\" /\u003e\r\n                    \u003cspan\u003eOnline \u0026 Sincronizado\u003c/span\u003e\r\n                \u003c/\u003e\r\n            )}\r\n            {status === \u0027error\u0027 \u0026\u0026 (\r\n                \u003c\u003e\r\n                    \u003cWifiOff className=\"w-3.5 h-3.5\" /\u003e\r\n                    \u003cspan\u003eErro de SincronizaÃ§Ã£o\u003c/span\u003e\r\n                \u003c/\u003e\r\n            )}\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\ui\\ProgressBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\ui\\RichTextEditor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\ui\\Select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\ui\\SummaryTimeline.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\components\\ui\\Toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\config\\env.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\config\\gamification.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\AppContext.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\AppProvider.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027_completed\u0027 is assigned a value but never used.","line":92,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":92,"endColumn":33}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from \u0027react\u0027;\r\nimport { SyncQueueService } from \u0027../services/SyncQueueService\u0027;\r\nimport { format } from \u0027date-fns\u0027;\r\nimport { AppContext, type ActiveFocusSession } from \u0027./AppContext\u0027;\r\n\r\nexport const AppProvider: React.FC\u003c{ children: React.ReactNode }\u003e = ({ children }) =\u003e {\r\n    // const { user } = useAuth(); // Removed unused user\r\n\r\n    const [loading, setLoading] = useState(true);\r\n    const [syncStatus, setSyncStatus] = useState\u003c\u0027synced\u0027 | \u0027syncing\u0027 | \u0027offline\u0027 | \u0027error\u0027\u003e(\u0027synced\u0027);\r\n\r\n    // Initialize activeFocus from localStorage\r\n    const [activeFocus, setActiveFocus] = useState\u003cActiveFocusSession | null\u003e(() =\u003e {\r\n        try {\r\n            const saved = localStorage.getItem(\u0027active_focus_session\u0027);\r\n            return saved ? JSON.parse(saved) : null;\r\n        } catch { return null; }\r\n    });\r\n\r\n    // Persist activeFocus changes\r\n    useEffect(() =\u003e {\r\n        if (activeFocus) {\r\n            localStorage.setItem(\u0027active_focus_session\u0027, JSON.stringify(activeFocus));\r\n        } else {\r\n            localStorage.removeItem(\u0027active_focus_session\u0027);\r\n        }\r\n    }, [activeFocus]);\r\n\r\n    const [activeStudySession, setActiveStudySession] = useState\u003cstring | null\u003e(null);\r\n\r\n    // Zen Mode State\r\n    const [zenMode, setZenMode] = useState\u003cboolean\u003e(() =\u003e {\r\n        try {\r\n            const saved = localStorage.getItem(\u0027zen_mode\u0027);\r\n            return saved ? JSON.parse(saved) : false;\r\n        } catch { return false; }\r\n    });\r\n\r\n\r\n\r\n    // Strict Summary Access Logic\r\n    const [unlockedSubthemes] = useState\u003cstring[]\u003e(() =\u003e {\r\n        const saved = localStorage.getItem(\u0027daily_unlocked_subthemes\u0027);\r\n        if (saved) {\r\n            try {\r\n                const parsed = JSON.parse(saved);\r\n                if (parsed.date === format(new Date(), \u0027yyyy-MM-dd\u0027)) {\r\n                    return parsed.ids || [];\r\n                }\r\n            } catch (err) { console.error(err); }\r\n        }\r\n        return [];\r\n    });\r\n\r\n    useEffect(() =\u003e {\r\n        localStorage.setItem(\u0027daily_unlocked_subthemes\u0027, JSON.stringify({\r\n            date: format(new Date(), \u0027yyyy-MM-dd\u0027),\r\n            ids: unlockedSubthemes\r\n        }));\r\n    }, [unlockedSubthemes]);\r\n\r\n    // Broadcast Channel for Multi-Tab Sync\r\n    useEffect(() =\u003e {\r\n        const channel = new BroadcastChannel(\u0027study_sync_channel\u0027);\r\n\r\n        channel.onmessage = (event) =\u003e {\r\n            const { type, payload } = event.data;\r\n\r\n            if (type === \u0027FOCUS_UPDATE\u0027) {\r\n                console.log(\u0027ðŸ”„ Syncing Focus from another tab:\u0027, payload);\r\n                // Directly set state, skipping local storage loop if handled there\r\n                setActiveFocus(payload);\r\n            } else if (type === \u0027ZEN_MODE_UPDATE\u0027) {\r\n                console.log(\u0027ðŸ”„ Syncing Zen Mode from another tab:\u0027, payload);\r\n                setZenMode(payload);\r\n            }\r\n        };\r\n\r\n        return () =\u003e channel.close();\r\n    }, []);\r\n\r\n    const startFocus = (id: string, type: \u0027task\u0027 | \u0027goal\u0027 | \u0027subtheme\u0027, title: string, duration: number, reviewNumber?: number, reviewType?: \u0027review\u0027 | \u0027intro\u0027, parentId?: string) =\u003e {\r\n        const newSession: ActiveFocusSession = { id, type, title, duration, startTime: Date.now(), reviewNumber, reviewType, parentId };\r\n        setActiveFocus(newSession);\r\n\r\n        // Broadcast\r\n        const channel = new BroadcastChannel(\u0027study_sync_channel\u0027);\r\n        channel.postMessage({ type: \u0027FOCUS_UPDATE\u0027, payload: newSession });\r\n        channel.close();\r\n    };\r\n\r\n    const endFocus = (_completed: boolean = false, checkId?: string) =\u003e {\r\n        setActiveFocus(prev =\u003e {\r\n            // Prevent race condition: if we are trying to close a specific session (checkId)\r\n            // but the active session is already different (prev.id !== checkId), \r\n            // then we should NOT clear the current session.\r\n            if (checkId \u0026\u0026 prev?.id !== checkId) {\r\n                return prev;\r\n            }\r\n\r\n            // Broadcast End\r\n            const channel = new BroadcastChannel(\u0027study_sync_channel\u0027);\r\n            channel.postMessage({ type: \u0027FOCUS_UPDATE\u0027, payload: null });\r\n            channel.close();\r\n\r\n            return null;\r\n        });\r\n    };\r\n\r\n\r\n\r\n    const toggleZenMode = () =\u003e {\r\n        setZenMode(prev =\u003e {\r\n            const newValue = !prev;\r\n            localStorage.setItem(\u0027zen_mode\u0027, JSON.stringify(newValue));\r\n\r\n            // Broadcast Zen Mode\r\n            const channel = new BroadcastChannel(\u0027study_sync_channel\u0027);\r\n            channel.postMessage({ type: \u0027ZEN_MODE_UPDATE\u0027, payload: newValue });\r\n            channel.close();\r\n\r\n            return newValue;\r\n        });\r\n    };\r\n\r\n    const startStudySession = (subthemeId: string) =\u003e {\r\n        setActiveStudySession(subthemeId);\r\n    };\r\n\r\n    const endStudySession = () =\u003e {\r\n        setActiveStudySession(null);\r\n    };\r\n\r\n    // Sync status listener\r\n    useEffect(() =\u003e {\r\n        SyncQueueService.loadQueue();\r\n\r\n        // Subscribe to real-time sync status\r\n        const unsubscribe = SyncQueueService.subscribe((status) =\u003e {\r\n            setSyncStatus(status);\r\n        });\r\n\r\n        // Mock loading finish\r\n        setTimeout(() =\u003e setLoading(false), 1000);\r\n\r\n        return () =\u003e {\r\n            unsubscribe();\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        \u003cAppContext.Provider value={{\r\n            activeFocus,\r\n            loading,\r\n            syncStatus,\r\n            startFocus,\r\n            endFocus,\r\n            zenMode,\r\n            toggleZenMode,\r\n            unlockedSubthemes,\r\n            activeStudySession,\r\n            startStudySession,\r\n            endStudySession\r\n        }}\u003e\r\n            {children}\r\n        \u003c/AppContext.Provider\u003e\r\n    );\r\n};\r\n\r\n// export const useAppContext = () =\u003e {\r\n//     const context = useContext(AppContext);\r\n//     if (!context) throw new Error(\u0027useAppContext must be used within AppProvider\u0027);\r\n//     return context;\r\n// };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\AudioContext.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\AudioProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\AuthContext.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\AuthProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\ConfirmContext.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\ConfirmProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\GamificationContext.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\GamificationProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\GoalContext.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\GoalProvider.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: \u0027goalActions\u0027. Either include it or remove the dependency array.","line":92,"column":8,"nodeType":"ArrayExpression","endLine":92,"endColumn":14,"suggestions":""}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from \u0027react\u0027;\r\nimport { logger } from \u0027../utils/logger\u0027;\r\nimport { useAuth } from \u0027./AuthContext\u0027;\r\nimport { useGamification } from \u0027./GamificationContext\u0027;\r\nimport { useGoals } from \u0027../hooks/useGoals\u0027;\r\nimport type { Goal } from \u0027../types\u0027;\r\nimport { supabase } from \u0027../lib/supabase\u0027;\r\nimport { GoalContext } from \u0027./GoalContext\u0027; // Updated import\r\nimport { filterBlacklisted } from \u0027../utils/deletedItemsBlacklist\u0027;\r\n\r\nexport const GoalProvider: React.FC\u003c{ children: React.ReactNode }\u003e = ({ children }) =\u003e {\r\n    const { user } = useAuth();\r\n    const { gamification, awardXP, updateStats } = useGamification();\r\n\r\n    const goalActions = useGoals({\r\n        user,\r\n        gamification,\r\n        awardXP,\r\n        updateStats\r\n    });\r\n\r\n    // Initial Fetch from Supabase\r\n    useEffect(() =\u003e {\r\n        const fetchGoals = async () =\u003e {\r\n            if (user) {\r\n                const { data, error } = await supabase\r\n                    .from(\u0027goals\u0027)\r\n                    .select(\u0027*\u0027)\r\n                    .eq(\u0027user_id\u0027, user.id);\r\n\r\n                if (data \u0026\u0026 !error) {\r\n                    const normalized = data.map(g =\u003e ({\r\n                        ...g,\r\n                        createdAt: new Date(g.created_at).getTime(),\r\n                        imageUrl: g.image_url,\r\n                        durationMinutes: g.duration_minutes,\r\n                        timeSpent: g.time_spent || 0,\r\n                        completionHistory: g.completion_history || [],\r\n                        sessions: g.sessions || [],\r\n                        summaries: g.summaries || []\r\n                    }));\r\n\r\n                    // --- ROBUST DELETION PROTECTION ---\r\n                    const pendingDeletes = new Set\u003cstring\u003e();\r\n                    try {\r\n                        const queueRaw = localStorage.getItem(\u0027sync_queue_v1\u0027);\r\n                        if (queueRaw) {\r\n                            const queue = JSON.parse(queueRaw);\r\n                            if (Array.isArray(queue)) {\r\n                                queue.forEach((op: { type: string; table: string; data?: { id?: string } }) =\u003e {\r\n                                    if (op.type === \u0027DELETE\u0027 \u0026\u0026 op.table === \u0027goals\u0027 \u0026\u0026 op.data?.id) {\r\n                                        pendingDeletes.add(op.data.id);\r\n                                    }\r\n                                });\r\n                            }\r\n                        }\r\n                    } catch (e) {\r\n                        logger.error(\"Error reading sync queue for goal protection\", e);\r\n                    }\r\n\r\n                    // ðŸš« NUCLEAR PROTECTION: Filter permanent blacklist\r\n                    const nonBlacklisted = filterBlacklisted(normalized, \u0027goal\u0027);\r\n                    // ----------------------------------\r\n\r\n                    goalActions.setGoals(prevGoals =\u003e {\r\n                        const finalGoals: Goal[] = [];\r\n                        const processedIds = new Set\u003cstring\u003e();\r\n\r\n                        // 1. Add/Update from Server (filtered)\r\n                        nonBlacklisted.forEach(serverGoal =\u003e {\r\n                            if (pendingDeletes.has(serverGoal.id)) {\r\n                                logger.info(`ðŸ›¡ï¸ Blocked zombie goal resurrecion: ${serverGoal.id}`);\r\n                                return;\r\n                            }\r\n                            finalGoals.push(serverGoal);\r\n                            processedIds.add(serverGoal.id);\r\n                        });\r\n\r\n                        // 2. Preserve Local-Only (Optimistic)\r\n                        prevGoals.forEach(localGoal =\u003e {\r\n                            if (!processedIds.has(localGoal.id)) {\r\n                                finalGoals.push(localGoal);\r\n                            }\r\n                        });\r\n\r\n                        return finalGoals;\r\n                    });\r\n                }\r\n            }\r\n        };\r\n        fetchGoals();\r\n    }, [user]); // Fixed: removed goalActions to prevent infinite loop\r\n\r\n\r\n    return (\r\n        \u003cGoalContext.Provider value={goalActions}\u003e\r\n            {children}\r\n        \u003c/GoalContext.Provider\u003e\r\n    );\r\n};\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\PomodoroContext.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\PomodoroProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\ProjectProvider.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":20,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":20,"endColumn":31},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\ProjectProvider.tsx:36:17\n  34 |         if (stored) {\n  35 |             try {\n\u003e 36 |                 setProjects(JSON.parse(stored));\n     |                 ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  37 |             } catch (error) {\n  38 |                 console.error(\u0027Error loading projects:\u0027, error);\n  39 |             }","line":36,"column":17,"nodeType":null,"endLine":36,"endColumn":28}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect, useCallback } from \u0027react\u0027;\r\nimport type { Project, ProjectMilestone } from \u0027../types\u0027;\r\n\r\ninterface ProjectContextType {\r\n    projects: Project[];\r\n    addProject: (project: Omit\u003cProject, \u0027id\u0027 | \u0027createdAt\u0027 | \u0027progress\u0027 | \u0027milestones\u0027\u003e) =\u003e void;\r\n    updateProject: (id: string, updates: Partial\u003cProject\u003e) =\u003e void;\r\n    deleteProject: (id: string) =\u003e void;\r\n    addMilestone: (projectId: string, milestone: Omit\u003cProjectMilestone, \u0027id\u0027 | \u0027projectId\u0027 | \u0027createdAt\u0027\u003e) =\u003e void;\r\n    toggleMilestone: (projectId: string, milestoneId: string) =\u003e void;\r\n    deleteMilestone: (projectId: string, milestoneId: string) =\u003e void;\r\n    linkTask: (projectId: string, taskId: string) =\u003e void;\r\n    unlinkTask: (projectId: string, taskId: string) =\u003e void;\r\n    linkGoal: (projectId: string, goalId: string) =\u003e void;\r\n    unlinkGoal: (projectId: string, goalId: string) =\u003e void;\r\n}\r\n\r\nconst ProjectContext = createContext\u003cProjectContextType | undefined\u003e(undefined);\r\n\r\nexport const useProjectContext = () =\u003e {\r\n    const context = useContext(ProjectContext);\r\n    if (!context) {\r\n        throw new Error(\u0027useProjectContext must be used within ProjectProvider\u0027);\r\n    }\r\n    return context;\r\n};\r\n\r\nexport const ProjectProvider: React.FC\u003c{ children: React.ReactNode }\u003e = ({ children }) =\u003e {\r\n    const [projects, setProjects] = useState\u003cProject[]\u003e([]);\r\n\r\n    // Load from localStorage\r\n    useEffect(() =\u003e {\r\n        const stored = localStorage.getItem(\u0027study_projects\u0027);\r\n        if (stored) {\r\n            try {\r\n                setProjects(JSON.parse(stored));\r\n            } catch (error) {\r\n                console.error(\u0027Error loading projects:\u0027, error);\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    // Save to localStorage\r\n    useEffect(() =\u003e {\r\n        localStorage.setItem(\u0027study_projects\u0027, JSON.stringify(projects));\r\n    }, [projects]);\r\n\r\n    // Calculate progress based on milestones\r\n    const calculateProgress = (milestones: ProjectMilestone[]): number =\u003e {\r\n        if (milestones.length === 0) return 0;\r\n        const completed = milestones.filter(m =\u003e m.completed).length;\r\n        return Math.round((completed / milestones.length) * 100);\r\n    };\r\n\r\n    const addProject = useCallback((projectData: Omit\u003cProject, \u0027id\u0027 | \u0027createdAt\u0027 | \u0027progress\u0027 | \u0027milestones\u0027\u003e) =\u003e {\r\n        const newProject: Project = {\r\n            ...projectData,\r\n            id: `project-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\r\n            createdAt: Date.now(),\r\n            progress: 0,\r\n            milestones: [],\r\n            linkedTaskIds: projectData.linkedTaskIds || [],\r\n            linkedGoalIds: projectData.linkedGoalIds || [],\r\n        };\r\n        setProjects(prev =\u003e [...prev, newProject]);\r\n    }, []);\r\n\r\n    const updateProject = useCallback((id: string, updates: Partial\u003cProject\u003e) =\u003e {\r\n        setProjects(prev =\u003e prev.map(project =\u003e {\r\n            if (project.id !== id) return project;\r\n\r\n            const updated = { ...project, ...updates };\r\n            // Recalculate progress if milestones changed\r\n            if (updates.milestones) {\r\n                updated.progress = calculateProgress(updates.milestones);\r\n            }\r\n            return updated;\r\n        }));\r\n    }, []);\r\n\r\n    const deleteProject = useCallback((id: string) =\u003e {\r\n        setProjects(prev =\u003e prev.filter(p =\u003e p.id !== id));\r\n    }, []);\r\n\r\n    const addMilestone = useCallback((projectId: string, milestoneData: Omit\u003cProjectMilestone, \u0027id\u0027 | \u0027projectId\u0027 | \u0027createdAt\u0027\u003e) =\u003e {\r\n        setProjects(prev =\u003e prev.map(project =\u003e {\r\n            if (project.id !== projectId) return project;\r\n\r\n            const newMilestone: ProjectMilestone = {\r\n                ...milestoneData,\r\n                id: `milestone-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\r\n                projectId,\r\n                createdAt: Date.now(),\r\n                completed: milestoneData.completed || false,\r\n            };\r\n\r\n            const updatedMilestones = [...project.milestones, newMilestone];\r\n            return {\r\n                ...project,\r\n                milestones: updatedMilestones,\r\n                progress: calculateProgress(updatedMilestones),\r\n            };\r\n        }));\r\n    }, []);\r\n\r\n    const toggleMilestone = useCallback((projectId: string, milestoneId: string) =\u003e {\r\n        setProjects(prev =\u003e prev.map(project =\u003e {\r\n            if (project.id !== projectId) return project;\r\n\r\n            const updatedMilestones = project.milestones.map(milestone =\u003e {\r\n                if (milestone.id !== milestoneId) return milestone;\r\n                return {\r\n                    ...milestone,\r\n                    completed: !milestone.completed,\r\n                    completedAt: !milestone.completed ? new Date().toISOString() : undefined,\r\n                };\r\n            });\r\n\r\n            return {\r\n                ...project,\r\n                milestones: updatedMilestones,\r\n                progress: calculateProgress(updatedMilestones),\r\n            };\r\n        }));\r\n    }, []);\r\n\r\n    const deleteMilestone = useCallback((projectId: string, milestoneId: string) =\u003e {\r\n        setProjects(prev =\u003e prev.map(project =\u003e {\r\n            if (project.id !== projectId) return project;\r\n\r\n            const updatedMilestones = project.milestones.filter(m =\u003e m.id !== milestoneId);\r\n            return {\r\n                ...project,\r\n                milestones: updatedMilestones,\r\n                progress: calculateProgress(updatedMilestones),\r\n            };\r\n        }));\r\n    }, []);\r\n\r\n    const linkTask = useCallback((projectId: string, taskId: string) =\u003e {\r\n        setProjects(prev =\u003e prev.map(project =\u003e {\r\n            if (project.id !== projectId) return project;\r\n            if (project.linkedTaskIds.includes(taskId)) return project;\r\n\r\n            return {\r\n                ...project,\r\n                linkedTaskIds: [...project.linkedTaskIds, taskId],\r\n            };\r\n        }));\r\n    }, []);\r\n\r\n    const unlinkTask = useCallback((projectId: string, taskId: string) =\u003e {\r\n        setProjects(prev =\u003e prev.map(project =\u003e {\r\n            if (project.id !== projectId) return project;\r\n\r\n            return {\r\n                ...project,\r\n                linkedTaskIds: project.linkedTaskIds.filter(id =\u003e id !== taskId),\r\n            };\r\n        }));\r\n    }, []);\r\n\r\n    const linkGoal = useCallback((projectId: string, goalId: string) =\u003e {\r\n        setProjects(prev =\u003e prev.map(project =\u003e {\r\n            if (project.id !== projectId) return project;\r\n            if (project.linkedGoalIds.includes(goalId)) return project;\r\n\r\n            return {\r\n                ...project,\r\n                linkedGoalIds: [...project.linkedGoalIds, goalId],\r\n            };\r\n        }));\r\n    }, []);\r\n\r\n    const unlinkGoal = useCallback((projectId: string, goalId: string) =\u003e {\r\n        setProjects(prev =\u003e prev.map(project =\u003e {\r\n            if (project.id !== projectId) return project;\r\n\r\n            return {\r\n                ...project,\r\n                linkedGoalIds: project.linkedGoalIds.filter(id =\u003e id !== goalId),\r\n            };\r\n        }));\r\n    }, []);\r\n\r\n    const value: ProjectContextType = {\r\n        projects,\r\n        addProject,\r\n        updateProject,\r\n        deleteProject,\r\n        addMilestone,\r\n        toggleMilestone,\r\n        deleteMilestone,\r\n        linkTask,\r\n        unlinkTask,\r\n        linkGoal,\r\n        unlinkGoal,\r\n    };\r\n\r\n    return \u003cProjectContext.Provider value={value}\u003e{children}\u003c/ProjectContext.Provider\u003e;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\StudyContext.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\StudyProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\TaskContext.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\TaskProvider.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: \u0027taskActions\u0027. Either include it or remove the dependency array.","line":96,"column":8,"nodeType":"ArrayExpression","endLine":96,"endColumn":14,"suggestions":""}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from \u0027react\u0027;\r\nimport { logger } from \u0027../utils/logger\u0027;\r\nimport { useAuth } from \u0027./AuthContext\u0027;\r\nimport { useGamification } from \u0027./GamificationContext\u0027;\r\nimport { useTasks } from \u0027../hooks/useTasks\u0027;\r\nimport type { Task } from \u0027../types\u0027;\r\nimport { supabase } from \u0027../lib/supabase\u0027;\r\nimport { TaskContext } from \u0027./TaskContext\u0027;\r\nimport { filterBlacklisted } from \u0027../utils/deletedItemsBlacklist\u0027;\r\n\r\nexport const TaskProvider: React.FC\u003c{ children: React.ReactNode }\u003e = ({ children }) =\u003e {\r\n    const { user } = useAuth();\r\n    const { gamification, awardXP, updateStats } = useGamification();\r\n\r\n    const taskActions = useTasks({\r\n        user,\r\n        gamification,\r\n        awardXP,\r\n        updateStats\r\n    });\r\n\r\n    // Initial Fetch from Supabase\r\n    useEffect(() =\u003e {\r\n        const fetchTasks = async () =\u003e {\r\n            if (user) {\r\n                const { data, error } = await supabase\r\n                    .from(\u0027tasks\u0027)\r\n                    .select(\u0027*\u0027)\r\n                    .eq(\u0027user_id\u0027, user.id);\r\n\r\n                if (data \u0026\u0026 !error) {\r\n                    const normalized = data.map(t =\u003e ({\r\n                        ...t,\r\n                        startDate: t.start_date,\r\n                        endDate: t.end_date,\r\n                        createdAt: new Date(t.created_at).getTime(),\r\n                        imageUrl: t.image_url,\r\n                        durationMinutes: t.duration_minutes,\r\n                        timeSpent: t.time_spent || 0,\r\n                        completionHistory: t.completion_history || [],\r\n                        sessions: t.sessions || [],\r\n                        summaries: t.summaries || []\r\n                    }));\r\n\r\n                    // --- ROBUST DELETION PROTECTION ---\r\n                    // Read pending deletions from Sync Queue to prevent \u0027zombies\u0027\r\n                    const pendingDeletes = new Set\u003cstring\u003e();\r\n                    try {\r\n                        const queueRaw = localStorage.getItem(\u0027sync_queue_v1\u0027);\r\n                        if (queueRaw) {\r\n                            const queue = JSON.parse(queueRaw);\r\n                            if (Array.isArray(queue)) {\r\n                                queue.forEach((op: { type: string; table: string; data?: { id?: string } }) =\u003e {\r\n                                    if (op.type === \u0027DELETE\u0027 \u0026\u0026 op.table === \u0027tasks\u0027 \u0026\u0026 op.data?.id) {\r\n                                        pendingDeletes.add(op.data.id);\r\n                                    }\r\n                                });\r\n                            }\r\n                        }\r\n                    } catch (e) {\r\n                        logger.error(\"Error reading sync queue for protection\", e);\r\n                    }\r\n\r\n                    // ðŸš« NUCLEAR PROTECTION: Filter permanent blacklist\r\n                    // This is the FINAL line of defense against zombie resurrection\r\n                    const nonBlacklisted = filterBlacklisted(normalized, \u0027task\u0027);\r\n                    // ----------------------------------\r\n\r\n                    taskActions.setTasks(prevTasks =\u003e {\r\n                        const finalTasks: Task[] = [];\r\n                        const processedIds = new Set\u003cstring\u003e();\r\n\r\n                        // 1. Add/Update from Server (filtered)\r\n                        nonBlacklisted.forEach(serverTask =\u003e {\r\n                            if (pendingDeletes.has(serverTask.id)) {\r\n                                logger.info(`ðŸ›¡ï¸ Blocked zombie task resurrecion: ${serverTask.id} `);\r\n                                return; // Skip deleted item\r\n                            }\r\n                            finalTasks.push(serverTask);\r\n                            processedIds.add(serverTask.id);\r\n                        });\r\n\r\n                        // 2. Preserve Local-Only (Optimistic)\r\n                        prevTasks.forEach(localTask =\u003e {\r\n                            if (!processedIds.has(localTask.id)) {\r\n                                finalTasks.push(localTask);\r\n                            }\r\n                        });\r\n\r\n                        return finalTasks;\r\n                    });\r\n                }\r\n            }\r\n        };\r\n        fetchTasks();\r\n    }, [user]); // Fixed: removed taskActions to prevent infinite loop\r\n\r\n\r\n    return (\r\n        \u003cTaskContext.Provider value={taskActions}\u003e\r\n            {children}\r\n        \u003c/TaskContext.Provider\u003e\r\n    );\r\n};\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\ThemeContext.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\ThemeProvider.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: \u0027themeActions\u0027. Either include it or remove the dependency array.","line":150,"column":8,"nodeType":"ArrayExpression","endLine":150,"endColumn":38,"suggestions":""}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from \u0027react\u0027;\r\nimport { logger } from \u0027../utils/logger\u0027;\r\nimport { useAuth } from \u0027./AuthContext\u0027;\r\nimport { useGamification } from \u0027./GamificationContext\u0027;\r\nimport { useThemes } from \u0027../hooks/useThemes\u0027;\r\nimport type { Theme, Subtheme } from \u0027../types\u0027;\r\nimport { supabase } from \u0027../lib/supabase\u0027;\r\nimport { useAudio } from \u0027./AudioContext\u0027;\r\nimport { ThemeContext } from \u0027./ThemeContext\u0027;\r\n\r\nexport const ThemeProvider: React.FC\u003c{ children: React.ReactNode }\u003e = ({ children }) =\u003e {\r\n    const { user } = useAuth();\r\n    const { gamification, awardXP, updateStats } = useGamification();\r\n    const { playSFX } = useAudio();\r\n\r\n    const themeActions = useThemes({\r\n        user,\r\n        gamification,\r\n        awardXP,\r\n        updateStats,\r\n        playSFX\r\n    });\r\n\r\n    // Initial Fetch from Supabase\r\n    useEffect(() =\u003e {\r\n        const fetchThemes = async () =\u003e {\r\n            if (user) {\r\n                const { data: themesData, error: themesError } = await supabase\r\n                    .from(\u0027themes\u0027)\r\n                    .select(\u0027*, subthemes(*)\u0027)\r\n                    .eq(\u0027user_id\u0027, user.id)\r\n                    .order(\u0027order_index\u0027, { foreignTable: \u0027subthemes\u0027, ascending: true });\r\n\r\n                if (themesData \u0026\u0026 !themesError) {\r\n                    const normalized = themesData.map(t =\u003e ({\r\n                        ...t,\r\n                        createdAt: new Date(t.created_at).getTime(),\r\n                        imageUrl: t.image_url,\r\n                        startDate: t.start_date,\r\n                        summaries: t.summaries || [],\r\n                        subthemes: t.subthemes.map((st: Subtheme \u0026 { theme_id: string; duration_minutes: number; time_spent: number }) =\u003e ({\r\n                            ...st,\r\n                            themeId: st.theme_id,\r\n                            durationMinutes: st.duration_minutes,\r\n                            timeSpent: st.time_spent || 0,\r\n                            summaries: st.summaries || []\r\n                        }))\r\n                    }));\r\n\r\n                    // --- ROBUST DELETION PROTECTION ---\r\n                    const pendingDeletes = new Set\u003cstring\u003e();\r\n                    const pendingSubthemeDeletes = new Set\u003cstring\u003e();\r\n                    let deletedIds = new Set\u003cstring\u003e();\r\n\r\n                    try {\r\n                        const storedDeleted = localStorage.getItem(\u0027deleted_theme_ids\u0027);\r\n                        if (storedDeleted) {\r\n                            deletedIds = new Set(JSON.parse(storedDeleted));\r\n                        }\r\n\r\n\r\n                        const queueRaw = localStorage.getItem(\u0027sync_queue_v1\u0027);\r\n                        if (queueRaw) {\r\n                            const queue = JSON.parse(queueRaw);\r\n                            if (Array.isArray(queue)) {\r\n                                queue.forEach((op: { type: string; table: string; data?: { id?: string } }) =\u003e {\r\n                                    if (op.type === \u0027DELETE\u0027 \u0026\u0026 op.data?.id) {\r\n                                        if (op.table === \u0027themes\u0027) pendingDeletes.add(op.data.id);\r\n                                        if (op.table === \u0027subthemes\u0027) pendingSubthemeDeletes.add(op.data.id);\r\n                                    }\r\n                                });\r\n                            }\r\n                        }\r\n                    } catch (e) {\r\n                        logger.error(\"Error reading sync queue for theme protection\", e);\r\n                    }\r\n                    // ----------------------------------\r\n\r\n                    themeActions.setThemes(prevThemes =\u003e {\r\n                        // Create a map of current themes for easy lookup\r\n                        const currentThemesMap = new Map(prevThemes.map(t =\u003e [t.id, t]));\r\n                        const finalThemes: Theme[] = [];\r\n                        const processedIds = new Set\u003cstring\u003e();\r\n\r\n                        // 1. Process Server Themes (Merge with Local)\r\n                        normalized.forEach(serverTheme =\u003e {\r\n                            if (pendingDeletes.has(serverTheme.id) || deletedIds.has(serverTheme.id)) {\r\n                                logger.info(`ðŸ›¡ï¸ Blocked zombie theme resurrecion: ${serverTheme.id}`);\r\n                                return;\r\n                            }\r\n\r\n                            processedIds.add(serverTheme.id);\r\n                            const localTheme = currentThemesMap.get(serverTheme.id);\r\n\r\n                            let finalSubthemes = serverTheme.subthemes;\r\n\r\n                            // Filter Server Subthemes against pending deletes\r\n                            finalSubthemes = finalSubthemes.filter((st: Subtheme) =\u003e !pendingSubthemeDeletes.has(st.id));\r\n\r\n\r\n                            if (localTheme) {\r\n                                // --- SMART SUBTHEME MERGE ---\r\n                                // 1. If server has 0 subthemes but local has them, this is likely a sync glitch or latency.\r\n                                //    KEEP local subthemes to prevent \"zeroing\".\r\n                                if (serverTheme.subthemes.length === 0 \u0026\u0026 localTheme.subthemes.length \u003e 0) {\r\n                                    logger.warn(`[SmartMerge] Preserving ${localTheme.subthemes.length} local subthemes for theme ${serverTheme.title} (Server returned 0)`);\r\n                                    finalSubthemes = localTheme.subthemes;\r\n                                }\r\n                                else {\r\n                                    // 2. Union Merge: Keep local-only items (optimistic adds) + Server updates\r\n                                    const subthemeMap = new Map\u003cstring, Subtheme\u003e();\r\n\r\n                                    // Start with Local (preserves un-synced added items)\r\n                                    // But ignore if they are pending delete locally (already handled by useThemes deleteSubtheme logic which updates state)\r\n                                    localTheme.subthemes.forEach(st =\u003e subthemeMap.set(st.id, st));\r\n\r\n                                    // Overlay Server (Source of Truth for synced items)\r\n                                    // serverTheme.subthemes are technically arrays from server.\r\n                                    // We must check if any server subtheme is in pendingSubthemeDeletes (already filtered above in finalSubthemes assignment)\r\n                                    // So we overlay the filtered server subthemes.\r\n                                    serverTheme.subthemes.forEach((st: Subtheme) =\u003e {\r\n                                        if (!pendingSubthemeDeletes.has(st.id)) {\r\n                                            subthemeMap.set(st.id, st);\r\n                                        }\r\n                                    });\r\n\r\n                                    finalSubthemes = Array.from(subthemeMap.values());\r\n                                }\r\n                            }\r\n\r\n                            finalThemes.push({\r\n                                ...serverTheme,\r\n                                subthemes: finalSubthemes\r\n                            });\r\n                        });\r\n\r\n                        // 2. Preserve Local-Only Themes (Optimistic Adds not yet on server)\r\n                        prevThemes.forEach(localTheme =\u003e {\r\n                            if (!processedIds.has(localTheme.id)) {\r\n                                finalThemes.push(localTheme);\r\n                            }\r\n                        });\r\n\r\n                        return finalThemes;\r\n                    });\r\n                }\r\n            }\r\n        };\r\n        fetchThemes();\r\n    }, [user, themeActions.setThemes]);\r\n\r\n    return (\r\n        \u003cThemeContext.Provider value={themeActions}\u003e\r\n            {children}\r\n        \u003c/ThemeContext.Provider\u003e\r\n    );\r\n};\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\ToastContext.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\ToastProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\UIThemeProvider.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":13,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":13,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect } from \u0027react\u0027;\r\n\r\ntype UITheme = \u0027light\u0027 | \u0027dark\u0027;\r\n\r\ninterface UIThemeContextType {\r\n    theme: UITheme;\r\n    toggleTheme: () =\u003e void;\r\n    setTheme: (theme: UITheme) =\u003e void;\r\n}\r\n\r\nconst UIThemeContext = createContext\u003cUIThemeContextType | undefined\u003e(undefined);\r\n\r\nexport const useUITheme = () =\u003e {\r\n    const context = useContext(UIThemeContext);\r\n    if (!context) {\r\n        throw new Error(\u0027useUITheme must be used within UIThemeProvider\u0027);\r\n    }\r\n    return context;\r\n};\r\n\r\nexport const UIThemeProvider: React.FC\u003c{ children: React.ReactNode }\u003e = ({ children }) =\u003e {\r\n    const [theme, setThemeState] = useState\u003cUITheme\u003e(() =\u003e {\r\n        // Check localStorage first\r\n        const saved = localStorage.getItem(\u0027ui_theme\u0027);\r\n        if (saved === \u0027light\u0027 || saved === \u0027dark\u0027) {\r\n            return saved;\r\n        }\r\n\r\n        // Check system preference\r\n        if (window.matchMedia \u0026\u0026 window.matchMedia(\u0027(prefers-color-scheme: light)\u0027).matches) {\r\n            return \u0027light\u0027;\r\n        }\r\n\r\n        return \u0027dark\u0027; // Default\r\n    });\r\n\r\n    useEffect(() =\u003e {\r\n        // Apply theme to document\r\n        document.documentElement.setAttribute(\u0027data-theme\u0027, theme);\r\n\r\n        // Apply Tailwind dark class\r\n        if (theme === \u0027dark\u0027) {\r\n            document.documentElement.classList.add(\u0027dark\u0027);\r\n        } else {\r\n            document.documentElement.classList.remove(\u0027dark\u0027);\r\n        }\r\n\r\n        // Save to localStorage\r\n        localStorage.setItem(\u0027ui_theme\u0027, theme);\r\n    }, [theme]);\r\n\r\n    const setTheme = (newTheme: UITheme) =\u003e {\r\n        setThemeState(newTheme);\r\n    };\r\n\r\n    const toggleTheme = () =\u003e {\r\n        setThemeState(prev =\u003e prev === \u0027dark\u0027 ? \u0027light\u0027 : \u0027dark\u0027);\r\n    };\r\n\r\n    return (\r\n        \u003cUIThemeContext.Provider value={{ theme, toggleTheme, setTheme }}\u003e\r\n            {children}\r\n        \u003c/UIThemeContext.Provider\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\useAppContext.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\useAudio.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\useAuth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\useConfirm.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\context\\useGamification.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\analytics\\AnalyticsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\analytics\\components\\AchievementsList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\analytics\\components\\CategoryDistributionChart.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027format\u0027 is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027eachDayOfInterval\u0027 is defined but never used.","line":3,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027subWeeks\u0027 is defined but never used.","line":3,"column":37,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":45}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \u0027react\u0027;\r\nimport { PieChart, Pie, Cell, ResponsiveContainer, Tooltip, Legend } from \u0027recharts\u0027;\r\nimport { format, eachDayOfInterval, subWeeks } from \u0027date-fns\u0027;\r\nimport type { Theme, Task, Goal } from \u0027../../../types\u0027;\r\n\r\ninterface CategoryDistributionChartProps {\r\n    themes: Theme[];\r\n    tasks: Task[];\r\n    goals: Goal[];\r\n}\r\n\r\nexport const CategoryDistributionChart: React.FC\u003cCategoryDistributionChartProps\u003e = ({ themes, tasks, goals }) =\u003e {\r\n    // Process categories\r\n    const categories: Record\u003cstring, number\u003e = {};\r\n\r\n    // From Themes/Subthemes\r\n    themes.forEach(theme =\u003e {\r\n        const cat = theme.category || \u0027Estudos\u0027;\r\n        const minutes = theme.subthemes.reduce((acc, st) =\u003e acc + (st.timeSpent || 0), 0);\r\n        categories[cat] = (categories[cat] || 0) + minutes;\r\n    });\r\n\r\n    // From Tasks\r\n    tasks.forEach(task =\u003e {\r\n        const cat = \u0027Tarefas\u0027;\r\n        categories[cat] = (categories[cat] || 0) + (task.timeSpent || 0);\r\n    });\r\n\r\n    // From Goals\r\n    goals.forEach(goal =\u003e {\r\n        const cat = goal.category || \u0027Metas\u0027;\r\n        categories[cat] = (categories[cat] || 0) + (goal.timeSpent || 0);\r\n    });\r\n\r\n    const data = Object.entries(categories)\r\n        .filter(([, value]) =\u003e value \u003e 0)\r\n        .map(([name, value]) =\u003e ({ name, value }));\r\n\r\n    // Fallback if no data\r\n    if (data.length === 0) {\r\n        data.push({ name: \u0027Sem dados\u0027, value: 1 });\r\n    }\r\n\r\n    const COLORS = [\u0027#3b82f6\u0027, \u0027#8b5cf6\u0027, \u0027#ec4899\u0027, \u0027#f59e0b\u0027, \u0027#10b981\u0027, \u0027#6366f1\u0027];\r\n\r\n    return (\r\n        \u003cdiv className=\"bg-slate-900/40 border border-white/5 rounded-[2.5rem] p-8 backdrop-blur-xl relative overflow-hidden group h-full flex flex-col\"\u003e\r\n            \u003cdiv className=\"absolute top-0 right-0 w-64 h-64 bg-pink-500/5 rounded-full blur-3xl -mr-32 -mt-32 pointer-events-none\" /\u003e\r\n\r\n            \u003ch3 className=\"text-xl font-bold text-white mb-6 relative z-10 flex items-center gap-3\"\u003e\r\n                \u003cdiv className=\"p-2 rounded-lg bg-pink-500/10 text-pink-400 border border-pink-500/20\"\u003e\r\n                    \u003cspan className=\"w-1.5 h-1.5 rounded-full bg-pink-400\" /\u003e\r\n                \u003c/div\u003e\r\n                DistribuiÃ§Ã£o de Foco\r\n            \u003c/h3\u003e\r\n\r\n            \u003cdiv className=\"flex-1 min-h-[300px] relative z-10\"\u003e\r\n                \u003cResponsiveContainer width=\"100%\" height=\"100%\"\u003e\r\n                    \u003cPieChart\u003e\r\n                        \u003cPie\r\n                            data={data}\r\n                            innerRadius={80}\r\n                            outerRadius={100}\r\n                            paddingAngle={8}\r\n                            dataKey=\"value\"\r\n                            stroke=\"none\"\r\n                        \u003e\r\n                            {data.map((_, index) =\u003e (\r\n                                \u003cCell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} /\u003e\r\n                            ))}\r\n                        \u003c/Pie\u003e\r\n                        \u003cTooltip\r\n                            contentStyle={{\r\n                                backgroundColor: \u0027rgba(15, 23, 42, 0.9)\u0027,\r\n                                border: \u00271px solid rgba(255,255,255,0.1)\u0027,\r\n                                borderRadius: \u002716px\u0027,\r\n                                boxShadow: \u00270 10px 40px -10px rgba(0,0,0,0.5)\u0027,\r\n                                padding: \u002712px 16px\u0027,\r\n                                color: \u0027#f8fafc\u0027\r\n                            }}\r\n                            itemStyle={{ color: \u0027#e2e8f0\u0027, fontSize: \u002713px\u0027, fontWeight: \u0027bold\u0027 }}\r\n                            formatter={(value: number) =\u003e [`${value} min`, \u0027Tempo\u0027]}\r\n                        /\u003e\r\n                        \u003cLegend\r\n                            verticalAlign=\"bottom\"\r\n                            align=\"center\"\r\n                            iconType=\"circle\"\r\n                            formatter={(value) =\u003e \u003cspan className=\"text-slate-400 text-xs font-bold uppercase tracking-wider ml-1\"\u003e{value}\u003c/span\u003e}\r\n                        /\u003e\r\n                    \u003c/PieChart\u003e\r\n                \u003c/ResponsiveContainer\u003e\r\n            \u003c/div\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\analytics\\components\\DetailedStatsTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\analytics\\components\\HeatmapWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\analytics\\components\\RetentionChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\analytics\\components\\StatCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\analytics\\components\\WeeklyFocusChart.tsx","messages":[{"ruleId":"react-hooks/static-components","severity":2,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\analytics\\components\\WeeklyFocusChart.tsx:115:39\n  113 |                         /\u003e\n  114 |                         \u003cTooltip\n\u003e 115 |                             content={\u003cCustomTooltip /\u003e}\n      |                                       ^^^^^^^^^^^^^ This component is created during render\n  116 |                             cursor={{ fill: \u0027rgba(255,255,255,0.03)\u0027, radius: 8 }}\n  117 |                         /\u003e\n  118 |                         \u003cBar\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\analytics\\components\\WeeklyFocusChart.tsx:26:27\n  24 |     });\n  25 |\n\u003e 26 |     const CustomTooltip = ({ active, payload }: any) =\u003e {\n     |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\u003e 27 |         if (active \u0026\u0026 payload \u0026\u0026 payload.length) {\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\u003e 28 |             return (\n     â€¦\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\u003e 38 |         return null;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\u003e 39 |     };\n     | ^^^^^^ The component is created during render here\n  40 |\n  41 |     return (\n  42 |         \u003cdiv className=\"relative overflow-hidden bg-slate-900/40 border border-white/5 rounded-3xl p-6 backdrop-blur-xl hover:bg-slate-800/40 transition-colors group\"\u003e","line":115,"column":39,"nodeType":null,"endLine":115,"endColumn":52}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \u0027react\u0027;\r\nimport { BarChart, Bar, XAxis, YAxis, Tooltip, ResponsiveContainer, Cell } from \u0027recharts\u0027;\r\nimport { format, subDays } from \u0027date-fns\u0027;\r\nimport { ptBR } from \u0027date-fns/locale\u0027;\r\n\r\ninterface WeeklyFocusChartProps {\r\n    dailyHistory: Record\u003cstring, number\u003e; // date \"yyyy-MM-dd\": minutes\r\n}\r\n\r\nexport const WeeklyFocusChart: React.FC\u003cWeeklyFocusChartProps\u003e = ({ dailyHistory }) =\u003e {\r\n    // Generate last 7 days data\r\n    const today = format(new Date(), \u0027yyyy-MM-dd\u0027);\r\n    const data = Array.from({ length: 7 }).map((_, i) =\u003e {\r\n        const date = subDays(new Date(), 6 - i); // Last 7 days including today\r\n        const dateStr = format(date, \u0027yyyy-MM-dd\u0027);\r\n        const isToday = dateStr === today;\r\n        return {\r\n            name: format(date, \u0027EEE\u0027, { locale: ptBR }), // Mon, Tue...\r\n            fullDate: format(date, \"d \u0027de\u0027 MMMM\", { locale: ptBR }),\r\n            minutes: dailyHistory[dateStr] || 0,\r\n            originalDate: date,\r\n            isToday\r\n        };\r\n    });\r\n\r\n    const CustomTooltip = ({ active, payload }: any) =\u003e {\r\n        if (active \u0026\u0026 payload \u0026\u0026 payload.length) {\r\n            return (\r\n                \u003cdiv className=\"bg-slate-900/90 border border-slate-700 p-4 rounded-2xl shadow-2xl backdrop-blur-xl ring-1 ring-white/10\"\u003e\r\n                    \u003cp className=\"text-xs font-bold text-slate-400 mb-1 uppercase tracking-wider\"\u003e{payload[0].payload.fullDate}\u003c/p\u003e\r\n                    \u003cp className=\"text-2xl font-bold text-white tabular-nums\"\u003e\r\n                        {Math.floor(payload[0].value / 60)}\u003cspan className=\"text-sm font-medium text-slate-500 ml-0.5 mr-2\"\u003eh\u003c/span\u003e\r\n                        {payload[0].value % 60}\u003cspan className=\"text-sm font-medium text-slate-500 ml-0.5\"\u003em\u003c/span\u003e\r\n                    \u003c/p\u003e\r\n                \u003c/div\u003e\r\n            );\r\n        }\r\n        return null;\r\n    };\r\n\r\n    return (\r\n        \u003cdiv className=\"relative overflow-hidden bg-slate-900/40 border border-white/5 rounded-3xl p-6 backdrop-blur-xl hover:bg-slate-800/40 transition-colors group\"\u003e\r\n            {/* Ambient Background */}\r\n            \u003cdiv className=\"absolute top-0 right-0 w-64 h-64 bg-blue-500/5 rounded-full blur-3xl -mr-32 -mt-32 pointer-events-none\" /\u003e\r\n\r\n            \u003cdiv className=\"flex items-center justify-between mb-8 relative z-10\"\u003e\r\n                \u003cdiv\u003e\r\n                    \u003ch3 className=\"text-lg font-bold text-white flex items-center gap-3\"\u003e\r\n                        \u003cdiv className=\"p-2 rounded-lg bg-blue-500/10 text-blue-400 ring-1 ring-blue-500/20\"\u003e\r\n                            \u003cspan className=\"w-1.5 h-1.5 rounded-full bg-blue-400 animate-pulse\" /\u003e\r\n                        \u003c/div\u003e\r\n                        Foco nos Ãšltimos 7 Dias\r\n                    \u003c/h3\u003e\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n\r\n            \u003cdiv className=\"h-72 w-full relative z-10\"\u003e\r\n                \u003cResponsiveContainer width=\"100%\" height=\"100%\"\u003e\r\n                    \u003cBarChart data={data} margin={{ top: 10, right: 10, left: -20, bottom: 0 }}\u003e\r\n                        \u003cdefs\u003e\r\n                            \u003clinearGradient id=\"barGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\"\u003e\r\n                                \u003cstop offset=\"0%\" stopColor=\"#3b82f6\" stopOpacity={0.8} /\u003e\r\n                                \u003cstop offset=\"100%\" stopColor=\"#3b82f6\" stopOpacity={0.2} /\u003e\r\n                            \u003c/linearGradient\u003e\r\n                            \u003clinearGradient id=\"barGradientHover\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\"\u003e\r\n                                \u003cstop offset=\"0%\" stopColor=\"#60a5fa\" stopOpacity={1} /\u003e\r\n                                \u003cstop offset=\"100%\" stopColor=\"#3b82f6\" stopOpacity={0.4} /\u003e\r\n                            \u003c/linearGradient\u003e\r\n                        \u003c/defs\u003e\r\n                        \u003cXAxis\r\n                            dataKey=\"name\"\r\n                            axisLine={false}\r\n                            tickLine={false}\r\n                            tick={(props) =\u003e {\r\n                                const { x, y, payload, index } = props;\r\n                                const entry = data[index];\r\n                                return (\r\n                                    \u003cg transform={`translate(${x},${y})`}\u003e\r\n                                        \u003ctext\r\n                                            x={0}\r\n                                            y={0}\r\n                                            dy={-10}\r\n                                            textAnchor=\"middle\"\r\n                                            fill={entry?.isToday ? \u0027#60a5fa\u0027 : \u0027#e2e8f0\u0027}\r\n                                            fontSize={14}\r\n                                            fontWeight={entry?.isToday ? 700 : 600}\r\n                                        \u003e\r\n                                            {payload.value}\r\n                                        \u003c/text\u003e\r\n                                        {entry?.isToday \u0026\u0026 (\r\n                                            \u003ctext\r\n                                                x={0}\r\n                                                y={0}\r\n                                                dy={8}\r\n                                                textAnchor=\"middle\"\r\n                                                fill=\"#60a5fa\"\r\n                                                fontSize={10}\r\n                                                fontWeight={700}\r\n                                            \u003e\r\n                                                HOJE\r\n                                            \u003c/text\u003e\r\n                                        )}\r\n                                    \u003c/g\u003e\r\n                                );\r\n                            }}\r\n                        /\u003e\r\n                        \u003cYAxis\r\n                            hide={false}\r\n                            axisLine={false}\r\n                            tickLine={false}\r\n                            tick={{ fill: \u0027#475569\u0027, fontSize: 11, fontWeight: 500 }}\r\n                            tickFormatter={(value) =\u003e `${Math.floor(value / 60)}h`}\r\n                        /\u003e\r\n                        \u003cTooltip\r\n                            content={\u003cCustomTooltip /\u003e}\r\n                            cursor={{ fill: \u0027rgba(255,255,255,0.03)\u0027, radius: 8 }}\r\n                        /\u003e\r\n                        \u003cBar\r\n                            dataKey=\"minutes\"\r\n                            radius={[8, 8, 8, 8]}\r\n                            className=\"transition-all duration-300\"\r\n                        \u003e\r\n                            {data.map((entry, index) =\u003e (\r\n                                \u003cCell\r\n                                    key={`cell-${index}`}\r\n                                    fill={entry.isToday ? \"url(#barGradientHover)\" : \"url(#barGradient)\"}\r\n                                    className=\"hover:opacity-100 opacity-80 transition-all cursor-pointer hover:filter hover:drop-shadow-[0_0_10px_rgba(59,130,246,0.5)]\"\r\n                                /\u003e\r\n                            ))}\r\n                        \u003c/Bar\u003e\r\n                    \u003c/BarChart\u003e\r\n                \u003c/ResponsiveContainer\u003e\r\n            \u003c/div\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\analytics\\components\\XPProgressionChart.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027LineChart\u0027 is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Line\u0027 is defined but never used.","line":2,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027maxXP\u0027 is assigned a value but never used.","line":68,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":68,"endColumn":16},{"ruleId":"react-hooks/static-components","severity":2,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\analytics\\components\\XPProgressionChart.tsx:116:40\n  114 |                         tickFormatter={(value) =\u003e `${(value / 1000).toFixed(0)}k`}\n  115 |                     /\u003e\n\u003e 116 |                     \u003cTooltip content={\u003cCustomTooltip /\u003e} /\u003e\n      |                                        ^^^^^^^^^^^^^ This component is created during render\n  117 |                     \u003cArea\n  118 |                         type=\"monotone\"\n  119 |                         dataKey=\"xp\"\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\analytics\\components\\XPProgressionChart.tsx:54:27\n  52 |     }, [dailyHistory]);\n  53 |\n\u003e 54 |     const CustomTooltip = ({ active, payload }: any) =\u003e {\n     |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\u003e 55 |         if (active \u0026\u0026 payload \u0026\u0026 payload.length) {\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\u003e 56 |             return (\n     â€¦\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\u003e 65 |         return null;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\u003e 66 |     };\n     | ^^^^^^ The component is created during render here\n  67 |\n  68 |     const maxXP = Math.max(...chartData.map(d =\u003e d.xp), currentXP);\n  69 |     const growthRate = chartData.length \u003e 1","line":116,"column":40,"nodeType":null,"endLine":116,"endColumn":53}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo } from \u0027react\u0027;\r\nimport { LineChart, Line, XAxis, YAxis, Tooltip, ResponsiveContainer, CartesianGrid, Area, AreaChart } from \u0027recharts\u0027;\r\nimport { TrendingUp } from \u0027lucide-react\u0027;\r\nimport { format } from \u0027date-fns\u0027;\r\nimport { ptBR } from \u0027date-fns/locale\u0027;\r\n\r\ninterface XPProgressionChartProps {\r\n    dailyHistory: Record\u003cstring, number\u003e;\r\n    currentXP: number;\r\n    currentLevel: number;\r\n}\r\n\r\nexport const XPProgressionChart: React.FC\u003cXPProgressionChartProps\u003e = ({ dailyHistory, currentXP, currentLevel }) =\u003e {\r\n    const chartData = useMemo(() =\u003e {\r\n        // Get last 30 days\r\n        const data: { date: string; xp: number; displayDate: string }[] = [];\r\n        const today = new Date();\r\n        let cumulativeXP = 0;\r\n\r\n        // Sort dates to accumulate XP correctly\r\n        const sortedDates = Object.keys(dailyHistory).sort();\r\n\r\n        // Get only last 30 entries\r\n        const last30Dates = sortedDates.slice(-30);\r\n\r\n        last30Dates.forEach(dateStr =\u003e {\r\n            const minutes = dailyHistory[dateStr] || 0;\r\n            // XP calculation: 10 XP per focused minute\r\n            const dailyXP = minutes * 10;\r\n            cumulativeXP += dailyXP;\r\n\r\n            data.push({\r\n                date: dateStr,\r\n                xp: cumulativeXP,\r\n                displayDate: format(new Date(dateStr), \"d \u0027de\u0027 MMM\", { locale: ptBR })\r\n            });\r\n        });\r\n\r\n        // If we don\u0027t have 30 days of data, fill backwards\r\n        const daysToFill = 30 - data.length;\r\n        for (let i = daysToFill; i \u003e 0; i--) {\r\n            const date = new Date(today);\r\n            date.setDate(date.getDate() - (30 - i));\r\n            data.unshift({\r\n                date: format(date, \u0027yyyy-MM-dd\u0027),\r\n                xp: 0,\r\n                displayDate: format(date, \"d \u0027de\u0027 MMM\", { locale: ptBR })\r\n            });\r\n        }\r\n\r\n        return data;\r\n    }, [dailyHistory]);\r\n\r\n    const CustomTooltip = ({ active, payload }: any) =\u003e {\r\n        if (active \u0026\u0026 payload \u0026\u0026 payload.length) {\r\n            return (\r\n                \u003cdiv className=\"bg-slate-900/95 border border-slate-700 rounded-lg p-3 backdrop-blur-sm shadow-xl\"\u003e\r\n                    \u003cp className=\"text-white font-bold text-sm mb-1\"\u003e{payload[0].payload.displayDate}\u003c/p\u003e\r\n                    \u003cp className=\"text-blue-400 font-black text-lg\"\u003e\r\n                        {payload[0].value.toLocaleString()} XP\r\n                    \u003c/p\u003e\r\n                \u003c/div\u003e\r\n            );\r\n        }\r\n        return null;\r\n    };\r\n\r\n    const maxXP = Math.max(...chartData.map(d =\u003e d.xp), currentXP);\r\n    const growthRate = chartData.length \u003e 1\r\n        ? ((chartData[chartData.length - 1].xp - chartData[0].xp) / Math.max(chartData[0].xp, 1) * 100).toFixed(1)\r\n        : \u00270\u0027;\r\n\r\n    return (\r\n        \u003cdiv className=\"bg-white/5 border border-white/5 rounded-2xl p-6 backdrop-blur-sm\"\u003e\r\n            \u003cdiv className=\"flex items-start justify-between mb-6\"\u003e\r\n                \u003cdiv\u003e\r\n                    \u003ch3 className=\"text-lg font-bold text-white flex items-center gap-2\"\u003e\r\n                        \u003cspan className=\"w-1 h-6 bg-blue-500 rounded-full\" /\u003e\r\n                        EvoluÃ§Ã£o de XP (Ãšltimos 30 Dias)\r\n                    \u003c/h3\u003e\r\n                    \u003cp className=\"text-sm text-slate-400 mt-1 ml-4\"\u003e\r\n                        Crescimento total: {currentXP.toLocaleString()} XP\r\n                    \u003c/p\u003e\r\n                \u003c/div\u003e\r\n                \u003cdiv className=\"bg-blue-500/10 border border-blue-500/20 rounded-xl px-4 py-2\"\u003e\r\n                    \u003cdiv className=\"flex items-center gap-2\"\u003e\r\n                        \u003cTrendingUp className=\"w-4 h-4 text-blue-400\" /\u003e\r\n                        \u003cspan className=\"text-blue-400 font-bold\"\u003e+{growthRate}%\u003c/span\u003e\r\n                    \u003c/div\u003e\r\n                    \u003cp className=\"text-xs text-slate-500 mt-0.5\"\u003eÃºltimos 30 dias\u003c/p\u003e\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n\r\n            \u003cResponsiveContainer width=\"100%\" height={300}\u003e\r\n                \u003cAreaChart data={chartData} margin={{ top: 10, right: 10, left: 0, bottom: 0 }}\u003e\r\n                    \u003cdefs\u003e\r\n                        \u003clinearGradient id=\"xpGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\"\u003e\r\n                            \u003cstop offset=\"5%\" stopColor=\"#3b82f6\" stopOpacity={0.3} /\u003e\r\n                            \u003cstop offset=\"95%\" stopColor=\"#3b82f6\" stopOpacity={0} /\u003e\r\n                        \u003c/linearGradient\u003e\r\n                    \u003c/defs\u003e\r\n                    \u003cCartesianGrid strokeDasharray=\"3 3\" stroke=\"#334155\" opacity={0.2} /\u003e\r\n                    \u003cXAxis\r\n                        dataKey=\"displayDate\"\r\n                        stroke=\"#64748b\"\r\n                        tick={{ fill: \u0027#64748b\u0027, fontSize: 12 }}\r\n                        tickLine={false}\r\n                        interval=\"preserveStartEnd\"\r\n                    /\u003e\r\n                    \u003cYAxis\r\n                        stroke=\"#64748b\"\r\n                        tick={{ fill: \u0027#64748b\u0027, fontSize: 12 }}\r\n                        tickLine={false}\r\n                        tickFormatter={(value) =\u003e `${(value / 1000).toFixed(0)}k`}\r\n                    /\u003e\r\n                    \u003cTooltip content={\u003cCustomTooltip /\u003e} /\u003e\r\n                    \u003cArea\r\n                        type=\"monotone\"\r\n                        dataKey=\"xp\"\r\n                        stroke=\"#3b82f6\"\r\n                        strokeWidth={3}\r\n                        fill=\"url(#xpGradient)\"\r\n                        dot={{ fill: \u0027#3b82f6\u0027, r: 4, strokeWidth: 2, stroke: \u0027#1e40af\u0027 }}\r\n                        activeDot={{ r: 6, strokeWidth: 2 }}\r\n                    /\u003e\r\n                \u003c/AreaChart\u003e\r\n            \u003c/ResponsiveContainer\u003e\r\n\r\n            {/* Level Indicator */}\r\n            \u003cdiv className=\"mt-4 flex items-center gap-3\"\u003e\r\n                \u003cdiv className=\"flex-1 h-2 bg-slate-800 rounded-full overflow-hidden\"\u003e\r\n                    \u003cdiv\r\n                        className=\"h-full bg-gradient-to-r from-blue-500 to-purple-500 rounded-full transition-all duration-500\"\r\n                        style={{ width: `${Math.min((currentXP % 1000) / 10, 100)}%` }}\r\n                    /\u003e\r\n                \u003c/div\u003e\r\n                \u003cspan className=\"text-sm font-bold text-slate-400\"\u003e\r\n                    NÃ­vel {currentLevel}\r\n                \u003c/span\u003e\r\n            \u003c/div\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\auth\\LoginPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\auth\\components\\ForgotPasswordModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\calendar\\Calendar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027ChevronLeft\u0027 is defined but never used.","line":3,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027ChevronRight\u0027 is defined but never used.","line":4,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Clock\u0027 is defined but never used.","line":6,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027isSameMonth\u0027 is defined but never used.","line":16,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027isSameDay\u0027 is defined but never used.","line":19,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027toggleTask\u0027 is assigned a value but never used.","line":50,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":50,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027toggleGoal\u0027 is assigned a value but never used.","line":51,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":51,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027toggleGoalItem\u0027 is assigned a value but never used.","line":52,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":52,"endColumn":23}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useMemo } from \u0027react\u0027;\r\nimport {\r\n    ChevronLeft,\r\n    ChevronRight,\r\n    PlayCircle,\r\n    Clock,\r\n    Loader2\r\n} from \u0027lucide-react\u0027;\r\nimport {\r\n    format,\r\n    addMonths,\r\n    subMonths,\r\n    startOfMonth,\r\n    endOfMonth,\r\n    eachDayOfInterval,\r\n    isSameMonth,\r\n    isToday,\r\n    addDays,\r\n    isSameDay\r\n} from \u0027date-fns\u0027;\r\nimport { ptBR } from \u0027date-fns/locale\u0027;\r\nimport { useStudy } from \u0027../../context/StudyContext\u0027;\r\nimport { usePomodoroContext } from \u0027../../context/PomodoroContext\u0027;\r\nimport { useCalendarEvents } from \u0027./hooks/useCalendarEvents\u0027;\r\nimport { CalendarHeader } from \u0027./components/CalendarHeader\u0027;\r\nimport { CalendarGrid } from \u0027./components/CalendarGrid\u0027;\r\nimport { CalendarDay } from \u0027./components/CalendarDay\u0027;\r\nimport { DayDetails } from \u0027./components/DayDetails\u0027;\r\nimport { Modal } from \u0027../../components/ui/Modal\u0027;\r\nimport { UpcomingReviewsSidebar } from \u0027./components/UpcomingReviewsSidebar\u0027;\r\nimport { cn } from \u0027../../lib/utils\u0027;\r\nimport { parseLocalDate } from \u0027../../utils/dateHelpers\u0027;\r\nimport type { Review } from \u0027../../types\u0027;\r\n\r\nimport { useProjectContext } from \u0027../../context/ProjectProvider\u0027;\r\n\r\nexport const Calendar = () =\u003e {\r\n    const [currentMonth, setCurrentMonth] = useState(new Date());\r\n    const [selectedDate, setSelectedDate] = useState\u003cDate | null\u003e(null);\r\n    const { projects } = useProjectContext(); // Get projects\r\n    const {\r\n        themes,\r\n        tasks,\r\n        goals,\r\n        completeReview,\r\n        startStudySession,\r\n        activeFocus,\r\n        endFocus,\r\n        startFocus,\r\n        toggleTask,\r\n        toggleGoal,\r\n        toggleGoalItem,\r\n        deleteGoal,\r\n        deleteTask\r\n    } = useStudy();\r\n\r\n    const { startFocusSession, resetTimer } = usePomodoroContext();\r\n    const { getEventsForDay, upcomingList, now } = useCalendarEvents({ themes, tasks, goals, projects }); // Pass projects\r\n\r\n    const calendarDays = useMemo(() =\u003e {\r\n        const start = startOfMonth(currentMonth);\r\n        const end = endOfMonth(currentMonth);\r\n        return eachDayOfInterval({ start, end });\r\n    }, [currentMonth]);\r\n\r\n    const nextMonth = () =\u003e setCurrentMonth(addMonths(currentMonth, 1));\r\n    const prevMonth = () =\u003e setCurrentMonth(subMonths(currentMonth, 1));\r\n\r\n\r\n    const [selectedSubthemeSchedule, setSelectedSubthemeSchedule] = useState\u003c{\r\n        subthemeTitle: string;\r\n        themeTitle: string;\r\n        schedule: (Review | { number: number; date: string; status: \u0027simulated\u0027 })[];\r\n        introDate: string;\r\n        type: string;\r\n        id: string;\r\n        color?: string;\r\n    } | null\u003e(null);\r\n\r\n    const handleSubthemeClick = (e: React.MouseEvent, item: any, isProjected: boolean, date: Date) =\u003e {\r\n        e.stopPropagation();\r\n\r\n        let schedule: (Review | { number: number; date: string; status: \u0027simulated\u0027 })[] = [];\r\n        let introDate = \u0027\u0027;\r\n\r\n        if (isProjected) {\r\n            const baseDate = item.introDate ? parseLocalDate(item.introDate) : new Date(date);\r\n            introDate = format(baseDate, \"d/MM\");\r\n            const offsets = [1, 3, 10, 18, 33];\r\n            schedule = offsets.map((off, i) =\u003e ({\r\n                number: i + 1,\r\n                date: format(addDays(baseDate, off), \u0027yyyy-MM-dd\u0027),\r\n                status: \u0027simulated\u0027\r\n            }));\r\n        } else {\r\n            const theme = themes.find(t =\u003e t.title === item.themeTitle);\r\n            const subtheme = theme?.subthemes.find(st =\u003e st.title === item.subthemeTitle);\r\n            if (subtheme \u0026\u0026 subtheme.reviews) {\r\n                schedule = subtheme.reviews;\r\n                introDate = subtheme.introductionDate || \u0027\u0027;\r\n            }\r\n        }\r\n\r\n        setSelectedSubthemeSchedule({\r\n            ...item,\r\n            schedule,\r\n            introDate,\r\n            type: isProjected ? \u0027projected\u0027 : \u0027active\u0027\r\n        });\r\n    };\r\n\r\n    const handleStartFocus = (item: any) =\u003e {\r\n        const todayStr = format(new Date(), \u0027yyyy-MM-dd\u0027);\r\n        if (item.date \u003e todayStr) return;\r\n\r\n        startFocus(item.id, \u0027subtheme\u0027, item.subthemeTitle, 25);\r\n        startFocusSession(item.id, 25);\r\n    };\r\n\r\n    return (\r\n        \u003cdiv className=\"space-y-8 relative pb-20 fade-in\"\u003e\r\n            \u003cdiv className=\"fixed top-20 left-1/4 w-96 h-96 bg-blue-600/10 rounded-full blur-[128px] pointer-events-none -z-10\" /\u003e\r\n            \u003cdiv className=\"fixed bottom-20 right-1/4 w-96 h-96 bg-indigo-600/10 rounded-full blur-[128px] pointer-events-none -z-10\" /\u003e\r\n\r\n            \u003cCalendarHeader\r\n                currentMonth={currentMonth}\r\n                onPrevMonth={prevMonth}\r\n                onNextMonth={nextMonth}\r\n                onToday={() =\u003e setCurrentMonth(new Date())}\r\n            /\u003e\r\n\r\n            \u003cdiv className=\"grid grid-cols-1 lg:grid-cols-4 gap-8\"\u003e\r\n                \u003cdiv className=\"lg:col-span-3\"\u003e\r\n                    \u003cCalendarGrid\u003e\r\n                        {calendarDays.map((day) =\u003e (\r\n                            \u003cCalendarDay\r\n                                key={day.toString()}\r\n                                day={day}\r\n                                currentMonth={currentMonth}\r\n                                events={getEventsForDay(day)}\r\n                                onClick={() =\u003e {\r\n                                    const d = new Date(day);\r\n                                    d.setHours(12, 0, 0, 0);\r\n                                    setSelectedDate(d);\r\n                                }}\r\n                                onEventClick={(e, item, isProjected) =\u003e handleSubthemeClick(e, item, isProjected, day)}\r\n                            /\u003e\r\n                        ))}\r\n                    \u003c/CalendarGrid\u003e\r\n                \u003c/div\u003e\r\n\r\n                \u003cUpcomingReviewsSidebar\r\n                    upcomingList={upcomingList}\r\n                    now={now}\r\n                    activeFocus={activeFocus}\r\n                    onStartFocus={handleStartFocus}\r\n                /\u003e\r\n            \u003c/div\u003e\r\n\r\n            \u003cModal\r\n                isOpen={!!selectedDate}\r\n                onClose={() =\u003e setSelectedDate(null)}\r\n                title={selectedDate ? format(selectedDate, \"EEEE, d \u0027de\u0027 MMMM\", { locale: ptBR }) : \u0027\u0027}\r\n            \u003e\r\n                {selectedDate \u0026\u0026 (\r\n                    \u003cDayDetails\r\n                        key={selectedDate.toISOString()}\r\n                        date={selectedDate}\r\n                        events={getEventsForDay(selectedDate)}\r\n                        onCompleteReview={completeReview}\r\n                        onStartStudy={(id: string) =\u003e {\r\n                            const dayEvents = getEventsForDay(selectedDate);\r\n                            const review = dayEvents.reviews.find((r: any) =\u003e r.id === id);\r\n                            if (review) startStudySession(review.id);\r\n                        }}\r\n                        onDeleteGoal={deleteGoal}\r\n                        onDeleteTask={deleteTask}\r\n                    /\u003e\r\n                )}\r\n            \u003c/Modal\u003e\r\n\r\n            \u003cModal\r\n                isOpen={!!selectedSubthemeSchedule}\r\n                onClose={() =\u003e setSelectedSubthemeSchedule(null)}\r\n                title={selectedSubthemeSchedule?.subthemeTitle || \u0027Cronograma\u0027}\r\n            \u003e\r\n                {selectedSubthemeSchedule \u0026\u0026 (\r\n                    \u003cdiv className=\"space-y-6\"\u003e\r\n                        \u003cdiv className=\"relative overflow-hidden rounded-2xl bg-slate-900 border border-slate-800 p-6\"\u003e\r\n                            \u003cdiv className=\"absolute top-0 right-0 w-32 h-32 bg-blue-500/10 rounded-full blur-2xl -translate-y-1/2 translate-x-1/2 pointer-events-none\" /\u003e\r\n\r\n                            \u003cdiv className=\"flex items-center gap-3 mb-6 relative z-10\"\u003e\r\n                                \u003cdiv className={cn(\r\n                                    \"px-3 py-1 rounded-lg text-xs font-bold uppercase tracking-wider shadow-lg\",\r\n                                    selectedSubthemeSchedule.type.includes(\u0027projected\u0027)\r\n                                        ? \"bg-amber-500/10 text-amber-400 border border-amber-500/20\"\r\n                                        : \"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20\"\r\n                                )}\u003e\r\n                                    {selectedSubthemeSchedule.type.includes(\u0027projected\u0027) ? \u0027SimulaÃ§Ã£o\u0027 : \u0027Ativo\u0027}\r\n                                \u003c/div\u003e\r\n                                \u003cspan className=\"text-slate-400 text-sm font-medium\"\u003e{selectedSubthemeSchedule.themeTitle}\u003c/span\u003e\r\n                            \u003c/div\u003e\r\n\r\n                            \u003ch3 className=\"text-sm font-bold text-white mb-4 flex items-center gap-2\"\u003e\r\n                                \u003cPlayCircle className=\"w-4 h-4 text-blue-400\" /\u003e\r\n                                PrÃ³ximas RevisÃµes (SRS)\r\n                            \u003c/h3\u003e\r\n\r\n                            \u003cdiv className=\"space-y-2 relative z-10\"\u003e\r\n                                {selectedSubthemeSchedule.schedule.map((rev: Review | { number: number; date: string; status: \u0027simulated\u0027 | \u0027pending\u0027 | \u0027completed\u0027 }, idx: number) =\u003e (\r\n                                    \u003cdiv key={idx} className=\"group flex justify-between items-center p-3 bg-black/20 hover:bg-black/40 rounded-xl border border-white/5 hover:border-white/10 transition-all\"\u003e\r\n                                        \u003cdiv className=\"flex items-center gap-4\"\u003e\r\n                                            \u003cdiv className=\"w-8 h-8 rounded-lg bg-slate-800 flex items-center justify-center text-xs font-bold text-slate-400 border border-white/5 group-hover:border-white/10 group-hover:text-white transition-colors\"\u003e\r\n                                                \u003cspan\u003e#{rev.number}\u003c/span\u003e\r\n                                            \u003c/div\u003e\r\n                                            \u003cdiv className=\"flex flex-col\"\u003e\r\n                                                \u003cspan className={cn(\r\n                                                    \"text-sm font-medium\",\r\n                                                    rev.status === \u0027completed\u0027 ? \"text-slate-500 line-through decoration-slate-700\" : \"text-slate-200\"\r\n                                                )}\u003e\r\n                                                    {format(parseLocalDate(rev.date), \"d \u0027de\u0027 MMMM\", { locale: ptBR })}\r\n                                                \u003c/span\u003e\r\n                                                {rev.status === \u0027pending\u0027 \u0026\u0026 !selectedSubthemeSchedule.type.includes(\u0027projected\u0027) \u0026\u0026 (() =\u003e {\r\n                                                    const today = new Date();\r\n                                                    today.setHours(0, 0, 0, 0);\r\n                                                    const revDate = parseLocalDate(rev.date);\r\n\r\n                                                    const isTodayDate = revDate.getTime() === today.getTime();\r\n                                                    const isOverdue = revDate \u003c today;\r\n\r\n                                                    if (isTodayDate) {\r\n                                                        return (\r\n                                                            \u003cspan className=\"text-[10px] text-rose-400 flex items-center gap-1 animate-pulse\"\u003e\r\n                                                                \u003cdiv className=\"w-1.5 h-1.5 rounded-full bg-rose-500\" /\u003e\r\n                                                                Em andamento\r\n                                                            \u003c/span\u003e\r\n                                                        );\r\n                                                    }\r\n\r\n                                                    if (isOverdue) {\r\n                                                        return (\r\n                                                            \u003cspan className=\"text-[10px] text-red-500 flex items-center gap-1 font-bold\"\u003e\r\n                                                                \u003cdiv className=\"w-1.5 h-1.5 rounded-full bg-red-500\" /\u003e\r\n                                                                Atrasado\r\n                                                            \u003c/span\u003e\r\n                                                        );\r\n                                                    }\r\n\r\n                                                    return null;\r\n                                                })()}\r\n                                                {rev.status === \u0027completed\u0027 \u0026\u0026 (\r\n                                                    \u003cspan className=\"text-[10px] text-emerald-400 font-medium\"\u003eConcluÃ­do\u003c/span\u003e\r\n                                                )}\r\n                                            \u003c/div\u003e\r\n                                        \u003c/div\u003e\r\n\r\n                                        \u003cdiv className=\"flex items-center gap-2\"\u003e\r\n                                            {rev.status === \u0027pending\u0027 \u0026\u0026 !selectedSubthemeSchedule.type.includes(\u0027projected\u0027) \u0026\u0026 (\r\n                                                activeFocus?.id === selectedSubthemeSchedule.id \u0026\u0026 isToday(parseLocalDate(rev.date)) ? (\r\n                                                    \u003cbutton\r\n                                                        onClick={() =\u003e {\r\n                                                            if (confirm(\u0027Cancelar o foco?\u0027)) {\r\n                                                                endFocus(false);\r\n                                                                resetTimer();\r\n                                                            }\r\n                                                        }}\r\n                                                        className=\"flex items-center gap-2 text-xs bg-rose-500/10 hover:bg-rose-500/20 text-rose-400 px-3 py-1.5 rounded-lg border border-rose-500/20 transition-all\"\r\n                                                    \u003e\r\n                                                        \u003cLoader2 className=\"w-3 h-3 animate-spin\" /\u003e\r\n                                                        \u003cspan className=\"font-bold\"\u003eFocando\u003c/span\u003e\r\n                                                    \u003c/button\u003e\r\n                                                ) : (\r\n                                                    isToday(parseLocalDate(rev.date)) ? (\r\n                                                        \u003cbutton\r\n                                                            onClick={() =\u003e {\r\n                                                                if (activeFocus) return;\r\n                                                                startFocus(selectedSubthemeSchedule.id, \u0027subtheme\u0027, selectedSubthemeSchedule.subthemeTitle, 25);\r\n                                                                startFocusSession(selectedSubthemeSchedule.id, 25);\r\n                                                            }}\r\n                                                            disabled={!!activeFocus}\r\n                                                            className={cn(\r\n                                                                \"flex items-center gap-2 text-xs px-3 py-1.5 rounded-lg border transition-all shadow-lg active:scale-95\",\r\n                                                                activeFocus\r\n                                                                    ? \"opacity-50 cursor-not-allowed border-slate-700 text-slate-600 bg-transparent\"\r\n                                                                    : \"bg-blue-600 hover:bg-blue-500 text-white border-blue-500 hover:border-blue-400 shadow-blue-500/20\"\r\n                                                            )}\r\n                                                        \u003e\r\n                                                            \u003cPlayCircle className=\"w-3.5 h-3.5\" /\u003e\r\n                                                            \u003cspan className=\"font-bold\"\u003eIniciar\u003c/span\u003e\r\n                                                        \u003c/button\u003e\r\n                                                    ) : (\r\n                                                        (() =\u003e {\r\n                                                            const today = new Date();\r\n                                                            today.setHours(0, 0, 0, 0);\r\n                                                            const revDate = parseLocalDate(rev.date);\r\n                                                            const isOverdue = rev.status === \u0027pending\u0027 \u0026\u0026 revDate \u003c today;\r\n\r\n                                                            return (\r\n                                                                \u003cspan className={cn(\r\n                                                                    \"text-[10px] font-medium px-2 py-1 rounded border opacity-80\",\r\n                                                                    isOverdue\r\n                                                                        ? \"text-red-400 bg-red-500/10 border-red-500/20 animate-pulse\"\r\n                                                                        : \"text-slate-500 bg-slate-800/50 border-white/5\"\r\n                                                                )}\u003e\r\n                                                                    {isOverdue ? \u0027Atrasado\u0027 : \u0027Agendado\u0027}\r\n                                                                \u003c/span\u003e\r\n                                                            );\r\n                                                        })()\r\n                                                    )\r\n                                                )\r\n                                            )}\r\n                                            \u003cdiv className={cn(\r\n                                                \"w-2 h-2 rounded-full ml-2\",\r\n                                                rev.status === \u0027completed\u0027 ? \"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]\" : \"bg-slate-700\"\r\n                                            )} /\u003e\r\n                                        \u003c/div\u003e\r\n                                    \u003c/div\u003e\r\n                                ))}\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n\r\n                        {selectedSubthemeSchedule.type.includes(\u0027projected\u0027) \u0026\u0026 (\r\n                            \u003cp className=\"text-xs text-slate-500 text-center bg-slate-900/50 py-2 rounded-lg border border-white/5\"\u003e\r\n                                \u003cspan className=\"text-amber-500/80 mr-1\"\u003e*\u003c/span\u003e\r\n                                Datas simuladas com inÃ­cio em \u003cspan className=\"text-slate-300 font-medium\"\u003e{selectedSubthemeSchedule.introDate}\u003c/span\u003e\r\n                            \u003c/p\u003e\r\n                        )}\r\n                    \u003c/div\u003e\r\n                )}\r\n            \u003c/Modal\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\calendar\\components\\CalendarDay.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\calendar\\components\\CalendarEventItem.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Flag\u0027 is defined but never used.","line":2,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027id\u0027 is defined but never used.","line":27,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":27,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027isFuture\u0027 is defined but never used.","line":32,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":13}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \u0027react\u0027;\r\nimport { CheckSquare, Flag, PlayCircle, Loader2, Trash2, Clock } from \u0027lucide-react\u0027;\r\nimport { cn } from \u0027../../../lib/utils\u0027;\r\nimport type { Priority } from \u0027../../../types\u0027;\r\n\r\ninterface CalendarEventItemProps {\r\n    id: string;\r\n    title: string;\r\n    subtitle?: string;\r\n    type: \u0027task\u0027 | \u0027goal\u0027 | \u0027subtheme\u0027;\r\n    isDone: boolean;\r\n    isFuture: boolean;\r\n    priority?: Priority;\r\n    durationMinutes?: number;\r\n    completionTime?: string | null;\r\n    onFocus: () =\u003e void;\r\n    onDelete?: () =\u003e void;\r\n    onOpenDetails?: () =\u003e void;\r\n    isActive?: boolean;\r\n    isSomeoneElseFocused?: boolean;\r\n    lockReason?: string;\r\n    children?: React.ReactNode; // For extra content like progress bars\r\n    colorTheme?: \u0027indigo\u0027 | \u0027blue\u0027 | \u0027purple\u0027 | \u0027pink\u0027;\r\n}\r\n\r\nexport const CalendarEventItem: React.FC\u003cCalendarEventItemProps\u003e = ({\r\n    id,\r\n    title,\r\n    subtitle,\r\n    type,\r\n    isDone,\r\n    isFuture,\r\n    priority,\r\n    durationMinutes,\r\n    completionTime,\r\n    onFocus,\r\n    onDelete,\r\n    onOpenDetails,\r\n    isActive = false,\r\n    isSomeoneElseFocused = false,\r\n    lockReason,\r\n    children,\r\n    colorTheme = \u0027blue\u0027\r\n}) =\u003e {\r\n\r\n    const themeStyles = {\r\n        indigo: \"hover:border-indigo-500/30 bg-indigo-950/20\",\r\n        blue: \"hover:border-blue-500/30 bg-blue-950/20\",\r\n        purple: \"hover:border-purple-500/30 bg-purple-950/20\",\r\n        pink: \"hover:border-pink-500/30 bg-pink-950/20\"\r\n    };\r\n\r\n    const getPriorityBorderColor = (p?: string) =\u003e {\r\n        switch (p) {\r\n            case \u0027high\u0027: return \u0027border-l-red-500\u0027;\r\n            case \u0027medium\u0027: return \u0027border-l-amber-500\u0027;\r\n            case \u0027low\u0027: return \u0027border-l-emerald-500\u0027;\r\n            default: return \u0027border-l-slate-700\u0027;\r\n        }\r\n    };\r\n\r\n    return (\r\n        \u003cdiv\r\n            className={cn(\r\n                \"group relative p-4 rounded-xl border transition-all duration-300 border-l-4\",\r\n                getPriorityBorderColor(priority),\r\n                isDone\r\n                    ? \"bg-slate-900/30 border-slate-800 opacity-50 grayscale-[0.5] border-l-slate-800\"\r\n                    : cn(\r\n                        \"bg-slate-900/60 backdrop-blur-md border-white/5 shadow-lg\",\r\n                        themeStyles[colorTheme]\r\n                    )\r\n            )}\r\n        \u003e\r\n            \u003cdiv className=\"flex items-start gap-4\"\u003e\r\n                {/* Visual Checkbox Indicator (Manual Blocked) */}\r\n                \u003cdiv\r\n                    className={cn(\r\n                        \"w-6 h-6 rounded-lg border-2 flex items-center justify-center shrink-0 transition-all mt-1\",\r\n                        isDone\r\n                            ? \"bg-emerald-500 border-emerald-400 shadow-[0_0_12px_rgba(16,185,129,0.5)]\"\r\n                            : \"border-slate-600 bg-slate-950/50 opacity-40 cursor-not-allowed\"\r\n                    )}\r\n                    title={isDone ? \"ConcluÃ­do\" : \"Utilize o Pomodoro para concluir\"}\r\n                \u003e\r\n                    \u003cCheckSquare className={cn(\"w-3.5 h-3.5 text-white transition-all\", isDone ? \"scale-100\" : \"scale-0\")} /\u003e\r\n                \u003c/div\u003e\r\n\r\n                \u003cdiv className=\"flex-1 min-w-0\"\u003e\r\n                    \u003cdiv className=\"flex justify-between items-start\"\u003e\r\n                        \u003cdiv className=\"space-y-1\"\u003e\r\n                            \u003cdiv className=\"flex items-center gap-2 flex-wrap\"\u003e\r\n                                \u003cspan\r\n                                    onClick={onOpenDetails}\r\n                                    className={cn(\r\n                                        \"font-bold text-sm transition-colors\",\r\n                                        isDone ? \"text-slate-500 line-through decoration-slate-700\" : \"text-white cursor-pointer hover:underline\"\r\n                                    )}\r\n                                \u003e\r\n                                    {title}\r\n                                \u003c/span\u003e\r\n                                {isDone \u0026\u0026 (\r\n                                    \u003cspan className=\"text-[9px] px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-300 border border-emerald-500/30 font-bold uppercase tracking-wider\"\u003e\r\n                                        âœ“ Feito\r\n                                    \u003c/span\u003e\r\n                                )}\r\n                            \u003c/div\u003e\r\n                            {subtitle \u0026\u0026 (\r\n                                \u003cp className=\"text-[10px] text-slate-500 flex items-center gap-2\"\u003e\r\n                                    {subtitle}\r\n                                \u003c/p\u003e\r\n                            )}\r\n                        \u003c/div\u003e\r\n\r\n                        \u003cdiv className=\"flex items-center gap-2 shrink-0 ml-2\"\u003e\r\n                            {/* Actions Column */}\r\n                            \u003cdiv className=\"flex items-center justify-end gap-2 flex-wrap\"\u003e\r\n                                {durationMinutes !== undefined \u0026\u0026 (\r\n                                    \u003cspan className=\"flex items-center gap-1 text-[10px] bg-slate-800 text-slate-400 px-1.5 py-0.5 rounded border border-slate-700 whitespace-nowrap\" title=\"Tempo Estimado\"\u003e\r\n                                        \u003cClock className=\"w-2.5 h-2.5\" /\u003e\r\n                                        {durationMinutes} min\r\n                                    \u003c/span\u003e\r\n                                )}\r\n\r\n                                {!isDone \u0026\u0026 (\r\n                                    \u003c\u003e\r\n                                        {isSomeoneElseFocused ? null : (\r\n                                            lockReason ? (\r\n                                                \u003cspan className=\"text-[10px] text-slate-500 italic px-2 flex items-center gap-1 whitespace-nowrap\"\u003e\r\n                                                    \u003cspan className=\"w-1.5 h-1.5 rounded-full bg-blue-500 animate-pulse\" /\u003e\r\n                                                    {lockReason}\r\n                                                \u003c/span\u003e\r\n                                            ) : isActive ? (\r\n                                                \u003cbutton\r\n                                                    className=\"flex items-center gap-1 text-[10px] bg-rose-500/20 text-rose-400 px-1.5 py-0.5 rounded border border-rose-500/50 animate-pulse cursor-default whitespace-nowrap\"\r\n                                                    title=\"Foco Ativo\"\r\n                                                \u003e\r\n                                                    \u003cLoader2 className=\"w-3 h-3 animate-spin\" /\u003e\r\n                                                    \u003cspan\u003eFocando...\u003c/span\u003e\r\n                                                \u003c/button\u003e\r\n                                            ) : (\r\n                                                \u003cbutton\r\n                                                    onClick={(e) =\u003e { e.stopPropagation(); onFocus(); }}\r\n                                                    disabled={false}\r\n                                                    className={cn(\r\n                                                        \"flex items-center gap-1 text-[10px] px-2 py-0.5 rounded border transition-all whitespace-nowrap\",\r\n                                                        \"bg-rose-500/10 hover:bg-rose-500/20 text-rose-400 border-rose-500/20 group hover:border-rose-500/40\"\r\n                                                    )}\r\n                                                    title=\"Iniciar Pomodoro\"\r\n                                                \u003e\r\n                                                    \u003cPlayCircle className=\"w-3 h-3\" /\u003e\r\n                                                    \u003cspan\u003eFocar\u003c/span\u003e\r\n                                                \u003c/button\u003e\r\n                                            )\r\n                                        )}\r\n\r\n                                        {onDelete \u0026\u0026 (\r\n                                            \u003cbutton\r\n                                                type=\"button\"\r\n                                                onClick={(e) =\u003e { e.stopPropagation(); onDelete(); }}\r\n                                                className=\"p-1.5 text-slate-400 hover:text-red-400 hover:bg-red-500/20 rounded-lg transition-colors opacity-0 group-hover:opacity-100 duration-300\"\r\n                                                title=\"Excluir\"\r\n                                                aria-label={`Excluir ${type === \u0027task\u0027 ? \u0027tarefa\u0027 : type === \u0027goal\u0027 ? \u0027meta\u0027 : \u0027tÃ³pico\u0027}`}\r\n                                            \u003e\r\n                                                \u003cTrash2 className=\"w-3.5 h-3.5\" /\u003e\r\n                                            \u003c/button\u003e\r\n                                        )}\r\n                                    \u003c/\u003e\r\n                                )}\r\n\r\n                                {isDone \u0026\u0026 completionTime \u0026\u0026 (\r\n                                    \u003cspan className=\"text-[10px] font-mono text-emerald-500/80 bg-emerald-500/10 px-1.5 py-0.5 rounded border border-emerald-500/20 whitespace-nowrap\"\u003e\r\n                                        {completionTime}\r\n                                    \u003c/span\u003e\r\n                                )}\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n                    {children}\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n            {/* Active Highlight Line */}\r\n            {!isDone \u0026\u0026 \u003cdiv className={cn(\r\n                \"absolute left-0 top-3 bottom-3 w-0.5 rounded-r-full opacity-0 group-hover:opacity-100 transition-opacity\",\r\n                colorTheme === \u0027indigo\u0027 ? \"bg-indigo-500\" : colorTheme === \u0027purple\u0027 ? \"bg-purple-500\" : colorTheme === \u0027pink\u0027 ? \"bg-pink-500\" : \"bg-blue-500\"\r\n            )} /\u003e}\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\calendar\\components\\CalendarGrid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\calendar\\components\\CalendarHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\calendar\\components\\DayDetails.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027PlayCircle\u0027 is defined but never used.","line":2,"column":43,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":53},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Loader2\u0027 is defined but never used.","line":2,"column":55,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":62},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Trash2\u0027 is defined but never used.","line":2,"column":64,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":70},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Review\u0027 is defined but never used.","line":10,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027onCompleteReview\u0027 is defined but never used.","line":36,"column":52,"nodeType":null,"messageId":"unusedVar","endLine":36,"endColumn":68},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027handleStopFocus\u0027 is assigned a value but never used.","line":84,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":84,"endColumn":26}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \u0027react\u0027;\r\nimport { BrainCircuit, CheckSquare, Flag, PlayCircle, Loader2, Trash2 } from \u0027lucide-react\u0027;\r\nimport { format, isToday, differenceInCalendarDays } from \u0027date-fns\u0027;\r\nimport { useStudy } from \u0027../../../context/StudyContext\u0027;\r\nimport { usePomodoroContext } from \u0027../../../context/PomodoroContext\u0027;\r\nimport { useAudio } from \u0027../../../context/AudioContext\u0027;\r\nimport { useConfirm } from \u0027../../../context/ConfirmContext\u0027;\r\nimport { cn } from \u0027../../../lib/utils\u0027;\r\nimport { parseLocalDate } from \u0027../../../utils/dateHelpers\u0027;\r\nimport type { Review, Task, Goal, Priority, CalendarIntroItem, CalendarReviewItem, CalendarGoalItem, CalendarTaskItem, Subtheme } from \u0027../../../types\u0027;\r\nimport { CalendarEventItem } from \u0027./CalendarEventItem\u0027;\r\nimport { TaskDetailsModal } from \u0027../../tasks/components/TaskDetailsModal\u0027;\r\nimport { GoalDetailsModal } from \u0027../../goals/components/GoalDetailsModal\u0027;\r\nimport { ProgressBar } from \u0027../../../components/ui/ProgressBar\u0027;\r\n// Lazy load\r\n\r\n\r\ninterface DayDetailsProps {\r\n    date: Date | null;\r\n    events: {\r\n        reviews: CalendarReviewItem[];\r\n        tasks: CalendarTaskItem[];\r\n        goals: CalendarGoalItem[];\r\n        intros?: CalendarIntroItem[];\r\n        projected?: { subthemeTitle: string; themeTitle: string; priority: Priority; description: string }[];\r\n    };\r\n    onStartStudy?: (id: string) =\u003e void;\r\n    onCompleteReview?: (subthemeId: string, reviewNumber?: number, type?: \u0027review\u0027 | \u0027intro\u0027, difficulty?: \u0027easy\u0027 | \u0027medium\u0027 | \u0027hard\u0027, summary?: string) =\u003e Promise\u003cvoid\u003e;\r\n    onDeleteGoal: (id: string) =\u003e void;\r\n    onDeleteTask?: (id: string) =\u003e void;\r\n}\r\n\r\n\r\nconst StudyContentModal = React.lazy(() =\u003e import(\u0027../../themes/components/StudyContentModal\u0027).then(m =\u003e ({ default: m.StudyContentModal })));\r\n\r\nexport const DayDetails = ({ events, onStartStudy, onCompleteReview, onDeleteGoal, onDeleteTask, date }: DayDetailsProps) =\u003e {\r\n    const { reviews, tasks, goals } = events;\r\n    const { activeFocus, startFocus, endFocus, themes, goals: allGoals, tasks: allTasks, updateSubthemeContent } = useStudy();\r\n    const { startFocusSession, resetTimer } = usePomodoroContext();\r\n    const { stopAudio } = useAudio();\r\n    const { confirm: confirmAction } = useConfirm();\r\n\r\n    // --- DETAIL MODALS STATE ---\r\n    const [selectedTask, setSelectedTask] = useState\u003cTask | null\u003e(null);\r\n    const [selectedGoal, setSelectedGoal] = useState\u003cGoal | null\u003e(null);\r\n    const [selectedSubtheme, setSelectedSubtheme] = useState\u003cSubtheme | null\u003e(null);\r\n\r\n    const handleOpenDetails = (id: string, type: \u0027task\u0027 | \u0027goal\u0027 | \u0027subtheme\u0027) =\u003e {\r\n        if (type === \u0027task\u0027) {\r\n            const task = allTasks.find(t =\u003e t.id === id);\r\n            if (task) setSelectedTask(task);\r\n        } else if (type === \u0027goal\u0027) {\r\n            const goal = allGoals.find(g =\u003e g.id === id);\r\n            if (goal) setSelectedGoal(goal);\r\n        } else if (type === \u0027subtheme\u0027) {\r\n            const subtheme = themes.flatMap(t =\u003e t.subthemes).find(st =\u003e st.id === id);\r\n            if (subtheme) setSelectedSubtheme(subtheme);\r\n        }\r\n    };\r\n\r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n\r\n    const targetDate = date ? new Date(date) : today;\r\n    const isFuture = targetDate \u003e today;\r\n    const isPast = targetDate \u003c today;\r\n    const isDateToday = isToday(targetDate);\r\n    const todayStr = format(today, \u0027yyyy-MM-dd\u0027);\r\n    const dateStr = date ? format(targetDate, \u0027yyyy-MM-dd\u0027) : todayStr;\r\n\r\n    const handleStartFocus = (id: string, type: \u0027task\u0027 | \u0027goal\u0027 | \u0027subtheme\u0027, title: string, duration?: number, parentId?: string) =\u003e {\r\n        // Apenas bloquear se jÃ¡ houver OUTRO item em foco (nÃ£o o mesmo)\r\n        if (activeFocus \u0026\u0026 activeFocus.id !== id) {\r\n            console.warn(`âš ï¸ Outro item jÃ¡ estÃ¡ em foco: ${activeFocus.id}`);\r\n            return;\r\n        }\r\n\r\n        console.log(`â–¶ï¸ Iniciando foco para: ${title} (${id})`);\r\n\r\n        startFocus(id, type, title, duration || 25, undefined, undefined, parentId);\r\n        startFocusSession(id, duration || 25); // Start Timer\r\n    };\r\n\r\n    const handleStopFocus = async () =\u003e {\r\n        const confirmed = await confirmAction({ message: \u0027Deseja cancelar o foco atual?\u0027, isDangerous: true });\r\n        if (confirmed) {\r\n            endFocus(false); // End without completing\r\n            resetTimer();\r\n            stopAudio(); // Stop background audio\r\n        }\r\n    };\r\n\r\n    if ((!reviews || reviews.length === 0) \u0026\u0026 (!tasks || tasks.length === 0) \u0026\u0026 (!goals || goals.length === 0)) {\r\n        return (\r\n            \u003cdiv className=\"text-center py-8 text-slate-500\"\u003e\r\n                \u003cp\u003eNada agendado para este dia.\u003c/p\u003e\r\n                \u003cp className=\"text-sm\"\u003eAproveite para descansar ou adiantar estudos!\u003c/p\u003e\r\n            \u003c/div\u003e\r\n        );\r\n    }\r\n\r\n    const isSomethingFocused = !!activeFocus;\r\n\r\n    // Sorting Logic\r\n    const getPriorityScore = (p?: string) =\u003e {\r\n        switch (p) {\r\n            case \u0027high\u0027: return 3;\r\n            case \u0027medium\u0027: return 2;\r\n            case \u0027low\u0027: return 1;\r\n            default: return 0;\r\n        }\r\n    };\r\n\r\n    interface SortableItem {\r\n        status?: string;\r\n        isCompletedToday?: boolean;\r\n        time?: string;\r\n        scheduledTime?: string;\r\n        priority?: Priority;\r\n        durationMinutes?: number;\r\n    }\r\n\r\n    const sortItems = \u003cT extends SortableItem\u003e(items: T[]) =\u003e {\r\n        if (!items) return [];\r\n        return [...items].sort((a, b) =\u003e {\r\n            // 1. Status: Pending first (Active \u003e Done)\r\n            const aDone = a.status === \u0027completed\u0027 || a.isCompletedToday;\r\n            const bDone = b.status === \u0027completed\u0027 || b.isCompletedToday;\r\n            if (aDone !== bDone) return aDone ? 1 : -1;\r\n\r\n            // 2. Check if items have scheduled time\r\n            const timeA = a.time || a.scheduledTime || \u0027\u0027;\r\n            const timeB = b.time || b.scheduledTime || \u0027\u0027;\r\n            const hasTimeA = !!timeA;\r\n            const hasTimeB = !!timeB;\r\n\r\n            // If BOTH have time defined: order by time\r\n            if (hasTimeA \u0026\u0026 hasTimeB) {\r\n                return timeA.localeCompare(timeB);\r\n            }\r\n\r\n            // If ONLY ONE has time: the one with time comes first\r\n            if (hasTimeA \u0026\u0026 !hasTimeB) return -1;\r\n            if (!hasTimeA \u0026\u0026 hasTimeB) return 1;\r\n\r\n            // If NEITHER has time: order by priority (importance)\r\n            const pA = getPriorityScore(a.priority);\r\n            const pB = getPriorityScore(b.priority);\r\n            if (pA !== pB) return pB - pA; // Higher priority first\r\n\r\n            // Fallback: Duration (shorter first for \"quick wins\")\r\n            const durA = a.durationMinutes || 0;\r\n            const durB = b.durationMinutes || 0;\r\n            return durA - durB;\r\n        });\r\n    };\r\n\r\n    const sortedReviews = sortItems(reviews);\r\n    const sortedTasks = sortItems(tasks);\r\n    const sortedGoals = sortItems(goals);\r\n\r\n    // Helper to get completion time\r\n    const getCompletionTime = (item: { completionHistory?: string[] }) =\u003e {\r\n        if (!item.completionHistory) return null;\r\n        const entry = item.completionHistory.find((h: string) =\u003e h.startsWith(dateStr));\r\n        if (!entry) return null;\r\n        try {\r\n            return format(new Date(entry), \u0027HH:mm\u0027);\r\n        } catch {\r\n            return null;\r\n        }\r\n    };\r\n\r\n    return (\r\n        \u003cdiv className={cn(\"space-y-8 w-full overflow-x-hidden relative p-1\", isSomethingFocused \u0026\u0026 \"opacity-90\")}\u003e\r\n\r\n            {/* SEÃ‡ÃƒO 1: INTRODUÃ‡Ã•ES (NOVOS TÃ“PICOS) - INDIGO */}\r\n            {events.intros \u0026\u0026 events.intros.length \u003e 0 \u0026\u0026 (\r\n                \u003cdiv className=\"space-y-3 animate-in fade-in slide-in-from-bottom-4 duration-500\"\u003e\r\n                    \u003ch3 className=\"text-[10px] font-bold text-indigo-400 uppercase tracking-widest pl-1 flex items-center gap-2\"\u003e\r\n                        \u003cBrainCircuit className=\"w-3 h-3\" /\u003e\r\n                        Novos TÃ³picos ({events.intros.length})\r\n                    \u003c/h3\u003e\r\n                    \u003cdiv className=\"bg-slate-950/40 border border-white/5 rounded-2xl p-2 space-y-2 relative overflow-hidden group/section\"\u003e\r\n                        {events.intros.map((intro: CalendarIntroItem) =\u003e (\r\n                            \u003cCalendarEventItem\r\n                                key={intro.id}\r\n                                id={intro.id}\r\n                                title={intro.subthemeTitle}\r\n                                subtitle={intro.themeTitle}\r\n                                type=\"subtheme\"\r\n                                isDone={false}\r\n                                isFuture={isFuture}\r\n                                priority={intro.priority}\r\n                                durationMinutes={intro.durationMinutes}\r\n                                colorTheme=\"indigo\"\r\n                                onFocus={() =\u003e handleStartFocus(intro.id, \u0027subtheme\u0027, intro.subthemeTitle, intro.durationMinutes)}\r\n                                onOpenDetails={() =\u003e handleOpenDetails(intro.id, \u0027subtheme\u0027)}\r\n                                isActive={activeFocus?.id === intro.id}\r\n                                isSomeoneElseFocused={isSomethingFocused \u0026\u0026 activeFocus?.id !== intro.id}\r\n                                lockReason={(!isDateToday \u0026\u0026 !isPast) ? (isFuture ? `Faltam ${differenceInCalendarDays(targetDate, today)} dias` : \u0027Passado\u0027) : undefined}\r\n                            /\u003e\r\n                        ))}\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n            )}\r\n\r\n            {/* SEÃ‡ÃƒO 2: REVISÃ•ES SRS - BLUE */}\r\n            {sortedReviews \u0026\u0026 sortedReviews.length \u003e 0 \u0026\u0026 (\r\n                \u003cdiv className=\"space-y-3 animate-in fade-in slide-in-from-bottom-5 duration-500\"\u003e\r\n                    \u003ch3 className=\"text-[10px] font-bold text-blue-500 uppercase tracking-widest pl-1 flex items-center gap-2\"\u003e\r\n                        \u003cBrainCircuit className=\"w-3 h-3\" /\u003e\r\n                        RevisÃµes SRS ({sortedReviews.length})\r\n                    \u003c/h3\u003e\r\n                    \u003cdiv className=\"bg-slate-950/40 border border-white/5 rounded-2xl p-2 space-y-2\"\u003e\r\n                        {sortedReviews.map((r: CalendarReviewItem) =\u003e (\r\n                            \u003cCalendarEventItem\r\n                                key={r.id}\r\n                                id={r.id}\r\n                                title={r.subthemeTitle}\r\n                                subtitle={`RevisÃ£o #${r.number} â€¢ ${r.themeTitle}`}\r\n                                type=\"subtheme\"\r\n                                isDone={r.status === \u0027completed\u0027}\r\n                                isFuture={isFuture}\r\n                                priority={r.priority}\r\n                                durationMinutes={r.durationMinutes}\r\n                                completionTime={getCompletionTime(r)}\r\n                                colorTheme=\"blue\"\r\n                                onFocus={() =\u003e onStartStudy?.(r.id)}\r\n                                onOpenDetails={() =\u003e handleOpenDetails(r.id, \u0027subtheme\u0027)}\r\n                                isActive={activeFocus?.id === r.id}\r\n                                isSomeoneElseFocused={isSomethingFocused \u0026\u0026 activeFocus?.id !== r.id}\r\n                                lockReason={(!isDateToday \u0026\u0026 !isPast) ? (isFuture ? `Faltam ${differenceInCalendarDays(targetDate, today)} dias` : \u0027Passado\u0027) : undefined}\r\n                            /\u003e\r\n                        ))}\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n            )}\r\n\r\n            {/* SEÃ‡ÃƒO 3: TAREFAS - ROXO */}\r\n            {sortedTasks \u0026\u0026 sortedTasks.length \u003e 0 \u0026\u0026 (\r\n                \u003cdiv className=\"space-y-3 animate-in fade-in slide-in-from-bottom-6 duration-500\"\u003e\r\n                    \u003ch3 className=\"text-[10px] font-bold text-purple-400 uppercase tracking-widest pl-1 flex items-center gap-2\"\u003e\r\n                        \u003cCheckSquare className=\"w-3 h-3\" /\u003e\r\n                        Tarefas ({sortedTasks.length})\r\n                    \u003c/h3\u003e\r\n                    \u003cdiv className=\"bg-slate-950/40 border border-white/5 rounded-2xl p-2 space-y-2\"\u003e\r\n                        {sortedTasks.map((t: CalendarTaskItem) =\u003e {\r\n                            // Calculate task progress if checklist/subtasks exist, or fallback to status\r\n                            let progress = 0;\r\n                            if (t.progress \u0026\u0026 t.progress.total \u003e 0) {\r\n                                progress = (t.progress.current / t.progress.total) * 100;\r\n                            } else if (t.status === \u0027completed\u0027) {\r\n                                progress = 100;\r\n                            }\r\n\r\n                            return (\r\n                                \u003cCalendarEventItem\r\n                                    key={t.id}\r\n                                    id={t.id}\r\n                                    title={t.title}\r\n                                    subtitle={\r\n                                        t.type === \u0027period\u0027 \u0026\u0026 t.startDate \u0026\u0026 t.endDate\r\n                                            ? `InÃ­cio: ${format(parseLocalDate(t.startDate), \u0027dd/MM/yyyy\u0027)} â€¢ TÃ©rmino: ${format(parseLocalDate(t.endDate), \u0027dd/MM/yyyy\u0027)}`\r\n                                            : ((t.endDate || t.date) ? `Prazo: ${format(parseLocalDate(t.endDate || t.date || todayStr), \u0027dd/MM/yyyy\u0027)}` : undefined)\r\n                                    }\r\n                                    type=\"task\"\r\n                                    isDone={t.status === \u0027completed\u0027}\r\n                                    isFuture={isFuture}\r\n                                    priority={t.priority}\r\n                                    durationMinutes={t.durationMinutes}\r\n                                    completionTime={getCompletionTime(t)}\r\n                                    colorTheme=\"purple\"\r\n                                    onFocus={() =\u003e handleStartFocus(t.id, \u0027task\u0027, t.title, t.durationMinutes)}\r\n                                    onOpenDetails={() =\u003e handleOpenDetails(t.id, \u0027task\u0027)}\r\n                                    onDelete={async () =\u003e {\r\n                                        const confirmed = await confirmAction({\r\n                                            message: `Excluir a tarefa \"${t.title}\"?`,\r\n                                            isDangerous: true,\r\n                                            confirmText: \"Excluir\",\r\n                                            cancelText: \"Cancelar\"\r\n                                        });\r\n                                        if (confirmed \u0026\u0026 onDeleteTask) onDeleteTask(t.id);\r\n                                    }}\r\n                                    isActive={activeFocus?.id === t.id}\r\n                                    isSomeoneElseFocused={isSomethingFocused \u0026\u0026 activeFocus?.id !== t.id}\r\n                                    lockReason={(!isDateToday \u0026\u0026 !isPast) ? (isFuture ? `Faltam ${differenceInCalendarDays(targetDate, today)} dias` : \u0027Passado\u0027) : undefined}\r\n                                \u003e\r\n                                    {/* Task Progress Bar */}\r\n                                    {!t.status || t.status !== \u0027completed\u0027 ? (\r\n                                        \u003cdiv className=\"mt-3\"\u003e\r\n                                            \u003cProgressBar progress={progress} color=\"bg-purple-500\" showLabel height=\"h-1.5\" /\u003e\r\n                                        \u003c/div\u003e\r\n                                    ) : null}\r\n                                \u003c/CalendarEventItem\u003e\r\n                            );\r\n                        })}\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n            )}\r\n\r\n            {/* SEÃ‡ÃƒO 4: METAS \u0026 PROJETOS - ROSA */}\r\n            {sortedGoals \u0026\u0026 sortedGoals.length \u003e 0 \u0026\u0026 (\r\n                \u003cdiv className=\"space-y-3 animate-in fade-in slide-in-from-bottom-7 duration-500\"\u003e\r\n                    \u003ch3 className=\"text-[10px] font-bold text-pink-400 uppercase tracking-widest pl-1 flex items-center gap-2\"\u003e\r\n                        \u003cFlag className=\"w-3 h-3\" /\u003e\r\n                        Metas \u0026 Projetos ({sortedGoals.length})\r\n                    \u003c/h3\u003e\r\n                    \u003cdiv className=\"bg-slate-950/40 border border-white/5 rounded-2xl p-2 space-y-2\"\u003e\r\n                        {sortedGoals.map((g: CalendarGoalItem) =\u003e {\r\n                            const isStep = g.type === \u0027goal-step\u0027 || g.type === \u0027goal-phase\u0027;\r\n                            const eventId = (g.checklist_item_id || g.id) as string;\r\n                            const isProject = g.type.startsWith(\u0027project\u0027);\r\n\r\n                            // Determine Progress\r\n                            let progress = g.progress || 0;\r\n                            if (g.phaseProgress !== undefined) progress = g.phaseProgress;\r\n\r\n                            // Label logic\r\n                            let label = g.label || (g.deadline ? `Prazo: ${format(parseLocalDate(g.deadline), \u0027dd/MM/yyyy\u0027)}` : g.type);\r\n                            if (g.startDate \u0026\u0026 g.deadline) {\r\n                                label = `InÃ­cio: ${format(parseLocalDate(g.startDate), \u0027dd/MM/yyyy\u0027)} â€¢ TÃ©rmino: ${format(parseLocalDate(g.deadline), \u0027dd/MM/yyyy\u0027)}`;\r\n                            }\r\n                            if (isStep) label = `${g.parentGoalTitle} â€¢ Etapa`;\r\n\r\n                            return (\r\n                                \u003cCalendarEventItem\r\n                                    key={`${g.id}-${g.checklist_item_id || \u0027main\u0027}`}\r\n                                    id={eventId}\r\n                                    title={g.title}\r\n                                    subtitle={label}\r\n                                    type=\"goal\"\r\n                                    isDone={g.isCompletedToday || false}\r\n                                    isFuture={isFuture}\r\n                                    priority={g.priority}\r\n                                    durationMinutes={g.durationMinutes}\r\n                                    completionTime={getCompletionTime(g)}\r\n                                    colorTheme={isProject ? \"indigo\" : \"pink\"} // Differentiate projects visually if desired, or keep pink\r\n                                    onFocus={() =\u003e handleStartFocus(eventId, \u0027goal\u0027, g.title, g.durationMinutes, g.parentGoalId)}\r\n                                    onOpenDetails={() =\u003e handleOpenDetails(g.id, \u0027goal\u0027)}\r\n                                    onDelete={async () =\u003e {\r\n                                        const idToDelete = (g.parentGoalId || g.id) as string;\r\n                                        const message = isStep ? \u0027Excluir este projeto COMPLETO (todas as etapas)?\u0027 : (isProject ? \u0027Excluir Projeto?\u0027 : \u0027Excluir Meta?\u0027);\r\n                                        const confirmed = await confirmAction({\r\n                                            message,\r\n                                            isDangerous: true,\r\n                                            confirmText: \"Excluir\",\r\n                                            cancelText: \"Cancelar\"\r\n                                        });\r\n                                        if (confirmed \u0026\u0026 onDeleteGoal) onDeleteGoal(idToDelete);\r\n                                    }}\r\n                                    isActive={activeFocus?.id === eventId}\r\n                                    isSomeoneElseFocused={isSomethingFocused \u0026\u0026 activeFocus?.id !== eventId}\r\n                                    lockReason={(!isDateToday \u0026\u0026 !isPast) ? (isFuture ? `Faltam ${differenceInCalendarDays(targetDate, today)} dias` : \u0027Passado\u0027) : undefined}\r\n                                \u003e\r\n                                    {/* Goal/Project Progress Bar */}\r\n                                    {!g.isCompletedToday \u0026\u0026 (\r\n                                        \u003cdiv className=\"mt-3\"\u003e\r\n                                            \u003cProgressBar\r\n                                                progress={progress}\r\n                                                color={isProject ? \"bg-indigo-500\" : \"bg-pink-500\"}\r\n                                                showLabel\r\n                                                height=\"h-1.5\"\r\n                                            /\u003e\r\n                                        \u003c/div\u003e\r\n                                    )}\r\n                                \u003c/CalendarEventItem\u003e\r\n                            );\r\n                        })}\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n            )}\r\n\r\n            {/* SEÃ‡ÃƒO 5: PREVISTOS/SIMULAÃ‡ÃƒO */}\r\n            {events.projected \u0026\u0026 events.projected.length \u003e 0 \u0026\u0026 (\r\n                \u003cdiv className=\"pt-6 border-t border-white/5 mt-4 opacity-50\"\u003e\r\n                    \u003ch3 className=\"text-[10px] font-bold text-slate-500 uppercase tracking-widest pl-1 mb-3\"\u003e\r\n                        SimulaÃ§Ã£o Futura\r\n                    \u003c/h3\u003e\r\n                    \u003cdiv className=\"grid grid-cols-1 gap-2\"\u003e\r\n                        {events.projected.map((p, idx) =\u003e (\r\n                            \u003cdiv key={idx} className=\"p-3 border border-dashed border-slate-700/50 rounded-xl bg-slate-900/30 flex justify-between items-center\"\u003e\r\n                                \u003cdiv\u003e\r\n                                    \u003cdiv className=\"flex items-center gap-2\"\u003e\r\n                                        \u003cp className=\"font-medium text-slate-400 text-sm\"\u003e{p.subthemeTitle}\u003c/p\u003e\r\n                                        \u003cFlag className={cn(\"w-3 h-3 fill-current\", p.priority === \u0027high\u0027 ? \u0027text-red-500\u0027 : p.priority === \u0027medium\u0027 ? \u0027text-amber-500\u0027 : \u0027text-emerald-500\u0027)} /\u003e\r\n                                    \u003c/div\u003e\r\n                                    \u003cp className=\"text-[10px] text-slate-600\"\u003e{p.themeTitle} â€¢ {p.description}\u003c/p\u003e\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n                        ))}\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n            )}\r\n\r\n            {/* Modals for Details */}\r\n            \u003cTaskDetailsModal\r\n                isOpen={!!selectedTask}\r\n                onClose={() =\u003e setSelectedTask(null)}\r\n                task={selectedTask}\r\n            /\u003e\r\n\r\n            \u003cGoalDetailsModal\r\n                isOpen={!!selectedGoal}\r\n                onClose={() =\u003e setSelectedGoal(null)}\r\n                goal={selectedGoal}\r\n            /\u003e\r\n\r\n            \u003cReact.Suspense fallback={null}\u003e\r\n                \u003cStudyContentModal\r\n                    isOpen={!!selectedSubtheme}\r\n                    onClose={() =\u003e setSelectedSubtheme(null)}\r\n                    subtheme={selectedSubtheme}\r\n                    onSave={(content: string) =\u003e {\r\n                        if (selectedSubtheme) {\r\n                            updateSubthemeContent(selectedSubtheme.id, content);\r\n                        }\r\n                    }}\r\n                /\u003e\r\n            \u003c/React.Suspense\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\calendar\\components\\UpcomingReviewsSidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027isBlueDefault\u0027 is assigned a value but never used.","line":53,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":53,"endColumn":48}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \u0027react\u0027;\r\nimport { format } from \u0027date-fns\u0027;\r\nimport { ptBR } from \u0027date-fns/locale\u0027;\r\nimport { PlayCircle } from \u0027lucide-react\u0027;\r\nimport { cn } from \u0027../../../lib/utils\u0027;\r\nimport { Button } from \u0027../../../components/ui/Button\u0027;\r\n\r\ninterface UpcomingReviewsSidebarProps {\r\n    upcomingList: {\r\n        id: string;\r\n        number: number;\r\n        date: string;\r\n        themeTitle: string;\r\n        subthemeTitle: string;\r\n        type: \u0027active\u0027 | \u0027projected\u0027;\r\n        status: \u0027pending\u0027 | \u0027completed\u0027;\r\n        originalDate: Date;\r\n        color?: string;\r\n    }[];\r\n    now: Date;\r\n    activeFocus: { id: string } | null;\r\n    onStartFocus: (item: any) =\u003e void;\r\n}\r\n\r\nexport const UpcomingReviewsSidebar: React.FC\u003cUpcomingReviewsSidebarProps\u003e = ({\r\n    upcomingList,\r\n    now,\r\n    activeFocus,\r\n    onStartFocus\r\n}) =\u003e {\r\n    return (\r\n        \u003cdiv className=\"lg:col-span-1 space-y-6\"\u003e\r\n            \u003cdiv className=\"bg-slate-900/50 border border-white/5 rounded-2xl p-6 backdrop-blur-xl\"\u003e\r\n                \u003ch3 className=\"text-lg font-bold text-white mb-4 flex items-center gap-2\"\u003e\r\n                    \u003cPlayCircle className=\"w-5 h-5 text-blue-400\" /\u003e\r\n                    Cronograma\r\n                \u003c/h3\u003e\r\n\r\n                \u003cdiv className=\"space-y-3 max-h-[600px] overflow-y-auto custom-scrollbar pr-2\"\u003e\r\n                    {upcomingList.length === 0 ? (\r\n                        \u003cp className=\"text-slate-500 text-sm text-center py-4\"\u003eNenhuma revisÃ£o prÃ³xima encontrada.\u003c/p\u003e\r\n                    ) : (\r\n                        upcomingList.map((item: any, idx: number) =\u003e {\r\n                            const isProjected = item.type === \u0027projected\u0027;\r\n                            const todayTime = new Date(now);\r\n                            todayTime.setHours(0, 0, 0, 0);\r\n\r\n                            const isTodayItem = item.originalDate.getTime() === todayTime.getTime();\r\n                            const isOverdue = !isProjected \u0026\u0026 item.originalDate \u003c todayTime;\r\n\r\n                            // Dynamic styling based on item color\r\n                            const themeColor = item.color || \u0027#3b82f6\u0027;\r\n                            const isBlueDefault = themeColor === \u0027#3b82f6\u0027; // Check if default to avoid overpowering blue if random wasn\u0027t used?\r\n\r\n                            return (\r\n                                \u003cdiv\r\n                                    key={`${item.id}-${item.number}-${idx}`}\r\n                                    style={{\r\n                                        borderColor: isProjected ? undefined : `${themeColor}40`, // 25% opacity\r\n                                        background: isProjected\r\n                                            ? undefined\r\n                                            : `linear-gradient(to right, ${themeColor}08, transparent)` // 5% opacity from left\r\n                                    }}\r\n                                    className={cn(\r\n                                        \"relative p-3 rounded-xl border transition-all group hover:scale-[1.02] overflow-hidden\",\r\n                                        isProjected\r\n                                            ? \"bg-slate-800/30 border-dashed border-slate-700/50 opacity-70 hover:opacity-100\"\r\n                                            : \"bg-slate-900/40 hover:bg-slate-900/60 shadow-lg\",\r\n                                        // Overrides for Overdue/Today\r\n                                        isOverdue \u0026\u0026 !isProjected \u0026\u0026 \"ring-1 ring-red-500/50 border-red-500/50 bg-red-950/20\",\r\n                                        isTodayItem \u0026\u0026 !isOverdue \u0026\u0026 !isProjected \u0026\u0026 \"ring-1 ring-blue-500/50 border-blue-500/50 bg-blue-950/20\"\r\n                                    )}\r\n                                \u003e\r\n                                    {/* Accent Bar on Left */}\r\n                                    {!isProjected \u0026\u0026 (\r\n                                        \u003cdiv\r\n                                            className=\"absolute left-0 top-0 bottom-0 w-1\"\r\n                                            style={{ backgroundColor: themeColor }}\r\n                                        /\u003e\r\n                                    )}\r\n\r\n                                    \u003cdiv className=\"flex justify-between items-start mb-1 pl-2\"\u003e\r\n                                        \u003cspan className={cn(\r\n                                            \"text-[10px] font-bold uppercase tracking-wider\",\r\n                                            isProjected ? \"text-slate-500\" : \"text-slate-300\",\r\n                                            isOverdue \u0026\u0026 \"text-red-400 animate-pulse\",\r\n                                            isTodayItem \u0026\u0026 !isOverdue \u0026\u0026 \"text-blue-400\"\r\n                                        )}\u003e\r\n                                            {isOverdue ? \u0027Atrasado\u0027 : (isTodayItem ? \u0027Hoje\u0027 : format(item.originalDate, \"d \u0027de\u0027 MMM\", { locale: ptBR }))}\r\n                                        \u003c/span\u003e\r\n                                        \u003cdiv\r\n                                            className=\"px-1.5 py-0.5 rounded text-[10px] bg-slate-950 border border-white/5\"\r\n                                            style={{ color: isProjected ? undefined : themeColor }}\r\n                                        \u003e\r\n                                            #{item.number}\r\n                                        \u003c/div\u003e\r\n                                    \u003c/div\u003e\r\n\r\n                                    \u003ch4 className={cn(\r\n                                        \"font-bold text-sm truncate mb-1 pl-2\",\r\n                                        isProjected ? \"text-slate-400\" : \"text-white\"\r\n                                    )}\u003e\r\n                                        {item.subthemeTitle}\r\n                                    \u003c/h4\u003e\r\n\r\n                                    \u003cdiv className=\"flex items-center gap-2 text-[10px] text-slate-500 pl-2\"\u003e\r\n                                        \u003cdiv\r\n                                            className=\"w-1.5 h-1.5 rounded-full\"\r\n                                            style={{ backgroundColor: themeColor }}\r\n                                        /\u003e\r\n                                        \u003cspan className=\"truncate\"\u003e{item.themeTitle}\u003c/span\u003e\r\n                                    \u003c/div\u003e\r\n\r\n                                    {(isTodayItem || isOverdue) \u0026\u0026 !isProjected \u0026\u0026 !activeFocus \u0026\u0026 (\r\n                                        \u003cButton\r\n                                            size=\"sm\"\r\n                                            style={{\r\n                                                backgroundColor: isOverdue ? undefined : themeColor,\r\n                                                borderColor: isOverdue ? undefined : themeColor\r\n                                            }}\r\n                                            className={cn(\r\n                                                \"w-full mt-3 h-7 text-xs border-0 text-white shadow-lg\",\r\n                                                isOverdue ? \"bg-red-600 hover:bg-red-500\" : \"hover:brightness-110\"\r\n                                            )}\r\n                                            onClick={() =\u003e onStartFocus(item)}\r\n                                        \u003e\r\n                                            {isOverdue ? \u0027Revisar Agora\u0027 : \u0027Iniciar\u0027}\r\n                                        \u003c/Button\u003e\r\n                                    )}\r\n                                \u003c/div\u003e\r\n                            );\r\n                        })\r\n                    )}\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\calendar\\components\\__tests__\\CalendarEventItem.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\calendar\\components\\__tests__\\DayDetails.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\calendar\\hooks\\useCalendarEvents.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027addDays\u0027 is defined but never used.","line":4,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027isSameMonth\u0027 is defined but never used.","line":12,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027ptBR\u0027 is defined but never used.","line":14,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027validGoalIds\u0027 is assigned a value but never used.","line":177,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":177,"endColumn":27}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useMemo, useEffect } from \u0027react\u0027;\r\nimport {\r\n    format,\r\n    addDays,\r\n    addMonths,\r\n    subMonths,\r\n    startOfMonth,\r\n    endOfMonth,\r\n    startOfWeek,\r\n    endOfWeek,\r\n    eachDayOfInterval,\r\n    isSameMonth\r\n} from \u0027date-fns\u0027;\r\nimport { ptBR } from \u0027date-fns/locale\u0027;\r\nimport { getAllProjectedReviews } from \u0027../../../lib/srs\u0027;\r\nimport { parseLocalDate } from \u0027../../../utils/dateHelpers\u0027;\r\nimport type { Theme, Task, Goal, Project } from \u0027../../../types\u0027;\r\n\r\ninterface UseCalendarEventsProps {\r\n    themes: Theme[];\r\n    tasks: Task[];\r\n    goals: Goal[];\r\n    projects: Project[];\r\n}\r\n\r\ninterface DayEvents {\r\n    reviews: any[];\r\n    intros: any[];\r\n    projected: any[];\r\n    tasks: any[];\r\n    goals: any[];\r\n}\r\n\r\nexport const useCalendarEvents = ({ themes, tasks, goals, projects }: UseCalendarEventsProps) =\u003e {\r\n    const [currentMonth, setCurrentMonth] = useState(new Date());\r\n    const [now, setNow] = useState(new Date());\r\n\r\n    useEffect(() =\u003e {\r\n        const interval = setInterval(() =\u003e setNow(new Date()), 60000);\r\n        return () =\u003e clearInterval(interval);\r\n    }, []);\r\n\r\n    const nextMonth = () =\u003e setCurrentMonth(addMonths(currentMonth, 1));\r\n    const prevMonth = () =\u003e setCurrentMonth(subMonths(currentMonth, 1));\r\n\r\n    const { calendarDays } = useMemo(() =\u003e {\r\n        const monthStart = startOfMonth(currentMonth);\r\n        const monthEnd = endOfMonth(monthStart);\r\n        const startDate = startOfWeek(monthStart);\r\n        const endDate = endOfWeek(monthEnd);\r\n        const calendarDays = eachDayOfInterval({ start: startDate, end: endDate });\r\n        return { calendarDays };\r\n    }, [currentMonth]);\r\n\r\n    const allProjectedReviews = useMemo(() =\u003e getAllProjectedReviews(themes), [themes]);\r\n\r\n    const eventsMap = useMemo(() =\u003e {\r\n        const map = new Map\u003cstring, DayEvents\u003e();\r\n\r\n        const getDay = (dateStr: string): DayEvents =\u003e {\r\n            if (!map.has(dateStr)) {\r\n                map.set(dateStr, { reviews: [], intros: [], projected: [], tasks: [], goals: [] });\r\n            }\r\n            return map.get(dateStr)!;\r\n        };\r\n\r\n        themes.forEach(t =\u003e {\r\n            // Handling for PROJECTS in Calendar\r\n            if (t.category === \u0027project\u0027) {\r\n                // For projects, we want to show modules.\r\n                // If they have explicit dates (not yet standard in subtheme, but maybe via \u0027introductionDate\u0027 used as \u0027deadline\u0027 or \u0027start\u0027?)\r\n                // Currently subthemes have \u0027introductionDate\u0027. We can use that as the \"Schedule Date\".\r\n                (t.subthemes || []).forEach(st =\u003e {\r\n                    if (st.status !== \u0027completed\u0027 \u0026\u0026 st.introductionDate) {\r\n                        const d = getDay(st.introductionDate); // Or fallback to today if \"Active\"?\r\n                        // Projects act like Tasks.\r\n                        d.tasks.push({\r\n                            id: st.id,\r\n                            title: `${st.title} (${t.title})`,\r\n                            type: \u0027project-step\u0027, // Custom type to distinguish\r\n                            date: st.introductionDate,\r\n                            status: \u0027pending\u0027,\r\n                            priority: t.priority,\r\n                            color: t.color || \u0027#8b5cf6\u0027, // Violet for projects\r\n                            isCompletedToday: false\r\n                        });\r\n                    } else if (st.status === \u0027completed\u0027 \u0026\u0026 st.introductionDate) {\r\n                        // Show completed project steps too?\r\n                        const d = getDay(st.introductionDate);\r\n                        d.tasks.push({\r\n                            id: st.id,\r\n                            title: `${st.title} (${t.title})`,\r\n                            type: \u0027project-step\u0027,\r\n                            date: st.introductionDate,\r\n                            status: \u0027completed\u0027,\r\n                            priority: t.priority,\r\n                            color: t.color || \u0027#8b5cf6\u0027,\r\n                            isCompletedToday: true // Assume done on intro date for now or we need completion timestamp\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Standard SRS Logic for Study Themes\r\n            if (t.category !== \u0027project\u0027) {\r\n                (t.subthemes || []).forEach(st =\u003e {\r\n                    (st.reviews || []).forEach(r =\u003e {\r\n                        const dateKey = r.date.includes(\u0027T\u0027) ? r.date.split(\u0027T\u0027)[0] : r.date;\r\n                        const d = getDay(dateKey);\r\n                        d.reviews.push({ ...r, themeTitle: t.title, subthemeTitle: st.title, type: \u0027review\u0027, id: st.id, durationMinutes: st.durationMinutes, priority: t.priority, timeSpent: st.timeSpent, color: t.color || \u0027#3b82f6\u0027 });\r\n                    });\r\n                    if (st.introductionDate) {\r\n                        const d = getDay(st.introductionDate);\r\n                        d.intros.push({ themeTitle: t.title, subthemeTitle: st.title, type: \u0027intro\u0027, durationMinutes: st.durationMinutes, priority: t.priority, timeSpent: st.timeSpent, id: st.id, color: t.color || \u0027#f59e0b\u0027 });\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        allProjectedReviews.forEach((p: any) =\u003e {\r\n            const d = getDay(p.date);\r\n            d.projected.push(p);\r\n        });\r\n\r\n        console.log(\u0027ðŸ“… === BUILDING EVENTS MAP ===\u0027);\r\n        console.log(\u0027ðŸ“… Total tasks in system:\u0027, tasks.length);\r\n        console.log(\u0027ðŸ“… Total goals in system:\u0027, goals.length);\r\n\r\n        tasks.forEach(t =\u003e {\r\n            console.log(`  ðŸ“‹ Task: \"${t.title}\" | type: ${t.type} | date: ${t.date} | startDate: ${t.startDate} | endDate: ${t.endDate}`);\r\n            if (t.type === \u0027day\u0027 \u0026\u0026 t.date) {\r\n                console.log(`    âœ… DAY task - adding to ${t.date}`);\r\n                const d = getDay(t.date);\r\n                d.tasks.push({ ...t, color: t.color, isCompletedToday: t.status === \u0027completed\u0027 });\r\n            } else if (t.type === \u0027period\u0027 \u0026\u0026 t.startDate \u0026\u0026 t.endDate) {\r\n                console.log(`    âœ… PERIOD task - adding from ${t.startDate} to ${t.endDate}`);\r\n                eachDayOfInterval({\r\n                    start: parseLocalDate(t.startDate),\r\n                    end: parseLocalDate(t.endDate)\r\n                }).forEach(date =\u003e {\r\n                    const dateStr = format(date, \u0027yyyy-MM-dd\u0027);\r\n                    const d = getDay(dateStr);\r\n                    const isCompleted = t.completionHistory?.some(h =\u003e h.startsWith(dateStr)) || false;\r\n\r\n                    let label: string | undefined;\r\n                    const start = t.startDate ? t.startDate.split(\u0027T\u0027)[0] : \u0027\u0027;\r\n                    const end = t.endDate ? t.endDate.split(\u0027T\u0027)[0] : \u0027\u0027;\r\n\r\n                    if (dateStr === start) label = \u0027InÃ­cio\u0027;\r\n                    else if (dateStr === end) label = \u0027Prazo\u0027;\r\n                    else label = \u0027Em andamento\u0027;\r\n\r\n                    d.tasks.push({ ...t, color: t.color, isCompletedToday: isCompleted, label });\r\n                });\r\n            } else if (t.type === \u0027recurring\u0027 \u0026\u0026 t.recurrence) {\r\n                console.log(`    âœ… RECURRING task - recurrence: ${t.recurrence}`);\r\n                calendarDays.forEach(day =\u003e {\r\n                    const dateStr = format(day, \u0027yyyy-MM-dd\u0027);\r\n                    const dayOfWeek = day.getDay();\r\n                    const taskStart = new Date(t.createdAt).setHours(0, 0, 0, 0);\r\n                    if (day.getTime() \u003c taskStart) return;\r\n                    if (t.endDate \u0026\u0026 dateStr \u003e t.endDate) return;\r\n\r\n                    if (t.recurrence?.includes(dayOfWeek)) {\r\n                        const d = getDay(dateStr);\r\n                        const isCompleted = t.completionHistory?.some(h =\u003e h.startsWith(dateStr)) || false;\r\n                        d.tasks.push({ ...t, color: t.color, isCompletedToday: isCompleted });\r\n                    }\r\n                });\r\n            } else {\r\n                console.log(`    âŒ Task did NOT match any filter`);\r\n            }\r\n        });\r\n        console.log(\u0027ðŸ“… === EVENTS MAP BUILT ===\u0027);\r\n\r\n        // Create a Set of valid goal IDs for quick lookup\r\n        const validGoalIds = new Set(goals.map(g =\u003e g.id));\r\n\r\n        goals.forEach(g =\u003e {\r\n            // Extra safety: skip if goal doesn\u0027t have required fields\r\n            if (!g || !g.id) return;\r\n\r\n            if (g.type === \u0027checklist\u0027 \u0026\u0026 g.checklist) {\r\n                const steps = [...g.checklist].sort((a: any, b: any) =\u003e a.order - b.order);\r\n                let currentPhaseStart = g.startDate ? parseLocalDate(g.startDate) : new Date(g.createdAt);\r\n\r\n                steps.forEach((item: any) =\u003e {\r\n                    if (!item.deadline) return;\r\n                    const phaseStart = new Date(currentPhaseStart);\r\n                    phaseStart.setHours(0, 0, 0, 0);\r\n\r\n                    const itemDeadlineKey = item.deadline.includes(\u0027T\u0027) ? item.deadline.split(\u0027T\u0027)[0] : item.deadline;\r\n                    const inputs = itemDeadlineKey.split(\u0027-\u0027).map(Number);\r\n                    const phaseEnd = new Date(inputs[0], inputs[1] - 1, inputs[2]);\r\n                    phaseEnd.setHours(0, 0, 0, 0);\r\n\r\n                    const iterDate = new Date(phaseStart);\r\n                    while (iterDate \u003c= phaseEnd) {\r\n                        const dateKey = format(iterDate, \u0027yyyy-MM-dd\u0027);\r\n                        const d = getDay(dateKey);\r\n                        const history = item.completionHistory || [];\r\n                        const isCompletedToday = history.some((h: string) =\u003e h.startsWith(dateKey));\r\n                        const windowDays = Math.ceil((phaseEnd.getTime() - phaseStart.getTime()) / (1000 * 60 * 60 * 24)) + 1;\r\n                        const uniqueChecks = new Set(history.map((h: string) =\u003e h.split(\u0027T\u0027)[0])).size;\r\n                        const progress = Math.min(100, Math.round((uniqueChecks / windowDays) * 100));\r\n\r\n                        d.goals.push({\r\n                            id: item.id,\r\n                            type: \u0027goal-phase\u0027,\r\n                            title: item.title,\r\n                            parentGoalId: g.id,\r\n                            parentGoalTitle: g.title,\r\n                            checklist_item_id: item.id,\r\n                            isCompletedToday: isCompletedToday,\r\n                            color: g.color || \u0027#ec4899\u0027,\r\n                            priority: g.priority,\r\n                            deadline: item.deadline,\r\n                            durationMinutes: parseInt(item.estimatedTime) || 0,\r\n                            phaseProgress: progress,\r\n                            currentDay: Math.ceil((iterDate.getTime() - phaseStart.getTime()) / (1000 * 60 * 60 * 24)) + 1,\r\n                            totalDays: windowDays\r\n                        });\r\n                        iterDate.setDate(iterDate.getDate() + 1);\r\n                    }\r\n                    currentPhaseStart = new Date(phaseEnd);\r\n                    currentPhaseStart.setDate(currentPhaseStart.getDate() + 1);\r\n                });\r\n            }\r\n\r\n            if (g.type === \u0027habit\u0027) {\r\n                calendarDays.forEach(day =\u003e {\r\n                    const dateStr = format(day, \u0027yyyy-MM-dd\u0027);\r\n                    const dayOfWeek = day.getDay();\r\n                    const goalStart = g.createdAt ? new Date(g.createdAt).setHours(0, 0, 0, 0) : 0;\r\n                    if (day.getTime() \u003c goalStart) return;\r\n                    if (g.deadline \u0026\u0026 dateStr \u003e g.deadline) return;\r\n\r\n                    if (!g.recurrence || g.recurrence.length === 0 || g.recurrence.includes(dayOfWeek)) {\r\n                        const d = getDay(dateStr);\r\n                        const isCompleted = g.completionHistory?.some(h =\u003e h.startsWith(dateStr)) || false;\r\n                        d.goals.push({ ...g, color: g.color, isCompletedToday: isCompleted, isParent: true });\r\n                    }\r\n                });\r\n            } else if (g.deadline) {\r\n                // Duration Logic\r\n                const start = g.startDate ? g.startDate.split(\u0027T\u0027)[0] : null;\r\n                const end = g.deadline.split(\u0027T\u0027)[0];\r\n\r\n                if (start \u0026\u0026 end) {\r\n                    eachDayOfInterval({\r\n                        start: parseLocalDate(start),\r\n                        end: parseLocalDate(end)\r\n                    }).forEach(date =\u003e {\r\n                        const dateStr = format(date, \u0027yyyy-MM-dd\u0027);\r\n                        const d = getDay(dateStr);\r\n                        const isEnd = dateStr === end;\r\n                        const isStart = dateStr === start;\r\n                        const isCompleted = g.progress === 100;\r\n\r\n                        d.goals.push({\r\n                            ...g,\r\n                            color: g.color || \u0027#3b82f6\u0027,\r\n                            isCompletedToday: isEnd ? isCompleted : false,\r\n                            isParent: true,\r\n                            label: isEnd ? \u0027Prazo\u0027 : (isStart ? \u0027InÃ­cio\u0027 : \u0027Em andamento\u0027)\r\n                        });\r\n                    });\r\n                } else {\r\n                    // Single deadline fallback\r\n                    const dDeadline = getDay(end);\r\n                    const isCompleted = g.progress === 100;\r\n                    dDeadline.goals.push({ ...g, color: g.color, isCompletedToday: isCompleted, isParent: true, label: \u0027Prazo\u0027 });\r\n                }\r\n            }\r\n        });\r\n\r\n        // === PROJECTS ===\r\n        projects.forEach(p =\u003e {\r\n            const start = p.startDate;\r\n            const end = p.deadline;\r\n\r\n            // Duration Logic for Projects\r\n            if (start \u0026\u0026 end) {\r\n                eachDayOfInterval({\r\n                    start: parseLocalDate(start),\r\n                    end: parseLocalDate(end)\r\n                }).forEach(date =\u003e {\r\n                    const dateStr = format(date, \u0027yyyy-MM-dd\u0027);\r\n                    const d = getDay(dateStr);\r\n                    const isEnd = dateStr === end;\r\n                    const isStart = dateStr === start;\r\n\r\n                    d.goals.push({\r\n                        id: p.id,\r\n                        title: p.title,\r\n                        type: isEnd ? \u0027project-deadline\u0027 : (isStart ? \u0027project-start\u0027 : \u0027project-step\u0027),\r\n                        date: dateStr,\r\n                        color: p.color || \u0027#8b5cf6\u0027, // Violet\r\n                        priority: isEnd ? \u0027high\u0027 : \u0027medium\u0027,\r\n                        isParent: true,\r\n                        label: isEnd ? \u0027Prazo Projeto\u0027 : (isStart ? \u0027InÃ­cio Projeto\u0027 : \u0027Projeto em Andamento\u0027),\r\n                        isCompletedToday: isEnd ? p.progress === 100 : false\r\n                    });\r\n                });\r\n            }\r\n            // Fallback for single deadline\r\n            else if (end) {\r\n                const d = getDay(end);\r\n                const isCompleted = p.progress === 100;\r\n                d.goals.push({\r\n                    id: p.id,\r\n                    title: p.title,\r\n                    type: \u0027project-deadline\u0027,\r\n                    date: end,\r\n                    color: p.color || \u0027#8b5cf6\u0027,\r\n                    priority: \u0027high\u0027,\r\n                    isParent: true,\r\n                    label: \u0027Prazo Final\u0027,\r\n                    isCompletedToday: isCompleted\r\n                });\r\n            }\r\n\r\n            // 3. Milestones\r\n            if (p.milestones \u0026\u0026 p.milestones.length \u003e 0) {\r\n                p.milestones.forEach(m =\u003e {\r\n                    if (m.dueDate) {\r\n                        const d = getDay(m.dueDate);\r\n                        d.goals.push({\r\n                            id: m.id,\r\n                            title: m.title,\r\n                            parentGoalTitle: p.title, // Use parent context\r\n                            type: \u0027project-milestone\u0027,\r\n                            date: m.dueDate,\r\n                            color: p.color || \u0027#8b5cf6\u0027,\r\n                            priority: \u0027medium\u0027,\r\n                            isCompletedToday: m.completed,\r\n                            label: \u0027Marco\u0027\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        return map;\r\n    }, [themes, allProjectedReviews, tasks, goals, projects, calendarDays]);\r\n\r\n    // Create Sets of valid IDs for filtering (outside useMemo so they\u0027re always fresh)\r\n    const currentGoalIds = new Set(goals.map(g =\u003e g.id));\r\n    const currentTaskIds = new Set(tasks.map(t =\u003e t.id));\r\n    const currentSubthemeIds = new Set(\r\n        themes.flatMap(t =\u003e t.subthemes.map(st =\u003e st.id))\r\n    );\r\n\r\n    const getEventsForDay = (date: Date) =\u003e {\r\n        const dateStr = format(date, \u0027yyyy-MM-dd\u0027);\r\n        const dayEvents = eventsMap.get(dateStr) || { reviews: [], intros: [], projected: [], tasks: [], goals: [] };\r\n\r\n        // Filter out goals that reference deleted parent goals\r\n        const filteredGoals = (dayEvents.goals || []).filter((g: any) =\u003e {\r\n            // If it\u0027s a goal-phase (step), check if parent goal still exists\r\n            if (g.parentGoalId) {\r\n                return currentGoalIds.has(g.parentGoalId);\r\n            }\r\n            // If it\u0027s a regular goal, check if it still exists\r\n            if (g.id) {\r\n                return currentGoalIds.has(g.id);\r\n            }\r\n            return true;\r\n        });\r\n\r\n        // Filter out tasks that have been deleted\r\n        const filteredTasks = (dayEvents.tasks || []).filter((t: any) =\u003e {\r\n            if (t.id) {\r\n                return currentTaskIds.has(t.id);\r\n            }\r\n            return true;\r\n        });\r\n\r\n        // Filter out reviews/intros for deleted subthemes\r\n        const filteredReviews = (dayEvents.reviews || []).filter((r: any) =\u003e {\r\n            if (r.subthemeId) {\r\n                return currentSubthemeIds.has(r.subthemeId);\r\n            }\r\n            if (r.id) {\r\n                return currentSubthemeIds.has(r.id);\r\n            }\r\n            return true;\r\n        });\r\n\r\n        const filteredIntros = (dayEvents.intros || []).filter((i: any) =\u003e {\r\n            if (i.subthemeId) {\r\n                return currentSubthemeIds.has(i.subthemeId);\r\n            }\r\n            if (i.id) {\r\n                return currentSubthemeIds.has(i.id);\r\n            }\r\n            return true;\r\n        });\r\n\r\n        const filteredProjected = (dayEvents.projected || []).filter((p: any) =\u003e {\r\n            if (p.subthemeId) {\r\n                return currentSubthemeIds.has(p.subthemeId);\r\n            }\r\n            if (p.id) {\r\n                return currentSubthemeIds.has(p.id);\r\n            }\r\n            return true;\r\n        });\r\n\r\n        return {\r\n            reviews: filteredReviews,\r\n            intros: filteredIntros,\r\n            projected: filteredProjected,\r\n            tasks: filteredTasks,\r\n            goals: filteredGoals\r\n        };\r\n    };\r\n\r\n    const upcomingList = useMemo(() =\u003e {\r\n        const today = new Date(now);\r\n        today.setHours(0, 0, 0, 0);\r\n\r\n        const activeReviews: any[] = [];\r\n        themes.forEach(t =\u003e {\r\n            t.subthemes.forEach(st =\u003e {\r\n                st.reviews.forEach(r =\u003e {\r\n                    if (r.status === \u0027pending\u0027) {\r\n                        activeReviews.push({\r\n                            ...r,\r\n                            themeTitle: t.title,\r\n                            subthemeTitle: st.title,\r\n                            id: st.id,\r\n                            type: \u0027active\u0027,\r\n                            originalDate: new Date(r.date),\r\n                            color: t.color || \u0027#3b82f6\u0027\r\n                        });\r\n                    }\r\n                });\r\n            });\r\n        });\r\n\r\n        const projected = allProjectedReviews\r\n            .filter((p: any) =\u003e parseLocalDate(p.date) \u003e= today)\r\n            .map((p: any) =\u003e ({\r\n                ...p,\r\n                type: \u0027projected\u0027,\r\n                status: \u0027pending\u0027,\r\n                originalDate: parseLocalDate(p.date),\r\n                number: parseInt(p.description.match(/#(\\d+)/)?.[1] || \u00270\u0027)\r\n            }));\r\n\r\n        const combined = [...activeReviews, ...projected].sort((a, b) =\u003e a.originalDate.getTime() - b.originalDate.getTime());\r\n        return combined.slice(0, 15);\r\n    }, [themes, allProjectedReviews, now]);\r\n\r\n    return {\r\n        currentMonth,\r\n        now,\r\n        calendarDays,\r\n        nextMonth,\r\n        prevMonth,\r\n        setCurrentMonth,\r\n        getEventsForDay,\r\n        upcomingList\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\AnalyticsWidget.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Zap\u0027 is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":13}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useStudy } from \u0027../../context/StudyContext\u0027;\r\nimport { Zap, Clock, Target } from \u0027lucide-react\u0027;\r\nimport { RetentionChart } from \u0027./RetentionChart\u0027;\r\n\r\nexport const AnalyticsWidget = () =\u003e {\r\n    const { gamification, goals } = useStudy();\r\n    const defaultStats = { reviewsCompleted: 0, tasksCompleted: 0, habitsCompleted: 0, totalFocusMinutes: 0, dailyXp: 0, lastXpDate: \u0027\u0027, dailyHistory: {} };\r\n    const stats = { ...defaultStats, ...(gamification?.stats || {}) };\r\n\r\n    // Calculate Stats\r\n    const totalHours = (stats.totalFocusMinutes / 60).toFixed(1);\r\n    const completedGoals = goals.filter(g =\u003e g.progress === 100).length;\r\n\r\n    return (\r\n        \u003cdiv className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8\"\u003e\r\n            {/* Chart Section - New Advanced Retention Chart */}\r\n            \u003cdiv className=\"lg:col-span-2\"\u003e\r\n                \u003cRetentionChart /\u003e\r\n            \u003c/div\u003e\r\n\r\n            {/* Metrics Section */}\r\n            \u003cdiv className=\"space-y-6\"\u003e\r\n                \u003cdiv className=\"bg-slate-900/40 backdrop-blur-xl border border-white/10 rounded-[2rem] p-8 relative overflow-hidden group hover:bg-slate-800/40 transition-all duration-500 shadow-2xl\"\u003e\r\n                    \u003cdiv className=\"absolute top-0 right-0 -mr-4 -mt-4 w-32 h-32 bg-yellow-500/10 rounded-full blur-2xl group-hover:scale-150 transition-transform duration-700\" /\u003e\r\n\r\n                    \u003cdiv className=\"relative z-10\"\u003e\r\n                        \u003cdiv className=\"flex items-center gap-3 mb-4\"\u003e\r\n                            \u003cdiv className=\"p-2.5 rounded-xl bg-yellow-500/10 text-yellow-500 border border-yellow-500/20\"\u003e\r\n                                \u003cClock className=\"w-5 h-5\" /\u003e\r\n                            \u003c/div\u003e\r\n                            \u003cspan className=\"text-sm font-bold text-slate-400 uppercase tracking-widest\"\u003eTempo Total\u003c/span\u003e\r\n                        \u003c/div\u003e\r\n                        \u003cdiv className=\"flex items-baseline gap-1\"\u003e\r\n                            \u003cdiv className=\"text-5xl font-black text-white tracking-tighter drop-shadow-lg\"\u003e\r\n                                {totalHours}\r\n                            \u003c/div\u003e\r\n                            \u003cspan className=\"text-xl font-medium text-slate-500\"\u003ehoras\u003c/span\u003e\r\n                        \u003c/div\u003e\r\n\r\n                        \u003cdiv className=\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between text-xs font-medium text-slate-400\"\u003e\r\n                            \u003cspan\u003e{stats.totalFocusMinutes} minutos totais\u003c/span\u003e\r\n                            \u003cspan className=\"text-yellow-500 bg-yellow-500/10 px-2 py-0.5 rounded border border-yellow-500/20\"\u003eFoco VitalÃ­cio\u003c/span\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n\r\n                \u003cdiv className=\"bg-slate-900/40 backdrop-blur-xl border border-white/10 rounded-[2rem] p-8 relative overflow-hidden group hover:bg-slate-800/40 transition-all duration-500 shadow-2xl\"\u003e\r\n                    \u003cdiv className=\"absolute top-0 right-0 -mr-4 -mt-4 w-32 h-32 bg-purple-500/10 rounded-full blur-2xl group-hover:scale-150 transition-transform duration-700\" /\u003e\r\n\r\n                    \u003cdiv className=\"relative z-10\"\u003e\r\n                        \u003cdiv className=\"flex items-center gap-3 mb-4\"\u003e\r\n                            \u003cdiv className=\"p-2.5 rounded-xl bg-purple-500/10 text-purple-500 border border-purple-500/20\"\u003e\r\n                                \u003cTarget className=\"w-5 h-5\" /\u003e\r\n                            \u003c/div\u003e\r\n                            \u003cspan className=\"text-sm font-bold text-slate-400 uppercase tracking-widest\"\u003eConquistas\u003c/span\u003e\r\n                        \u003c/div\u003e\r\n\r\n                        \u003cdiv className=\"grid grid-cols-2 gap-4\"\u003e\r\n                            \u003cdiv\u003e\r\n                                \u003cdiv className=\"text-4xl font-black text-white tracking-tighter\"\u003e{completedGoals}\u003c/div\u003e\r\n                                \u003cdiv className=\"text-xs font-bold text-emerald-400 mt-1 flex items-center gap-1\"\u003e\r\n                                    \u003cspan className=\"w-1.5 h-1.5 rounded-full bg-emerald-500\" /\u003e\r\n                                    METAS\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n                            \u003cdiv className=\"pl-4 border-l border-white/10\"\u003e\r\n                                \u003cdiv className=\"text-4xl font-black text-white tracking-tighter\"\u003e{stats.tasksCompleted}\u003c/div\u003e\r\n                                \u003cdiv className=\"text-xs font-bold text-blue-400 mt-1 flex items-center gap-1\"\u003e\r\n                                    \u003cspan className=\"w-1.5 h-1.5 rounded-full bg-blue-500\" /\u003e\r\n                                    TAREFAS\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\CalendarWidget.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Card\u0027 is defined but never used.","line":19,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Task\u0027 is defined but never used.","line":23,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027toggleTask\u0027 is assigned a value but never used.","line":26,"column":70,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":80},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027toggleGoal\u0027 is assigned a value but never used.","line":26,"column":82,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":92},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027toggleGoalItem\u0027 is assigned a value but never used.","line":26,"column":94,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":108}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useMemo } from \u0027react\u0027;\r\nimport { useStudy } from \u0027../../context/StudyContext\u0027;\r\nimport { useProjectContext } from \u0027../../context/ProjectProvider\u0027;\r\nimport { ChevronLeft, ChevronRight } from \u0027lucide-react\u0027;\r\nimport {\r\n    format,\r\n    startOfMonth,\r\n    endOfMonth,\r\n    startOfWeek,\r\n    endOfWeek,\r\n    eachDayOfInterval,\r\n    addMonths,\r\n    subMonths,\r\n    isSameMonth,\r\n    isToday\r\n} from \u0027date-fns\u0027;\r\nimport { ptBR } from \u0027date-fns/locale\u0027;\r\nimport { cn } from \u0027../../lib/utils\u0027;\r\nimport { Card } from \u0027../../components/ui/Card\u0027;\r\nimport { Modal } from \u0027../../components/ui/Modal\u0027;\r\nimport { DayDetails } from \u0027../calendar/components/DayDetails\u0027;\r\nimport { getAllProjectedReviews } from \u0027../../lib/srs\u0027;\r\nimport type { Task, CalendarReviewItem, CalendarGoalItem, CalendarTaskItem } from \u0027../../types\u0027;\r\n\r\nexport const CalendarWidget = () =\u003e {\r\n    const { themes, tasks, goals, completeReview, startStudySession, toggleTask, toggleGoal, toggleGoalItem, deleteTask, deleteGoal } = useStudy();\r\n    const { projects } = useProjectContext();\r\n    const [currentMonth, setCurrentMonth] = useState(new Date());\r\n    const [selectedDate, setSelectedDate] = useState\u003cDate | null\u003e(null);\r\n\r\n    // Navigation\r\n    const nextMonth = () =\u003e setCurrentMonth(addMonths(currentMonth, 1));\r\n    const prevMonth = () =\u003e setCurrentMonth(subMonths(currentMonth, 1));\r\n\r\n    // Calendar Generation\r\n    const monthStart = startOfMonth(currentMonth);\r\n    const monthEnd = endOfMonth(monthStart);\r\n    const startDate = startOfWeek(monthStart);\r\n    const endDate = endOfWeek(monthEnd);\r\n\r\n    const calendarDays = eachDayOfInterval({ start: startDate, end: endDate });\r\n\r\n    // Pre-calculate expensive projections\r\n    const allProjected = useMemo(() =\u003e getAllProjectedReviews(themes), [themes]);\r\n\r\n    // OTIMIZAÃ‡ÃƒO: Gerar mapa de eventos uma Ãºnica vez para o intervalo visÃ­vel\r\n    const eventsMap = useMemo(() =\u003e {\r\n        const map: Record\u003cstring, { reviews: CalendarReviewItem[], tasks: CalendarTaskItem[], goals: CalendarGoalItem[], projected: any[] }\u003e = {};\r\n\r\n        calendarDays.forEach(day =\u003e {\r\n            const dateStr = format(day, \u0027yyyy-MM-dd\u0027);\r\n            const dayOfWeek = day.getDay();\r\n\r\n            // Reviews\r\n            const dayReviews: CalendarReviewItem[] = themes.flatMap(t =\u003e\r\n                t.subthemes.flatMap(st =\u003e\r\n                    st.reviews\r\n                        .filter(r =\u003e r.date === dateStr)\r\n                        .map(r =\u003e ({ ...r, id: `${st.id}-${r.date}`, themeTitle: t.title, subthemeTitle: st.title }))\r\n                )\r\n            );\r\n\r\n            // Tasks\r\n            const dayTasks: CalendarTaskItem[] = [];\r\n            tasks.forEach(t =\u003e {\r\n                let matchesDay = false;\r\n                if (t.type === \u0027recurring\u0027) {\r\n                    const taskCreationDay = new Date(t.createdAt).setHours(0, 0, 0, 0);\r\n                    if (day.getTime() \u003e= taskCreationDay) {\r\n                        if (t.endDate \u0026\u0026 dateStr \u003e t.endDate) {\r\n                            matchesDay = false;\r\n                        } else {\r\n                            matchesDay = t.recurrence?.includes(dayOfWeek) || false;\r\n                        }\r\n                    }\r\n                } else if (t.type === \u0027day\u0027) {\r\n                    matchesDay = t.date ? t.date.split(\u0027T\u0027)[0] === dateStr : false;\r\n                } else if (t.type === \u0027period\u0027 \u0026\u0026 t.startDate \u0026\u0026 t.endDate) {\r\n                    const start = t.startDate.split(\u0027T\u0027)[0];\r\n                    const end = t.endDate.split(\u0027T\u0027)[0];\r\n                    matchesDay = dateStr \u003e= start \u0026\u0026 dateStr \u003c= end;\r\n                }\r\n\r\n                if (matchesDay) {\r\n                    let isCompletedToday = false;\r\n                    if (t.type === \u0027day\u0027) {\r\n                        isCompletedToday = t.status === \u0027completed\u0027;\r\n                    } else if (t.completionHistory) {\r\n                        isCompletedToday = t.completionHistory.some(h =\u003e h.startsWith(dateStr));\r\n                    }\r\n\r\n                    let label: string | undefined;\r\n                    if (t.type === \u0027period\u0027 \u0026\u0026 t.startDate \u0026\u0026 t.endDate) {\r\n                        const start = t.startDate.split(\u0027T\u0027)[0];\r\n                        const end = t.endDate.split(\u0027T\u0027)[0];\r\n                        if (start === dateStr) label = \u0027InÃ­cio\u0027;\r\n                        else if (end === dateStr) label = \u0027Prazo\u0027;\r\n                        else label = \u0027Em andamento\u0027;\r\n                    }\r\n\r\n                    dayTasks.push({ ...t, isCompletedToday, label });\r\n                }\r\n            });\r\n\r\n            // Goals\r\n            const dayGoals: CalendarGoalItem[] = [];\r\n            goals.forEach(g =\u003e {\r\n                // 1. Habit Goal\r\n                if (g.type === \u0027habit\u0027) {\r\n                    let matchesHabit = true;\r\n                    if (g.createdAt) {\r\n                        const goalCreationDay = new Date(g.createdAt).setHours(0, 0, 0, 0);\r\n                        if (day.getTime() \u003c goalCreationDay) matchesHabit = false;\r\n                    }\r\n                    if (g.deadline \u0026\u0026 dateStr \u003e g.deadline) matchesHabit = false;\r\n                    if (g.recurrence \u0026\u0026 g.recurrence.length \u003e 0 \u0026\u0026 !g.recurrence.includes(dayOfWeek)) matchesHabit = false;\r\n\r\n                    if (matchesHabit) {\r\n                        const isCompleted = g.completionHistory?.some(h =\u003e h.startsWith(dateStr)) || false;\r\n                        dayGoals.push({ ...g, isCompletedToday: isCompleted } as CalendarGoalItem);\r\n                    }\r\n                }\r\n                // 2. Duration Goals (Start -\u003e Deadline)\r\n                else {\r\n                    const start = g.startDate ? g.startDate.split(\u0027T\u0027)[0] : null;\r\n                    const end = g.deadline ? g.deadline.split(\u0027T\u0027)[0] : null;\r\n\r\n                    if (start \u0026\u0026 end \u0026\u0026 dateStr \u003e= start \u0026\u0026 dateStr \u003c= end) {\r\n                        const isStart = dateStr === start;\r\n                        const isEnd = dateStr === end;\r\n                        const isCompleted = g.progress === 100;\r\n\r\n                        dayGoals.push({\r\n                            ...g,\r\n                            label: isEnd ? \u0027Prazo\u0027 : (isStart ? \u0027InÃ­cio\u0027 : \u0027Em andamento\u0027),\r\n                            priority: isEnd ? \u0027high\u0027 : \u0027medium\u0027,\r\n                            isCompletedToday: isEnd ? isCompleted : false,\r\n                            // Ensure we don\u0027t spam identical IDs if mapping relies on them\r\n                            // but here we just push to array for display\r\n                        } as CalendarGoalItem);\r\n                    }\r\n                    // Fallback for single deadline if no start date\r\n                    else if (!start \u0026\u0026 end \u0026\u0026 end === dateStr) {\r\n                        const isCompleted = g.progress === 100;\r\n                        dayGoals.push({ ...g, label: \u0027Prazo\u0027, priority: \u0027high\u0027, isCompletedToday: isCompleted } as CalendarGoalItem);\r\n                    }\r\n                }\r\n            });\r\n\r\n            // Projects (Duration Coverage)\r\n            projects.forEach(p =\u003e {\r\n                const start = p.startDate;\r\n                const end = p.deadline;\r\n\r\n                // Duration Checks\r\n                if (start \u0026\u0026 end \u0026\u0026 dateStr \u003e= start \u0026\u0026 dateStr \u003c= end) {\r\n                    const isStart = dateStr === start;\r\n                    const isEnd = dateStr === end;\r\n\r\n                    dayGoals.push({\r\n                        id: p.id,\r\n                        title: p.title,\r\n                        type: isEnd ? \u0027project-deadline\u0027 : (isStart ? \u0027project-start\u0027 : \u0027project-step\u0027),\r\n                        isParent: true,\r\n                        label: isEnd ? \u0027Prazo Projeto\u0027 : (isStart ? \u0027InÃ­cio Projeto\u0027 : \u0027Projeto em Andamento\u0027),\r\n                        color: p.color || \u0027#8b5cf6\u0027,\r\n                        priority: isEnd ? \u0027high\u0027 : \u0027medium\u0027,\r\n                        isCompletedToday: isEnd ? p.progress === 100 : false\r\n                    } as any);\r\n                }\r\n                // Fallback singles\r\n                else if (!start \u0026\u0026 end \u0026\u0026 end === dateStr) {\r\n                    dayGoals.push({\r\n                        id: p.id,\r\n                        title: p.title,\r\n                        type: \u0027project-deadline\u0027 as any,\r\n                        isParent: true,\r\n                        label: \u0027Prazo Projeto\u0027,\r\n                        color: p.color || \u0027#8b5cf6\u0027,\r\n                        priority: \u0027high\u0027,\r\n                        isCompletedToday: p.progress === 100\r\n                    } as any);\r\n                }\r\n\r\n                // Milestones (Keep explicit)\r\n                p.milestones.forEach(m =\u003e {\r\n                    if (m.dueDate === dateStr) {\r\n                        dayGoals.push({\r\n                            id: m.id,\r\n                            title: m.title,\r\n                            parentGoalTitle: p.title,\r\n                            type: \u0027project-milestone\u0027 as any,\r\n                            label: \u0027Marco: \u0027 + m.title,\r\n                            color: p.color || \u0027#8b5cf6\u0027,\r\n                            priority: \u0027medium\u0027,\r\n                            isCompletedToday: m.completed\r\n                        } as any);\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Projected\r\n            const dayProjected = allProjected\r\n                .filter((p: { date: string }) =\u003e p.date === dateStr)\r\n                .map((p: any) =\u003e ({ ...p, priority: \u0027medium\u0027 as const }));\r\n\r\n            map[dateStr] = { reviews: dayReviews, tasks: dayTasks, goals: dayGoals, projected: dayProjected };\r\n        });\r\n\r\n        return map;\r\n    }, [themes, tasks, goals, projects, calendarDays, allProjected]);\r\n\r\n    const getEventsForDay = (date: Date) =\u003e {\r\n        const dateStr = format(date, \u0027yyyy-MM-dd\u0027);\r\n        const data = eventsMap[dateStr] || { reviews: [], tasks: [], goals: [], projected: [] };\r\n        return data;\r\n    };\r\n\r\n    return (\r\n        \u003c\u003e\r\n            \u003cdiv className=\"relative overflow-hidden p-4 md:p-6 rounded-3xl bg-slate-900/40 border border-white/5 shadow-2xl backdrop-blur-md group\"\u003e\r\n                \u003cdiv className=\"absolute inset-0 bg-[url(\u0027https://grainy-gradients.vercel.app/noise.svg\u0027)] opacity-10 mix-blend-overlay pointer-events-none\" /\u003e\r\n                {/* Ambient Glow */}\r\n                \u003cdiv className=\"absolute top-0 right-0 w-32 h-32 bg-indigo-500/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none transition-all group-hover:bg-indigo-500/20\" /\u003e\r\n\r\n                \u003cdiv className=\"flex items-center justify-between mb-6 relative z-10\"\u003e\r\n                    \u003ch2 className=\"text-lg font-bold text-white tracking-tight flex items-center gap-2\"\u003e\r\n                        CalendÃ¡rio\r\n                    \u003c/h2\u003e\r\n\r\n                    \u003cdiv className=\"flex items-center gap-2\"\u003e\r\n                        \u003cspan className=\"text-xs font-medium text-slate-400 capitalize mr-2\"\u003e\r\n                            {format(currentMonth, \u0027MMMM yyyy\u0027, { locale: ptBR })}\r\n                        \u003c/span\u003e\r\n                        \u003cdiv className=\"flex bg-slate-800/50 rounded-lg border border-white/5 p-0.5\"\u003e\r\n                            \u003cbutton onClick={prevMonth} className=\"p-1 hover:bg-slate-800/50 rounded-md text-slate-400 hover:text-white transition-colors\"\u003e\r\n                                \u003cChevronLeft className=\"w-4 h-4\" /\u003e\r\n                            \u003c/button\u003e\r\n                            \u003cbutton onClick={nextMonth} className=\"p-1 hover:bg-slate-800/50 rounded-md text-slate-400 hover:text-white transition-colors\"\u003e\r\n                                \u003cChevronRight className=\"w-4 h-4\" /\u003e\r\n                            \u003c/button\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n\r\n                \u003cdiv className=\"grid grid-cols-7 text-center mb-2\"\u003e\r\n                    {[\u0027D\u0027, \u0027S\u0027, \u0027T\u0027, \u0027Q\u0027, \u0027Q\u0027, \u0027S\u0027, \u0027S\u0027].map((d, i) =\u003e (\r\n                        \u003cdiv key={i} className=\"text-[10px] font-bold text-slate-500 uppercase tracking-wider py-2\"\u003e{d}\u003c/div\u003e\r\n                    ))}\r\n                \u003c/div\u003e\r\n\r\n                \u003cdiv className=\"grid grid-cols-7 gap-1.5 relative z-10\"\u003e\r\n                    {calendarDays.map((day, idx) =\u003e {\r\n                        const { reviews, tasks, goals } = getEventsForDay(day);\r\n                        const isCurrentMonth = isSameMonth(day, currentMonth);\r\n                        const isDayToday = isToday(day);\r\n\r\n                        // Dots calculation\r\n                        const pendingReviews = reviews.filter((r: { status: string }) =\u003e r.status === \u0027pending\u0027).length;\r\n                        const completedReviews = reviews.filter((r: { status: string }) =\u003e r.status === \u0027completed\u0027).length;\r\n                        const hasGoals = goals.some((g: { isCompletedToday?: boolean }) =\u003e !g.isCompletedToday);\r\n                        const hasTasks = tasks.some((t: { isCompletedToday?: boolean }) =\u003e !t.isCompletedToday);\r\n\r\n                        return (\r\n                            \u003cdiv\r\n                                key={idx}\r\n                                onClick={() =\u003e setSelectedDate(day)}\r\n                                className={cn(\r\n                                    \"aspect-square rounded-xl flex flex-col items-center justify-center relative cursor-pointer transition-all duration-300 border border-transparent\",\r\n                                    isCurrentMonth\r\n                                        ? \"bg-slate-800/20 hover:bg-slate-800/50 hover:border-white/10 hover:scale-105 hover:shadow-lg\"\r\n                                        : \"opacity-20 text-slate-600 grayscale\",\r\n                                    isDayToday \u0026\u0026 \"bg-blue-600 shadow-[0_4px_12px_rgba(37,99,235,0.4)] text-white scale-110 z-10 border-blue-500/50\"\r\n                                )}\r\n                            \u003e\r\n                                \u003cspan className={cn(\r\n                                    \"text-xs font-bold\",\r\n                                    !isDayToday \u0026\u0026 \"text-slate-400 group-hover:text-white\"\r\n                                )}\u003e\r\n                                    {format(day, \u0027d\u0027)}\r\n                                \u003c/span\u003e\r\n\r\n                                {/* Micro Indicators */}\r\n                                \u003cdiv className=\"flex gap-0.5 mt-1\"\u003e\r\n                                    {pendingReviews \u003e 0 \u0026\u0026 \u003cdiv className={cn(\"w-1 h-1 rounded-full\", isDayToday ? \"bg-white\" : \"bg-blue-500\")} /\u003e}\r\n                                    {pendingReviews === 0 \u0026\u0026 completedReviews \u003e 0 \u0026\u0026 \u003cdiv className={cn(\"w-1 h-1 rounded-full\", isDayToday ? \"bg-white/60\" : \"bg-emerald-500\")} /\u003e}\r\n\r\n                                    {/* Start Date Dot */}\r\n                                    {[...tasks, ...goals].some((i: any) =\u003e i.label === \u0027InÃ­cio\u0027) \u0026\u0026 (\r\n                                        \u003cdiv className={cn(\"w-1 h-1 rounded-full\", isDayToday ? \"bg-indigo-400\" : \"bg-indigo-500\")} title=\"InÃ­cio Hoje!\" /\u003e\r\n                                    )}\r\n\r\n                                    {/* Deadline Dot */}\r\n                                    {[...tasks, ...goals].some((i: any) =\u003e i.label === \u0027Prazo\u0027) \u0026\u0026 (\r\n                                        \u003cdiv className={cn(\"w-1 h-1 rounded-full animate-pulse\", isDayToday ? \"bg-red-400\" : \"bg-red-500\")} title=\"Prazo Hoje!\" /\u003e\r\n                                    )}\r\n\r\n                                    {hasGoals \u0026\u0026 \u003cdiv className={cn(\"w-1 h-1 rounded-full\", isDayToday ? \"bg-white/60\" : \"bg-emerald-500\")} /\u003e}\r\n                                    {hasTasks \u0026\u0026 \u003cdiv className={cn(\"w-1 h-1 rounded-full\", isDayToday ? \"bg-white/60\" : \"bg-amber-500\")} /\u003e}\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n                        );\r\n                    })}\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n\r\n            \u003cModal\r\n                isOpen={!!selectedDate}\r\n                onClose={() =\u003e setSelectedDate(null)}\r\n                title={selectedDate ? format(selectedDate, \"d \u0027de\u0027 MMMM\", { locale: ptBR }) : \u0027\u0027}\r\n            \u003e\r\n                {selectedDate \u0026\u0026 (\r\n                    \u003cDayDetails\r\n                        events={getEventsForDay(selectedDate)}\r\n                        date={selectedDate}\r\n                        onCompleteReview={completeReview}\r\n                        onStartStudy={startStudySession}\r\n                        onDeleteTask={deleteTask}\r\n                        onDeleteGoal={deleteGoal}\r\n                    /\u003e\r\n                )}\r\n            \u003c/Modal\u003e\r\n        \u003c/\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\Dashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Clock\u0027 is defined but never used.","line":4,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027startFocusSession\u0027 is assigned a value but never used.","line":53,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":53,"endColumn":30}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \u0027react\u0027;\r\nimport { usePomodoroContext } from \u0027../../context/PomodoroContext\u0027;\r\nimport { useProjectContext } from \u0027../../context/ProjectProvider\u0027;\r\nimport { Target, CheckCircle2, Clock, TrendingUp, FolderKanban } from \u0027lucide-react\u0027;\r\nimport { CalendarWidget } from \u0027./CalendarWidget\u0027;\r\n// Lazy Load\r\n\r\nimport { ProfessionalHero } from \u0027./ProfessionalHero\u0027;\r\nimport { GamificationModal } from \u0027../gamification/GamificationModal\u0027;\r\nimport { RealisticKPICard } from \u0027./components/RealisticKPICard\u0027;\r\nimport { ActiveGoalsWidget } from \u0027./components/ActiveGoalsWidget\u0027;\r\nimport { MissionPreviewWidget } from \u0027./components/MissionPreviewWidget\u0027;\r\nimport { AchievementsSummaryWidget } from \u0027./components/AchievementsSummaryWidget\u0027;\r\nimport { LeaderboardWidget } from \u0027./components/LeaderboardWidget\u0027;\r\nimport { useDashboardData } from \u0027../../hooks/useDashboardData\u0027;\r\n\r\ninterface DashboardProps {\r\n    onNavigate: (tab: string) =\u003e void;\r\n    onOpenSummaryModal: () =\u003e void;\r\n    setIsMissionModalOpen: (isOpen: boolean) =\u003e void;\r\n}\r\n\r\n\r\n// Lazy Load Chart\r\nconst ConsistencyHeatmap = React.lazy(() =\u003e import(\u0027../../components/analytics/ConsistencyHeatmap\u0027).then(m =\u003e ({ default: m.ConsistencyHeatmap })));\r\n\r\nexport const Dashboard: React.FC\u003cDashboardProps\u003e = ({ onNavigate, onOpenSummaryModal, setIsMissionModalOpen }) =\u003e {\r\n    // ... existing hook calls ...\r\n\r\n    const {\r\n        zenMode,\r\n        gamification,\r\n        goals,\r\n        themes,\r\n        activeGoals,\r\n        dueReviews,\r\n        progressPercent,\r\n        isAllDone,\r\n        completedCount,\r\n        totalCount\r\n    } = useDashboardData();\r\n\r\n    const { projects } = useProjectContext();\r\n\r\n    // Calculate project count using the same logic as MainLayout\r\n    const projectCount = React.useMemo(() =\u003e {\r\n        const themeProjectIds = themes.filter(t =\u003e t.category === \u0027project\u0027).map(t =\u003e t.id);\r\n        const linkedGoalsCount = goals.filter(g =\u003e g.relatedThemeId \u0026\u0026 themeProjectIds.includes(g.relatedThemeId)).length;\r\n        const standaloneProjectsCount = projects.length;\r\n        return linkedGoalsCount + standaloneProjectsCount;\r\n    }, [themes, goals, projects]);\r\n\r\n    const { startFocusSession } = usePomodoroContext();\r\n    const [isGamificationModalOpen, setIsGamificationModalOpen] = React.useState(false);\r\n\r\n    return (\r\n        \u003cdiv className=\"space-y-8 animate-in fade-in duration-500 pt-6\"\u003e\r\n\r\n            {/* Professional Gamification Hero */}\r\n            {!zenMode \u0026\u0026 \u003cProfessionalHero onClick={() =\u003e setIsGamificationModalOpen(true)} /\u003e}\r\n\r\n            {/* Gamification Modal */}\r\n            \u003cGamificationModal\r\n                isOpen={isGamificationModalOpen}\r\n                onClose={() =\u003e setIsGamificationModalOpen(false)}\r\n            /\u003e\r\n\r\n            {/* KPI Cards (Realistic 3D Glass) */}\r\n            \u003cdiv className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6\"\u003e\r\n                \u003cRealisticKPICard\r\n                    title=\"Dias Seguidos\"\r\n                    value={gamification?.streak?.current?.toString() || \"0\"}\r\n                    icon={TrendingUp}\r\n                    gradient=\"from-purple-600 to-indigo-600\"\r\n                    shadowColor=\"purple\"\r\n                    onClick={() =\u003e setIsGamificationModalOpen(true)}\r\n                /\u003e\r\n                \u003cRealisticKPICard\r\n                    title=\"Metas Ativas\"\r\n                    value={activeGoals.toString()}\r\n                    icon={Target}\r\n                    gradient=\"from-emerald-500 to-teal-600\"\r\n                    shadowColor=\"emerald\"\r\n                    onClick={() =\u003e onNavigate(\u0027goals\u0027)}\r\n                /\u003e\r\n                \u003cRealisticKPICard\r\n                    title=\"RevisÃµes Hoje\"\r\n                    value={dueReviews.toString()}\r\n                    icon={CheckCircle2}\r\n                    gradient=\"from-blue-500 to-cyan-500\"\r\n                    shadowColor=\"blue\"\r\n                    onClick={() =\u003e setIsMissionModalOpen(true)}\r\n                    alert={dueReviews \u003e 0}\r\n                /\u003e\r\n                \u003cRealisticKPICard\r\n                    title=\"Projetos\"\r\n                    value={projectCount.toString()}\r\n                    icon={FolderKanban}\r\n                    gradient=\"from-amber-500 to-orange-600\"\r\n                    shadowColor=\"amber\"\r\n                    onClick={onOpenSummaryModal}\r\n                /\u003e\r\n            \u003c/div\u003e\r\n\r\n            {/* Analytics Section (Chart) - Hide in Zen Mode */}\r\n            {!zenMode \u0026\u0026 (\r\n                \u003cdiv className=\"relative group\"\u003e\r\n                    {/* Decoration */}\r\n                    \u003cdiv className=\"absolute -inset-1 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-emerald-500/10 rounded-3xl blur-xl opacity-50 group-hover:opacity-100 transition-opacity\" /\u003e\r\n                    \u003cReact.Suspense fallback={\u003cdiv className=\"h-[280px] w-full bg-slate-900/50 rounded-3xl animate-pulse\" /\u003e}\u003e\r\n                        \u003cConsistencyHeatmap /\u003e\r\n                    \u003c/React.Suspense\u003e\r\n                \u003c/div\u003e\r\n            )}\r\n\r\n            {/* Main Grid: Goals \u0026 Tasks */}\r\n            \u003cdiv className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\"\u003e\r\n                {/* Left Column (2/3): Active Goals List (Detailed) */}\r\n                \u003cdiv className=\"lg:col-span-2 space-y-6\"\u003e\r\n                    \u003cActiveGoalsWidget goals={goals} onNavigate={onNavigate} /\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* Right Column (1/3): Widgets */}\r\n                \u003cdiv className=\"space-y-6\"\u003e\r\n                    \u003cCalendarWidget /\u003e\r\n\r\n                    {/* Today\u0027s Mission Preview (Refined) */}\r\n                    \u003cMissionPreviewWidget\r\n                        progressPercent={progressPercent}\r\n                        isAllDone={isAllDone}\r\n                        completedCount={completedCount}\r\n                        totalCount={totalCount}\r\n                        setIsMissionModalOpen={setIsMissionModalOpen}\r\n                    /\u003e\r\n\r\n                    {/* Achievements Summary */}\r\n                    \u003cAchievementsSummaryWidget\r\n                        unlockedAchievements={gamification?.achievements || []}\r\n                        onNavigate={onNavigate}\r\n                    /\u003e\r\n\r\n                    {/* Global Leaderboard (Gamification) */}\r\n                    \u003cLeaderboardWidget\r\n                        userXp={gamification?.level?.totalXp || 0}\r\n                        userLevel={gamification?.level?.level || 1}\r\n                    /\u003e\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\ProfessionalHero.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Crown\u0027 is defined but never used.","line":3,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027ChevronRight\u0027 is defined but never used.","line":3,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":42},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Star\u0027 is defined but never used.","line":3,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":48},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027TrendingUp\u0027 is defined but never used.","line":3,"column":50,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":60}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo, useState } from \u0027react\u0027;\r\nimport { useStudy } from \u0027../../context/StudyContext\u0027;\r\nimport { Trophy, Zap, Crown, ChevronRight, Star, TrendingUp } from \u0027lucide-react\u0027;\r\nimport { getTitleForLevel, getNextTitleForLevel } from \u0027../../config/gamification\u0027;\r\nimport { cn } from \u0027../../lib/utils\u0027; // Assuming this exists\r\n\r\ninterface ProfessionalHeroProps {\r\n    onClick?: () =\u003e void;\r\n}\r\n\r\nimport { useAuth } from \u0027../../context/AuthContext\u0027;\r\n\r\nexport const ProfessionalHero: React.FC\u003cProfessionalHeroProps\u003e = ({ onClick }) =\u003e {\r\n    const { gamification } = useStudy();\r\n    const { user } = useAuth();\r\n    // Default to level 1 if data is missing to prevent crashes\r\n    const level = gamification?.level || { level: 1, currentXp: 0, nextLevelXp: 500, totalXp: 0 };\r\n    const [isHovered, setIsHovered] = useState(false);\r\n\r\n    // Memoize expensive calculations\r\n    const { percentage, currentTitle, nextTitle, remainingXp } = useMemo(() =\u003e {\r\n        const pct = Math.min(100, Math.max(0, (level.currentXp / level.nextLevelXp) * 100));\r\n        return {\r\n            percentage: pct,\r\n            currentTitle: getTitleForLevel(level.level),\r\n            nextTitle: getNextTitleForLevel(level.level),\r\n            remainingXp: level.nextLevelXp - level.currentXp\r\n        };\r\n    }, [level.currentXp, level.nextLevelXp, level.level]);\r\n\r\n    return (\r\n        \u003cdiv\r\n            onClick={onClick}\r\n            className={cn(\r\n                \"group relative w-full overflow-hidden rounded-[2rem] bg-slate-950 border border-slate-800/60 shadow-2xl transition-all duration-500 hover:border-blue-500/30 hover:shadow-blue-900/20\",\r\n                onClick \u0026\u0026 \"cursor-pointer\"\r\n            )}\r\n            onMouseEnter={() =\u003e setIsHovered(true)}\r\n            onMouseLeave={() =\u003e setIsHovered(false)}\r\n        \u003e\r\n            {/* Optimized Background - CSS gradients instead of heavy images */}\r\n            \u003cdiv className=\"absolute inset-0 bg-gradient-to-br from-slate-900 via-slate-950 to-black\" /\u003e\r\n\r\n            {/* Subtle Noise (CSS-based if possible, or very light overlay) */}\r\n            \u003cdiv className=\"absolute inset-0 opacity-[0.03] bg-[url(\u0027data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjZmZmIi8+CjxyZWN0IHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9IiMwMDAiLz4KPC9zdmc+\u0027)] pointer-events-none\" /\u003e\r\n\r\n            {/* Ambient Lighting - Reduced blur radius for performance */}\r\n            \u003cdiv className=\"absolute top-0 right-0 w-96 h-96 bg-blue-600/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none transition-opacity duration-700\" style={{ opacity: isHovered ? 0.2 : 0.1 }} /\u003e\r\n            \u003cdiv className=\"absolute bottom-0 left-0 w-96 h-96 bg-indigo-600/10 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2 pointer-events-none transition-opacity duration-700\" style={{ opacity: isHovered ? 0.2 : 0.1 }} /\u003e\r\n\r\n            \u003cdiv className=\"relative z-10 p-5 md:p-8 flex flex-col md:flex-row items-center gap-6 md:gap-12\"\u003e\r\n\r\n                {/* 1. Identity Section */}\r\n                \u003cdiv className=\"flex-1 flex items-center gap-6\"\u003e\r\n                    {/* 3D Glass Badge */}\r\n                    \u003cdiv className=\"relative w-24 h-24 flex-shrink-0 perspective-1000\"\u003e\r\n                        \u003cdiv className=\"w-full h-full rounded-2xl bg-gradient-to-br from-slate-800 to-slate-900 border border-white/10 shadow-xl flex items-center justify-center transform transition-transform duration-500 group-hover:rotate-y-12 overflow-hidden\"\u003e\r\n                            \u003cdiv className=\"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent rounded-2xl pointer-events-none z-20\" /\u003e\r\n\r\n                            {user?.avatar ? (\r\n                                \u003cimg\r\n                                    src={user.avatar}\r\n                                    alt=\"Profile\"\r\n                                    className=\"w-full h-full object-cover\"\r\n                                    fetchPriority=\"high\"\r\n                                    loading=\"eager\"\r\n                                    decoding=\"sync\"\r\n                                /\u003e\r\n                            ) : (\r\n                                \u003cTrophy className=\"w-10 h-10 text-yellow-400 drop-shadow-[0_0_15px_rgba(250,204,21,0.5)]\" /\u003e\r\n                            )}\r\n\r\n                            \u003cdiv className=\"absolute -bottom-2 px-3 py-1 bg-slate-950 border border-slate-800 rounded-full text-[10px] font-bold text-white shadow-lg z-30\"\u003e\r\n                                Lvl {level.level}\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    \u003cdiv className=\"flex flex-col text-center md:text-left\"\u003e\r\n                        \u003cdiv className=\"flex items-center gap-2 justify-center md:justify-start mb-1\"\u003e\r\n                            \u003cspan className=\"px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-widest bg-emerald-500/10 text-emerald-400 border border-emerald-500/20\"\u003e\r\n                                Patente Atual\r\n                            \u003c/span\u003e\r\n                        \u003c/div\u003e\r\n                        \u003ch2 className=\"text-3xl font-black text-white tracking-tight mb-1\"\u003e\r\n                            {currentTitle}\r\n                        \u003c/h2\u003e\r\n                        \u003cp className=\"text-sm text-slate-400 max-w-[280px]\"\u003e\r\n                            PrÃ³xima patente: \u003cspan className=\"text-slate-200 font-semibold\"\u003e{nextTitle}\u003c/span\u003e\r\n                        \u003c/p\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* 2. Stats \u0026 Progress */}\r\n                \u003cdiv className=\"flex-1 w-full md:w-auto bg-slate-900/40 rounded-2xl p-6 border border-white/5 backdrop-blur-sm\"\u003e\r\n                    \u003cdiv className=\"flex items-end justify-between mb-4\"\u003e\r\n                        \u003cdiv\u003e\r\n                            \u003cp className=\"text-xs font-bold text-slate-500 uppercase tracking-widest mb-1\"\u003eTotal Experience\u003c/p\u003e\r\n                            \u003cdiv className=\"text-2xl font-mono font-bold text-white tracking-tight\"\u003e\r\n                                {(level.currentXp || 0).toLocaleString()} \u003cspan className=\"text-sm text-slate-600 font-normal\"\u003e/ {(level.nextLevelXp || 500).toLocaleString()} XP\u003c/span\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                        \u003cdiv className=\"text-right\"\u003e\r\n                            \u003cp className=\"text-xs font-bold text-indigo-400 mb-1\"\u003e+{Math.round(percentage || 0)}%\u003c/p\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* High-Performance Progress Bar */}\r\n                    \u003cdiv className=\"relative h-2.5 w-full bg-slate-950 rounded-full overflow-hidden border border-white/5\"\u003e\r\n                        \u003cdiv\r\n                            className=\"absolute top-0 left-0 h-full bg-gradient-to-r from-blue-600 to-indigo-500 shadow-[0_0_10px_rgba(79,70,229,0.4)] transition-all duration-1000 ease-out\"\r\n                            style={{ width: `${percentage || 0}%` }}\r\n                        /\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    \u003cdiv className=\"mt-4 flex items-center justify-between text-xs text-slate-500\"\u003e\r\n                        \u003cdiv className=\"flex items-center gap-2\"\u003e\r\n                            \u003cZap className=\"w-3.5 h-3.5 text-yellow-500\" /\u003e\r\n                            \u003cspan\u003e{(remainingXp || 0).toLocaleString()} XP to go\u003c/span\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n\r\n            \u003c/div\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\RetentionChart.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027useMemo\u0027 is defined but never used.","line":1,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":27},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\RetentionChart.tsx:46:9\n  44 |\n  45 |     useEffect(() =\u003e {\n\u003e 46 |         setData(generateData(timeRange === \u0027week\u0027 ? 7 : 14));\n     |         ^^^^^^^ Avoid calling setState() directly within an effect\n  47 |     }, [timeRange]);\n  48 |\n  49 |     return (","line":46,"column":9,"nodeType":null,"endLine":46,"endColumn":16}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useMemo, useEffect } from \u0027react\u0027;\r\nimport {\r\n    AreaChart,\r\n    Area,\r\n    XAxis,\r\n    YAxis,\r\n    CartesianGrid,\r\n    Tooltip,\r\n    ResponsiveContainer\r\n} from \u0027recharts\u0027;\r\nimport { format, subDays } from \u0027date-fns\u0027;\r\nimport { ptBR } from \u0027date-fns/locale\u0027;\r\nimport { Brain } from \u0027lucide-react\u0027;\r\n\r\n// Mock Data Generation for Visuals\r\n// In real app, this would query \u0027reviews\u0027 table for pass/fail rates per day\r\nconst generateData = (days: number) =\u003e {\r\n    const data: { date: string; fullDate: string; retention: number; reviews: number }[] = [];\r\n    const today = new Date();\r\n    let retentionBase = 85;\r\n\r\n    for (let i = days; i \u003e= 0; i--) {\r\n        const date = subDays(today, i);\r\n        // Simulate realistic fluctuation\r\n        const randomFlux = (Math.random() - 0.5) * 5;\r\n        retentionBase = Math.min(100, Math.max(70, retentionBase + randomFlux));\r\n\r\n        data.push({\r\n            date: format(date, \u0027MMM dd\u0027, { locale: ptBR }),\r\n            fullDate: format(date, \u0027ddMMM yyyy\u0027, { locale: ptBR }),\r\n            retention: Math.round(retentionBase),\r\n            reviews: Math.floor(Math.random() * 20) + 5\r\n        });\r\n    }\r\n    return data;\r\n};\r\n\r\nexport const RetentionChart = () =\u003e {\r\n    const [timeRange, setTimeRange] = useState\u003c\u0027week\u0027 | \u0027month\u0027\u003e(\u0027week\u0027);\r\n\r\n\r\n\r\n    const [data, setData] = useState\u003c{ date: string; fullDate: string; retention: number; reviews: number }[]\u003e([]);\r\n\r\n    useEffect(() =\u003e {\r\n        setData(generateData(timeRange === \u0027week\u0027 ? 7 : 14));\r\n    }, [timeRange]);\r\n\r\n    return (\r\n        \u003cdiv className=\"bg-slate-950/50 backdrop-blur-xl border border-white/10 rounded-[2rem] p-8 relative overflow-hidden shadow-2xl group transition-all duration-500 hover:border-purple-500/20\"\u003e\r\n            {/* Realistic Glossy Highlight */}\r\n            \u003cdiv className=\"absolute top-0 left-0 w-full h-1/2 bg-gradient-to-b from-white/5 to-transparent pointer-events-none\" /\u003e\r\n\r\n            {/* Header */}\r\n            \u003cdiv className=\"flex items-center justify-between mb-8 relative z-10\"\u003e\r\n                \u003cdiv className=\"flex items-center gap-4\"\u003e\r\n                    \u003cdiv className=\"w-12 h-12 rounded-2xl bg-gradient-to-br from-purple-500/20 to-pink-500/20 flex items-center justify-center text-purple-400 border border-white/5 shadow-inner\"\u003e\r\n                        \u003cBrain className=\"w-6 h-6\" /\u003e\r\n                    \u003c/div\u003e\r\n                    \u003cdiv\u003e\r\n                        \u003ch3 className=\"text-xl font-bold text-white tracking-tight\"\u003eQualidade da MemÃ³ria\u003c/h3\u003e\r\n                        \u003cp className=\"text-sm text-slate-400 font-medium\"\u003eÃndice de retenÃ§Ã£o neural\u003c/p\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n\r\n                \u003cdiv className=\"flex bg-slate-900/80 rounded-xl p-1 border border-white/10 shadow-inner\"\u003e\r\n                    \u003cbutton\r\n                        onClick={() =\u003e setTimeRange(\u0027week\u0027)}\r\n                        className={`px-4 py-1.5 rounded-lg text-xs font-bold transition-all duration-300 ${timeRange === \u0027week\u0027 ? \u0027bg-purple-500/20 text-purple-300 shadow-sm\u0027 : \u0027text-slate-500 hover:text-slate-300\u0027}`}\r\n                    \u003e\r\n                        7 DIAS\r\n                    \u003c/button\u003e\r\n                    \u003cbutton\r\n                        onClick={() =\u003e setTimeRange(\u0027month\u0027)}\r\n                        className={`px-4 py-1.5 rounded-lg text-xs font-bold transition-all duration-300 ${timeRange === \u0027month\u0027 ? \u0027bg-purple-500/20 text-purple-300 shadow-sm\u0027 : \u0027text-slate-500 hover:text-slate-300\u0027}`}\r\n                    \u003e\r\n                        30 DIAS\r\n                    \u003c/button\u003e\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n\r\n            {/* Chart */}\r\n            \u003cdiv className=\"h-[280px] w-full relative z-10\"\u003e\r\n                \u003cResponsiveContainer width=\"100%\" height=\"100%\"\u003e\r\n                    \u003cAreaChart data={data} margin={{ top: 10, right: 10, left: -20, bottom: 0 }}\u003e\r\n                        \u003cdefs\u003e\r\n                            \u003clinearGradient id=\"colorRetention\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\"\u003e\r\n                                \u003cstop offset=\"5%\" stopColor=\"#c084fc\" stopOpacity={0.4} /\u003e {/* Purple-400 */}\r\n                                \u003cstop offset=\"95%\" stopColor=\"#c084fc\" stopOpacity={0} /\u003e\r\n                            \u003c/linearGradient\u003e\r\n                        \u003c/defs\u003e\r\n                        \u003cCartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(255,255,255,0.05)\" vertical={false} /\u003e\r\n                        \u003cXAxis\r\n                            dataKey=\"date\"\r\n                            stroke=\"#64748b\"\r\n                            fontSize={11}\r\n                            tickLine={false}\r\n                            axisLine={false}\r\n                            dy={15}\r\n                            fontFamily=\"Inter, sans-serif\"\r\n                        /\u003e\r\n                        \u003cYAxis\r\n                            stroke=\"#64748b\"\r\n                            fontSize={11}\r\n                            tickLine={false}\r\n                            axisLine={false}\r\n                            domain={[60, 100]}\r\n                            fontFamily=\"Inter, sans-serif\"\r\n                        /\u003e\r\n                        \u003cTooltip\r\n                            contentStyle={{\r\n                                backgroundColor: \u0027rgba(15, 23, 42, 0.9)\u0027,\r\n                                border: \u00271px solid rgba(255,255,255,0.1)\u0027,\r\n                                borderRadius: \u002716px\u0027,\r\n                                boxShadow: \u00270 10px 40px -10px rgba(0,0,0,0.5)\u0027,\r\n                                padding: \u002712px 16px\u0027,\r\n                                color: \u0027#f8fafc\u0027\r\n                            }}\r\n                            itemStyle={{ color: \u0027#e2e8f0\u0027, fontSize: \u002713px\u0027, fontWeight: \u0027bold\u0027 }}\r\n                            labelStyle={{ color: \u0027#94a3b8\u0027, fontSize: \u002711px\u0027, marginBottom: \u00278px\u0027, textTransform: \u0027uppercase\u0027, letterSpacing: \u00270.05em\u0027 }}\r\n                            cursor={{ stroke: \u0027#c084fc\u0027, strokeWidth: 2, strokeDasharray: \u00274 4\u0027 }}\r\n                        /\u003e\r\n                        \u003cArea\r\n                            type=\"monotone\"\r\n                            dataKey=\"retention\"\r\n                            stroke=\"#c084fc\"\r\n                            strokeWidth={4}\r\n                            fillOpacity={1}\r\n                            fill=\"url(#colorRetention)\"\r\n                        /\u003e\r\n                    \u003c/AreaChart\u003e\r\n                \u003c/ResponsiveContainer\u003e\r\n            \u003c/div\u003e\r\n\r\n            {/* Stat Footer */}\r\n            \u003cdiv className=\"flex items-center gap-8 mt-8 pt-6 border-t border-white/5 relative z-10\"\u003e\r\n                \u003cdiv\u003e\r\n                    \u003cdiv className=\"flex items-center gap-2 mb-1\"\u003e\r\n                        \u003cdiv className=\"w-2 h-2 rounded-full bg-purple-500 shadow-[0_0_10px_rgba(168,85,247,0.5)]\" /\u003e\r\n                        \u003cspan className=\"text-xs text-slate-400 uppercase tracking-widest font-bold\"\u003eMÃ©dia Atual\u003c/span\u003e\r\n                    \u003c/div\u003e\r\n                    \u003cdiv className=\"text-3xl font-black text-white flex items-baseline gap-2\"\u003e\r\n                        {Math.round(data[data.length - 1].retention)}%\r\n                        \u003cspan className=\"text-xs font-bold px-2 py-0.5 rounded-full bg-emerald-500/10 text-emerald-400 border border-emerald-500/20\"\u003e+2.4%\u003c/span\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n                \u003cdiv\u003e\r\n                    \u003cdiv className=\"flex items-center gap-2 mb-1\"\u003e\r\n                        \u003cdiv className=\"w-2 h-2 rounded-full bg-slate-600\" /\u003e\r\n                        \u003cspan className=\"text-xs text-slate-400 uppercase tracking-widest font-bold\"\u003eRevisÃµes\u003c/span\u003e\r\n                    \u003c/div\u003e\r\n                    \u003cdiv className=\"text-3xl font-black text-white\"\u003e\r\n                        {data.reduce((acc, cur) =\u003e acc + cur.reviews, 0)}\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n\r\n            {/* Ambient Background Decoration */}\r\n            \u003cdiv className=\"absolute -bottom-20 -right-20 w-80 h-80 bg-purple-600/10 rounded-full blur-[100px] pointer-events-none\" /\u003e\r\n            \u003cdiv className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-full bg-[url(\u0027https://grainy-gradients.vercel.app/noise.svg\u0027)] opacity-[0.03] mix-blend-overlay pointer-events-none\" /\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\SummaryModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027isOpen\u0027 is defined but never used.","line":22,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":38}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo } from \u0027react\u0027;\r\nimport { BookOpen, Target, Layout } from \u0027lucide-react\u0027;\r\nimport { useStudy } from \u0027../../context/StudyContext\u0027;\r\nimport { differenceInDays } from \u0027date-fns\u0027;\r\n\r\nimport { ProjectsHeader } from \u0027./components/projects/ProjectsHeader\u0027;\r\nimport { ProjectsFilter } from \u0027./components/projects/ProjectsFilter\u0027;\r\nimport type { ProjectFilterType } from \u0027./components/projects/ProjectsFilter\u0027;\r\nimport { ThemeProjectCard } from \u0027./components/projects/ThemeProjectCard\u0027;\r\nimport { GoalProjectCard } from \u0027./components/projects/GoalProjectCard\u0027;\r\n\r\ninterface SummaryModalProps {\r\n    isOpen: boolean;\r\n    onClose: () =\u003e void;\r\n    onOpenGoalModal: (type?: \u0027simple\u0027 | \u0027checklist\u0027 | \u0027habit\u0027) =\u003e void;\r\n    onOpenThemeModal: () =\u003e void;\r\n    onEditGoal: (goal: any) =\u003e void;\r\n    onEditTheme: (theme: any) =\u003e void;\r\n    onAddGoalToTheme: (themeId: string) =\u003e void;\r\n}\r\n\r\nexport const SummaryModal = ({ isOpen, onClose, onOpenGoalModal, onOpenThemeModal, onEditGoal, onEditTheme, onAddGoalToTheme }: SummaryModalProps) =\u003e {\r\n    const { goals, themes, deleteGoal, deleteTheme } = useStudy();\r\n    const [filter, setFilter] = React.useState\u003cProjectFilterType\u003e(\u0027all\u0027);\r\n    const [expandedThemeId, setExpandedThemeId] = React.useState\u003cstring | null\u003e(null);\r\n\r\n    // Transform Goals and Themes\r\n    const { themeProjects, orphanGoalProjects } = useMemo(() =\u003e {\r\n        // 1. Process Themes\r\n        const themeProjs = themes.map(t =\u003e {\r\n            const total = t.subthemes.length;\r\n            const completed = t.subthemes.filter(s =\u003e s.status === \u0027completed\u0027).length;\r\n            const progress = total \u003e 0 ? (completed / total) * 100 : 0;\r\n            const daysLeft = t.deadline ? differenceInDays(new Date(t.deadline), new Date()) : null;\r\n\r\n            return {\r\n                id: t.id,\r\n                title: t.title,\r\n                type: \u0027Tema\u0027 as const,\r\n                progress,\r\n                deadline: t.deadline,\r\n                itemCount: t.subthemes.length,\r\n                daysLeft,\r\n                color: t.color || \u0027#a855f7\u0027, // Purple\r\n                icon: \u003cBookOpen className=\"w-5 h-5 text-purple-400\" /\u003e,\r\n                isExpanded: expandedThemeId === t.id\r\n            };\r\n        });\r\n\r\n        // 2. Process Goals (Checklists) - Find Orphans\r\n        const goalProjs = goals.filter(g =\u003e !g.relatedThemeId).map(g =\u003e {\r\n            const daysLeft = g.deadline ? differenceInDays(new Date(g.deadline), new Date()) : null;\r\n            return {\r\n                id: g.id,\r\n                title: g.title,\r\n                type: \u0027Meta\u0027 as const,\r\n                progress: g.progress,\r\n                deadline: g.deadline,\r\n                itemCount: g.checklist?.length || 0,\r\n                daysLeft,\r\n                color: g.color || \u0027#10b981\u0027, // Emerald\r\n                icon: \u003cTarget className=\"w-5 h-5 text-emerald-400\" /\u003e,\r\n                relatedThemeTitle: undefined\r\n            };\r\n        });\r\n\r\n        // Filter Application\r\n        let filteredThemes = themeProjs.filter(p =\u003e {\r\n            const fullTheme = themes.find(t =\u003e t.id === p.id);\r\n            return fullTheme?.category === \u0027project\u0027;\r\n        });\r\n        let filteredGoals = goalProjs;\r\n\r\n        if (filter === \u0027completed\u0027) {\r\n            filteredThemes = themeProjs.filter(p =\u003e p.progress === 100);\r\n            filteredGoals = goalProjs.filter(p =\u003e p.progress === 100);\r\n        } else if (filter === \u0027overdue\u0027) {\r\n            filteredThemes = themeProjs.filter(p =\u003e p.daysLeft !== null \u0026\u0026 p.daysLeft \u003c 0 \u0026\u0026 p.progress \u003c 100);\r\n            filteredGoals = goalProjs.filter(p =\u003e p.daysLeft !== null \u0026\u0026 p.daysLeft \u003c 0 \u0026\u0026 p.progress \u003c 100);\r\n        } else if (filter === \u0027active\u0027) {\r\n            filteredThemes = themeProjs.filter(p =\u003e p.progress \u003c 100 \u0026\u0026 (p.daysLeft === null || p.daysLeft \u003e= 0));\r\n            filteredGoals = goalProjs.filter(p =\u003e p.progress \u003c 100 \u0026\u0026 (p.daysLeft === null || p.daysLeft \u003e= 0));\r\n        }\r\n\r\n        return { themeProjects: filteredThemes, orphanGoalProjects: filteredGoals };\r\n    }, [goals, themes, filter, expandedThemeId]);\r\n\r\n    // Helper to get linked projects for a theme\r\n    const getLinkedProjects = (themeId: string) =\u003e {\r\n        return goals.filter(g =\u003e g.relatedThemeId === themeId).map(g =\u003e {\r\n            const daysLeft = g.deadline ? differenceInDays(new Date(g.deadline), new Date()) : null;\r\n            return {\r\n                id: g.id,\r\n                title: g.title,\r\n                type: \u0027Meta\u0027 as const,\r\n                progress: g.progress,\r\n                deadline: g.deadline,\r\n                itemCount: g.checklist?.length || 0,\r\n                daysLeft,\r\n                color: g.color || \u0027#10b981\u0027,\r\n                icon: \u003cTarget className=\"w-4 h-4 text-emerald-400\" /\u003e\r\n            };\r\n        });\r\n    };\r\n\r\n    const combinedList = [...themeProjects, ...orphanGoalProjects];\r\n\r\n    return (\r\n        \u003cdiv className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200\"\u003e\r\n            \u003cdiv className=\"bg-slate-900 border border-slate-800 rounded-3xl w-full max-w-3xl max-h-[85vh] flex flex-col shadow-2xl relative overflow-hidden\"\u003e\r\n\r\n                \u003cProjectsHeader\r\n                    onClose={onClose}\r\n                    onOpenGoalModal={onOpenGoalModal}\r\n                    onOpenThemeModal={onOpenThemeModal}\r\n                /\u003e\r\n\r\n                \u003cdiv className=\"mt-8\"\u003e\r\n                    \u003cProjectsFilter filter={filter} setFilter={setFilter} /\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* List Content */}\r\n                \u003cdiv className=\"flex-1 overflow-y-auto custom-scrollbar p-6\"\u003e\r\n                    {combinedList.length === 0 ? (\r\n                        \u003cdiv className=\"text-center py-20 text-slate-500\"\u003e\r\n                            \u003cLayout className=\"w-16 h-16 mx-auto mb-4 opacity-20\" /\u003e\r\n                            \u003cp\u003eNenhum projeto ativo.\u003c/p\u003e\r\n                            \u003cp className=\"text-sm text-slate-600\"\u003eCrie uma Meta ou Tema para comeÃ§ar.\u003c/p\u003e\r\n                        \u003c/div\u003e\r\n                    ) : (\r\n                        \u003cdiv className=\"flex flex-col gap-4\"\u003e\r\n                            {/* Render Themes First (as containers) */}\r\n                            {themeProjects.map((theme) =\u003e (\r\n                                \u003cThemeProjectCard\r\n                                    key={theme.id}\r\n                                    theme={theme}\r\n                                    linkedProjects={getLinkedProjects(theme.id)}\r\n                                    isExpanded={!!theme.isExpanded}\r\n                                    onToggleExpand={() =\u003e setExpandedThemeId(theme.isExpanded ? null : theme.id)}\r\n                                    onEditTheme={(t) =\u003e {\r\n                                        const fullTheme = themes.find(ft =\u003e ft.id === t.id);\r\n                                        if (fullTheme) onEditTheme(fullTheme);\r\n                                    }}\r\n                                    onDeleteTheme={deleteTheme}\r\n                                    onAddGoalToTheme={onAddGoalToTheme}\r\n                                    allGoals={goals}\r\n                                    onEditGoal={onEditGoal}\r\n                                    onDeleteGoal={deleteGoal}\r\n                                /\u003e\r\n                            ))}\r\n\r\n                            {/* Divider if we have both */}\r\n                            {themeProjects.length \u003e 0 \u0026\u0026 orphanGoalProjects.length \u003e 0 \u0026\u0026 (\r\n                                \u003cdiv className=\"flex items-center gap-4 py-2\"\u003e\r\n                                    \u003cdiv className=\"h-px bg-slate-800/50 flex-1\" /\u003e\r\n                                    \u003cspan className=\"text-xs font-bold text-slate-600 uppercase tracking-widest\"\u003eOutros Projetos\u003c/span\u003e\r\n                                    \u003cdiv className=\"h-px bg-slate-800/50 flex-1\" /\u003e\r\n                                \u003c/div\u003e\r\n                            )}\r\n\r\n                            {/* Render Orphan Projects (Grid) */}\r\n                            {orphanGoalProjects.length \u003e 0 \u0026\u0026 (\r\n                                \u003cdiv className=\"grid grid-cols-1 grid-cols-[repeat(auto-fill,minmax(300px,1fr))] gap-4\"\u003e\r\n                                    {orphanGoalProjects.map((project) =\u003e (\r\n                                        \u003cGoalProjectCard\r\n                                            key={project.id}\r\n                                            project={project}\r\n                                            onEdit={(p) =\u003e {\r\n                                                const fullGoal = goals.find(g =\u003e g.id === p.id);\r\n                                                if (fullGoal) onEditGoal(fullGoal);\r\n                                            }}\r\n                                            onDelete={deleteGoal}\r\n                                        /\u003e\r\n                                    ))}\r\n                                \u003c/div\u003e\r\n                            )}\r\n                        \u003c/div\u003e\r\n                    )}\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n        \u003c/div \u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\TodayMissionModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027PlayCircle\u0027 is defined but never used.","line":8,"column":51,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":61},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Lock\u0027 is defined but never used.","line":8,"column":72,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":76},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027ChevronDown\u0027 is defined but never used.","line":8,"column":78,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":89},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027differenceInCalendarDays\u0027 is defined but never used.","line":9,"column":70,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":94},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027cn\u0027 is defined but never used.","line":11,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Theme\u0027 is defined but never used.","line":15,"column":67,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":72},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027e\u0027 is defined but never used.","line":96,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":96,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027e\u0027 is defined but never used.","line":111,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":111,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027handleToday\u0027 is assigned a value but never used.","line":196,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":196,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027handleStopFocus\u0027 is assigned a value but never used.","line":226,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":226,"endColumn":26},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has a missing dependency: \u0027isGoalOverdue\u0027. Either include it or remove the dependency array.","line":310,"column":8,"nodeType":"ArrayExpression","endLine":310,"endColumn":35,"suggestions":""},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has a missing dependency: \u0027isReviewOverdue\u0027. Either include it or remove the dependency array.","line":316,"column":8,"nodeType":"ArrayExpression","endLine":316,"endColumn":46,"suggestions":""},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has a missing dependency: \u0027isTaskOverdue\u0027. Either include it or remove the dependency array.","line":322,"column":8,"nodeType":"ArrayExpression","endLine":322,"endColumn":42,"suggestions":""},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Icon\u0027 is defined but never used.","line":344,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":344,"endColumn":44},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027getPeriodProgress\u0027 is assigned a value but never used.","line":372,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":372,"endColumn":28},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\TodayMissionModal.tsx:517:125\n  515 |                                     }\n  516 |\n\u003e 517 |                                     const start = habit.startDate ? new Date(habit.startDate) : new Date(habit.createdAt || Date.now());\n      |                                                                                                                             ^^^^^^^^^^ Cannot call impure function\n  518 |                                     const todayDate = new Date();\n  519 |                                     const diffTime = Math.abs(todayDate.getTime() - start.getTime());\n  520 |                                     const expectedDays = Math.max(1, Math.ceil(diffTime / (1000 * 60 * 60 * 24)));","line":517,"column":125,"nodeType":null,"endLine":517,"endColumn":135},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\TodayMissionModal.tsx:527:135\n  525 |                                     if (habit.deadline) {\n  526 |                                         const end = parseLocalDate(habit.deadline);\n\u003e 527 |                                         const start = habit.startDate ? parseLocalDate(habit.startDate) : new Date(habit.createdAt || Date.now());\n      |                                                                                                                                       ^^^^^^^^^^ Cannot call impure function\n  528 |                                         const now = new Date();\n  529 |\n  530 |                                         // Reset all to midnight for accurate day calculation","line":527,"column":135,"nodeType":null,"endLine":527,"endColumn":145},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027updated\u0027 is defined but never used.","line":780,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":780,"endColumn":37}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Reorder, useDragControls } from \u0027framer-motion\u0027;\r\nimport { useLocalStorage } from \u0027../../hooks/useLocalStorage\u0027;\r\nimport React from \u0027react\u0027;\r\nimport { useStudy } from \u0027../../context/StudyContext\u0027;\r\nimport { useCalendarEvents } from \u0027../../features/calendar/hooks/useCalendarEvents\u0027;\r\nimport { useProjectContext } from \u0027../../context/ProjectProvider\u0027;\r\nimport { Modal } from \u0027../../components/ui/Modal\u0027;\r\nimport { BrainCircuit, CheckSquare, Target, Flag, PlayCircle, Loader2, Lock, ChevronDown, ChevronLeft, ChevronRight, Calendar as CalendarIcon, GripVertical, Save } from \u0027lucide-react\u0027;\r\nimport { format, parseISO, isToday as isDateToday, addDays, subDays, differenceInCalendarDays } from \u0027date-fns\u0027;\r\nimport { ptBR } from \u0027date-fns/locale\u0027;\r\nimport { cn } from \u0027../../lib/utils\u0027;\r\nimport { usePomodoroContext } from \u0027../../context/PomodoroContext\u0027;\r\nimport { MissionCard } from \u0027./components/MissionCard\u0027;\r\nimport { parseLocalDate } from \u0027../../utils/dateHelpers\u0027;\r\nimport type { Priority, Review, SessionLog, Subtheme, Task, Goal, Theme } from \u0027../../types\u0027;\r\nimport { TaskDetailsModal } from \u0027../tasks/components/TaskDetailsModal\u0027;\r\nimport { GoalDetailsModal } from \u0027../goals/components/GoalDetailsModal\u0027;\r\n\r\n// Draggable Item Wrapper\r\nconst DraggableMissionItem = ({ item, children }: { item: { id: string }, children: React.ReactNode }) =\u003e {\r\n    const dragControls = useDragControls();\r\n\r\n    return (\r\n        \u003cReorder.Item\r\n            value={item}\r\n            dragListener={false} // Disable default drag to use handle\r\n            dragControls={dragControls}\r\n            className=\"touch-none relative\"\r\n            style={{ listStyle: \u0027none\u0027 }} // Remove list dots\r\n        \u003e\r\n            \u003cdiv className=\"flex items-center gap-2\"\u003e\r\n                {/* Drag Handle */}\r\n                \u003cdiv\r\n                    onPointerDown={(e) =\u003e dragControls.start(e)}\r\n                    className=\"cursor-grab active:cursor-grabbing p-1.5 -ml-2 text-slate-600 hover:text-slate-400 transition-colors touch-none select-none flex items-center justify-center shrink-0\"\r\n                \u003e\r\n                    \u003cGripVertical className=\"w-5 h-5\" /\u003e\r\n                \u003c/div\u003e\r\n                {/* Content */}\r\n                \u003cdiv className=\"flex-1 min-w-0\"\u003e\r\n                    {children}\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n        \u003c/Reorder.Item\u003e\r\n    );\r\n};\r\n\r\n\r\n\r\nconst PriorityIcon = ({ priority }: { priority?: Priority }) =\u003e {\r\n    switch (priority) {\r\n        case \u0027high\u0027: return \u003cdiv className=\"text-rose-500 bg-rose-500/10 p-1 rounded\"\u003e\u003cFlag className=\"w-3 h-3\" /\u003e\u003c/div\u003e;\r\n        case \u0027medium\u0027: return \u003cdiv className=\"text-amber-500 bg-amber-500/10 p-1 rounded\"\u003e\u003cTarget className=\"w-3 h-3\" /\u003e\u003c/div\u003e;\r\n        case \u0027low\u0027: return \u003cdiv className=\"text-blue-500 bg-blue-500/10 p-1 rounded\"\u003e\u003cCheckSquare className=\"w-3 h-3\" /\u003e\u003c/div\u003e;\r\n        default: return null;\r\n    }\r\n};\r\n\r\n\r\n\r\ninterface ReviewItem extends Subtheme {\r\n    dueReview: Review;\r\n    themeTitle: string;\r\n    themeIcon?: string; // Icon from parent theme\r\n    priority?: Priority;\r\n    notificationTime?: string;\r\n    isProjectStep?: boolean;\r\n    mastery?: number;\r\n    deadline?: string;\r\n    type?: string;\r\n    icon?: string; // Add icon property\r\n}\r\n\r\ninterface TodayMissionModalProps {\r\n    isOpen: boolean;\r\n    onClose: () =\u003e void;\r\n}\r\n\r\n// ... rest of helpers ...\r\n\r\n// Helper to get session times\r\nconst getSessionTimes = (sessions: SessionLog[] | undefined, datePrefix: string) =\u003e {\r\n    if (!sessions || sessions.length === 0) return { start: null, end: null };\r\n    const todaysSessions = sessions.filter(s =\u003e s.start \u0026\u0026 s.start.startsWith(datePrefix));\r\n\r\n    if (todaysSessions.length === 0) return { start: null, end: null };\r\n\r\n    // Use the latest one\r\n    const lastSession = todaysSessions[todaysSessions.length - 1];\r\n\r\n    try {\r\n        return {\r\n            start: format(parseISO(lastSession.start), \u0027HH:mm\u0027),\r\n            end: format(parseISO(lastSession.end), \u0027HH:mm\u0027)\r\n        };\r\n    } catch (e) {\r\n        return { start: null, end: null };\r\n    }\r\n};\r\n\r\nconst calculateEndTime = (startTime: string | null | undefined, durationMinutes: number | undefined) =\u003e {\r\n    if (!startTime) return null;\r\n    if (!durationMinutes) return startTime;\r\n\r\n    try {\r\n        const [hours, minutes] = startTime.split(\u0027:\u0027).map(Number);\r\n        const date = new Date();\r\n        date.setHours(hours, minutes, 0, 0);\r\n        date.setMinutes(date.getMinutes() + durationMinutes);\r\n        return format(date, \u0027HH:mm\u0027);\r\n    } catch (e) {\r\n        return startTime;\r\n    }\r\n};\r\n\r\n// Helper to sort items based on ID list\r\nconst sortWithOrder = \u003cT extends { id: string }\u003e(items: T[], order: string[]): T[] =\u003e {\r\n    if (!order || order.length === 0) return items;\r\n\r\n    // Create a map for O(1) lookup of order index\r\n    const orderMap = new Map(order.map((id, index) =\u003e [id, index]));\r\n\r\n    return [...items].sort((a, b) =\u003e {\r\n        const indexA = orderMap.get(a.id);\r\n        const indexB = orderMap.get(b.id);\r\n\r\n        // If both exist, sort by index\r\n        if (indexA !== undefined \u0026\u0026 indexB !== undefined) return indexA - indexB;\r\n\r\n        // If only one exists, the existing one comes first\r\n        if (indexA !== undefined) return -1;\r\n        if (indexB !== undefined) return 1;\r\n\r\n        // If neither exists, maintain original relative order (stable sort fallback) or simple compare\r\n        return 0;\r\n    });\r\n};\r\n\r\nconst priorityValue = (p?: Priority) =\u003e {\r\n    switch (p) {\r\n        case \u0027high\u0027: return 3;\r\n        case \u0027medium\u0027: return 2;\r\n        case \u0027low\u0027: return 1;\r\n        default: return 0;\r\n    }\r\n};\r\n\r\n\r\n\r\n\r\n// Lazy Load Heavy Modal\r\nconst StudyContentModal = React.lazy(() =\u003e import(\u0027../themes/components/StudyContentModal\u0027).then(m =\u003e ({ default: m.StudyContentModal })));\r\n\r\nexport const TodayMissionModal: React.FC\u003cTodayMissionModalProps\u003e = ({ isOpen, onClose }) =\u003e {\r\n    // ... existing code ...\r\n\r\n    const { themes, tasks, goals, startFocus, activeFocus, endFocus, toggleTask, toggleGoal, completeReview } = useStudy();\r\n    const { startFocusSession, resetTimer } = usePomodoroContext();\r\n\r\n\r\n    // --- DRAG AND DROP STATE ---\r\n    const [habitOrder, setHabitOrder] = useLocalStorage\u003cstring[]\u003e(\u0027mission_habit_order\u0027, []);\r\n    const [reviewOrder, setReviewOrder] = useLocalStorage\u003cstring[]\u003e(\u0027mission_review_order\u0027, []);\r\n    const [taskOrder, setTaskOrder] = useLocalStorage\u003cstring[]\u003e(\u0027mission_task_order\u0027, []);\r\n\r\n    const [orderedHabits, setOrderedHabits] = React.useState\u003cGoal[]\u003e([]);\r\n    const [orderedReviews, setOrderedReviews] = React.useState\u003cReviewItem[]\u003e([]);\r\n    const [orderedTasks, setOrderedTasks] = React.useState\u003cTask[]\u003e([]);\r\n\r\n    // State for selected date\r\n    const [selectedDate, setSelectedDate] = React.useState(new Date());\r\n    const today = format(selectedDate, \u0027yyyy-MM-dd\u0027); // This represents the VIEWED date\r\n    const isToday = isDateToday(selectedDate);\r\n\r\n    // Strict Date Locking Logic\r\n    const realTodayStr = format(new Date(), \u0027yyyy-MM-dd\u0027);\r\n    const isFutureContext = today \u003e realTodayStr;\r\n\r\n    // --- USE CALENDAR EVENTS HOOK FOR LOGIC ---\r\n    const { projects } = useProjectContext();\r\n    const { getEventsForDay } = useCalendarEvents({ themes, tasks, goals, projects });\r\n\r\n    const todayEvents = React.useMemo(() =\u003e {\r\n        return getEventsForDay(selectedDate);\r\n    }, [selectedDate, getEventsForDay]);\r\n\r\n    // Navigation handlers\r\n    const handlePreviousDay = () =\u003e {\r\n        setSelectedDate(prev =\u003e subDays(prev, 1));\r\n    };\r\n\r\n    const handleNextDay = () =\u003e {\r\n        setSelectedDate(prev =\u003e addDays(prev, 1));\r\n    };\r\n\r\n    const handleToday = () =\u003e {\r\n        setSelectedDate(new Date());\r\n    };\r\n\r\n    const handleStartFocus = React.useCallback((id: string, type: \u0027task\u0027 | \u0027goal\u0027 | \u0027subtheme\u0027, title: string, duration?: number, reviewNumber?: number, reviewType?: \u0027review\u0027 | \u0027intro\u0027) =\u003e {\r\n        console.log(\"handleStartFocus called for:\", id);\r\n\r\n        // Prevent clicking strict future items with feedback\r\n        if (isFutureContext) {\r\n            console.warn(\"Attempted to focus on future item\");\r\n            // You might want to add a toast here if you have a toast system\r\n            alert(\"VocÃª nÃ£o pode iniciar uma missÃ£o agendada para o futuro.\");\r\n            return;\r\n        }\r\n\r\n        // If clicking the SAME item that is active, ensure widget is visible\r\n        if (activeFocus?.id === id) {\r\n            console.log(\"Task already active, reopening widget\");\r\n            startFocusSession(id, duration || 25); // This will trigger setIsWidgetVisible(true) in the provider\r\n            return;\r\n        }\r\n\r\n        console.log(\"Starting new focus session:\", id); // Debug log\r\n\r\n        // Simply overwrite any existing session. Use fire-and-forget style.\r\n        startFocus(id, type, title, duration || 25, reviewNumber, reviewType);\r\n        startFocusSession(id, duration || 25);\r\n    }, [isFutureContext, activeFocus, startFocus, startFocusSession]);\r\n\r\n\r\n    const handleStopFocus = () =\u003e {\r\n        if (confirm(\u0027Deseja cancelar o foco atual?\u0027)) {\r\n            endFocus(false);\r\n            resetTimer();\r\n        }\r\n    };\r\n\r\n    // 1. TASKS (mapped from calendar tasks)\r\n    const dueTasks = React.useMemo(() =\u003e {\r\n        return todayEvents.tasks.map((t: any) =\u003e ({\r\n            ...t,\r\n            // Ensure compatibility with Modal\u0027s expected Task structure\r\n            status: t.isCompletedToday ? \u0027completed\u0027 : t.status\r\n        })).sort((a: any, b: any) =\u003e priorityValue(b.priority) - priorityValue(a.priority));\r\n    }, [todayEvents]);\r\n\r\n    // 2. HABITS \u0026 GOALS (mapped from calendar goals)\r\n    const habits = React.useMemo(() =\u003e {\r\n        return todayEvents.goals.map((g: any) =\u003e ({\r\n            ...g,\r\n            status: g.isCompletedToday ? \u0027completed\u0027 : \u0027pending\u0027\r\n        })).sort((a: any, b: any) =\u003e priorityValue(b.priority) - priorityValue(a.priority));\r\n    }, [todayEvents]);\r\n\r\n    // 3. REVIEWS \u0026 PROJECTS (mapped from calendar reviews/intros/intros/projected)\r\n    // We need to Enrich these items with the full Subtheme data (especially \u0027reviews\u0027 array for progress bar)\r\n    const dueReviews = React.useMemo(() =\u003e {\r\n        // Create a lookup map for fast access\r\n        const subthemeMap = new Map();\r\n        themes.forEach((t: any) =\u003e {\r\n            t.subthemes.forEach((st: any) =\u003e {\r\n                subthemeMap.set(st.id, { ...st, themeTitle: t.title });\r\n            });\r\n        });\r\n\r\n        const reviews = [\r\n            ...todayEvents.reviews.map((r: any) =\u003e {\r\n                const fullSubtheme = subthemeMap.get(r.subthemeId || r.id);\r\n                return {\r\n                    ...fullSubtheme, // Spread full subtheme first (provides Default properties + reviews array)\r\n                    ...r, // Override with specific event details\r\n                    // Reconstruct the nested dueReview object expected by components\r\n                    dueReview: { number: r.number, date: r.date, status: r.status || \u0027pending\u0027 },\r\n                    id: r.id || r.subthemeId\r\n                };\r\n            }),\r\n            ...todayEvents.intros.map((i: any) =\u003e {\r\n                const fullSubtheme = subthemeMap.get(i.subthemeId || i.id);\r\n                return {\r\n                    ...fullSubtheme,\r\n                    ...i,\r\n                    dueReview: { number: 0, date: i.date || today, status: \u0027pending\u0027 },\r\n                    isIntro: true,\r\n                    id: i.id || i.subthemeId\r\n                };\r\n            }),\r\n        ];\r\n\r\n        return reviews.sort((a: any, b: any) =\u003e priorityValue(b.priority) - priorityValue(a.priority));\r\n    }, [todayEvents, today, themes]);\r\n\r\n    // Deduplicate Reviews by ID to prevent multiple cards for same subtheme\r\n    const uniqueDueReviews = React.useMemo(() =\u003e\r\n        Array.from(new Map(dueReviews.map(item =\u003e [item.id, item])).values())\r\n        , [dueReviews]);\r\n\r\n    // Deduplicate Tasks\r\n    const uniqueDueTasks = React.useMemo(() =\u003e\r\n        Array.from(new Map(dueTasks.map(item =\u003e [item.id, item])).values())\r\n        , [dueTasks]);\r\n\r\n    const hasItems = uniqueDueTasks.length \u003e 0 || habits.length \u003e 0 || uniqueDueReviews.length \u003e 0;\r\n\r\n    // --- OVERDUE HELPERS ---\r\n    const isTaskOverdue = (t: Task) =\u003e t.status === \u0027pending\u0027 \u0026\u0026 ((t.date \u0026\u0026 t.date \u003c today) || (t.endDate \u0026\u0026 t.endDate \u003c today));\r\n    const isGoalOverdue = (g: Goal) =\u003e g.deadline \u0026\u0026 g.deadline \u003c today \u0026\u0026 g.progress \u003c 100;\r\n    const isReviewOverdue = (r: ReviewItem) =\u003e r.dueReview.status === \u0027pending\u0027 \u0026\u0026 r.dueReview.date \u003c today;\r\n\r\n    // --- SYNC \u0026 SORTING EFFECTS ---\r\n    React.useEffect(() =\u003e {\r\n        const overdue = habits.filter(h =\u003e isGoalOverdue(h));\r\n        const others = habits.filter(h =\u003e !isGoalOverdue(h));\r\n        // Sort others by custom order, overdue items stick to top (sorted by priority from useMemo)\r\n        setOrderedHabits([...overdue, ...sortWithOrder(others, habitOrder)]);\r\n    }, [habits, habitOrder, today]);\r\n\r\n    React.useEffect(() =\u003e {\r\n        const overdue = uniqueDueReviews.filter(r =\u003e isReviewOverdue(r));\r\n        const others = uniqueDueReviews.filter(r =\u003e !isReviewOverdue(r));\r\n        setOrderedReviews([...overdue, ...sortWithOrder(others, reviewOrder)]);\r\n    }, [uniqueDueReviews, reviewOrder, today]);\r\n\r\n    React.useEffect(() =\u003e {\r\n        const overdue = uniqueDueTasks.filter(t =\u003e isTaskOverdue(t));\r\n        const others = uniqueDueTasks.filter(t =\u003e !isTaskOverdue(t));\r\n        setOrderedTasks([...overdue, ...sortWithOrder(others, taskOrder)]);\r\n    }, [uniqueDueTasks, taskOrder, today]);\r\n\r\n    const handleReorderHabits = (newOrder: Goal[]) =\u003e {\r\n        // Optimistic update\r\n        setOrderedHabits(newOrder);\r\n        // We only save the ID order. \r\n        // Note: This saves the order of *everything*. \r\n        // On next reload, the effect will force overdue to top again.\r\n        // This creates distinct \"Overdue\" and \"Normal\" zones implicitly.\r\n        setHabitOrder(newOrder.map(h =\u003e h.id));\r\n    };\r\n\r\n    const handleReorderReviews = (newOrder: ReviewItem[]) =\u003e {\r\n        setOrderedReviews(newOrder);\r\n        setReviewOrder(newOrder.map(r =\u003e r.id));\r\n    };\r\n\r\n    const handleReorderTasks = (newOrder: Task[]) =\u003e {\r\n        setOrderedTasks(newOrder);\r\n        setTaskOrder(newOrder.map(t =\u003e t.id));\r\n    };\r\n\r\n    const SectionBox = ({ title, icon: Icon, count, children }: { title: string; icon: React.ElementType; colorClass?: string; count: number; children: React.ReactNode }) =\u003e (\r\n        \u003cdiv className=\"space-y-4\"\u003e\r\n            \u003cdiv className=\"flex items-center justify-between px-1 border-l-2 border-slate-700 pl-3\"\u003e\r\n                \u003ch3 className=\"text-xs font-bold uppercase tracking-widest text-slate-400\"\u003e\r\n                    {title}\r\n                \u003c/h3\u003e\r\n                \u003cdiv className=\"w-5 h-5 rounded-full bg-slate-800 flex items-center justify-center text-[10px] font-bold text-slate-400 border border-slate-700\"\u003e\r\n                    {count}\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n            \u003cdiv className=\"space-y-3\"\u003e\r\n                {children}\r\n            \u003c/div\u003e\r\n        \u003c/div\u003e\r\n    );\r\n\r\n    // Calculate Progress\r\n    // Calculate Progress\r\n    // Use uniqueDueReviews to reflect exactly what is on screen (including overdue if valid)\r\n    // We filter for \u0027review\u0027 type or just count all reviews shown\r\n\r\n    const totalReviewsCount = uniqueDueReviews.length;\r\n    const completedReviewsCount = uniqueDueReviews.filter(r =\u003e r.dueReview.status === \u0027completed\u0027).length;\r\n\r\n    const score = totalReviewsCount \u003e 0\r\n        ? Math.round((completedReviewsCount / totalReviewsCount) * 100)\r\n        : hasItems ? 0 : 100;\r\n\r\n    const getPeriodProgress = (item: Task | Goal, type: \u0027task\u0027 | \u0027goal\u0027) =\u003e {\r\n        if (type === \u0027task\u0027) {\r\n            if (item.type !== \u0027period\u0027 || !item.startDate || !item.endDate) return null;\r\n            const start = new Date(item.startDate);\r\n            const end = new Date(item.endDate);\r\n            const now = new Date();\r\n            const totalDays = Math.max(1, Math.ceil((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24)));\r\n            const currentDay = Math.max(1, Math.ceil((now.getTime() - start.getTime()) / (1000 * 60 * 60 * 24)));\r\n            const day = Math.min(currentDay, totalDays);\r\n            return `${day}/${totalDays}`;\r\n        }\r\n        if (type === \u0027goal\u0027) {\r\n            const goal = item as Goal;\r\n            if (!goal.deadline) return null;\r\n            const start = new Date(goal.createdAt || Date.now());\r\n            const end = new Date(goal.deadline);\r\n            const now = new Date();\r\n            const totalDays = Math.max(1, Math.ceil((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24)));\r\n            const currentDay = Math.max(1, Math.ceil((now.getTime() - start.getTime()) / (1000 * 60 * 60 * 24)));\r\n            const day = Math.min(currentDay, totalDays);\r\n            return totalDays \u003e 1 ? `${day}/${totalDays}` : null;\r\n        }\r\n        return null;\r\n    };\r\n\r\n    // --- COMPLETION SUMMARY STATE ---\r\n    const [completionItem, setCompletionItem] = React.useState\u003c{\r\n        id: string;\r\n        title: string;\r\n        onConfirm: (summary: string) =\u003e void;\r\n    } | null\u003e(null);\r\n    const [summaryText, setSummaryText] = React.useState(\u0027\u0027);\r\n\r\n    // --- DETAIL MODALS STATE ---\r\n    const [selectedTask, setSelectedTask] = React.useState\u003cTask | null\u003e(null);\r\n    const [selectedGoal, setSelectedGoal] = React.useState\u003cGoal | null\u003e(null);\r\n    const [selectedSubtheme, setSelectedSubtheme] = React.useState\u003cSubtheme | null\u003e(null);\r\n\r\n    const handleOpenDetails = (id: string, type: \u0027task\u0027 | \u0027goal\u0027 | \u0027subtheme\u0027) =\u003e {\r\n        if (type === \u0027task\u0027) {\r\n            const task = tasks.find(t =\u003e t.id === id);\r\n            if (task) setSelectedTask(task);\r\n        } else if (type === \u0027goal\u0027) {\r\n            const goal = goals.find(g =\u003e g.id === id);\r\n            if (goal) setSelectedGoal(goal);\r\n        } else if (type === \u0027subtheme\u0027) {\r\n            const subtheme = themes.flatMap(t =\u003e t.subthemes).find(st =\u003e st.id === id);\r\n            if (subtheme) setSelectedSubtheme(subtheme);\r\n        }\r\n    };\r\n\r\n    const requestCompletion = (id: string, title: string, onConfirm: (s: string) =\u003e void) =\u003e {\r\n        setCompletionItem({ id, title, onConfirm });\r\n        setSummaryText(\u0027\u0027);\r\n    };\r\n\r\n    const confirmCompletion = () =\u003e {\r\n        if (completionItem) {\r\n            completionItem.onConfirm(summaryText);\r\n            setCompletionItem(null);\r\n        }\r\n    };\r\n\r\n    const skipSummary = () =\u003e {\r\n        if (completionItem) {\r\n            completionItem.onConfirm(\u0027\u0027); // Empty string = no summary (standard completion)\r\n            setCompletionItem(null);\r\n        }\r\n    };\r\n\r\n    return (\r\n        \u003cModal isOpen={isOpen} onClose={onClose} title={null}\u003e\r\n            \u003cdiv className=\"space-y-5 px-4 mt-6 relative min-h-[500px]\"\u003e\r\n                {/* Header Section */}\r\n                \u003cdiv className=\"space-y-4\"\u003e\r\n                    \u003cdiv className=\"flex items-center justify-between px-2\"\u003e\r\n                        \u003cdiv className=\"flex items-center gap-3\"\u003e\r\n                            \u003cdiv className=\"w-10 h-10 rounded-xl bg-blue-500/10 border border-blue-500/20 flex items-center justify-center\"\u003e\r\n                                \u003cTarget className=\"w-5 h-5 text-blue-400\" /\u003e\r\n                            \u003c/div\u003e\r\n                            \u003ch2 className=\"text-xl font-bold text-white\"\u003eSua MissÃ£o\u003c/h2\u003e\r\n                        \u003c/div\u003e\r\n                        \u003cdiv className=\"flex flex-col items-end\"\u003e\r\n                            \u003cspan className=\"text-[10px] uppercase font-bold text-slate-500 tracking-wider\"\u003eProgresso\u003c/span\u003e\r\n                            \u003cspan className=\"text-xl font-black text-blue-400\"\u003e{score}%\u003c/span\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    \u003cdiv className=\"flex items-center justify-between py-2 border-t border-slate-800/50 border-b border-slate-800/50 mb-6\"\u003e\r\n                        \u003cbutton onClick={handlePreviousDay} className=\"p-2 text-slate-500 hover:text-white transition-colors\"\u003e\r\n                            \u003cChevronLeft className=\"w-5 h-5\" /\u003e\r\n                        \u003c/button\u003e\r\n\r\n\r\n                        \u003cdiv className=\"flex flex-col items-center\"\u003e\r\n                            \u003cspan className=\"text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-0.5\"\u003e\r\n                                {isToday ? \u0027HOJE\u0027 : format(selectedDate, \u0027EEEE\u0027, { locale: ptBR })}\r\n                            \u003c/span\u003e\r\n                            \u003cdiv className=\"flex items-center gap-2 text-slate-200\"\u003e\r\n                                \u003cCalendarIcon className=\"w-4 h-4 text-slate-400\" /\u003e\r\n                                \u003cspan className=\"font-bold text-lg capitalize\"\u003e{format(selectedDate, \u0027d \\\u0027de\\\u0027 MMMM\u0027, { locale: ptBR })}\u003c/span\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n\r\n                        \u003cbutton onClick={handleNextDay} className=\"p-2 text-slate-500 hover:text-white transition-colors\"\u003e\r\n                            \u003cChevronRight className=\"w-5 h-5\" /\u003e\r\n                        \u003c/button\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    \u003cdiv className=\"h-1.5 bg-slate-800 rounded-full overflow-hidden w-full mb-6\"\u003e\r\n                        \u003cdiv\r\n                            className=\"h-full bg-gradient-to-r from-blue-600 to-emerald-400 transition-all duration-1000\"\r\n                            style={{ width: `${score}%` }}\r\n                        /\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* 1. HÃ¡bitos \u0026 Rotina */}\r\n                {orderedHabits.length \u003e 0 \u0026\u0026 (\r\n                    \u003cdiv className=\"border-t border-blue-500/10 pt-4\"\u003e\r\n                        \u003cSectionBox title=\"HÃBITOS \u0026 ROTINA\" icon={Target} colorClass=\"text-orange-400\" count={orderedHabits.length}\u003e\r\n                            \u003cReorder.Group axis=\"y\" values={orderedHabits} onReorder={handleReorderHabits} className=\"space-y-3\"\u003e\r\n                                {orderedHabits.map((habit) =\u003e {\r\n                                    const isCompletedToday = habit.completionHistory?.some((d: string) =\u003e d.startsWith(today));\r\n                                    const isItemOptimistic = completionItem?.id === habit.id;\r\n                                    const isChecked = isCompletedToday || habit.progress === 100 || isItemOptimistic;\r\n                                    const isBlocked = isFutureContext;\r\n                                    const sessionTimes = getSessionTimes(habit.sessions, today);\r\n\r\n                                    let daysElapsed: number | undefined;\r\n                                    let daysRemaining: number | undefined;\r\n\r\n                                    if (habit.completionHistory \u0026\u0026 habit.completionHistory.length \u003e 0) {\r\n                                        daysElapsed = habit.completionHistory.length;\r\n                                    }\r\n\r\n                                    if (habit.deadline) {\r\n                                        const end = parseLocalDate(habit.deadline);\r\n                                        const now = new Date();\r\n                                        now.setHours(0, 0, 0, 0); // Reset to midnight\r\n                                        end.setHours(0, 0, 0, 0); // Reset to midnight\r\n                                        const totalDays = Math.max(0, Math.ceil((end.getTime() - now.getTime()) / (1000 * 60 * 60 * 24)));\r\n                                        daysRemaining = totalDays;\r\n                                    }\r\n\r\n                                    const start = habit.startDate ? new Date(habit.startDate) : new Date(habit.createdAt || Date.now());\r\n                                    const todayDate = new Date();\r\n                                    const diffTime = Math.abs(todayDate.getTime() - start.getTime());\r\n                                    const expectedDays = Math.max(1, Math.ceil(diffTime / (1000 * 60 * 60 * 24)));\r\n                                    const progressTotal = habit.deadline ? expectedDays : (habit.completionHistory?.length || 0) + 1;\r\n\r\n                                    let timeCurrent: number | undefined;\r\n                                    let timeTotal: number | undefined;\r\n                                    if (habit.deadline) {\r\n                                        const end = parseLocalDate(habit.deadline);\r\n                                        const start = habit.startDate ? parseLocalDate(habit.startDate) : new Date(habit.createdAt || Date.now());\r\n                                        const now = new Date();\r\n\r\n                                        // Reset all to midnight for accurate day calculation\r\n                                        end.setHours(0, 0, 0, 0);\r\n                                        start.setHours(0, 0, 0, 0);\r\n                                        now.setHours(0, 0, 0, 0);\r\n\r\n                                        timeTotal = Math.max(1, Math.ceil((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24)));\r\n                                        timeCurrent = Math.max(0, Math.min(timeTotal, Math.ceil((now.getTime() - start.getTime()) / (1000 * 60 * 60 * 24))));\r\n                                    }\r\n\r\n                                    return (\r\n                                        \u003cDraggableMissionItem key={habit.id} item={habit}\u003e\r\n                                            \u003cMissionCard\r\n                                                id={habit.id}\r\n                                                title={habit.title}\r\n                                                icon={habit.icon || \"Flame\"}\r\n                                                colorClass=\"from-orange-500 to-rose-600 shadow-orange-500/20\"\r\n                                                type=\"habit\"\r\n                                                isCompleted={isChecked}\r\n                                                isBlocked={isBlocked}\r\n                                                actualStartTime={isChecked ? sessionTimes.start : null}\r\n                                                actualEndTime={isChecked ? sessionTimes.end : null}\r\n                                                daysElapsed={daysElapsed}\r\n                                                daysRemaining={daysRemaining}\r\n                                                startDate={habit.startDate}\r\n                                                endDate={habit.deadline}\r\n                                                progressCurrent={habit.completionHistory?.length || 0}\r\n                                                progressTotal={progressTotal}\r\n                                                timeCurrent={timeCurrent}\r\n                                                timeTotal={timeTotal}\r\n                                                onFocus={() =\u003e handleStartFocus(habit.id, \u0027goal\u0027, habit.title, habit.durationMinutes)}\r\n                                                isActive={activeFocus?.id === habit.id}\r\n                                                onToggle={() =\u003e {\r\n                                                    const action = (s?: string) =\u003e {\r\n                                                        if (habit.type === \u0027habit\u0027) {\r\n                                                            toggleGoal(habit.id, today, s);\r\n                                                        } else {\r\n                                                            toggleGoal(habit.id, undefined, s);\r\n                                                        }\r\n                                                    };\r\n\r\n                                                    if (isChecked \u0026\u0026 !isItemOptimistic) {\r\n                                                        action();\r\n                                                    } else {\r\n                                                        requestCompletion(habit.id, habit.title, action);\r\n                                                    }\r\n                                                }}\r\n                                                onOpenDetails={() =\u003e handleOpenDetails(habit.id, \u0027goal\u0027)}\r\n                                            \u003e\r\n                                                \u003cPriorityIcon priority={habit.priority} /\u003e\r\n                                            \u003c/MissionCard\u003e\r\n                                        \u003c/DraggableMissionItem\u003e\r\n                                    );\r\n                                })}\r\n                            \u003c/Reorder.Group\u003e\r\n                        \u003c/SectionBox\u003e\r\n                    \u003c/div\u003e\r\n                )}\r\n\r\n                {/* 2. RevisÃµes \u0026 Estudos */}\r\n                {orderedReviews.length \u003e 0 \u0026\u0026 (\r\n                    \u003cdiv className=\"border-t border-blue-500/10 pt-4\"\u003e\r\n                        \u003cSectionBox title=\"REVISÃ•ES \u0026 ESTUDOS\" icon={BrainCircuit} colorClass=\"text-emerald-400\" count={orderedReviews.length}\u003e\r\n                            \u003cReorder.Group axis=\"y\" values={orderedReviews} onReorder={handleReorderReviews} className=\"space-y-3\"\u003e\r\n                                {orderedReviews.map((item: ReviewItem) =\u003e {\r\n                                    const reviewNum = item.dueReview.number || 0;\r\n                                    const level = reviewNum;\r\n                                    const domain = item.mastery ? Math.round(item.mastery * 100) : 0;\r\n                                    const sessionTimes = getSessionTimes(item.sessions, today);\r\n                                    const isItemOptimistic = completionItem?.id === item.id;\r\n                                    const isCompleted = item.dueReview.status === \u0027completed\u0027 || isItemOptimistic;\r\n\r\n                                    return (\r\n                                        \u003cDraggableMissionItem key={item.id} item={item}\u003e\r\n                                            \u003cMissionCard\r\n                                                id={item.id}\r\n                                                title={item.title}\r\n                                                themeTitle={item.themeTitle}\r\n\r\n                                                reviewNumber={item.dueReview.number}\r\n                                                icon={item.icon || \"BrainCircuit\"}\r\n                                                colorClass=\"from-emerald-500 to-teal-600 shadow-emerald-500/20\"\r\n                                                type=\"review\"\r\n                                                isCompleted={isCompleted}\r\n                                                isBlocked={isFutureContext}\r\n                                                actualStartTime={sessionTimes.start || item.notificationTime}\r\n                                                actualEndTime={(item.dueReview.status === \u0027completed\u0027 ? sessionTimes.end : null) || calculateEndTime(item.notificationTime, item.durationMinutes)}\r\n                                                level={`${level}/5`}\r\n                                                domain={domain}\r\n                                                startDate={item.introductionDate}\r\n                                                endDate={item.deadline}\r\n                                                progressCurrent={item.reviews.filter((r: Review) =\u003e r.status === \u0027completed\u0027).length}\r\n                                                progressTotal={item.reviews.length}\r\n                                                schedule={item.reviews}\r\n                                                onFocus={() =\u003e handleStartFocus(item.id, \u0027subtheme\u0027, item.title, item.durationMinutes, item.dueReview.number, (item.type as \u0027review\u0027 | \u0027intro\u0027) || \u0027review\u0027)}\r\n                                                isActive={activeFocus?.id === item.id}\r\n                                                onToggle={() =\u003e {\r\n                                                    const action = (s?: string) =\u003e completeReview(item.id, item.dueReview.number, (item.type as \u0027review\u0027 | \u0027intro\u0027) || \u0027review\u0027, \u0027medium\u0027, s);\r\n                                                    if (isCompleted \u0026\u0026 !isItemOptimistic) {\r\n                                                        action();\r\n                                                    } else {\r\n                                                        requestCompletion(item.id, item.title, action);\r\n                                                    }\r\n                                                }}\r\n                                                onOpenDetails={() =\u003e handleOpenDetails(item.id, \u0027subtheme\u0027)}\r\n                                            \u003e\r\n                                                \u003cPriorityIcon priority={item.priority} /\u003e\r\n                                            \u003c/MissionCard\u003e\r\n                                        \u003c/DraggableMissionItem\u003e\r\n                                    );\r\n                                })}\r\n                            \u003c/Reorder.Group\u003e\r\n                        \u003c/SectionBox\u003e\r\n                    \u003c/div\u003e\r\n                )}\r\n\r\n                {/* 3. Tarefas \u0026 MissÃµes */}\r\n                {orderedTasks.length \u003e 0 \u0026\u0026 (\r\n                    \u003cdiv className=\"border-t border-blue-500/10 pt-4\"\u003e\r\n                        \u003cSectionBox title=\"TAREFAS \u0026 MISSÃ•ES\" icon={CheckSquare} colorClass=\"text-blue-400\" count={orderedTasks.length}\u003e\r\n                            \u003cReorder.Group axis=\"y\" values={orderedTasks} onReorder={handleReorderTasks} className=\"space-y-3\"\u003e\r\n                                {orderedTasks.map((task) =\u003e {\r\n                                    const isCompletedToday = task.type === \u0027day\u0027 ? task.status === \u0027completed\u0027 : (task.completionHistory?.some((d: string) =\u003e d.startsWith(today)) ?? false);\r\n                                    const isItemOptimistic = completionItem?.id === task.id;\r\n                                    const isChecked = isCompletedToday || isItemOptimistic;\r\n                                    const isBlocked = isFutureContext;\r\n                                    const sessionTimes = getSessionTimes(task.sessions, today);\r\n\r\n                                    let timeCurrent: number | undefined;\r\n                                    let timeTotal: number | undefined;\r\n                                    if (task.type === \u0027period\u0027 \u0026\u0026 task.startDate \u0026\u0026 task.endDate) {\r\n                                        const start = new Date(task.startDate);\r\n                                        const end = new Date(task.endDate);\r\n                                        const now = new Date();\r\n                                        timeTotal = Math.max(1, Math.ceil((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24)));\r\n                                        timeCurrent = Math.max(0, Math.min(timeTotal, Math.ceil((now.getTime() - start.getTime()) / (1000 * 60 * 60 * 24))));\r\n                                    }\r\n\r\n                                    return (\r\n                                        \u003cDraggableMissionItem key={task.id} item={task}\u003e\r\n                                            \u003cMissionCard\r\n                                                id={task.id}\r\n                                                title={task.title}\r\n                                                icon={task.icon || \"ClipboardList\"}\r\n                                                type=\"task\"\r\n                                                isCompleted={isChecked}\r\n                                                isBlocked={isBlocked}\r\n                                                actualStartTime={isChecked ? sessionTimes.start : task.notificationTime}\r\n                                                actualEndTime={isChecked ? sessionTimes.end : calculateEndTime(task.notificationTime, task.durationMinutes)}\r\n                                                startDate={task.startDate || task.date}\r\n                                                endDate={task.endDate || task.date}\r\n                                                progressCurrent={\u0027progress\u0027 in task \u0026\u0026 task.progress ? task.progress.current : (task.status === \u0027completed\u0027 ? 1 : 0)}\r\n                                                progressTotal={\u0027progress\u0027 in task \u0026\u0026 task.progress ? (task.progress.total || 1) : 1}\r\n                                                timeCurrent={timeCurrent}\r\n                                                timeTotal={timeTotal}\r\n                                                onFocus={() =\u003e handleStartFocus(task.id, \u0027task\u0027, task.title, task.durationMinutes)}\r\n                                                isActive={activeFocus?.id === task.id}\r\n                                                onToggle={() =\u003e {\r\n                                                    const action = (s?: string) =\u003e toggleTask(task.id, today, s);\r\n                                                    if (isChecked \u0026\u0026 !isItemOptimistic) action();\r\n                                                    else requestCompletion(task.id, task.title, action);\r\n                                                }}\r\n                                                onOpenDetails={() =\u003e handleOpenDetails(task.id, \u0027task\u0027)}\r\n                                            \u003e\r\n                                                \u003cPriorityIcon priority={task.priority} /\u003e\r\n                                            \u003c/MissionCard\u003e\r\n                                        \u003c/DraggableMissionItem\u003e\r\n                                    );\r\n                                })}\r\n                            \u003c/Reorder.Group\u003e\r\n                        \u003c/SectionBox\u003e\r\n                    \u003c/div\u003e\r\n                )}\r\n\r\n                {/* Empty State */}\r\n                {!hasItems \u0026\u0026 (\r\n                    \u003cdiv className=\"flex flex-col items-center justify-center py-12 text-center space-y-4 opacity-50 animate-in fade-in duration-500\"\u003e\r\n                        \u003cdiv className=\"w-20 h-20 rounded-full bg-slate-800/50 flex items-center justify-center mb-2 shadow-inner border border-slate-700/50\"\u003e\r\n                            \u003cCalendarIcon className=\"w-10 h-10 text-slate-600\" /\u003e\r\n                        \u003c/div\u003e\r\n                        \u003cdiv\u003e\r\n                            \u003cp className=\"text-slate-400 font-bold text-sm\"\u003eNada agendado para este dia\u003c/p\u003e\r\n                            \u003cp className=\"text-slate-600 text-xs mt-1 max-w-[200px] mx-auto leading-relaxed\"\u003eAproveite para descansar ou adiantar estudos de outros dias!\u003c/p\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n                )}\r\n\r\n                {/* Completion Modal Overlay */}\r\n                {completionItem \u0026\u0026 (\r\n                    \u003cdiv className=\"absolute inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm rounded-[2rem] animate-in fade-in duration-200\"\u003e\r\n                        \u003cdiv className=\"bg-slate-800 border border-slate-700 p-6 rounded-2xl w-full max-w-sm shadow-2xl relative animate-in zoom-in-95 duration-200\"\u003e\r\n                            \u003cdiv className=\"flex items-center gap-3 mb-4\"\u003e\r\n                                \u003cdiv className=\"p-2 bg-emerald-500/10 rounded-lg text-emerald-400\"\u003e\r\n                                    \u003cCheckSquare className=\"w-5 h-5\" /\u003e\r\n                                \u003c/div\u003e\r\n                                \u003cdiv\u003e\r\n                                    \u003ch3 className=\"text-lg font-bold text-white\"\u003eConcluir MissÃ£o\u003c/h3\u003e\r\n                                    \u003cp className=\"text-xs text-slate-400 line-clamp-1\"\u003e{completionItem.title}\u003c/p\u003e\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n\r\n                            \u003cp className=\"text-slate-300 text-sm mb-3\"\u003eO que vocÃª aprendeu ou realizou?\u003c/p\u003e\r\n\r\n                            \u003ctextarea\r\n                                value={summaryText}\r\n                                onChange={e =\u003e setSummaryText(e.target.value)}\r\n                                className=\"w-full h-24 bg-slate-900 border border-slate-700 rounded-xl p-3 text-white text-sm resize-none focus:ring-2 focus:ring-blue-500 outline-none mb-4 placeholder:text-slate-600\"\r\n                                placeholder=\"Adicione um resumo (opcional)...\"\r\n                                autoFocus\r\n                            /\u003e\r\n\r\n                            \u003cdiv className=\"flex gap-3\"\u003e\r\n                                \u003cbutton\r\n                                    onClick={skipSummary}\r\n                                    className=\"flex-1 py-3 text-slate-400 font-bold hover:text-white hover:bg-white/5 rounded-xl transition-colors text-sm\"\r\n                                \u003e\r\n                                    Pular\r\n                                \u003c/button\u003e\r\n                                \u003cbutton\r\n                                    onClick={confirmCompletion}\r\n                                    className=\"flex-1 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl shadow-lg shadow-blue-500/20 transition-all active:scale-95 flex items-center justify-center gap-2 text-sm\"\r\n                                \u003e\r\n                                    \u003cSave className=\"w-4 h-4\" /\u003e\r\n                                    Salvar\r\n                                \u003c/button\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n                )}\r\n            \u003c/div\u003e\r\n\r\n            {/* Task Details Modal */}\r\n            \u003cTaskDetailsModal\r\n                isOpen={!!selectedTask}\r\n                onClose={() =\u003e setSelectedTask(null)}\r\n                task={selectedTask}\r\n            /\u003e\r\n\r\n            {/* Goal Details Modal */}\r\n            \u003cGoalDetailsModal\r\n                isOpen={!!selectedGoal}\r\n                onClose={() =\u003e setSelectedGoal(null)}\r\n                goal={selectedGoal}\r\n            /\u003e\r\n\r\n            {/* Subtheme Details Modal */}\r\n            \u003cReact.Suspense fallback={\u003cdiv className=\"p-4 flex justify-center\"\u003e\u003cLoader2 className=\"w-6 h-6 animate-spin text-blue-500\" /\u003e\u003c/div\u003e}\u003e\r\n                \u003cStudyContentModal\r\n                    isOpen={!!selectedSubtheme}\r\n                    onClose={() =\u003e setSelectedSubtheme(null)}\r\n                    subtheme={selectedSubtheme}\r\n                    onSave={(updated) =\u003e { /* handle save if needed */ }}\r\n                /\u003e\r\n            \u003c/React.Suspense\u003e\r\n\r\n        \u003c/Modal \u003e\r\n    );\r\n};\r\n\r\nexport default TodayMissionModal;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\TodayMissionWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\__tests__\\MissionItem.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\components\\AchievementsSummaryWidget.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027cn\u0027 is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":12}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \u0027react\u0027;\r\nimport { Trophy, Star, Lock, ChevronRight } from \u0027lucide-react\u0027;\r\nimport { ACHIEVEMENTS_LIST } from \u0027../../../config/gamification\u0027;\r\nimport type { Achievement } from \u0027../../../types/gamification\u0027;\r\nimport * as Icons from \u0027lucide-react\u0027;\r\nimport { cn } from \u0027../../../lib/utils\u0027;\r\n\r\ninterface AchievementsSummaryWidgetProps {\r\n    unlockedAchievements: Achievement[];\r\n    onNavigate: (tab: string) =\u003e void;\r\n}\r\n\r\nexport const AchievementsSummaryWidget: React.FC\u003cAchievementsSummaryWidgetProps\u003e = ({ unlockedAchievements, onNavigate }) =\u003e {\r\n    const totalCount = ACHIEVEMENTS_LIST.length;\r\n    const unlockedCount = unlockedAchievements.length;\r\n\r\n    // Get last 3 unlocked in reverse chronological order\r\n    const recentAchievements = [...unlockedAchievements]\r\n        .sort((a, b) =\u003e new Date(b.unlockedAt || 0).getTime() - new Date(a.unlockedAt || 0).getTime())\r\n        .slice(0, 3);\r\n\r\n    // Fill with locked if empty? No, just show what we have.\r\n\r\n    return (\r\n        \u003cdiv className=\"bg-gradient-to-br from-slate-900/50 via-slate-900/40 to-slate-950/50 backdrop-blur-md border border-white/10 rounded-3xl p-5 shadow-2xl relative overflow-hidden group/achievements\"\u003e\r\n            {/* Ambient Lighting */}\r\n            \u003cdiv className=\"absolute top-0 right-0 w-32 h-32 bg-yellow-500/5 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none\" /\u003e\r\n            \u003cdiv className=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-yellow-500/60 via-orange-500/60 to-transparent opacity-60\" /\u003e\r\n\r\n            \u003cdiv className=\"relative z-10\"\u003e\r\n                {/* Header */}\r\n                \u003cdiv className=\"flex items-center justify-between mb-4\"\u003e\r\n                    \u003cdiv className=\"flex items-center gap-2\"\u003e\r\n                        \u003cdiv className=\"p-1.5 rounded-lg bg-yellow-500/10 ring-1 ring-yellow-500/20\"\u003e\r\n                            \u003cTrophy className=\"w-4 h-4 text-yellow-500\" /\u003e\r\n                        \u003c/div\u003e\r\n                        \u003ch3 className=\"font-bold text-white text-base tracking-tight\"\u003eConquistas\u003c/h3\u003e\r\n                    \u003c/div\u003e\r\n                    \u003cspan className=\"text-[10px] font-black text-yellow-500/80 bg-yellow-500/10 px-2 py-0.5 rounded border border-yellow-500/20\"\u003e\r\n                        {unlockedCount}/{totalCount}\r\n                    \u003c/span\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* Progress Bar (Radial or linear?) Let\u0027s go linear for a compact widget */}\r\n                \u003cdiv className=\"mb-6\"\u003e\r\n                    \u003cdiv className=\"flex justify-between text-[10px] text-slate-500 uppercase font-bold tracking-widest mb-1.5\"\u003e\r\n                        \u003cspan\u003eMinhas Medalhas\u003c/span\u003e\r\n                        \u003cspan\u003e{Math.round((unlockedCount / totalCount) * 100)}%\u003c/span\u003e\r\n                    \u003c/div\u003e\r\n                    \u003cdiv className=\"h-1.5 w-full bg-slate-950 rounded-full overflow-hidden border border-white/5 p-[1px]\"\u003e\r\n                        \u003cdiv\r\n                            className=\"h-full bg-gradient-to-r from-yellow-500 to-orange-500 rounded-full transition-all duration-1000 shadow-[0_0_10px_rgba(234,179,8,0.3)]\"\r\n                            style={{ width: `${(unlockedCount / totalCount) * 100}%` }}\r\n                        /\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* Recent Unlocks List */}\r\n                \u003cdiv className=\"space-y-3\"\u003e\r\n                    {recentAchievements.length \u003e 0 ? (\r\n                        recentAchievements.map((achievement) =\u003e {\r\n                            const Icon = (Icons as any)[achievement.iconName] || Trophy;\r\n                            return (\r\n                                \u003cdiv key={achievement.id} className=\"flex items-center gap-3 p-2 bg-slate-800/40 rounded-xl border border-white/5 hover:bg-slate-800/60 transition-colors\"\u003e\r\n                                    \u003cdiv className=\"w-9 h-9 rounded-lg bg-gradient-to-br from-yellow-500 to-orange-600 flex items-center justify-center shrink-0 shadow-lg\"\u003e\r\n                                        \u003cIcon className=\"w-5 h-5 text-white\" /\u003e\r\n                                    \u003c/div\u003e\r\n                                    \u003cdiv className=\"min-w-0\"\u003e\r\n                                        \u003cp className=\"text-xs font-bold text-white truncate\"\u003e{achievement.title}\u003c/p\u003e\r\n                                        \u003cp className=\"text-[10px] text-slate-500 truncate\"\u003e{achievement.description}\u003c/p\u003e\r\n                                    \u003c/div\u003e\r\n                                    \u003cStar className=\"w-3 h-3 text-yellow-500 ml-auto fill-yellow-500\" /\u003e\r\n                                \u003c/div\u003e\r\n                            );\r\n                        })\r\n                    ) : (\r\n                        \u003cdiv className=\"flex flex-col items-center justify-center py-4 bg-slate-800/20 rounded-2xl border border-dashed border-slate-700\"\u003e\r\n                            \u003cLock className=\"w-6 h-6 text-slate-600 mb-2\" /\u003e\r\n                            \u003cp className=\"text-[10px] text-slate-500 font-medium\"\u003eContinue focado!\u003c/p\u003e\r\n                        \u003c/div\u003e\r\n                    )}\r\n                \u003c/div\u003e\r\n\r\n                {/* View All Button */}\r\n                \u003cbutton\r\n                    onClick={() =\u003e onNavigate(\u0027analytics\u0027)}\r\n                    className=\"mt-4 w-full py-2.5 bg-slate-800/50 hover:bg-slate-800 border border-white/5 hover:border-white/10 rounded-xl text-[10px] font-bold text-slate-300 hover:text-white transition-all flex items-center justify-center gap-2 group/btn\"\r\n                \u003e\r\n                    GALERIA DE TROFÃ‰US\r\n                    \u003cChevronRight className=\"w-3 h-3 group-hover/btn:translate-x-1 transition-transform\" /\u003e\r\n                \u003c/button\u003e\r\n            \u003c/div\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\components\\ActiveGoalsWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\components\\LeaderboardWidget.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Trophy\u0027 is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027isTop3\u0027 is assigned a value but never used.","line":54,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":54,"endColumn":37}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \u0027react\u0027;\r\nimport { Trophy, Medal, Crown, TrendingUp, Users } from \u0027lucide-react\u0027;\r\nimport { cn } from \u0027../../../lib/utils\u0027;\r\n\r\ninterface LeaderboardUser {\r\n    id: string;\r\n    name: string;\r\n    avatar?: string;\r\n    xp: number;\r\n    level: number;\r\n    isMe?: boolean;\r\n    trend: \u0027up\u0027 | \u0027down\u0027 | \u0027stable\u0027;\r\n}\r\n\r\ninterface LeaderboardWidgetProps {\r\n    userXp?: number;\r\n    userLevel?: number;\r\n}\r\n\r\nexport const LeaderboardWidget: React.FC\u003cLeaderboardWidgetProps\u003e = ({ userXp = 0, userLevel = 1 }) =\u003e {\r\n    // Mock Data for \"Global/Friend Rankings\" (Merged with real user data)\r\n    const competitors: LeaderboardUser[] = [\r\n        { id: \u00271\u0027, name: \u0027Alex M.\u0027, xp: 15420, level: 24, trend: \u0027up\u0027 as const },\r\n        { id: \u00272\u0027, name: \u0027Sarah Dr.\u0027, xp: 12850, level: 20, trend: \u0027stable\u0027 as const },\r\n        { id: \u0027me\u0027, name: \u0027VocÃª\u0027, xp: userXp, level: userLevel, isMe: true, trend: \u0027up\u0027 as const },\r\n        { id: \u00274\u0027, name: \u0027Gustavo K.\u0027, xp: 8200, level: 12, trend: \u0027down\u0027 as const },\r\n        { id: \u00275\u0027, name: \u0027Elena V.\u0027, xp: 7500, level: 11, trend: \u0027stable\u0027 as const },\r\n    ].sort((a, b) =\u003e b.xp - a.xp);\r\n\r\n    return (\r\n        \u003cdiv className=\"bg-gradient-to-br from-slate-900/50 via-slate-900/40 to-slate-950/50 backdrop-blur-md border border-white/10 rounded-3xl p-5 shadow-2xl relative overflow-hidden group/leaderboard\"\u003e\r\n            {/* Ambient Lighting */}\r\n            \u003cdiv className=\"absolute top-0 right-0 w-32 h-32 bg-blue-500/5 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none\" /\u003e\r\n            \u003cdiv className=\"absolute bottom-0 left-0 w-32 h-32 bg-indigo-500/5 rounded-full blur-3xl -ml-16 -mb-16 pointer-events-none\" /\u003e\r\n\r\n            \u003cdiv className=\"relative z-10\"\u003e\r\n                {/* Header */}\r\n                \u003cdiv className=\"flex items-center justify-between mb-5\"\u003e\r\n                    \u003cdiv className=\"flex items-center gap-2\"\u003e\r\n                        \u003cdiv className=\"p-1.5 rounded-lg bg-indigo-500/10 ring-1 ring-indigo-500/20\"\u003e\r\n                            \u003cUsers className=\"w-4 h-4 text-indigo-400\" /\u003e\r\n                        \u003c/div\u003e\r\n                        \u003ch3 className=\"font-bold text-white text-base tracking-tight\"\u003eRanking Global\u003c/h3\u003e\r\n                    \u003c/div\u003e\r\n                    \u003cspan className=\"text-[10px] font-black text-indigo-400 bg-indigo-500/10 px-2 py-0.5 rounded border border-indigo-500/20\"\u003e\r\n                        LIGA OURO\r\n                    \u003c/span\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* Rankings List */}\r\n                \u003cdiv className=\"space-y-2\"\u003e\r\n                    {competitors.map((user, idx) =\u003e {\r\n                        const rank = idx + 1;\r\n                        const isTop3 = rank \u003c= 3;\r\n\r\n                        return (\r\n                            \u003cdiv\r\n                                key={user.id}\r\n                                className={cn(\r\n                                    \"flex items-center gap-3 p-2.5 rounded-2xl transition-all border\",\r\n                                    user.isMe\r\n                                        ? \"bg-indigo-500/10 border-indigo-500/30 scale-[1.02] shadow-lg shadow-indigo-500/10\"\r\n                                        : \"bg-slate-800/30 border-white/5 hover:border-white/10\"\r\n                                )}\r\n                            \u003e\r\n                                {/* Rank Icon/Number */}\r\n                                \u003cdiv className=\"w-6 flex justify-center shrink-0\"\u003e\r\n                                    {rank === 1 \u0026\u0026 \u003cCrown className=\"w-4 h-4 text-yellow-500 fill-yellow-500\" /\u003e}\r\n                                    {rank === 2 \u0026\u0026 \u003cMedal className=\"w-4 h-4 text-slate-300 fill-slate-300\" /\u003e}\r\n                                    {rank === 3 \u0026\u0026 \u003cMedal className=\"w-4 h-4 text-amber-600 fill-amber-600\" /\u003e}\r\n                                    {rank \u003e 3 \u0026\u0026 \u003cspan className=\"text-[10px] font-black text-slate-600\"\u003e{rank}\u003c/span\u003e}\r\n                                \u003c/div\u003e\r\n\r\n                                {/* Avatar */}\r\n                                \u003cdiv className=\"w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center border border-white/10 shrink-0 overflow-hidden\"\u003e\r\n                                    \u003cspan className=\"text-[10px] font-bold text-white uppercase\"\u003e{user.name.substring(0, 2)}\u003c/span\u003e\r\n                                \u003c/div\u003e\r\n\r\n                                {/* Name \u0026 Level */}\r\n                                \u003cdiv className=\"min-w-0 flex-1\"\u003e\r\n                                    \u003cp className={cn(\r\n                                        \"text-xs font-bold truncate\",\r\n                                        user.isMe ? \"text-white\" : \"text-slate-300\"\r\n                                    )}\u003e\r\n                                        {user.name}\r\n                                    \u003c/p\u003e\r\n                                    \u003cp className=\"text-[9px] text-slate-500 font-medium\"\u003eNÃ­vel {user.level}\u003c/p\u003e\r\n                                \u003c/div\u003e\r\n\r\n                                {/* XP */}\r\n                                \u003cdiv className=\"text-right\"\u003e\r\n                                    \u003cp className=\"text-[10px] font-mono font-black text-white\"\u003e{user.xp.toLocaleString()}\u003c/p\u003e\r\n                                    \u003cp className=\"text-[8px] text-slate-600 font-bold tracking-tighter uppercase\"\u003eXP TOTAL\u003c/p\u003e\r\n                                \u003c/div\u003e\r\n\r\n                                {/* Trend */}\r\n                                \u003cdiv className=\"ml-1\"\u003e\r\n                                    {user.trend === \u0027up\u0027 \u0026\u0026 \u003cTrendingUp className=\"w-3 h-3 text-emerald-500\" /\u003e}\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n                        );\r\n                    })}\r\n                \u003c/div\u003e\r\n\r\n                {/* View Full Ranking */}\r\n                \u003cbutton className=\"mt-4 w-full py-2 text-[10px] font-black text-slate-500 hover:text-indigo-400 transition-colors uppercase tracking-widest border border-dashed border-slate-800 rounded-xl hover:bg-indigo-500/5 hover:border-indigo-500/20\"\u003e\r\n                    Ver Ranking Completo\r\n                \u003c/button\u003e\r\n            \u003c/div\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\components\\MissionCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027id\u0027 is defined but never used.","line":73,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":73,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027progressInfo\u0027 is defined but never used.","line":82,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":82,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027domainInfo\u0027 is defined but never used.","line":83,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":83,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027duration\u0027 is assigned a value but never used.","line":88,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":88,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027progressCurrent\u0027 is defined but never used.","line":91,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":91,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027progressTotal\u0027 is defined but never used.","line":92,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":92,"endColumn":18}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \u0027react\u0027;\r\nimport { Lock, Play, CheckCircle2, Clock, CheckSquare, Loader2 } from \u0027lucide-react\u0027;\r\nimport { cn } from \u0027../../../lib/utils\u0027;\r\nimport { format, isToday, isTomorrow, isYesterday } from \u0027date-fns\u0027;\r\nimport { ptBR } from \u0027date-fns/locale\u0027;\r\nimport { IconRenderer } from \u0027../../../components/ui/IconRenderer\u0027;\r\n\r\ninterface MissionCardProps {\r\n    id: string;\r\n    title: string;\r\n    icon: string;\r\n    type: \u0027habit\u0027 | \u0027review\u0027 | \u0027task\u0027;\r\n    isCompleted: boolean;\r\n    isBlocked: boolean;\r\n    actualStartTime?: string | null;\r\n    actualEndTime?: string | null;\r\n    themeTitle?: string;\r\n    progressInfo?: string;\r\n    domainInfo?: string;\r\n    level?: string;\r\n    domain?: number;\r\n    daysElapsed?: number;\r\n    daysRemaining?: number;\r\n    duration?: number; // Pomodoro duration in minutes\r\n    startDate?: string; // Format: YYYY-MM-DD\r\n    endDate?: string; // Format: YYYY-MM-DD\r\n    progressCurrent?: number; // How many completed\r\n    progressTotal?: number; // Total expected\r\n    timeCurrent?: number; // Days elapsed\r\n    timeTotal?: number; // Total days duration\r\n    schedule?: { number: number; date: string; status: \u0027completed\u0027 | \u0027pending\u0027 | \u0027projected\u0027 }[];\r\n    onFocus?: () =\u003e void;\r\n    onToggle?: () =\u003e void;\r\n    onOpenDetails?: () =\u003e void;\r\n    isActive?: boolean;\r\n    children?: React.ReactNode;\r\n    reviewNumber?: number;\r\n    isLoading?: boolean;\r\n    colorClass?: string;\r\n}\r\n\r\nconst colorSchemes = {\r\n    habit: {\r\n        gradient: \u0027from-slate-700 to-slate-600\u0027,\r\n        glow: \u0027shadow-orange-500/20\u0027,\r\n        text: \u0027text-orange-400\u0027,\r\n        border: \u0027border-slate-700/40\u0027,\r\n        bgHover: \u0027hover:bg-slate-800/50\u0027,\r\n        accent: \u0027bg-orange-500/20 border-orange-500/30\u0027,\r\n        bg: \u0027bg-gradient-to-br from-orange-500 to-amber-500 text-white shadow-lg shadow-orange-500/20\u0027\r\n    },\r\n    review: {\r\n        gradient: \u0027from-slate-700 to-slate-600\u0027,\r\n        glow: \u0027shadow-emerald-500/20\u0027,\r\n        text: \u0027text-emerald-400\u0027,\r\n        border: \u0027border-slate-700/40\u0027,\r\n        bgHover: \u0027hover:bg-slate-800/50\u0027,\r\n        accent: \u0027bg-emerald-500/20 border-emerald-500/30\u0027,\r\n        bg: \u0027bg-gradient-to-br from-emerald-500 to-teal-500 text-white shadow-lg shadow-emerald-500/20\u0027\r\n    },\r\n    task: {\r\n        gradient: \u0027from-slate-700 to-slate-600\u0027,\r\n        glow: \u0027shadow-blue-500/20\u0027,\r\n        text: \u0027text-blue-400\u0027,\r\n        border: \u0027border-slate-700/40\u0027,\r\n        bgHover: \u0027hover:bg-slate-800/50\u0027,\r\n        accent: \u0027bg-blue-500/20 border-blue-500/30\u0027,\r\n        bg: \u0027bg-gradient-to-br from-blue-600 to-indigo-600 text-white shadow-lg shadow-blue-500/20\u0027\r\n    }\r\n};\r\n\r\nconst MissionCardBase: React.FC\u003cMissionCardProps\u003e = ({\r\n    id,\r\n    title,\r\n    themeTitle,\r\n    icon,\r\n    type,\r\n    isCompleted,\r\n    isBlocked: propIsBlocked,\r\n    actualStartTime,\r\n    actualEndTime,\r\n    progressInfo,\r\n    domainInfo,\r\n    level,\r\n    domain,\r\n    daysElapsed,\r\n    daysRemaining,\r\n    duration = 25,\r\n    startDate,\r\n    endDate,\r\n    progressCurrent,\r\n    progressTotal,\r\n    timeCurrent,\r\n    timeTotal,\r\n    schedule,\r\n    reviewNumber,\r\n    onFocus,\r\n    onToggle,\r\n    onOpenDetails,\r\n    children,\r\n    isActive = false,\r\n    isLoading = false,\r\n    colorClass\r\n}) =\u003e {\r\n    const scheme = colorSchemes[type];\r\n    const isBlocked = propIsBlocked;\r\n\r\n    // Check if item is overdue\r\n    const now = new Date();\r\n    const isOverdue = !isCompleted \u0026\u0026 endDate \u0026\u0026 new Date(endDate + \u0027T23:59:59\u0027) \u003c now;\r\n\r\n    const getIconBackground = () =\u003e {\r\n        if (isCompleted) return \"bg-emerald-500/20 text-emerald-400 ring-1 ring-emerald-500/30\";\r\n        if (isBlocked) return \"bg-slate-800/40 text-slate-500 ring-1 ring-white/5 grayscale\";\r\n\r\n        // Use custom color class if provided, else use scheme default\r\n        if (colorClass) {\r\n            // Check if it\u0027s already a full gradient string or just classes\r\n            if (colorClass.includes(\u0027from-\u0027)) return `bg-gradient-to-br ${colorClass} text-white shadow-lg ring-1 ring-white/10`;\r\n            return `bg-${colorClass}-500 text-white shadow-lg shadow-${colorClass}-500/20 ring-1 ring-white/10`;\r\n        }\r\n\r\n        return `bg-gradient-to-br ${scheme?.bg || \u0027from-blue-600 to-indigo-700\u0027} text-white shadow-lg shadow-blue-900/40 ring-1 ring-white/20`;\r\n    };\r\n\r\n    return (\r\n        \u003cdiv\r\n            className={cn(\r\n                \"relative group rounded-2xl p-4 transition-all duration-300\",\r\n                \"bg-[#0F172A] border\",\r\n                isActive\r\n                    ? \"border-rose-500/50 shadow-[0_0_15px_-3px_rgba(244,63,94,0.3)]\"\r\n                    : isOverdue\r\n                        ? \"border-red-500/70 bg-gradient-to-br from-red-900/20 to-orange-900/10 shadow-lg shadow-red-500/20\"\r\n                        : \"border-blue-900/30\",\r\n                isBlocked ? \"opacity-50 grayscale pointer-events-none select-none\" : isCompleted ? \"opacity-75 cursor-default border-emerald-500/20 bg-emerald-500/5 transition-none\" : \"hover:bg-slate-800/40 cursor-pointer\"\r\n            )}\r\n            onClick={onOpenDetails}\r\n        \u003e\r\n            {/* Overdue glow effect */}\r\n            {isOverdue \u0026\u0026 !isCompleted \u0026\u0026 (\r\n                \u003cdiv className=\"absolute top-0 right-0 p-12 bg-red-500/10 blur-[40px] rounded-full pointer-events-none animate-pulse\" /\u003e\r\n            )}\r\n            {/* Main Content Grid */}\r\n            \u003cdiv className=\"flex items-start gap-4\"\u003e\r\n                {/* Icon Container */}\r\n                \u003cdiv className={cn(\r\n                    \"w-12 h-12 rounded-2xl flex items-center justify-center transition-all duration-500 relative group-hover:scale-110 group-hover:rotate-3\",\r\n                    getIconBackground()\r\n                )}\u003e\r\n                    {/* Inner Glow/Reflection */}\r\n                    \u003cdiv className=\"absolute inset-0 rounded-2xl bg-gradient-to-tr from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity\" /\u003e\r\n                    \u003cdiv className=\"absolute inset-[1px] rounded-[15px] bg-gradient-to-b from-white/10 to-transparent pointer-events-none\" /\u003e\r\n\r\n                    \u003cIconRenderer icon={icon} size={24} className=\"text-white drop-shadow-[0_2px_4px_rgba(0,0,0,0.3)] z-10\" /\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* Text Content */}\r\n                \u003cdiv className=\"flex-1 min-w-0 pt-0.5\"\u003e\r\n                    {themeTitle \u0026\u0026 (\r\n                        \u003cp className=\"text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-0.5 line-clamp-1 flex items-center gap-1\"\u003e\r\n                            {themeTitle}\r\n                            {reviewNumber !== undefined \u0026\u0026 (\r\n                                \u003cspan className={cn(\r\n                                    \"px-1 rounded text-[9px]\",\r\n                                    \"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20\"\r\n                                )}\u003e\r\n                                    #{reviewNumber}\r\n                                \u003c/span\u003e\r\n                            )}\r\n                        \u003c/p\u003e\r\n                    )}\r\n                    \u003cdiv className=\"flex items-center gap-2 mb-0.5\"\u003e\r\n                        {isOverdue \u0026\u0026 !isCompleted \u0026\u0026 (\r\n                            \u003cspan className=\"text-[8px] font-black uppercase tracking-wider px-1.5 py-0.5 rounded bg-red-500/20 text-red-400 border border-red-500/40 whitespace-nowrap animate-pulse\"\u003e\r\n                                âš  Atrasado\r\n                            \u003c/span\u003e\r\n                        )}\r\n                        \u003ch3 className={cn(\r\n                            \"text-base font-bold text-white truncate transition-colors flex-1\",\r\n                            isCompleted \u0026\u0026 \"line-through text-slate-500\",\r\n                            isOverdue \u0026\u0026 !isCompleted \u0026\u0026 \"text-red-400 font-extrabold\"\r\n                        )}\u003e\r\n                            {title}\r\n                        \u003c/h3\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Subtitle / Status */}\r\n                    {(actualStartTime || actualEndTime) \u0026\u0026 (\r\n                        \u003cdiv className=\"inline-flex items-center gap-1.5 px-2 py-0.5 rounded-lg bg-blue-500/10 border border-blue-500/20 text-blue-300 text-xs font-bold\"\u003e\r\n                            \u003cClock className=\"w-3 h-3\" /\u003e\r\n                            \u003cspan\u003e\r\n                                {actualStartTime || \u0027--:--\u0027} - {actualEndTime || \u0027--:--\u0027}\r\n                            \u003c/span\u003e\r\n                        \u003c/div\u003e\r\n                    )}\r\n                    {!actualStartTime \u0026\u0026 (\r\n                        \u003cp className={cn(\r\n                            \"text-xs font-bold uppercase tracking-wider\",\r\n                            isOverdue \u0026\u0026 !isCompleted ? \"text-red-500 animate-pulse\" : \"text-slate-500\"\r\n                        )}\u003e\r\n                            {isOverdue \u0026\u0026 !isCompleted\r\n                                ? \"ATRASADO\"\r\n                                : (type === \u0027review\u0027 ? \u0027REVISAR AGORA\u0027 : \u0027PENDENTE\u0027)}\r\n                        \u003c/p\u003e\r\n                    )}\r\n                \u003c/div\u003e\r\n\r\n                {/* Right Actions */}\r\n                \u003cdiv className=\"flex items-center gap-2\" onClick={e =\u003e e.stopPropagation()}\u003e\r\n                    {/* Play Button */}\r\n                    {!isCompleted \u0026\u0026 (\r\n                        isActive ? (\r\n                            \u003cdiv className=\"h-9 px-4 rounded-full bg-rose-500/10 border border-rose-500/30 flex items-center justify-center gap-2 animate-pulse\"\u003e\r\n                                \u003cLoader2 className=\"w-3.5 h-3.5 text-rose-400 animate-spin\" /\u003e\r\n                                \u003cspan className=\"text-[10px] font-bold text-rose-400 uppercase tracking-wider\"\u003eFocando\u003c/span\u003e\r\n                            \u003c/div\u003e\r\n                        ) : (\r\n                            \u003cbutton\r\n                                className={cn(\r\n                                    \"relative z-50 w-10 h-10 rounded-full flex items-center justify-center transition-all group/btn shadow-lg hover:scale-105 active:scale-95\",\r\n                                    isLoading\r\n                                        ? \"cursor-wait opacity-50 bg-slate-800\"\r\n                                        : \"bg-slate-800 hover:bg-emerald-500 border border-slate-700 hover:border-emerald-500 text-slate-400 hover:text-white\"\r\n                                )}\r\n                                onPointerDown={(e) =\u003e e.stopPropagation()}\r\n                                onClick={(e) =\u003e {\r\n                                    e.stopPropagation();\r\n                                    if (isBlocked) {\r\n                                        // Feedback explicit para o usuÃ¡rio entender por que nÃ£o inicia\r\n                                        alert(\"Esta missÃ£o estÃ¡ bloqueada (data futura ou restriÃ§Ã£o).\");\r\n                                        return;\r\n                                    }\r\n                                    onFocus?.();\r\n                                }}\r\n                                disabled={isBlocked}\r\n                                title=\"Iniciar Foco Imediatamente\"\r\n                            \u003e\r\n                                {isLoading ? (\r\n                                    \u003cLoader2 className=\"w-5 h-5 animate-spin\" /\u003e\r\n                                ) : isBlocked ? (\r\n                                    \u003cLock className=\"w-4 h-4 text-slate-600\" /\u003e\r\n                                ) : (\r\n                                    \u003cPlay className=\"w-4 h-4 fill-current ml-0.5\" /\u003e\r\n                                )}\r\n                            \u003c/button\u003e\r\n                        )\r\n                    )}\r\n                    {isCompleted \u0026\u0026 (\r\n                        \u003cdiv className=\"w-8 h-8 rounded-full border border-emerald-500/30 bg-emerald-500/10 flex items-center justify-center\"\u003e\r\n                            \u003cCheckCircle2 className=\"w-4 h-4 text-emerald-500\" /\u003e\r\n                        \u003c/div\u003e\r\n                    )}\r\n\r\n                    {/* Secondary Action (Stop or Details) */}\r\n                    {type === \u0027task\u0027 ? (\r\n                        \u003cbutton\r\n                            onClick={(e) =\u003e {\r\n                                e.stopPropagation();\r\n                                if (!isCompleted) onToggle?.();\r\n                            }}\r\n                            disabled={isCompleted}\r\n                            className={cn(\r\n                                \"w-8 h-8 rounded-full flex items-center justify-center transition-all border group/btn\",\r\n                                isCompleted ? \"bg-blue-600 border-blue-400 cursor-default\" : \"bg-blue-600 hover:bg-blue-500 border-blue-400\"\r\n                            )}\r\n                        \u003e\r\n                            \u003cCheckSquare className=\"w-4 h-4 text-white\" /\u003e\r\n                        \u003c/button\u003e\r\n                    ) : (\r\n                        \u003cbutton\r\n                            onClick={(e) =\u003e {\r\n                                e.stopPropagation();\r\n                                if (!isCompleted) onToggle?.();\r\n                            }}\r\n                            disabled={isCompleted}\r\n                            className={cn(\r\n                                \"w-8 h-8 rounded-full border border-slate-600 flex items-center justify-center transition-all\",\r\n                                isCompleted ? \"cursor-default border-slate-600\" : \"hover:bg-slate-700 hover:border-slate-500\"\r\n                            )}\r\n                        \u003e\r\n                            {/* Checkbox style for non-tasks (Habits/Goals visual cue) */}\r\n                            \u003cdiv className={cn(\"w-3 h-3 rounded-sm transition-colors\", isCompleted ? \"bg-emerald-500\" : \"bg-slate-400\")} /\u003e\r\n                        \u003c/button\u003e\r\n                    )}\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n\r\n            {/* Bottom Progress Section */}\r\n            \u003cdiv className=\"mt-4 space-y-2\"\u003e\r\n                {/* Labels Row */}\r\n                \u003cdiv className=\"flex justify-between items-center text-xs font-bold text-slate-400\"\u003e\r\n                    {level \u0026\u0026 (\r\n                        \u003cspan className=\"text-slate-300\"\u003e{type === \u0027review\u0027 ? `NÃ­vel ${level}` : `${daysElapsed}/${timeTotal}`}\u003c/span\u003e\r\n                    ) || (\r\n                            \u003cspan\u003e{timeCurrent !== undefined \u0026\u0026 timeTotal ? `${timeCurrent}/${timeTotal}` : \u0027\u0027}\u003c/span\u003e\r\n                        )}\r\n\r\n                    {type === \u0027review\u0027 \u0026\u0026 domain \u0026\u0026 (\r\n                        \u003cspan className=\"text-emerald-500\"\u003e{domain}% DomÃ­nio\u003c/span\u003e\r\n                    ) || (daysRemaining !== undefined \u0026\u0026 (\r\n                        \u003cspan className=\"text-blue-400\"\u003e{daysRemaining} dias restantes\u003c/span\u003e\r\n                    ))}\r\n                \u003c/div\u003e\r\n\r\n                {/* Progress Bar */}\r\n                {type === \u0027review\u0027 ? (\r\n                    // Segmented Bar for Reviews\r\n                    \u003cdiv className=\"flex gap-1 h-1.5\"\u003e\r\n                        {[1, 2, 3, 4, 5].map((seg) =\u003e {\r\n                            const currentLevel = parseInt(level?.split(\u0027/\u0027)[0] || \u00270\u0027);\r\n                            const reviewInfo = schedule?.find(s =\u003e s.number === seg);\r\n\r\n                            return (\r\n                                \u003cdiv key={seg} className=\"relative group/tooltip flex-1 h-full\"\u003e\r\n                                    \u003cdiv\r\n                                        className={cn(\r\n                                            \"w-full h-full rounded-full transition-all cursor-help\",\r\n                                            seg \u003c= currentLevel ? \"bg-emerald-500\" : \"bg-slate-800\",\r\n                                            reviewInfo?.status === \u0027pending\u0027 \u0026\u0026 new Date(reviewInfo.date) \u003c= new Date() ? \"bg-emerald-500/50\" : \"\"\r\n                                        )}\r\n                                    /\u003e\r\n                                    {/* Custom Premium Tooltip */}\r\n                                    \u003cdiv className=\"absolute bottom-full left-1/2 -translate-x-1/2 mb-3 hidden group-hover/tooltip:block z-[60] pointer-events-none min-w-[120px]\"\u003e\r\n                                        \u003cdiv className=\"bg-slate-900/90 backdrop-blur-md text-white rounded-lg border border-slate-700/50 shadow-xl overflow-hidden animate-in fade-in zoom-in-95 duration-200\"\u003e\r\n                                            {/* Header */}\r\n                                            \u003cdiv className={cn(\r\n                                                \"px-3 py-1.5 text-[10px] font-bold uppercase tracking-wider border-b border-slate-700/50\",\r\n                                                seg \u003c= currentLevel ? \"bg-emerald-500/10 text-emerald-400\" : \"bg-slate-800/50 text-slate-400\"\r\n                                            )}\u003e\r\n                                                NÃ­vel {seg}\r\n                                            \u003c/div\u003e\r\n\r\n                                            {/* Content */}\r\n                                            \u003cdiv className=\"px-3 py-2 space-y-1\"\u003e\r\n                                                {reviewInfo ? (\r\n                                                    \u003c\u003e\r\n                                                        \u003cdiv className=\"text-xs font-medium text-slate-200\"\u003e\r\n                                                            {(() =\u003e {\r\n                                                                try {\r\n                                                                    const d = new Date(reviewInfo.date + \u0027T00:00:00\u0027);\r\n                                                                    if (isToday(d)) return \"Hoje\";\r\n                                                                    if (isTomorrow(d)) return \"AmanhÃ£\";\r\n                                                                    if (isYesterday(d)) return \"Ontem\";\r\n                                                                    return format(d, \"d \u0027de\u0027 MMM\", { locale: ptBR });\r\n                                                                } catch {\r\n                                                                    return reviewInfo.date;\r\n                                                                }\r\n                                                            })()}\r\n                                                        \u003c/div\u003e\r\n                                                        \u003cdiv className={cn(\r\n                                                            \"text-[10px] uppercase font-bold\",\r\n                                                            reviewInfo.status === \u0027completed\u0027 ? \"text-emerald-400\" :\r\n                                                                (reviewInfo.status === \u0027pending\u0027 ? \"text-amber-400\" : \"text-slate-500\")\r\n                                                        )}\u003e\r\n                                                            {reviewInfo.status === \u0027completed\u0027 ? \u0027ConcluÃ­do\u0027 :\r\n                                                                (reviewInfo.status === \u0027pending\u0027 ? \u0027Pendente\u0027 : \u0027Futuro\u0027)}\r\n                                                        \u003c/div\u003e\r\n                                                    \u003c/\u003e\r\n                                                ) : (\r\n                                                    \u003cspan className=\"text-xs text-slate-500 italic\"\u003eNÃ£o agendado\u003c/span\u003e\r\n                                                )}\r\n                                            \u003c/div\u003e\r\n\r\n                                            {/* Arrow */}\r\n                                            \u003cdiv className=\"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-slate-900/90 border-r border-b border-slate-700/50 rotate-45 backdrop-blur-md\"\u003e\u003c/div\u003e\r\n                                        \u003c/div\u003e\r\n                                    \u003c/div\u003e\r\n                                \u003c/div\u003e\r\n                            );\r\n                        })}\r\n                    \u003c/div\u003e\r\n                ) : (\r\n                    // Linear Bar for others\r\n                    \u003cdiv className=\"h-1.5 bg-slate-800 rounded-full overflow-hidden w-full relative\"\u003e\r\n                        \u003cdiv\r\n                            className=\"h-full bg-blue-500 rounded-full\"\r\n                            style={{ width: timeCurrent \u0026\u0026 timeTotal ? `${(timeCurrent / timeTotal) * 100}%` : \u00270%\u0027 }}\r\n                        /\u003e\r\n                        {/* Optional marker if needed */}\r\n                        {timeCurrent \u0026\u0026 timeTotal \u0026\u0026 (\r\n                            \u003cdiv\r\n                                className=\"absolute top-0 h-full w-2 bg-white rounded-full shadow-lg transform -translate-x-1/2\"\r\n                                style={{ left: `${(timeCurrent / timeTotal) * 100}%` }}\r\n                            /\u003e\r\n                        )}\r\n                    \u003c/div\u003e\r\n                )}\r\n            \u003c/div\u003e\r\n\r\n            {/* Dates below progress */}\r\n            {(startDate || endDate) \u0026\u0026 !isBlocked \u0026\u0026 (\r\n                \u003cdiv className=\"flex items-center gap-3 text-[10px] text-slate-500 mt-3 font-medium border-t border-slate-800/50 pt-2\"\u003e\r\n                    {startDate \u0026\u0026 (\r\n                        \u003cdiv className=\"flex items-center gap-1\"\u003e\r\n                            \u003cspan className=\"uppercase text-[9px] font-bold text-slate-600\"\u003eInÃ­cio:\u003c/span\u003e\r\n                            \u003cspan\u003e{new Date(startDate + \u0027T00:00:00\u0027).toLocaleDateString(\u0027pt-BR\u0027, { day: \u00272-digit\u0027, month: \u00272-digit\u0027 })}\u003c/span\u003e\r\n                        \u003c/div\u003e\r\n                    )}\r\n                    {startDate \u0026\u0026 endDate \u0026\u0026 \u003cspan className=\"text-slate-700 mx-1\"\u003eâ€¢\u003c/span\u003e}\r\n                    {endDate \u0026\u0026 (\r\n                        \u003cdiv className=\"flex items-center gap-1\"\u003e\r\n                            \u003cspan className=\"uppercase text-[9px] font-bold text-slate-600\"\u003eFim:\u003c/span\u003e\r\n                            \u003cspan\u003e{new Date(endDate + \u0027T00:00:00\u0027).toLocaleDateString(\u0027pt-BR\u0027, { day: \u00272-digit\u0027, month: \u00272-digit\u0027 })}\u003c/span\u003e\r\n                        \u003c/div\u003e\r\n                    )}\r\n                \u003c/div\u003e\r\n            )}\r\n\r\n            {children}\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n\r\nexport const MissionCard = React.memo(MissionCardBase, (prev, next) =\u003e {\r\n    return (\r\n        prev.id === next.id \u0026\u0026\r\n        prev.title === next.title \u0026\u0026\r\n        prev.isCompleted === next.isCompleted \u0026\u0026\r\n        prev.isBlocked === next.isBlocked \u0026\u0026\r\n        prev.isActive === next.isActive \u0026\u0026\r\n        prev.isLoading === next.isLoading \u0026\u0026\r\n        prev.actualStartTime === next.actualStartTime \u0026\u0026\r\n        prev.actualEndTime === next.actualEndTime \u0026\u0026\r\n        prev.progressCurrent === next.progressCurrent \u0026\u0026\r\n        prev.timeCurrent === next.timeCurrent \u0026\u0026\r\n        prev.daysRemaining === next.daysRemaining \u0026\u0026\r\n        prev.reviewNumber === next.reviewNumber\r\n    );\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\components\\MissionHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\components\\MissionItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\components\\MissionList.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027isCurrentDay\u0027 is defined but never used.","line":43,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from \u0027react\u0027;\r\nimport { Reorder } from \u0027framer-motion\u0027;\r\n\r\n\r\nimport { ChevronLeft, ChevronRight, ChevronUp, Calendar as CalendarIcon, Trophy } from \u0027lucide-react\u0027;\r\nimport { cn } from \u0027../../../lib/utils\u0027;\r\nimport { format, isToday, addDays } from \u0027date-fns\u0027;\r\nimport { ptBR } from \u0027date-fns/locale\u0027;\r\nimport { MissionItem } from \u0027./MissionItem\u0027;\r\n\r\ninterface MissionListProps {\r\n    selectedDate: Date;\r\n    setSelectedDate: (d: Date) =\u003e void;\r\n    handlePrevDay: () =\u003e void;\r\n    handleNextDay: () =\u003e void;\r\n    onCollapse: () =\u003e void;\r\n\r\n    // Lists\r\n    allHabits: any[];\r\n    allReviews: any[];\r\n    allTasks: any[]; // Using any to avoid complex type import for now (should be fixed later)\r\n\r\n    // Logic\r\n    isCurrentDay: boolean;\r\n    dateStr: string;\r\n    hasOverdueItems: boolean;\r\n    dailySchedule: Record\u003cstring, string\u003e;\r\n    missionProgress: Record\u003cstring, { startedAt?: number }\u003e;\r\n    activeFocusId?: string;\r\n\r\n    // Handlers\r\n    handleSetTime: (id: string, time: string) =\u003e void;\r\n    handleFocusItem: (item: any, type: string) =\u003e void;\r\n    handleToggleItem: (item: any, type: string) =\u003e void;\r\n\r\n    // Stats\r\n    isAllDone: boolean;\r\n}\r\n\r\nexport const MissionList = ({\r\n    selectedDate, setSelectedDate, handlePrevDay, handleNextDay, onCollapse,\r\n    allHabits, allReviews, allTasks,\r\n    isCurrentDay, dateStr, hasOverdueItems, dailySchedule, missionProgress, activeFocusId,\r\n    handleSetTime, handleFocusItem, handleToggleItem,\r\n    isAllDone\r\n}: MissionListProps) =\u003e {\r\n    const [showCalendar, setShowCalendar] = useState(false);\r\n\r\n    // --- DRAG AND DROP PERSISTENCE LOGIC ---\r\n    // Single consolidated key: \u0027mission_list_order\u0027 -\u003e { habit: [ids], review: [ids], task: [ids] }\r\n    const [itemOrder, setItemOrder] = useState\u003c{ [key: string]: string[] }\u003e(() =\u003e {\r\n        try {\r\n            return JSON.parse(localStorage.getItem(\u0027mission_list_order\u0027) || \u0027{}\u0027);\r\n        } catch { return {}; }\r\n    });\r\n\r\n    const handleReorder = (type: string, newOrder: string[]) =\u003e {\r\n        const updated = { ...itemOrder, [type]: newOrder };\r\n        setItemOrder(updated);\r\n        localStorage.setItem(\u0027mission_list_order\u0027, JSON.stringify(updated));\r\n    };\r\n\r\n    // Helper to sort items based on persisted ID list + overdue priority\r\n    const sortItems = (items: any[], type: string) =\u003e {\r\n        const todayStr = format(new Date(), \u0027yyyy-MM-dd\u0027);\r\n\r\n        // Separate overdue and non-overdue items\r\n        const overdueItems: any[] = [];\r\n        const normalItems: any[] = [];\r\n\r\n        items.forEach(item =\u003e {\r\n            const itemDateStr = item.date || (item.deadline ? item.deadline.split(\u0027T\u0027)[0] : undefined);\r\n            const isDone = item.isDone || item.status === \u0027completed\u0027;\r\n            const isOverdue = !isDone \u0026\u0026 itemDateStr \u0026\u0026 itemDateStr \u003c todayStr;\r\n\r\n            if (isOverdue) {\r\n                overdueItems.push({ ...item, isOverdue: true });\r\n            } else {\r\n                normalItems.push(item);\r\n            }\r\n        });\r\n\r\n        // Sort overdue items by date (oldest first)\r\n        overdueItems.sort((a, b) =\u003e {\r\n            const dateA = a.date || (a.deadline ? a.deadline.split(\u0027T\u0027)[0] : \u00279999-99-99\u0027);\r\n            const dateB = b.date || (b.deadline ? b.deadline.split(\u0027T\u0027)[0] : \u00279999-99-99\u0027);\r\n            return dateA.localeCompare(dateB);\r\n        });\r\n\r\n        // Sort normal items using persisted order\r\n        const order = itemOrder[type] || [];\r\n        const map = new Map(normalItems.map(i =\u003e [i.id || i.subthemeId, i]));\r\n        const sortedNormal: any[] = [];\r\n\r\n        // 1. Add items in explicit order\r\n        order.forEach(id =\u003e {\r\n            if (map.has(id)) {\r\n                sortedNormal.push(map.get(id));\r\n                map.delete(id);\r\n            }\r\n        });\r\n\r\n        // 2. Append new/remaining items (maintain original relative order)\r\n        normalItems.forEach(i =\u003e {\r\n            const id = i.id || i.subthemeId;\r\n            if (map.has(id)) {\r\n                sortedNormal.push(i);\r\n            }\r\n        });\r\n\r\n        // Return overdue items first, then normal items\r\n        return [...overdueItems, ...sortedNormal];\r\n    };\r\n\r\n    return (\r\n        \u003c\u003e\r\n            {/* Date Navigation \u0026 Calendar Toggle */}\r\n            \u003cdiv className=\"px-4 py-3 bg-slate-900/30 border-b border-slate-800/50 flex items-center justify-between shrink-0\"\u003e\r\n                \u003cbutton onClick={handlePrevDay} className=\"p-1.5 hover:bg-slate-800 rounded-lg text-slate-400 transition-colors\"\u003e\u003cChevronLeft className=\"w-4 h-4\" /\u003e\u003c/button\u003e\r\n\r\n                \u003cdiv className=\"flex flex-col items-center cursor-pointer group\" onClick={() =\u003e setShowCalendar(!showCalendar)}\u003e\r\n                    \u003cspan className=\"text-[10px] text-slate-500 font-bold uppercase tracking-widest group-hover:text-blue-400 transition-colors\"\u003e\r\n                        {isToday(selectedDate) ? \u0027Hoje\u0027 : format(selectedDate, \u0027EEEE\u0027, { locale: ptBR })}\r\n                    \u003c/span\u003e\r\n                    \u003cdiv className=\"flex items-center gap-2\"\u003e\r\n                        \u003cCalendarIcon className=\"w-3.5 h-3.5 text-slate-400 group-hover:text-blue-400 transition-colors\" /\u003e\r\n                        \u003cspan className=\"text-sm font-bold text-slate-200 group-hover:text-white transition-colors\"\u003e\r\n                            {format(selectedDate, \"d \u0027de\u0027 MMMM\", { locale: ptBR })}\r\n                        \u003c/span\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n\r\n                \u003cdiv className=\"flex items-center gap-1\"\u003e\r\n                    \u003cbutton onClick={handleNextDay} className=\"p-1.5 hover:bg-slate-800 rounded-lg text-slate-400 transition-colors\"\u003e\u003cChevronRight className=\"w-4 h-4\" /\u003e\u003c/button\u003e\r\n                    \u003cbutton onClick={onCollapse} className=\"p-1.5 hover:bg-slate-800 rounded-lg text-slate-400 transition-colors ml-1\" title=\"Minimizar\"\u003e\r\n                        \u003cChevronUp className=\"w-4 h-4\" /\u003e\r\n                    \u003c/button\u003e\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n\r\n            {/* Calendar Popover */}\r\n            {showCalendar \u0026\u0026 (\r\n                \u003cdiv className=\"p-4 bg-slate-900 border-b border-slate-800 animate-in fade-in slide-in-from-top-2\"\u003e\r\n                    \u003cdiv className=\"grid grid-cols-7 gap-1 text-center mb-2\"\u003e\r\n                        {[\u0027D\u0027, \u0027S\u0027, \u0027T\u0027, \u0027Q\u0027, \u0027Q\u0027, \u0027S\u0027, \u0027S\u0027].map(d =\u003e \u003cspan key={d} className=\"text-[10px] text-slate-500 font-bold\"\u003e{d}\u003c/span\u003e)}\r\n                    \u003c/div\u003e\r\n                    \u003cdiv className=\"grid grid-cols-7 gap-1\"\u003e\r\n                        {Array.from({ length: 14 }).map((_, i) =\u003e {\r\n                            const d = addDays(selectedDate, i - 7);\r\n                            const isSel = d.toDateString() === selectedDate.toDateString();\r\n                            return (\r\n                                \u003cbutton\r\n                                    key={i}\r\n                                    onClick={() =\u003e { setSelectedDate(d); setShowCalendar(false); }}\r\n                                    className={cn(\r\n                                        \"h-8 rounded-lg text-xs font-bold flex items-center justify-center transition-all\",\r\n                                        isSel ? \"bg-slate-800 text-blue-400 ring-2 ring-blue-500 shadow-lg shadow-blue-500/20 scale-110 z-10\" : \"text-slate-400 hover:bg-slate-800 hover:text-slate-200\",\r\n                                        isToday(d) \u0026\u0026 !isSel \u0026\u0026 \"text-blue-400 font-extrabold\"\r\n                                    )}\r\n                                \u003e\r\n                                    {format(d, \u0027d\u0027)}\r\n                                \u003c/button\u003e\r\n                            );\r\n                        })}\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n            )}\r\n\r\n            {/* Scrollable List */}\r\n            \u003cdiv className=\"flex-1 overflow-y-auto p-4 space-y-6 custom-scrollbar max-h-[60vh] select-none\"\u003e\r\n                \u003cdiv className=\"space-y-6\"\u003e\r\n                    {[\r\n                        { title: \u0027HÃ¡bitos \u0026 Rotina\u0027, rawItems: allHabits, type: \u0027habit\u0027 },\r\n                        { title: \u0027RevisÃµes \u0026 Estudos\u0027, rawItems: allReviews, type: \u0027review\u0027 },\r\n                        { title: \u0027Tarefas \u0026 MissÃµes\u0027, rawItems: allTasks, type: \u0027task\u0027 }\r\n                    ].map(group =\u003e {\r\n                        if (group.rawItems.length === 0) return null;\r\n\r\n                        // Sort items for this render\r\n                        const sortedItems = sortItems(group.rawItems, group.type);\r\n\r\n                        return (\r\n                            \u003cdiv key={group.title} className=\"space-y-3\"\u003e\r\n                                \u003ch4 className=\"text-[10px] font-bold text-slate-500 uppercase tracking-widest pl-2 border-l-2 border-slate-800 flex items-center justify-between\"\u003e\r\n                                    {group.title}\r\n                                    \u003cspan className=\"text-[9px] bg-slate-800 text-slate-400 px-1.5 py-0.5 rounded-full\"\u003e{group.rawItems.length}\u003c/span\u003e\r\n                                \u003c/h4\u003e\r\n\r\n                                \u003cReorder.Group\r\n                                    values={sortedItems.map(i =\u003e i.id || i.subthemeId)}\r\n                                    onReorder={(newOrder) =\u003e handleReorder(group.type, newOrder)}\r\n                                    className=\"space-y-4\"\r\n                                    axis=\"y\"\r\n                                \u003e\r\n                                    {sortedItems.map((item: any) =\u003e {\r\n                                        const itemId = item.id || item.subthemeId;\r\n                                        const isDone = item.isDone || item.status === \u0027completed\u0027;\r\n\r\n                                        // ROBUST DATE CHECK V2 (date-fns)\r\n                                        const todayStr = format(new Date(), \u0027yyyy-MM-dd\u0027);\r\n                                        const isFutureContext = dateStr \u003e todayStr;\r\n                                        const isGlobalLocked = isFutureContext;\r\n\r\n                                        const itemDateStr = item.date || (item.deadline ? item.deadline.split(\u0027T\u0027)[0] : undefined);\r\n                                        const isItemOverdue = !isDone \u0026\u0026 itemDateStr \u0026\u0026 itemDateStr \u003c dateStr;\r\n\r\n                                        let isItemLocked = isGlobalLocked;\r\n                                        let lockReason = item.lockReason || (isGlobalLocked ? \"Agendado para o futuro\" : \"\");\r\n\r\n                                        if (!isItemLocked \u0026\u0026 hasOverdueItems \u0026\u0026 !isItemOverdue) {\r\n                                            isItemLocked = true;\r\n                                            lockReason = \"Prioridade: Conclua as atividades atrasadas primeiro!\";\r\n                                        }\r\n\r\n                                        if (itemDateStr \u0026\u0026 itemDateStr \u003e todayStr) {\r\n                                            isItemLocked = true;\r\n                                            lockReason = `Agendado para ${format(new Date(itemDateStr + \u0027T00:00:00\u0027), \u0027dd/MM\u0027)}`;\r\n                                        }\r\n\r\n                                        if (item.startDate \u0026\u0026 item.startDate \u003e todayStr) {\r\n                                            isItemLocked = true;\r\n                                            lockReason = `Inicia em ${format(new Date(item.startDate + \u0027T00:00:00\u0027), \u0027dd/MM\u0027)}`;\r\n                                        }\r\n\r\n                                        return (\r\n                                            \u003cReorder.Item\r\n                                                key={itemId}\r\n                                                value={itemId}\r\n                                                dragListener={true}\r\n                                                className=\"cursor-move touch-none\"\r\n                                                whileDrag={{ scale: 1.02, zIndex: 50 }}\r\n                                            \u003e\r\n                                                \u003cMissionItem\r\n                                                    item={item}\r\n                                                    type={group.type as any}\r\n                                                    isDone={isDone}\r\n                                                    onToggle={() =\u003e {\r\n                                                        if (isItemLocked) return;\r\n                                                        handleToggleItem(item, group.type);\r\n                                                    }}\r\n                                                    onFocus={() =\u003e {\r\n                                                        if (isItemLocked) return;\r\n                                                        handleFocusItem(item, group.type);\r\n                                                    }}\r\n                                                    activeFocusId={activeFocusId}\r\n                                                    activeStartTime={undefined}\r\n                                                    isLocked={isItemLocked}\r\n                                                    lockReason={lockReason}\r\n                                                    scheduledTime={dailySchedule[itemId]}\r\n                                                    onSetTime={(time) =\u003e handleSetTime(itemId, time)}\r\n                                                    startedAt={missionProgress[itemId]?.startedAt}\r\n                                                /\u003e\r\n                                            \u003c/Reorder.Item\u003e\r\n                                        );\r\n                                    })}\r\n                                \u003c/Reorder.Group\u003e\r\n                            \u003c/div\u003e\r\n                        );\r\n                    })}\r\n                \u003c/div\u003e\r\n\r\n                {isAllDone \u0026\u0026 (\r\n                    \u003cdiv className=\"p-4 bg-emerald-500/10 border border-emerald-500/20 rounded-xl text-center mt-6\"\u003e\r\n                        \u003cdiv className=\"w-12 h-12 bg-emerald-500/20 text-emerald-400 rounded-full flex items-center justify-center mx-auto mb-2 animate-bounce\"\u003e\r\n                            \u003cTrophy className=\"w-6 h-6\" /\u003e\r\n                        \u003c/div\u003e\r\n                        \u003ch3 className=\"text-emerald-400 font-bold\"\u003eMissÃ£o Completa!\u003c/h3\u003e\r\n                        \u003cp className=\"text-emerald-500/70 text-xs text-center\"\u003eVocÃª dominou o dia.\u003c/p\u003e\r\n                    \u003c/div\u003e\r\n                )}\r\n            \u003c/div\u003e\r\n        \u003c/\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\components\\MissionPreviewWidget.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027isAllDone\u0027 is defined but never used.","line":12,"column":57,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":66}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \u0027react\u0027;\r\nimport { Target, ChevronRight, Clock, CheckCircle2 } from \u0027lucide-react\u0027;\r\n\r\ninterface MissionPreviewWidgetProps {\r\n    progressPercent: number;\r\n    isAllDone: boolean;\r\n    completedCount: number;\r\n    totalCount: number;\r\n    setIsMissionModalOpen: (isOpen: boolean) =\u003e void;\r\n}\r\n\r\nexport const MissionPreviewWidget = ({ progressPercent, isAllDone, completedCount, totalCount, setIsMissionModalOpen }: MissionPreviewWidgetProps) =\u003e {\r\n    const pendingCount = totalCount - completedCount;\r\n\r\n    return (\r\n        \u003cdiv className=\"bg-gradient-to-br from-slate-900/50 via-slate-900/40 to-slate-950/50 backdrop-blur-md border border-white/10 rounded-3xl p-4 shadow-2xl relative overflow-hidden group/mission\"\u003e\r\n            {/* Gradient top bar */}\r\n            \u003cdiv className=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-amber-500 via-blue-500 to-emerald-500 opacity-60\" /\u003e\r\n\r\n            {/* Ambient glow effects */}\r\n            \u003cdiv className=\"absolute top-0 right-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none\" /\u003e\r\n            \u003cdiv className=\"absolute bottom-0 left-0 w-32 h-32 bg-emerald-500/10 rounded-full blur-3xl -ml-16 -mb-16 pointer-events-none\" /\u003e\r\n\r\n            \u003cdiv className=\"relative z-10\"\u003e\r\n                {/* Header */}\r\n                \u003cdiv className=\"flex items-center justify-between mb-3\"\u003e\r\n                    \u003cdiv className=\"flex items-center gap-2\"\u003e\r\n                        \u003cdiv className=\"p-1.5 rounded-lg bg-gradient-to-br from-blue-500/20 to-indigo-500/20 ring-1 ring-blue-500/30\"\u003e\r\n                            \u003cTarget className=\"w-4 h-4 text-blue-400\" /\u003e\r\n                        \u003c/div\u003e\r\n                        \u003ch3 className=\"font-bold text-white text-base\"\u003eSua MissÃ£o\u003c/h3\u003e\r\n                    \u003c/div\u003e\r\n                    \u003cbutton\r\n                        onClick={() =\u003e setIsMissionModalOpen(true)}\r\n                        className=\"text-[10px] font-bold text-blue-400 hover:text-blue-300 transition-colors uppercase tracking-wider px-2 py-1 rounded-lg hover:bg-blue-500/10\"\r\n                    \u003e\r\n                        Abrir Tudo\r\n                    \u003c/button\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* Progress Overview */}\r\n                \u003cdiv className=\"mb-3 px-3 py-2 bg-slate-800/40 rounded-xl border border-white/5\"\u003e\r\n                    \u003cdiv className=\"flex items-center justify-between\"\u003e\r\n                        \u003cspan className=\"text-xs font-medium text-slate-300\"\u003eProgresso\u003c/span\u003e\r\n                        \u003cspan className=\"text-xl font-bold text-white tabular-nums\"\u003e{progressPercent}%\u003c/span\u003e\r\n                    \u003c/div\u003e\r\n                    \u003cdiv className=\"mt-1.5 h-1.5 bg-slate-900/60 rounded-full overflow-hidden ring-1 ring-white/5\"\u003e\r\n                        \u003cdiv\r\n                            className=\"h-full bg-gradient-to-r from-blue-500 to-emerald-500 rounded-full transition-all duration-1000 shadow-lg relative overflow-hidden\"\r\n                            style={{ width: `${progressPercent}%` }}\r\n                        \u003e\r\n                            \u003cdiv className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer\" /\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* Mission Stats - Two Circles */}\r\n                \u003cdiv\r\n                    onClick={() =\u003e setIsMissionModalOpen(true)}\r\n                    className=\"grid grid-cols-2 gap-3 cursor-pointer\"\r\n                \u003e\r\n                    {/* Pending Activities Circle */}\r\n                    \u003cdiv className=\"group relative bg-gradient-to-br from-slate-800/60 to-slate-900/40 rounded-2xl p-3 border border-white/5 hover:border-amber-500/30 transition-all duration-300 hover:shadow-xl hover:shadow-amber-500/10\"\u003e\r\n                        \u003cdiv className=\"flex flex-col items-center\"\u003e\r\n                            {/* Icon */}\r\n                            \u003cdiv className=\"mb-2 p-1.5 rounded-lg bg-amber-500/10 ring-1 ring-amber-500/20 group-hover:ring-amber-500/40 transition-all\"\u003e\r\n                                \u003cClock className=\"w-4 h-4 text-amber-400\" /\u003e\r\n                            \u003c/div\u003e\r\n\r\n                            {/* Circle */}\r\n                            \u003cdiv className=\"relative w-16 h-16 mb-2\"\u003e\r\n                                \u003csvg className=\"w-full h-full transform -rotate-90\"\u003e\r\n                                    \u003ccircle\r\n                                        cx=\"32\"\r\n                                        cy=\"32\"\r\n                                        r=\"28\"\r\n                                        stroke=\"currentColor\"\r\n                                        strokeWidth=\"5\"\r\n                                        fill=\"transparent\"\r\n                                        className=\"text-slate-800\"\r\n                                    /\u003e\r\n                                    \u003ccircle\r\n                                        cx=\"32\"\r\n                                        cy=\"32\"\r\n                                        r=\"28\"\r\n                                        stroke=\"currentColor\"\r\n                                        strokeWidth=\"5\"\r\n                                        fill=\"transparent\"\r\n                                        strokeDasharray={175.9}\r\n                                        strokeDashoffset={175.9 * (1 - (pendingCount / Math.max(totalCount, 1)))}\r\n                                        className=\"text-amber-500 drop-shadow-[0_0_10px_rgba(245,158,11,0.6)] transition-all duration-1000\"\r\n                                        strokeLinecap=\"round\"\r\n                                    /\u003e\r\n                                \u003c/svg\u003e\r\n                                \u003cdiv className=\"absolute inset-0 flex items-center justify-center\"\u003e\r\n                                    \u003cspan className=\"text-xl font-bold text-amber-400 font-mono\"\u003e{pendingCount}\u003c/span\u003e\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n\r\n                            {/* Label */}\r\n                            \u003cp className=\"text-[10px] font-semibold text-amber-400 uppercase tracking-wide\"\u003ePendentes\u003c/p\u003e\r\n                            \u003cp className=\"text-[9px] text-slate-500 mt-0.5\"\u003ePara fazer\u003c/p\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Completed Activities Circle */}\r\n                    \u003cdiv className=\"group relative bg-gradient-to-br from-slate-800/60 to-slate-900/40 rounded-2xl p-3 border border-white/5 hover:border-emerald-500/30 transition-all duration-300 hover:shadow-xl hover:shadow-emerald-500/10\"\u003e\r\n                        \u003cdiv className=\"flex flex-col items-center\"\u003e\r\n                            {/* Icon */}\r\n                            \u003cdiv className=\"mb-2 p-1.5 rounded-lg bg-emerald-500/10 ring-1 ring-emerald-500/20 group-hover:ring-emerald-500/40 transition-all\"\u003e\r\n                                \u003cCheckCircle2 className=\"w-4 h-4 text-emerald-400\" /\u003e\r\n                            \u003c/div\u003e\r\n\r\n                            {/* Circle */}\r\n                            \u003cdiv className=\"relative w-16 h-16 mb-2\"\u003e\r\n                                \u003csvg className=\"w-full h-full transform -rotate-90\"\u003e\r\n                                    \u003ccircle\r\n                                        cx=\"32\"\r\n                                        cy=\"32\"\r\n                                        r=\"28\"\r\n                                        stroke=\"currentColor\"\r\n                                        strokeWidth=\"5\"\r\n                                        fill=\"transparent\"\r\n                                        className=\"text-slate-800\"\r\n                                    /\u003e\r\n                                    \u003ccircle\r\n                                        cx=\"32\"\r\n                                        cy=\"32\"\r\n                                        r=\"28\"\r\n                                        stroke=\"currentColor\"\r\n                                        strokeWidth=\"5\"\r\n                                        fill=\"transparent\"\r\n                                        strokeDasharray={175.9}\r\n                                        strokeDashoffset={175.9 * (1 - (completedCount / Math.max(totalCount, 1)))}\r\n                                        className=\"text-emerald-500 drop-shadow-[0_0_10px_rgba(16,185,129,0.6)] transition-all duration-1000\"\r\n                                        strokeLinecap=\"round\"\r\n                                    /\u003e\r\n                                \u003c/svg\u003e\r\n                                \u003cdiv className=\"absolute inset-0 flex items-center justify-center\"\u003e\r\n                                    \u003cspan className=\"text-xl font-bold text-emerald-400 font-mono\"\u003e{completedCount}\u003c/span\u003e\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n\r\n                            {/* Label */}\r\n                            \u003cp className=\"text-[10px] font-semibold text-emerald-400 uppercase tracking-wide\"\u003eConcluÃ­das\u003c/p\u003e\r\n                            \u003cp className=\"text-[9px] text-slate-500 mt-0.5\"\u003eFinalizadas\u003c/p\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* View Details Button */}\r\n                \u003cbutton\r\n                    onClick={() =\u003e setIsMissionModalOpen(true)}\r\n                    className=\"mt-3 w-full py-2 text-xs text-blue-400 font-bold hover:text-blue-300 transition-all flex items-center justify-center gap-2 hover:bg-blue-500/5 rounded-xl group/btn\"\r\n                \u003e\r\n                    VER DETALHES\r\n                    \u003cChevronRight className=\"w-3 h-3 group-hover/btn:translate-x-1 transition-transform\" /\u003e\r\n                \u003c/button\u003e\r\n            \u003c/div\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\components\\MissionSummary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\components\\RealisticKPICard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\components\\projects\\GoalProjectCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\components\\projects\\LinkedProjectCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\components\\projects\\ProjectsFilter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\components\\projects\\ProjectsHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\components\\projects\\ThemeProjectCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\hooks\\useMissionLogic.ts","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\hooks\\useMissionLogic.ts:29:19\n  27 |         const savedSchedule = localStorage.getItem(`daily_schedule_${dateStr}`);\n  28 |         if (savedSchedule) {\n\u003e 29 |             try { setDailySchedule(JSON.parse(savedSchedule)); } catch (e) { console.error(\"Failed to parse daily schedule\", e); }\n     |                   ^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  30 |         } else {\n  31 |             setDailySchedule({});\n  32 |         }","line":29,"column":19,"nodeType":null,"endLine":29,"endColumn":35},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\dashboard\\hooks\\useMissionLogic.ts:56:17\n  54 |                 const now = Date.now();\n  55 |                 const newProgress = { ...missionProgress, [id]: { ...missionProgress[id], startedAt: now } };\n\u003e 56 |                 setMissionProgress(newProgress);\n     |                 ^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  57 |                 localStorage.setItem(`mission_progress_${dateStr}`, JSON.stringify(newProgress));\n  58 |             }\n  59 |         }","line":56,"column":17,"nodeType":null,"endLine":56,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027isCompletedToday\u0027 is assigned a value but never used.","line":179,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":179,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027overdueTasks\u0027 is assigned a value but never used.","line":299,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":299,"endColumn":27}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useMemo } from \u0027react\u0027;\r\nimport { useStudy } from \u0027../../../context/StudyContext\u0027; // Correct relative path\r\nimport { usePomodoroContext } from \u0027../../../context/PomodoroContext\u0027;\r\nimport { format, addDays, isToday } from \u0027date-fns\u0027;\r\nimport { useToast } from \u0027../../../context/ToastContext\u0027;\r\n\r\nexport const useMissionLogic = () =\u003e {\r\n    const { themes, tasks, goals, startFocus, activeFocus, toggleTask, toggleGoal, toggleGoalItem, completeReview } = useStudy();\r\n    const { startFocusSession } = usePomodoroContext();\r\n    const { showToast } = useToast();\r\n\r\n    // Date Navigation State\r\n    const [selectedDate, setSelectedDate] = useState(new Date());\r\n    const dateStr = format(selectedDate, \u0027yyyy-MM-dd\u0027);\r\n    const isCurrentDay = isToday(selectedDate);\r\n    const dayOfWeek = selectedDate.getDay();\r\n\r\n    const handlePrevDay = () =\u003e setSelectedDate(prev =\u003e addDays(prev, -1));\r\n    const handleNextDay = () =\u003e setSelectedDate(prev =\u003e addDays(prev, 1));\r\n\r\n    // --- Daily Schedule Logic (Local Storage) ---\r\n    const [dailySchedule, setDailySchedule] = useState\u003cRecord\u003cstring, string\u003e\u003e({});\r\n    // --- Start Time Persistence (Local Storage) ---\r\n    const [missionProgress, setMissionProgress] = useState\u003cRecord\u003cstring, { startedAt?: number }\u003e\u003e({});\r\n\r\n    useEffect(() =\u003e {\r\n        const savedSchedule = localStorage.getItem(`daily_schedule_${dateStr}`);\r\n        if (savedSchedule) {\r\n            try { setDailySchedule(JSON.parse(savedSchedule)); } catch (e) { console.error(\"Failed to parse daily schedule\", e); }\r\n        } else {\r\n            setDailySchedule({});\r\n        }\r\n\r\n        const savedProgress = localStorage.getItem(`mission_progress_${dateStr}`);\r\n        if (savedProgress) {\r\n            try { setMissionProgress(JSON.parse(savedProgress)); } catch (e) { console.error(\"Failed to parse mission progress\", e); }\r\n        } else {\r\n            setMissionProgress({});\r\n        }\r\n    }, [dateStr]);\r\n\r\n    const handleSetTime = (id: string, time: string) =\u003e {\r\n        const newSchedule = { ...dailySchedule, [id]: time };\r\n        if (!time) delete newSchedule[id];\r\n        setDailySchedule(newSchedule);\r\n        localStorage.setItem(`daily_schedule_${dateStr}`, JSON.stringify(newSchedule));\r\n    };\r\n\r\n    // Track Start Time when Active Focus changes\r\n    useEffect(() =\u003e {\r\n        if (activeFocus \u0026\u0026 activeFocus.id) {\r\n            const id = activeFocus.id;\r\n            if (!missionProgress[id]?.startedAt) {\r\n                const now = Date.now();\r\n                const newProgress = { ...missionProgress, [id]: { ...missionProgress[id], startedAt: now } };\r\n                setMissionProgress(newProgress);\r\n                localStorage.setItem(`mission_progress_${dateStr}`, JSON.stringify(newProgress));\r\n            }\r\n        }\r\n    }, [activeFocus, missionProgress, dateStr]);\r\n\r\n    // --- DATA FILTERING ---\r\n\r\n    const allData = useMemo(() =\u003e {\r\n        // ... Logic from TodayMissionWidget ...\r\n\r\n        // 1. REVIEWS \u0026 INTROS\r\n        const reviewsOfInterest = themes.flatMap(t =\u003e\r\n            t.subthemes.flatMap(st =\u003e {\r\n                return st.reviews\r\n                    .filter(r =\u003e {\r\n                        if (isCurrentDay) {\r\n                            if (r.status === \u0027pending\u0027 \u0026\u0026 r.date \u003c= dateStr) return true;\r\n                            if (r.completedAt) {\r\n                                const completedDate = format(new Date(r.completedAt), \u0027yyyy-MM-dd\u0027);\r\n                                if (completedDate === dateStr) return true;\r\n                            }\r\n                            return false;\r\n                        }\r\n                        if (r.date === dateStr) return true;\r\n                        if (r.completedAt) {\r\n                            const completedDate = format(new Date(r.completedAt), \u0027yyyy-MM-dd\u0027);\r\n                            if (completedDate === dateStr) return true;\r\n                        }\r\n                        return false;\r\n                    })\r\n                    .map(r =\u003e ({\r\n                        ...r,\r\n                        subthemeId: st.id,\r\n                        themeTitle: t.title,\r\n                        subthemeTitle: st.title,\r\n                        reviewNumber: r.number,\r\n                        type: \u0027review\u0027,\r\n                        completedAt: r.completedAt,\r\n                        color: t.color,\r\n                        imageUrl: t.imageUrl,\r\n                        currentReviewNum: r.number,\r\n                        totalReviews: st.reviews.length,\r\n                        completedReviewCount: st.reviews.filter(rev =\u003e rev.status === \u0027completed\u0027).length,\r\n                        subthemeReviews: st.reviews\r\n                    }));\r\n            })\r\n        );\r\n\r\n        const introsOfInterest = themes.flatMap(t =\u003e\r\n            t.subthemes\r\n                .filter(st =\u003e st.introductionDate === dateStr)\r\n                .map(st =\u003e ({\r\n                    number: 0,\r\n                    date: st.introductionDate!,\r\n                    status: st.status === \u0027active\u0027 ? \u0027completed\u0027 : \u0027pending\u0027,\r\n                    subthemeId: st.id,\r\n                    themeTitle: t.title,\r\n                    subthemeTitle: st.title,\r\n                    reviewNumber: 0,\r\n                    type: \u0027intro\u0027,\r\n                    subthemeReviews: st.reviews,\r\n                    color: t.color\r\n                }))\r\n        );\r\n\r\n        const activeSubthemes = themes.flatMap(t =\u003e\r\n            t.subthemes.filter(st =\u003e st.status === \u0027active\u0027).map(st =\u003e ({\r\n                ...st, themeTitle: t.title, color: t.color, imageUrl: t.imageUrl\r\n            }))\r\n        );\r\n\r\n        // \"Active but not reviewed today\" Logic\r\n        const activeSubthemesWithoutReview = activeSubthemes.filter(st =\u003e\r\n            !reviewsOfInterest.some(r =\u003e r.subthemeId === st.id)\r\n        ).map(st =\u003e {\r\n            let isLocked = false;\r\n            let lockReason = \"\";\r\n            const nextReview = st.reviews.find((r: any) =\u003e r.status === \u0027pending\u0027);\r\n            const todayStr = format(new Date(), \u0027yyyy-MM-dd\u0027);\r\n\r\n            if (nextReview \u0026\u0026 nextReview.date \u003e todayStr) {\r\n                isLocked = true;\r\n                lockReason = `PrÃ³xima revisÃ£o: ${format(new Date(nextReview.date), \u0027dd/MM\u0027)}`;\r\n            }\r\n\r\n            return {\r\n                ...st,\r\n                subthemeId: st.id,\r\n                subthemeTitle: st.title,\r\n                type: \u0027review\u0027,\r\n                status: \u0027active\u0027,\r\n                currentReviewNum: 0,\r\n                reviewNumber: 0,\r\n                isLocked,\r\n                lockReason\r\n            };\r\n        });\r\n\r\n        const allReviews = [...introsOfInterest, ...reviewsOfInterest.map(r =\u003e {\r\n            const todayStr = format(new Date(), \u0027yyyy-MM-dd\u0027);\r\n            let isLocked = false;\r\n            let lockReason = \"\";\r\n            if (r.date \u003e todayStr) {\r\n                isLocked = true;\r\n                lockReason = `Agendado para ${format(new Date(r.date), \u0027dd/MM\u0027)}`;\r\n            }\r\n            return { ...r, isLocked, lockReason };\r\n        }), ...activeSubthemesWithoutReview].sort((a, b) =\u003e {\r\n            if (a.status === \u0027completed\u0027 \u0026\u0026 b.status === \u0027pending\u0027) return 1;\r\n            if (a.status === \u0027pending\u0027 \u0026\u0026 b.status === \u0027completed\u0027) return -1;\r\n            return 0;\r\n        });\r\n\r\n        // 2. TASKS\r\n        const todaysTasks = tasks.filter(t =\u003e {\r\n            const taskCreationDay = new Date(t.createdAt).setHours(0, 0, 0, 0);\r\n            const targetDateObj = new Date(dateStr + \u0027T00:00:00\u0027);\r\n            if (targetDateObj.getTime() \u003c taskCreationDay) return false;\r\n\r\n            if (t.type === \u0027day\u0027) {\r\n                const isOverdue = !!t.date \u0026\u0026 t.date \u003c dateStr;\r\n                const isPendingOverdue = isCurrentDay \u0026\u0026 isOverdue \u0026\u0026 !t.status.includes(\u0027completed\u0027);\r\n                const isCompletedToday = isOverdue \u0026\u0026 t.completionHistory \u0026\u0026 t.completionHistory.some(h =\u003e h.startsWith(dateStr));\r\n                return (t.date === dateStr) || isPendingOverdue || (t.completionHistory \u0026\u0026 t.completionHistory.some(h =\u003e h.startsWith(dateStr)));\r\n            }\r\n            if (t.type === \u0027recurring\u0027 \u0026\u0026 t.recurrence) {\r\n                if (t.endDate \u0026\u0026 dateStr \u003e t.endDate) return false;\r\n                return t.recurrence.includes(dayOfWeek);\r\n            }\r\n            if (t.type === \u0027period\u0027 \u0026\u0026 t.startDate \u0026\u0026 t.endDate) {\r\n                return dateStr \u003e= t.startDate \u0026\u0026 dateStr \u003c= t.endDate;\r\n            }\r\n            return false;\r\n        }).map(t =\u003e {\r\n            let isDone = t.status === \u0027completed\u0027;\r\n            let completedAt: string | undefined = undefined;\r\n            if (t.completionHistory) {\r\n                const entry = t.completionHistory.find(h =\u003e h.startsWith(dateStr));\r\n                if (entry) {\r\n                    isDone = true;\r\n                    completedAt = entry;\r\n                }\r\n            }\r\n            return { ...t, isDone, completedAt };\r\n        });\r\n\r\n        // 3. HABITS \u0026 GOALS\r\n        const todaysHabits = goals.filter(g =\u003e {\r\n            if (g.createdAt) {\r\n                const goalCreationDay = new Date(g.createdAt).setHours(0, 0, 0, 0);\r\n                const targetDateObj = new Date(dateStr + \u0027T00:00:00\u0027);\r\n                if (targetDateObj.getTime() \u003c goalCreationDay) return false;\r\n            }\r\n            if (g.type === \u0027habit\u0027) {\r\n                if (g.deadline \u0026\u0026 dateStr \u003e g.deadline) return false;\r\n                if (g.recurrence \u0026\u0026 g.recurrence.length \u003e 0) return g.recurrence.includes(dayOfWeek);\r\n                return true;\r\n            }\r\n            if (g.deadline === dateStr) return true;\r\n            return false;\r\n        }).map(g =\u003e {\r\n            let isDone = false;\r\n            let completedAt: string | undefined = undefined;\r\n            if (g.completionHistory) {\r\n                const entry = g.completionHistory.find(h =\u003e h.startsWith(dateStr));\r\n                if (entry) {\r\n                    isDone = true;\r\n                    completedAt = entry;\r\n                }\r\n            } else if (g.type !== \u0027habit\u0027) {\r\n                isDone = g.progress === 100;\r\n            }\r\n            return { ...g, isDone, completedAt };\r\n        });\r\n\r\n        const todaysSteps = goals.flatMap(g =\u003e {\r\n            if (!g.checklist) return [];\r\n            return g.checklist.filter(item =\u003e {\r\n                if (!item.deadline) return false;\r\n                const itemDeadline = item.deadline.split(\u0027T\u0027)[0];\r\n                if (isCurrentDay) {\r\n                    if (item.completed) return itemDeadline === dateStr;\r\n                    return itemDeadline \u003c= dateStr;\r\n                }\r\n                return itemDeadline === dateStr;\r\n            }).map(item =\u003e ({\r\n                ...item,\r\n                id: item.id,\r\n                title: `${item.title} (${g.title})`,\r\n                goalId: g.id,\r\n                isDone: item.completed,\r\n                type: \u0027step\u0027,\r\n                color: g.color,\r\n                priority: g.priority || \u0027medium\u0027\r\n            }));\r\n        });\r\n\r\n        const allTasks = [...todaysTasks, ...todaysSteps].map(t =\u003e {\r\n            const taskDateStr = (t as any).date || ((t as any).deadline ? (t as any).deadline.split(\u0027T\u0027)[0] : undefined);\r\n            const isOverdue = !t.isDone \u0026\u0026 taskDateStr \u0026\u0026 taskDateStr \u003c dateStr;\r\n            return { ...t, isOverdue };\r\n        }).sort((a, b) =\u003e {\r\n            // 1. Overdue items first (not done)\r\n            if (a.isOverdue \u0026\u0026 !b.isOverdue) return -1;\r\n            if (!a.isOverdue \u0026\u0026 b.isOverdue) return 1;\r\n\r\n            // 2. Then incomplete before complete\r\n            if (a.isDone \u0026\u0026 !b.isDone) return 1;\r\n            if (!a.isDone \u0026\u0026 b.isDone) return -1;\r\n\r\n            // 3. Among overdue or among normal, sort by priority\r\n            const pMap: Record\u003cstring, number\u003e = { high: 3, medium: 2, low: 1 };\r\n            const pA = a.priority ? pMap[a.priority as string] : 1;\r\n            const pB = b.priority ? pMap[b.priority as string] : 1;\r\n\r\n            if (pA !== pB) return pB - pA;\r\n\r\n            // 4. Finally, for overdue items, oldest first\r\n            if (a.isOverdue \u0026\u0026 b.isOverdue) {\r\n                const dateA = (a as any).date || ((a as any).deadline ? (a as any).deadline.split(\u0027T\u0027)[0] : \u00279999-99-99\u0027);\r\n                const dateB = (b as any).date || ((b as any).deadline ? (b as any).deadline.split(\u0027T\u0027)[0] : \u00279999-99-99\u0027);\r\n                return dateA.localeCompare(dateB);\r\n            }\r\n\r\n            return 0;\r\n        });\r\n\r\n        return { allHabits: todaysHabits, allReviews, allTasks, todaysTasks, todaysSteps }; // Return sub-lists if needed\r\n    }, [themes, tasks, goals, dateStr, isCurrentDay, dayOfWeek]);\r\n\r\n    // Stats\r\n    const totalCount = allData.allReviews.length + allData.allTasks.length + allData.allHabits.length;\r\n    const completedCount =\r\n        allData.allReviews.filter(r =\u003e r.status === \u0027completed\u0027).length +\r\n        allData.allTasks.filter(t =\u003e t.isDone).length +\r\n        allData.allHabits.filter(g =\u003e g.isDone).length;\r\n\r\n    const progressPercent = totalCount === 0 ? 0 : Math.round((completedCount / totalCount) * 100);\r\n    const isAllDone = totalCount \u003e 0 \u0026\u0026 completedCount === totalCount;\r\n\r\n    // Overdue Check\r\n    const hasOverdueItems = useMemo(() =\u003e {\r\n        const overdueTasks = tasks.filter(t =\u003e t.type === \u0027day\u0027 \u0026\u0026 t.date \u0026\u0026 t.date \u003c dateStr \u0026\u0026 t.status !== \u0027completed\u0027); // Simplified check\r\n        // Ideally we re-use the exact filtered lists logic but simplified.\r\n        // Actually, we can check \u0027allTasks\u0027 for items that are overdue.\r\n        // \u0027allTasks\u0027 includes overdue tasks if in \u0027Today\u0027 mode.\r\n        return allData.allTasks.some((t: any) =\u003e {\r\n            const tDate = t.date || (t.deadline ? t.deadline.split(\u0027T\u0027)[0] : undefined);\r\n            return !t.isDone \u0026\u0026 tDate \u0026\u0026 tDate \u003c dateStr;\r\n        });\r\n    }, [allData.allTasks, dateStr, tasks]);\r\n\r\n\r\n    // Handlers\r\n    const handleFocusItem = (item: any, groupType: string) =\u003e {\r\n        // PRIORIDADE MÃXIMA: Bloquear dias futuros\r\n        const todayStr = format(new Date(), \u0027yyyy-MM-dd\u0027);\r\n        if (dateStr \u003e todayStr) {\r\n            showToast(\"VocÃª nÃ£o pode focar em atividades agendadas para o futuro!\", \"error\");\r\n            return;\r\n        }\r\n\r\n        // Shared Focus Logic\r\n        const focusType = groupType === \u0027habit\u0027 ? \u0027goal\u0027 : groupType === \u0027review\u0027 ? \u0027subtheme\u0027 : \u0027task\u0027;\r\n        const id = item.id || item.subthemeId;\r\n        const duration = item.durationMinutes || 25;\r\n        const parentId = item.goalId;\r\n\r\n        startFocus(id, focusType, item.title || item.subthemeTitle || item.themeTitle, duration, item.reviewNumber, item.type, parentId);\r\n        startFocusSession(id, duration);\r\n    };\r\n\r\n    const handleToggleItem = (item: any, groupType: string) =\u003e {\r\n        const id = item.id || item.subthemeId;\r\n\r\n        if (groupType === \u0027task\u0027) {\r\n            if (item.type === \u0027step\u0027) {\r\n                toggleGoalItem(item.goalId, id, dateStr);\r\n            } else {\r\n                toggleTask(id, dateStr);\r\n            }\r\n        } else if (groupType === \u0027habit\u0027) {\r\n            toggleGoal(id, dateStr);\r\n        } else if (groupType === \u0027review\u0027) {\r\n            const difficulty = \u0027medium\u0027; // Default difficulty for quick toggle\r\n            completeReview(id, item.reviewNumber, item.type, difficulty);\r\n        }\r\n    };\r\n\r\n    return {\r\n        // Date\r\n        selectedDate,\r\n        setSelectedDate,\r\n        handlePrevDay,\r\n        handleNextDay,\r\n        isCurrentDay,\r\n        dateStr,\r\n\r\n        // Data\r\n        allHabits: allData.allHabits,\r\n        allReviews: allData.allReviews,\r\n        allTasks: allData.allTasks,\r\n\r\n        // Stats\r\n        totalCount,\r\n        completedCount,\r\n        progressPercent,\r\n        isAllDone,\r\n        hasOverdueItems,\r\n\r\n        // State \u0026 Actions\r\n        dailySchedule,\r\n        handleSetTime,\r\n        missionProgress,\r\n\r\n        // Handlers\r\n        handleFocusItem,\r\n        handleToggleItem\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\debug\\SyncDebugWidget.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027useEffect\u0027 is defined but never used.","line":2,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027CheckCircle\u0027 is defined but never used.","line":6,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":47},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027XCircle\u0027 is defined but never used.","line":6,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":56},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027readData\u0027 is assigned a value but never used.","line":33,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027themeError\u0027 is assigned a value but never used.","line":88,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":88,"endColumn":38},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027e\u0027 is defined but never used.","line":125,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":125,"endColumn":19}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState, useEffect } from \u0027react\u0027;\r\nimport { supabase } from \u0027../../lib/supabase\u0027;\r\nimport { useAuth } from \u0027../../context/AuthContext\u0027;\r\nimport { Button } from \u0027../../components/ui/Button\u0027;\r\nimport { RefreshCw, AlertTriangle, CheckCircle, XCircle } from \u0027lucide-react\u0027;\r\n\r\nexport const SyncDebugWidget: React.FC = () =\u003e {\r\n    const { user } = useAuth();\r\n    const [status, setStatus] = useState\u003c\u0027idle\u0027 | \u0027testing\u0027 | \u0027success\u0027 | \u0027failure\u0027\u003e(\u0027idle\u0027);\r\n    const [logs, setLogs] = useState\u003cstring[]\u003e([]);\r\n\r\n    const addLog = (msg: string, type: \u0027info\u0027 | \u0027error\u0027 | \u0027success\u0027 = \u0027info\u0027) =\u003e {\r\n        const timestamp = new Date().toLocaleTimeString();\r\n        setLogs(prev =\u003e [`[${timestamp}] ${type.toUpperCase()}: ${msg}`, ...prev]);\r\n    };\r\n\r\n    const runDiagnostics = async () =\u003e {\r\n        setStatus(\u0027testing\u0027);\r\n        setLogs([]);\r\n        addLog(\"Iniciando diagnÃ³stico...\", \u0027info\u0027);\r\n\r\n        if (!user) {\r\n            addLog(\"ERRO: UsuÃ¡rio nÃ£o autenticado no AuthContext.\", \u0027error\u0027);\r\n            setStatus(\u0027failure\u0027);\r\n            return;\r\n        }\r\n        addLog(`UsuÃ¡rio detectado: ${user.email} (${user.id})`, \u0027success\u0027);\r\n\r\n        try {\r\n            // Test 1: Connection \u0026 Read\r\n            addLog(\"Teste 1: ConexÃ£o e Leitura (Tasks)...\", \u0027info\u0027);\r\n            const { data: readData, error: readError } = await supabase\r\n                .from(\u0027tasks\u0027)\r\n                .select(\u0027id\u0027)\r\n                .limit(1);\r\n\r\n            if (readError) {\r\n                addLog(`FALHA LEITURA: ${readError.message} (Code: ${readError.code})`, \u0027error\u0027);\r\n                if (readError.code === \u0027PGRST301\u0027) addLog(\"Dica: Row Level Security (RLS) pode estar bloqueando.\", \u0027info\u0027);\r\n                throw readError;\r\n            }\r\n            addLog(\"Leitura OK.\", \u0027success\u0027);\r\n\r\n            // Test 2: Write Task\r\n            addLog(\"Teste 2: Escrita (Tasks)...\", \u0027info\u0027);\r\n            const dummyId = crypto.randomUUID();\r\n            const { error: taskError } = await supabase.from(\u0027tasks\u0027).insert({\r\n                id: dummyId,\r\n                title: \u0027DIAGNOSTIC_TASK_\u0027 + Date.now(),\r\n                user_id: user.id,\r\n                created_at: new Date().toISOString(),\r\n                status: \u0027pending\u0027,\r\n                priority: \u0027low\u0027,\r\n                type: \u0027day\u0027\r\n            });\r\n            if (taskError) {\r\n                addLog(`FALHA TASKS: ${taskError.message}`, \u0027error\u0027);\r\n                throw taskError;\r\n            } else {\r\n                await supabase.from(\u0027tasks\u0027).delete().eq(\u0027id\u0027, dummyId);\r\n                addLog(\"Tasks OK.\", \u0027success\u0027);\r\n            }\r\n\r\n            // Test 3: Write Goal\r\n            addLog(\"Teste 3: Escrita (Goals)...\", \u0027info\u0027);\r\n            const goalId = crypto.randomUUID();\r\n            const { error: goalError } = await supabase.from(\u0027goals\u0027).insert({\r\n                id: goalId,\r\n                title: \u0027DIAGNOSTIC_GOAL\u0027,\r\n                user_id: user.id,\r\n                created_at: new Date().toISOString(),\r\n                type: \u0027simple\u0027,\r\n                category: \u0027test\u0027,\r\n                progress: 0\r\n            });\r\n            if (goalError) {\r\n                addLog(`FALHA GOALS: ${goalError.message}`, \u0027error\u0027);\r\n                // Don\u0027t throw, try next\r\n            } else {\r\n                await supabase.from(\u0027goals\u0027).delete().eq(\u0027id\u0027, goalId);\r\n                addLog(\"Goals OK.\", \u0027success\u0027);\r\n            }\r\n\r\n            // Test 4: Write Theme\r\n            addLog(\"Teste 4: Escrita (Themes)...\", \u0027info\u0027);\r\n            const themeId = crypto.randomUUID();\r\n            const { error: themeError } = await supabase.from(\u0027themes\u0027).insert({\r\n                id: themeId,\r\n                title: \u0027DIAGNOSTIC_THEME\u0027,\r\n                user_id: user.id,\r\n                created_at: new Date().toISOString(),\r\n                color: \u0027#000000\u0027\r\n            });\r\n            // Test 5: Write Subtheme\r\n            addLog(\"Teste 5: Escrita (Subthemes)...\", \u0027info\u0027);\r\n            const subId = crypto.randomUUID();\r\n            // Need a valid parent theme for FK constraint? \r\n            // If we use the previous themeId... but we deleted it.\r\n            // Let\u0027s create a temporary theme just for this test\r\n            const tempThemeId = crypto.randomUUID();\r\n            await supabase.from(\u0027themes\u0027).insert({ id: tempThemeId, title: \u0027TEMP_PARENT\u0027, user_id: user.id, color: \u0027#000\u0027 });\r\n\r\n            const { error: subError } = await supabase.from(\u0027subthemes\u0027).insert({\r\n                id: subId,\r\n                theme_id: tempThemeId,\r\n                title: \u0027DIAGNOSTIC_SUBTHEME\u0027,\r\n                status: \u0027queue\u0027\r\n                // user_id removed\r\n            });\r\n\r\n            if (subError) {\r\n                addLog(`FALHA SUBTHEMES: ${subError.message}`, \u0027error\u0027);\r\n            } else {\r\n                addLog(\"Subthemes OK.\", \u0027success\u0027);\r\n            }\r\n            // Cleanup All\r\n            await supabase.from(\u0027subthemes\u0027).delete().eq(\u0027id\u0027, subId);\r\n            await supabase.from(\u0027themes\u0027).delete().eq(\u0027id\u0027, tempThemeId);\r\n\r\n\r\n            addLog(\"DiagnÃ³stico Completo: TUDO VERDE! ðŸŸ¢\", \u0027success\u0027);\r\n            setStatus(\u0027success\u0027);\r\n\r\n        } catch (e: any) {\r\n            setStatus(\u0027failure\u0027);\r\n            addLog(`DiagnÃ³stico finalizado com ERROS.`, \u0027error\u0027);\r\n        }\r\n    };\r\n\r\n    const forceReset = () =\u003e {\r\n        localStorage.removeItem(\u0027sync_queue_v1\u0027);\r\n        localStorage.removeItem(\u0027sync_queue_v2\u0027); // Just in case\r\n        window.location.reload();\r\n    };\r\n\r\n    if (import.meta.env.PROD) return null; // Safety\r\n\r\n    return (\r\n        \u003cdiv className=\"fixed bottom-4 right-4 z-50 p-4 bg-slate-900 border border-slate-700 rounded-lg shadow-2xl w-96 max-h-[500px] overflow-hidden flex flex-col\"\u003e\r\n            \u003cdiv className=\"flex items-center justify-between mb-4\"\u003e\r\n                \u003ch3 className=\"text-white font-bold flex items-center gap-2\"\u003e\r\n                    \u003cAlertTriangle className=\"w-4 h-4 text-amber-500\" /\u003e DiagnÃ³stico de Sync\r\n                \u003c/h3\u003e\r\n                \u003cdiv className=\"flex gap-2\"\u003e\r\n                    \u003cButton size=\"sm\" variant=\"ghost\" onClick={forceReset} className=\"text-red-400 hover:text-red-300\"\u003e\r\n                        \u003cAlertTriangle className=\"w-3 h-3 mr-1\" /\u003e Resetar\r\n                    \u003c/Button\u003e\r\n                    \u003cButton size=\"sm\" onClick={runDiagnostics} disabled={status === \u0027testing\u0027}\u003e\r\n                        {status === \u0027testing\u0027 ? \u003cRefreshCw className=\"w-3 h-3 animate-spin\" /\u003e : \u0027Testar Agora\u0027}\r\n                    \u003c/Button\u003e\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n\r\n\r\n            \u003cdiv className=\"flex-1 overflow-y-auto bg-black/50 p-2 rounded text-xs font-mono space-y-1 h-64\"\u003e\r\n                {logs.length === 0 \u0026\u0026 \u003cspan className=\"text-slate-500\"\u003eAguardando execuÃ§Ã£o...\u003c/span\u003e}\r\n                {logs.map((log, i) =\u003e (\r\n                    \u003cdiv key={i} className={\r\n                        log.includes(\u0027INFO\u0027) ? \u0027text-blue-300\u0027 :\r\n                            log.includes(\u0027SUCCESS\u0027) ? \u0027text-emerald-300\u0027 :\r\n                                log.includes(\u0027ERROR\u0027) ? \u0027text-red-400 font-bold\u0027 : \u0027text-slate-300\u0027\r\n                    }\u003e\r\n                        {log}\r\n                    \u003c/div\u003e\r\n                ))}\r\n            \u003c/div\u003e\r\n\r\n            {status === \u0027failure\u0027 \u0026\u0026 (\r\n                \u003cdiv className=\"mt-2 p-2 bg-red-500/10 border border-red-500/20 rounded text-red-200 text-xs\"\u003e\r\n                    Por favor, tire um print desta tela e me mostre os erros em vermelho.\r\n                \u003c/div\u003e\r\n            )}\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\forms\\AddTaskModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Input\u0027 is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Select\u0027 is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027addDays\u0027 is defined but never used.","line":8,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":25}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \u0027react\u0027;\r\nimport { z } from \u0027zod\u0027;\r\nimport { Modal } from \u0027../../components/ui/Modal\u0027;\r\nimport { Input } from \u0027../../components/ui/Input\u0027;\r\nimport { Select } from \u0027../../components/ui/Select\u0027;\r\nimport { Button } from \u0027../../components/ui/Button\u0027;\r\nimport { useStudy } from \u0027../../context/StudyContext\u0027;\r\nimport { format, addDays, addMonths } from \u0027date-fns\u0027;\r\nimport { DaySelector } from \u0027../../components/forms/DaySelector\u0027;\r\nimport { ImageUpload } from \u0027../../components/forms/ImageUpload\u0027;\r\nimport { ColorPicker } from \u0027../../components/forms/ColorPicker\u0027;\r\nimport { PrioritySelector } from \u0027../../components/forms/PrioritySelector\u0027;\r\nimport { DurationStepper } from \u0027../../components/forms/DurationStepper\u0027;\r\nimport { DatePicker } from \u0027../../components/ui/DatePicker\u0027;\r\nimport { SymbolPicker } from \u0027../../components/forms/SymbolPicker\u0027;\r\nimport { cn } from \u0027../../lib/utils\u0027;\r\nimport type { Task } from \u0027../../types\u0027;\r\n\r\ninterface AddTaskModalProps {\r\n    isOpen: boolean;\r\n    onClose: () =\u003e void;\r\n    taskToEdit?: Task; // Optional prop for edit mode\r\n}\r\n\r\nconst taskSchema = z.object({\r\n    title: z.string().min(3, \u0027O nome da missÃ£o deve ter pelo menos 3 caracteres\u0027),\r\n    type: z.enum([\u0027day\u0027, \u0027period\u0027, \u0027recurring\u0027, \u0027goal\u0027]),\r\n    date: z.string().optional(),\r\n    startDate: z.string().optional(),\r\n    endDate: z.string().optional(),\r\n    recurrence: z.array(z.number()).optional()\r\n}).refine(data =\u003e {\r\n    if (data.type === \u0027day\u0027) return !!data.date;\r\n    if (data.type === \u0027period\u0027 || data.type === \u0027goal\u0027) return !!data.startDate;\r\n    return true;\r\n}, {\r\n    message: \"Data Ã© obrigatÃ³ria para este tipo de missÃ£o\",\r\n    path: [\"date\"]\r\n});\r\n\r\nexport const AddTaskModal: React.FC\u003cAddTaskModalProps\u003e = ({ isOpen, onClose, taskToEdit }) =\u003e {\r\n    const { addTask, updateTask, themes, tasks, goals, addGoal } = useStudy();\r\n\r\n    const usedColors = [\r\n        ...themes.map(t =\u003e t.color),\r\n        ...tasks.map(t =\u003e t.color),\r\n        ...goals.map(g =\u003e g.color)\r\n    ].filter(Boolean) as string[];\r\n\r\n    // Initialize state properly when modal opens/changes\r\n    const [title, setTitle] = useState(taskToEdit?.title || \u0027\u0027);\r\n    const [priority, setPriority] = useState(taskToEdit?.priority || \u0027medium\u0027);\r\n    const [type, setType] = useState(taskToEdit?.type || \u0027day\u0027);\r\n    const [date, setDate] = useState(taskToEdit?.date || format(new Date(), \u0027yyyy-MM-dd\u0027));\r\n    const [startDate, setStartDate] = useState(taskToEdit?.startDate || format(new Date(), \u0027yyyy-MM-dd\u0027));\r\n    const [endDate, setEndDate] = useState(taskToEdit?.endDate || \u0027\u0027);\r\n    const [recurrence, setRecurrence] = useState\u003cnumber[]\u003e(taskToEdit?.recurrence || []);\r\n    const [icon, setIcon] = useState(taskToEdit?.icon || \u0027\u0027);\r\n    const [color, setColor] = useState(taskToEdit?.color || \u0027\u0027);\r\n    const [imageUrl, setImageUrl] = useState(taskToEdit?.imageUrl || \u0027\u0027);\r\n    const [duration, setDuration] = useState(taskToEdit?.durationMinutes?.toString() || \u0027\u0027);\r\n\r\n    const [errors, setErrors] = useState\u003cRecord\u003cstring, string\u003e\u003e({});\r\n\r\n    // Reset or Set values when taskToEdit changes\r\n    React.useEffect(() =\u003e {\r\n        if (isOpen) {\r\n            setErrors({}); // Reset errors\r\n            setTitle(taskToEdit?.title || \u0027\u0027);\r\n            setPriority(taskToEdit?.priority || \u0027medium\u0027);\r\n            setType(taskToEdit?.type || \u0027day\u0027);\r\n            setDate(taskToEdit?.date || format(new Date(), \u0027yyyy-MM-dd\u0027));\r\n            setStartDate(taskToEdit?.startDate || format(new Date(), \u0027yyyy-MM-dd\u0027));\r\n            setEndDate(taskToEdit?.endDate || \u0027\u0027);\r\n            setRecurrence(taskToEdit?.recurrence || []);\r\n            setIcon(taskToEdit?.icon || \u0027\u0027);\r\n            setColor(taskToEdit?.color || \u0027\u0027);\r\n            setImageUrl(taskToEdit?.imageUrl || \u0027\u0027);\r\n            setDuration(taskToEdit?.durationMinutes?.toString() || \u0027\u0027);\r\n        }\r\n    }, [isOpen, taskToEdit]);\r\n\r\n    const handleSubmit = (e: React.FormEvent) =\u003e {\r\n        e.preventDefault();\r\n        setErrors({});\r\n\r\n        // Validate\r\n        const result = taskSchema.safeParse({\r\n            title,\r\n            type,\r\n            date,\r\n            startDate,\r\n            endDate,\r\n            recurrence\r\n        });\r\n\r\n        if (!result.success) {\r\n            const newErrors: Record\u003cstring, string\u003e = {};\r\n            result.error.issues.forEach(err =\u003e {\r\n                const path = err.path[0];\r\n                if (path) newErrors[path.toString()] = err.message;\r\n            });\r\n            setErrors(newErrors);\r\n            return;\r\n        }\r\n\r\n        if (!title) return;\r\n\r\n        const taskData = {\r\n            title,\r\n            status: taskToEdit?.status || \u0027pending\u0027,\r\n            priority: priority as any,\r\n            type: type as any,\r\n            date: type === \u0027day\u0027 ? date : undefined,\r\n            startDate: type === \u0027period\u0027 ? startDate : undefined,\r\n            endDate: (type === \u0027period\u0027 || type === \u0027recurring\u0027) ? endDate : undefined,\r\n            recurrence: type === \u0027recurring\u0027 ? recurrence : undefined,\r\n            icon: icon || undefined,\r\n            color: color || undefined,\r\n            imageUrl: imageUrl || undefined,\r\n            durationMinutes: duration ? parseInt(duration) : undefined\r\n        };\r\n\r\n        if (taskToEdit) {\r\n            updateTask(taskToEdit.id, taskData);\r\n        } else {\r\n            if ((type as any) === \u0027goal\u0027) {\r\n                const goalData = {\r\n                    title,\r\n                    type: \u0027simple\u0027,\r\n                    category: \u0027Geral\u0027, // Default category\r\n                    priority: priority as any,\r\n                    startDate: startDate || format(new Date(), \u0027yyyy-MM-dd\u0027),\r\n                    deadline: endDate || format(addMonths(new Date(), 1), \u0027yyyy-MM-dd\u0027),\r\n                    icon: icon || undefined,\r\n                    color: color || undefined,\r\n                    imageUrl: imageUrl || undefined,\r\n                    durationMinutes: duration ? parseInt(duration) : undefined\r\n                };\r\n                addGoal(goalData as any);\r\n            } else {\r\n                addTask(taskData as any);\r\n            }\r\n        }\r\n\r\n        onClose();\r\n    };\r\n\r\n    return (\r\n        \u003cModal isOpen={isOpen} onClose={onClose} title=\"\" maxWidth=\"xl\"\u003e\r\n            \u003cdiv className=\"relative overflow-hidden p-5 sm:p-6\"\u003e\r\n                {/* Subtle Background Ambiance */}\r\n                \u003cdiv className=\"absolute top-[-20%] right-[-20%] w-[400px] h-[400px] bg-blue-600/5 rounded-full blur-[100px] pointer-events-none\" /\u003e\r\n                \u003cdiv className=\"absolute bottom-[-20%] left-[-20%] w-[300px] h-[300px] bg-indigo-600/5 rounded-full blur-[80px] pointer-events-none\" /\u003e\r\n                \u003cdiv className=\"absolute inset-0 bg-[url(\u0027https://grainy-gradients.vercel.app/noise.svg\u0027)] opacity-[0.03] mix-blend-overlay pointer-events-none\" /\u003e\r\n\r\n                \u003cform onSubmit={handleSubmit} className=\"relative z-10 font-sans\"\u003e\r\n\r\n                    {/* Header Row */}\r\n                    \u003cdiv className=\"flex items-center justify-between mb-6\"\u003e\r\n                        \u003cdiv className=\"flex items-center gap-3\"\u003e\r\n                            \u003cdiv className=\"w-10 h-10 bg-gradient-to-br from-blue-500/10 to-indigo-500/10 rounded-xl border border-slate-800/50 flex items-center justify-center shadow-inner\"\u003e\r\n                                \u003cspan className=\"text-xl\"\u003eâœ¨\u003c/span\u003e\r\n                            \u003c/div\u003e\r\n                            \u003cdiv\u003e\r\n                                \u003ch2 className=\"text-lg font-bold text-white tracking-tight leading-none\"\u003e\r\n                                    {taskToEdit ? \"Editar MissÃ£o\" : \"Nova MissÃ£o\"}\r\n                                \u003c/h2\u003e\r\n                                \u003cp className=\"text-[11px] text-slate-500 font-medium px-0.5\"\u003eDefina seu prÃ³ximo objetivo\u003c/p\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    \u003cdiv className=\"space-y-5 px-6\"\u003e\r\n                        {/* Main Input */}\r\n                        \u003cdiv className=\"relative group\"\u003e\r\n                            \u003cdiv className=\"absolute -inset-0.5 bg-gradient-to-r from-blue-500/20 to-indigo-500/20 rounded-xl opacity-0 group-focus-within:opacity-100 blur transition duration-500\" /\u003e\r\n                            \u003cinput\r\n                                placeholder=\"Digite o nome da missÃ£o...\"\r\n                                value={title}\r\n                                onChange={e =\u003e {\r\n                                    setTitle(e.target.value);\r\n                                    if (errors.title) setErrors(prev =\u003e ({ ...prev, title: \u0027\u0027 }));\r\n                                }}\r\n                                autoFocus\r\n                                className={cn(\r\n                                    \"relative w-full bg-slate-950/80 text-white placeholder-slate-600 border rounded-xl px-4 py-3 text-base font-medium focus:ring-1 transition-all shadow-sm\",\r\n                                    errors.title\r\n                                        ? \"border-red-500/50 focus:border-red-500 focus:ring-red-500/20\"\r\n                                        : \"border-slate-800/50 focus:ring-blue-500/50 focus:border-blue-500/50\"\r\n                                )}\r\n                            /\u003e\r\n                            {errors.title \u0026\u0026 (\r\n                                \u003cspan className=\"text-red-400 text-[10px] font-bold absolute -bottom-4 left-1 animate-in slide-in-from-top-1\"\u003e\r\n                                    {errors.title}\r\n                                \u003c/span\u003e\r\n                            )}\r\n                        \u003c/div\u003e\r\n\r\n                        {/* Frequency Selector (Tabs Style) */}\r\n                        \u003cdiv className=\"bg-slate-950/60 p-1 rounded-xl border border-slate-800/50 flex gap-1\"\u003e\r\n                            {[\r\n                                { value: \u0027day\u0027, label: \u0027Hoje\u0027, icon: \u0027âš¡\u0027 },\r\n                                { value: \u0027period\u0027, label: \u0027Ciclo\u0027, icon: \u0027â³\u0027 },\r\n                                { value: \u0027recurring\u0027, label: \u0027Rotina\u0027, icon: \u0027ðŸ”„\u0027 },\r\n                                { value: \u0027goal\u0027, label: \u0027Meta\u0027, icon: \u0027ðŸŽ¯\u0027 },\r\n                            ].map((opt) =\u003e (\r\n                                \u003cbutton\r\n                                    key={opt.value}\r\n                                    type=\"button\"\r\n                                    onClick={() =\u003e {\r\n                                        const todayStr = format(new Date(), \u0027yyyy-MM-dd\u0027);\r\n                                        setType(opt.value as any);\r\n                                        if (opt.value === \u0027day\u0027) setDate(todayStr);\r\n                                        if (opt.value === \u0027period\u0027 || opt.value === \u0027goal\u0027) setStartDate(todayStr);\r\n                                    }}\r\n                                    className={`\r\n                                        flex-1 py-2 px-3 rounded-lg text-xs font-bold uppercase tracking-wide transition-all flex items-center justify-center gap-2\r\n                                        ${type === opt.value\r\n                                            ? \u0027bg-blue-600/10 text-blue-400 shadow-sm border border-blue-500/20\u0027\r\n                                            : \u0027text-slate-500 hover:text-slate-300 hover:bg-white/5 border border-transparent\u0027\r\n                                        }\r\n                                    `}\r\n                                \u003e\r\n                                    \u003cspan className=\"text-sm\"\u003e{opt.icon}\u003c/span\u003e\r\n                                    {opt.label}\r\n                                \u003c/button\u003e\r\n                            ))}\r\n                        \u003c/div\u003e\r\n\r\n                        {/* Date \u0026 Details Container */}\r\n                        \u003cdiv className=\"bg-slate-900/40 rounded-xl border border-slate-800/50 p-4 space-y-4\"\u003e\r\n                            {/* Dynamic Date Fields */}\r\n                            \u003cdiv\u003e\r\n                                {type === \u0027day\u0027 \u0026\u0026 (\r\n                                    \u003cdiv className=\"animate-in fade-in zoom-in-95 duration-200 grid grid-cols-[auto_1fr] gap-4 items-center\"\u003e\r\n                                        \u003clabel className=\"text-xs font-medium text-slate-400\"\u003eData:\u003c/label\u003e\r\n                                        \u003cDatePicker\r\n                                            value={date}\r\n                                            onChange={setDate}\r\n                                            className=\"w-full\"\r\n                                        /\u003e\r\n                                    \u003c/div\u003e\r\n                                )}\r\n                                {(type === \u0027period\u0027 || (type as any) === \u0027goal\u0027) \u0026\u0026 (\r\n                                    \u003cdiv className=\"animate-in fade-in zoom-in-95 duration-200 space-y-3\"\u003e\r\n                                        \u003cdiv className=\"flex gap-3\"\u003e\r\n                                            \u003cdiv className=\"flex-1 space-y-1\"\u003e\r\n                                                \u003clabel className=\"text-[10px] uppercase font-bold text-slate-500\"\u003eInÃ­cio\u003c/label\u003e\r\n                                                \u003cDatePicker\r\n                                                    value={startDate}\r\n                                                    onChange={setStartDate}\r\n                                                /\u003e\r\n                                            \u003c/div\u003e\r\n                                            \u003cdiv className=\"flex items-end pb-3 opacity-30 text-slate-400\"\u003eâ†’\u003c/div\u003e\r\n                                            \u003cdiv className=\"flex-1 space-y-1\"\u003e\r\n                                                \u003clabel className=\"text-[10px] uppercase font-bold text-slate-500\"\u003e{(type as any) === \u0027goal\u0027 ? \u0027Prazo\u0027 : \u0027Fim\u0027}\u003c/label\u003e\r\n                                                \u003cDatePicker\r\n                                                    value={endDate}\r\n                                                    onChange={setEndDate}\r\n                                                /\u003e\r\n                                            \u003c/div\u003e\r\n                                        \u003c/div\u003e\r\n                                    \u003c/div\u003e\r\n                                )}\r\n                                {/* Period/Cycle/Goal Dates */}\r\n                                {type === \u0027recurring\u0027 \u0026\u0026 (\r\n                                    \u003cdiv className=\"animate-in fade-in zoom-in-95 duration-200 space-y-3\"\u003e\r\n                                        {type === \u0027recurring\u0027 \u0026\u0026 (\r\n                                            \u003cDaySelector selectedDays={recurrence} onChange={setRecurrence} /\u003e\r\n                                        )}\r\n                                        \u003cdiv className=\"flex items-center gap-3\"\u003e\r\n                                            \u003clabel className=\"text-[10px] uppercase font-bold text-slate-500 shrink-0\"\u003eAtÃ©:\u003c/label\u003e\r\n                                            \u003cdiv className=\"flex-1\"\u003e\r\n                                                \u003cDatePicker\r\n                                                    value={endDate}\r\n                                                    onChange={setEndDate}\r\n                                                    placeholder=\"Sem data final\"\r\n                                                /\u003e\r\n                                            \u003c/div\u003e\r\n                                        \u003c/div\u003e\r\n                                    \u003c/div\u003e\r\n                                )}\r\n                            \u003c/div\u003e\r\n\r\n                            {/* Quick Deadlines */}\r\n                            \u003cdiv className=\"flex items-center gap-2 overflow-x-auto pb-1\"\u003e\r\n                                \u003cspan className=\"text-[10px] font-bold text-slate-500 uppercase shrink-0\"\u003ePrazos:\u003c/span\u003e\r\n                                {[\r\n                                    { label: \u0027+1 MÃªs\u0027, months: 1 },\r\n                                    { label: \u0027+3 Meses\u0027, months: 3 },\r\n                                    { label: \u0027+6 Meses\u0027, months: 6 },\r\n                                    { label: \u0027+1 Ano\u0027, months: 12 },\r\n                                ].map((opt) =\u003e (\r\n                                    \u003cbutton\r\n                                        key={opt.label}\r\n                                        type=\"button\"\r\n                                        onClick={() =\u003e {\r\n                                            const baseDate = new Date();\r\n                                            const targetDate = addMonths(baseDate, opt.months);\r\n                                            const formatted = format(targetDate, \u0027yyyy-MM-dd\u0027);\r\n\r\n                                            if (type === \u0027day\u0027) setDate(formatted);\r\n                                            else setEndDate(formatted);\r\n                                        }}\r\n                                        className=\"h-7 px-2.5 rounded bg-white/5 hover:bg-white/10 border border-slate-800/50 text-[10px] font-medium text-slate-400 hover:text-white transition-colors whitespace-nowrap\"\r\n                                    \u003e\r\n                                        {opt.label}\r\n                                    \u003c/button\u003e\r\n                                ))}\r\n                            \u003c/div\u003e\r\n\r\n                            \u003cdiv className=\"h-px bg-white/5 w-full my-4\" /\u003e\r\n\r\n                            {/* Attributes Grid */}\r\n                            \u003cdiv className=\"grid grid-cols-2 gap-4\"\u003e\r\n                                \u003cdiv className=\"space-y-1\"\u003e\r\n                                    \u003clabel className=\"text-[10px] uppercase font-bold text-slate-500 pl-1\"\u003eDuraÃ§Ã£o (Min)\u003c/label\u003e\r\n                                    \u003cdiv className=\"bg-slate-950/50 rounded-lg border border-slate-800/50 p-0.5\"\u003e\r\n                                        \u003cDurationStepper value={duration} onChange={setDuration} step={15} /\u003e\r\n                                    \u003c/div\u003e\r\n                                \u003c/div\u003e\r\n                                \u003cdiv className=\"space-y-1\"\u003e\r\n                                    \u003clabel className=\"text-[10px] uppercase font-bold text-slate-500 pl-1\"\u003ePrioridade\u003c/label\u003e\r\n                                    \u003cPrioritySelector value={priority} onChange={setPriority} /\u003e\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n\r\n                            \u003cdiv className=\"grid grid-cols-[60px_1fr] gap-4\"\u003e\r\n                                \u003cdiv className=\"space-y-1\"\u003e\r\n                                    \u003clabel className=\"text-[10px] uppercase font-bold text-slate-500 pl-1\"\u003eÃcone\u003c/label\u003e\r\n                                    \u003cdiv className=\"relative\"\u003e\r\n                                        \u003cSymbolPicker\r\n                                            value={icon}\r\n                                            onChange={setIcon}\r\n                                            placeholder=\"âœ¨\"\r\n                                        /\u003e\r\n                                    \u003c/div\u003e\r\n                                \u003c/div\u003e\r\n                                \u003cdiv className=\"space-y-1\"\u003e\r\n                                    \u003clabel className=\"text-[10px] uppercase font-bold text-slate-500 pl-1\"\u003eCor\u003c/label\u003e\r\n                                    \u003cColorPicker\r\n                                        value={color}\r\n                                        onChange={setColor}\r\n                                        disabledColors={taskToEdit ? usedColors.filter(c =\u003e c !== taskToEdit.color) : usedColors}\r\n                                    /\u003e\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n\r\n                        {/* Image */}\r\n                        \u003cdiv className=\"bg-slate-900/20 rounded-xl\"\u003e\r\n                            \u003cImageUpload label=\"Capa da MissÃ£o (Opcional)\" value={imageUrl} onChange={setImageUrl} /\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Footer Actions */}\r\n                    \u003cdiv className=\"flex items-center justify-end gap-3 pt-4 border-t border-white/5 mt-6 px-6\"\u003e\r\n                        \u003cButton\r\n                            type=\"button\"\r\n                            variant=\"ghost\"\r\n                            onClick={onClose}\r\n                            className=\"text-slate-400 hover:text-white text-xs h-9 px-4\"\r\n                        \u003e\r\n                            Cancelar\r\n                        \u003c/Button\u003e\r\n                        \u003cButton\r\n                            type=\"submit\"\r\n                            className=\"bg-blue-600 hover:bg-blue-500 text-white shadow-lg shadow-blue-500/20 text-xs font-bold uppercase tracking-wide h-9 px-6 rounded-lg transition-all active:scale-95\"\r\n                        \u003e\r\n                            {taskToEdit ? \"Salvar\" : \"Criar MissÃ£o\"}\r\n                        \u003c/Button\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/form\u003e\r\n            \u003c/div\u003e\r\n        \u003c/Modal\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\gamification\\AchievementsTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\gamification\\DailyRewardModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027X\u0027 is defined but never used.","line":5,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from \u0027react\u0027;\r\nimport { useGamification } from \u0027../../context/GamificationContext\u0027;\r\nimport { Modal } from \u0027../../components/ui/Modal\u0027;\r\nimport { Button } from \u0027../../components/ui/Button\u0027;\r\nimport { Flame, Gift, X } from \u0027lucide-react\u0027;\r\nimport confetti from \u0027canvas-confetti\u0027;\r\n\r\nexport const DailyRewardModal: React.FC = () =\u003e {\r\n    const { gamification, awardXP } = useGamification();\r\n    const [isOpen, setIsOpen] = useState(false);\r\n\r\n    useEffect(() =\u003e {\r\n        if (!gamification.streak) return; // Wait for load\r\n\r\n        const today = new Date().toISOString().split(\u0027T\u0027)[0];\r\n        const lastLogin = gamification.streak.lastLoginDate;\r\n        const claimedKey = `daily_reward_${today}`;\r\n        const isClaimed = localStorage.getItem(claimedKey);\r\n\r\n        // Verify if streak is active for today and not claimed\r\n        if (lastLogin === today \u0026\u0026 !isClaimed) {\r\n            // Small delay to ensure UI is ready and it\u0027s not jarring\r\n            const timer = setTimeout(() =\u003e setIsOpen(true), 1500);\r\n            return () =\u003e clearTimeout(timer);\r\n        }\r\n    }, [gamification.streak]);\r\n\r\n    const handleClaim = () =\u003e {\r\n        confetti({\r\n            particleCount: 100,\r\n            spread: 70,\r\n            origin: { y: 0.6 },\r\n            colors: [\u0027#F59E0B\u0027, \u0027#EF4444\u0027, \u0027#10B981\u0027]\r\n        });\r\n\r\n        awardXP(50);\r\n\r\n        const today = new Date().toISOString().split(\u0027T\u0027)[0];\r\n        localStorage.setItem(`daily_reward_${today}`, \u0027true\u0027);\r\n        setIsOpen(false);\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        \u003cModal isOpen={isOpen} onClose={() =\u003e { }} title=\"\" maxWidth=\"sm\"\u003e\r\n            \u003cdiv className=\"relative p-6 pt-10 pb-8 flex flex-col items-center text-center overflow-hidden\"\u003e\r\n                {/* Background Effects */}\r\n                \u003cdiv className=\"absolute inset-0 bg-gradient-to-br from-slate-900 to-slate-950\" /\u003e\r\n                \u003cdiv className=\"absolute inset-0 bg-[url(\u0027https://grainy-gradients.vercel.app/noise.svg\u0027)] opacity-20 mix-blend-overlay pointer-events-none\" /\u003e\r\n                \u003cdiv className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-orange-500/10 rounded-full blur-[80px] pointer-events-none animate-pulse\" /\u003e\r\n\r\n                \u003cdiv className=\"relative z-10 flex flex-col items-center gap-4\"\u003e\r\n                    \u003cdiv className=\"w-20 h-20 bg-gradient-to-br from-orange-400 to-red-600 rounded-3xl flex items-center justify-center shadow-2xl shadow-orange-500/30 ring-4 ring-orange-500/20 rotate-3 animate-bounce-slow\"\u003e\r\n                        \u003cFlame className=\"w-10 h-10 text-white fill-white drop-shadow-md\" /\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    \u003cdiv className=\"space-y-1 mt-2\"\u003e\r\n                        \u003ch2 className=\"text-2xl font-black text-white tracking-tight\"\u003e\r\n                            Ofensiva em Chamas!\r\n                        \u003c/h2\u003e\r\n                        \u003cp className=\"text-slate-400 font-medium\"\u003e\r\n                            VocÃª entrou por \u003cspan className=\"text-orange-400 font-bold text-lg\"\u003e{gamification.streak.current} dias\u003c/span\u003e seguidos.\r\n                        \u003c/p\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    \u003cdiv className=\"bg-slate-800/50 p-4 rounded-xl border border-white/5 w-full mt-2\"\u003e\r\n                        \u003cdiv className=\"flex items-center justify-between mb-1\"\u003e\r\n                            \u003cspan className=\"text-xs font-bold text-slate-500 uppercase tracking-wider\"\u003eRecompensa DiÃ¡ria\u003c/span\u003e\r\n                            \u003cGift className=\"w-4 h-4 text-emerald-400\" /\u003e\r\n                        \u003c/div\u003e\r\n                        \u003cdiv className=\"text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-green-500\"\u003e\r\n                            +50 XP\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    \u003cButton\r\n                        size=\"lg\"\r\n                        onClick={handleClaim}\r\n                        className=\"w-full mt-4 bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-400 hover:to-red-500 border-none shadow-lg shadow-orange-900/20 group\"\r\n                    \u003e\r\n                        \u003cspan className=\"font-bold text-white group-hover:scale-105 transition-transform\"\u003eResgatar Recompensa\u003c/span\u003e\r\n                    \u003c/Button\u003e\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n        \u003c/Modal\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\gamification\\GamificationModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\gamification\\LeaderboardTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027User\u0027 is defined but never used.","line":2,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027loading\u0027 is assigned a value but never used.","line":16,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":19},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\gamification\\LeaderboardTab.tsx:20:9\n  18 |     // Simulate fetch\n  19 |     useEffect(() =\u003e {\n\u003e 20 |         setLoading(true);\n     |         ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  21 |         setTimeout(() =\u003e setLoading(false), 800);\n  22 |     }, []);\n  23 |","line":20,"column":9,"nodeType":null,"endLine":20,"endColumn":19}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from \u0027react\u0027;\r\nimport { Trophy, Medal, User, Crown } from \u0027lucide-react\u0027;\r\nimport { motion } from \u0027framer-motion\u0027;\r\n\r\n// Mock Data for now (replace with Supabase query later)\r\nconst MOCK_LEADERBOARD = [\r\n    { id: \u00271\u0027, name: \u0027Mestre Jedi\u0027, xp: 12500, level: 42, avatar: \u0027M\u0027 },\r\n    { id: \u00272\u0027, name: \u0027Padawan Focado\u0027, xp: 8900, level: 25, avatar: \u0027P\u0027 },\r\n    { id: \u00273\u0027, name: \u0027Viajante do Tempo\u0027, xp: 7200, level: 18, avatar: \u0027V\u0027 },\r\n    { id: \u00274\u0027, name: \u0027Estudante Pro\u0027, xp: 6500, level: 15, avatar: \u0027E\u0027 },\r\n    { id: \u00275\u0027, name: \u0027Novato Curioso\u0027, xp: 3200, level: 8, avatar: \u0027N\u0027 },\r\n];\r\n\r\nexport const LeaderboardTab = () =\u003e {\r\n    // const { user } = useAuth(); // If we want to highlight current user\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    // Simulate fetch\r\n    useEffect(() =\u003e {\r\n        setLoading(true);\r\n        setTimeout(() =\u003e setLoading(false), 800);\r\n    }, []);\r\n\r\n    const getRankIcon = (index: number) =\u003e {\r\n        if (index === 0) return \u003cCrown className=\"w-5 h-5 text-yellow-400 drop-shadow-[0_0_8px_rgba(250,204,21,0.6)]\" /\u003e;\r\n        if (index === 1) return \u003cMedal className=\"w-5 h-5 text-slate-300\" /\u003e;\r\n        if (index === 2) return \u003cMedal className=\"w-5 h-5 text-amber-600\" /\u003e;\r\n        return \u003cspan className=\"text-slate-500 font-bold ml-1.5\"\u003e{index + 1}\u003c/span\u003e;\r\n    };\r\n\r\n    return (\r\n        \u003cdiv className=\"space-y-4\"\u003e\r\n            \u003cdiv className=\"bg-slate-900/50 rounded-2xl p-4 border border-white/5\"\u003e\r\n                \u003ch3 className=\"text-sm font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2\"\u003e\r\n                    \u003cTrophy className=\"w-4 h-4 text-yellow-500\" /\u003e\r\n                    Top 5 Global\r\n                \u003c/h3\u003e\r\n\r\n                \u003cdiv className=\"space-y-2\"\u003e\r\n                    {MOCK_LEADERBOARD.map((player, index) =\u003e (\r\n                        \u003cmotion.div\r\n                            key={player.id}\r\n                            initial={{ opacity: 0, x: -20 }}\r\n                            animate={{ opacity: 1, x: 0 }}\r\n                            transition={{ delay: index * 0.1 }}\r\n                            className={`flex items-center gap-4 p-3 rounded-xl border transition-all ${index === 0\r\n                                    ? \u0027bg-gradient-to-r from-yellow-500/10 to-transparent border-yellow-500/20 shadow-[0_0_15px_rgba(234,179,8,0.1)]\u0027\r\n                                    : \u0027bg-white/5 border-white/5 hover:bg-white/10\u0027\r\n                                }`}\r\n                        \u003e\r\n                            \u003cdiv className=\"w-8 flex justify-center\"\u003e\r\n                                {getRankIcon(index)}\r\n                            \u003c/div\u003e\r\n\r\n                            \u003cdiv className=\"flex items-center gap-3 flex-1\"\u003e\r\n                                \u003cdiv className={`w-8 h-8 rounded-full flex items-center justify-center font-bold text-xs shadow-inner ring-2 ${index === 0 ? \u0027bg-yellow-600 ring-yellow-500/50 text-white\u0027 : \u0027bg-slate-700 ring-white/10 text-slate-300\u0027\r\n                                    }`}\u003e\r\n                                    {player.avatar}\r\n                                \u003c/div\u003e\r\n                                \u003cdiv\u003e\r\n                                    \u003cdiv className={`text-sm font-bold ${index === 0 ? \u0027text-yellow-100\u0027 : \u0027text-slate-200\u0027}`}\u003e\r\n                                        {player.name}\r\n                                    \u003c/div\u003e\r\n                                    \u003cdiv className=\"text-[10px] text-slate-500 font-medium\"\u003e\r\n                                        NÃ­vel {player.level}\r\n                                    \u003c/div\u003e\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n\r\n                            \u003cdiv className=\"text-right\"\u003e\r\n                                \u003cdiv className=\"text-sm font-bold text-slate-100 font-mono\"\u003e\r\n                                    {player.xp.toLocaleString()}\r\n                                \u003c/div\u003e\r\n                                \u003cdiv className=\"text-[10px] text-slate-500 uppercase tracking-wider font-bold\"\u003eXP\u003c/div\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/motion.div\u003e\r\n                    ))}\r\n                \u003c/div\u003e\r\n\r\n                \u003cdiv className=\"mt-4 p-3 rounded-xl bg-blue-500/10 border border-blue-500/20 text-center\"\u003e\r\n                    \u003cp className=\"text-xs text-blue-300\"\u003e\r\n                        VocÃª estÃ¡ no top \u003cstrong\u003e15%\u003c/strong\u003e dos estudantes essa semana!\r\n                    \u003c/p\u003e\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\gamification\\OverviewTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\gamification\\XPTableTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\gamification\\achievements.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\goals\\components\\AddGoalModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Target\u0027 is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":16}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \u0027react\u0027;\r\nimport { Target, Trash2 } from \u0027lucide-react\u0027;\r\nimport { Modal } from \u0027../../../components/ui/Modal\u0027;\r\nimport { Input } from \u0027../../../components/ui/Input\u0027;\r\nimport { Button } from \u0027../../../components/ui/Button\u0027;\r\nimport { ImageUpload } from \u0027../../../components/forms/ImageUpload\u0027;\r\nimport { ColorPicker } from \u0027../../../components/forms/ColorPicker\u0027;\r\nimport { PrioritySelector } from \u0027../../../components/forms/PrioritySelector\u0027;\r\nimport { DurationStepper } from \u0027../../../components/forms/DurationStepper\u0027;\r\nimport { SymbolPicker } from \u0027../../../components/forms/SymbolPicker\u0027;\r\nimport type { Goal } from \u0027../../../types\u0027;\r\nimport { cn } from \u0027../../../lib/utils\u0027; // Import cn\r\n\r\nimport { useGoalFormLogic } from \u0027../hooks/useGoalFormLogic\u0027;\r\nimport { GoalTypeSelector } from \u0027./GoalTypeSelector\u0027;\r\nimport { ChecklistBuilder } from \u0027./ChecklistBuilder\u0027;\r\nimport { ScheduleFields } from \u0027./ScheduleFields\u0027;\r\n\r\ninterface AddGoalModalProps {\r\n    isOpen: boolean;\r\n    onClose: () =\u003e void;\r\n    goalToEdit?: Goal;\r\n    defaultThemeId?: string;\r\n    defaultType?: \u0027simple\u0027 | \u0027checklist\u0027 | \u0027habit\u0027;\r\n}\r\n\r\nexport const AddGoalModal: React.FC\u003cAddGoalModalProps\u003e = (props) =\u003e {\r\n    const {\r\n        title, setTitle,\r\n        type, setType,\r\n        category, setCategory,\r\n        priority, setPriority,\r\n        relatedThemeId, setRelatedThemeId,\r\n        startDate, setStartDate,\r\n        deadline, setDeadline,\r\n        recurrence, setRecurrence,\r\n        icon, setIcon,\r\n        color, setColor,\r\n        imageUrl, setImageUrl,\r\n        duration, setDuration,\r\n        checklist, setChecklist,\r\n        errors, setErrors, // Destructure errors\r\n        usedColors,\r\n        themes,\r\n        handleSubmit,\r\n        handleDelete,\r\n        recalculateSchedule\r\n    } = useGoalFormLogic(props);\r\n\r\n    const { isOpen, onClose, goalToEdit, defaultThemeId } = props;\r\n\r\n    return (\r\n        \u003cModal isOpen={isOpen} onClose={onClose} title=\"\" maxWidth=\"xl\"\u003e\r\n            \u003cdiv className=\"relative overflow-hidden p-5 sm:p-6\"\u003e\r\n                {/* Subtle Background Ambiance */}\r\n                \u003cdiv className=\"absolute top-[-20%] right-[-20%] w-[400px] h-[400px] bg-blue-600/5 rounded-full blur-[100px] pointer-events-none\" /\u003e\r\n                \u003cdiv className=\"absolute bottom-[-20%] left-[-20%] w-[300px] h-[300px] bg-indigo-600/5 rounded-full blur-[80px] pointer-events-none\" /\u003e\r\n                \u003cdiv className=\"absolute inset-0 bg-[url(\u0027https://grainy-gradients.vercel.app/noise.svg\u0027)] opacity-[0.03] mix-blend-overlay pointer-events-none\" /\u003e\r\n\r\n                \u003cform onSubmit={handleSubmit} className=\"relative z-10 font-sans\"\u003e\r\n\r\n                    {/* Header Row */}\r\n                    \u003cdiv className=\"flex items-center justify-between mb-6\"\u003e\r\n                        \u003cdiv className=\"flex items-center gap-3\"\u003e\r\n                            \u003cdiv className=\"w-10 h-10 bg-gradient-to-br from-blue-500/10 to-indigo-500/10 rounded-xl border border-white/5 flex items-center justify-center shadow-inner\"\u003e\r\n                                \u003cspan className=\"text-xl\"\u003eðŸŽ¯\u003c/span\u003e\r\n                            \u003c/div\u003e\r\n                            \u003cdiv\u003e\r\n                                \u003ch2 className=\"text-lg font-bold text-white tracking-tight leading-none\"\u003e\r\n                                    {goalToEdit ? \"Editar Meta\" : \"Nova Meta\"}\r\n                                \u003c/h2\u003e\r\n                                \u003cp className=\"text-[11px] text-slate-500 font-medium px-0.5\"\u003eDefina seus objetivos futuros\u003c/p\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    \u003cdiv className=\"space-y-5 px-6\"\u003e\r\n                        {/* Main Input */}\r\n                        \u003cdiv className=\"relative group\"\u003e\r\n                            \u003cdiv className=\"absolute -inset-0.5 bg-gradient-to-r from-blue-500/20 to-indigo-500/20 rounded-xl opacity-0 group-focus-within:opacity-100 blur transition duration-500\" /\u003e\r\n                            \u003cinput\r\n                                placeholder=\"Digite o nome da meta...\"\r\n                                value={title}\r\n                                onChange={e =\u003e {\r\n                                    setTitle(e.target.value);\r\n                                    if (errors.title) setErrors(prev =\u003e ({ ...prev, title: \u0027\u0027 }));\r\n                                }}\r\n                                autoFocus\r\n                                className={cn(\r\n                                    \"relative w-full bg-slate-950/80 text-white placeholder-slate-600 border rounded-xl px-4 py-3 text-base font-medium focus:ring-1 transition-all shadow-sm\",\r\n                                    errors.title\r\n                                        ? \"border-red-500/50 focus:border-red-500 focus:ring-red-500/20\"\r\n                                        : \"border-white/5 focus:ring-blue-500/50 focus:border-blue-500/50\"\r\n                                )}\r\n                            /\u003e\r\n                            {errors.title \u0026\u0026 (\r\n                                \u003cspan className=\"text-red-400 text-[10px] font-bold absolute -bottom-4 left-1 animate-in slide-in-from-top-1\"\u003e\r\n                                    {errors.title}\r\n                                \u003c/span\u003e\r\n                            )}\r\n                        \u003c/div\u003e\r\n\r\n                        {/* Type Selector (Tabs Style) */}\r\n                        \u003cGoalTypeSelector type={type} onChange={setType} /\u003e\r\n\r\n                        {/* Checklist Builder */}\r\n                        {type === \u0027checklist\u0027 \u0026\u0026 (\r\n                            \u003cdiv className=\"mt-4\"\u003e\r\n                                \u003cChecklistBuilder\r\n                                    checklist={checklist}\r\n                                    onChange={setChecklist}\r\n                                    startDate={startDate}\r\n                                    recalculateSchedule={recalculateSchedule}\r\n                                    setDeadline={setDeadline}\r\n                                /\u003e\r\n                            \u003c/div\u003e\r\n                        )}\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Type Specific Container */}\r\n                    \u003cdiv className=\"px-6 space-y-4\"\u003e\r\n                        {/* Schedule Fields */}\r\n                        \u003cdiv className=\"relative\"\u003e\r\n                            \u003cScheduleFields\r\n                                type={type}\r\n                                startDate={startDate}\r\n                                deadline={deadline}\r\n                                recurrence={recurrence}\r\n                                onStartDateChange={(date) =\u003e {\r\n                                    setStartDate(date);\r\n                                    if (errors.startDate) setErrors(prev =\u003e ({ ...prev, startDate: \u0027\u0027 }));\r\n                                }}\r\n                                onDeadlineChange={(date) =\u003e {\r\n                                    setDeadline(date);\r\n                                    if (errors.deadline) setErrors(prev =\u003e ({ ...prev, deadline: \u0027\u0027 }));\r\n                                }}\r\n                                onRecurrenceChange={setRecurrence}\r\n                            /\u003e\r\n                            {/* Error display for dates could be tricky since they are passed to child component. \r\n                                Ideally ScheduleFields should accept error props. \r\n                                For now, I\u0027ll assume global errors or simple alerts, but Zod errors are specific.\r\n                                Let\u0027s add simple visual feedback around ScheduleFields or inside it?\r\n                                Since I\u0027m not editing ScheduleFields right now, I\u0027ll wrap it or add error text below.\r\n                            */}\r\n                            {(errors.startDate || errors.deadline) \u0026\u0026 (\r\n                                \u003cdiv className=\"flex justify-between px-1 mt-1\"\u003e\r\n                                    \u003cspan className=\"text-red-400 text-[10px] font-bold animate-in slide-in-from-top-1\"\u003e{errors.startDate}\u003c/span\u003e\r\n                                    \u003cspan className=\"text-red-400 text-[10px] font-bold animate-in slide-in-from-top-1 text-right\"\u003e{errors.deadline}\u003c/span\u003e\r\n                                \u003c/div\u003e\r\n                            )}\r\n                        \u003c/div\u003e\r\n\r\n                        \u003cdiv className=\"h-px bg-slate-800/50 w-full my-2\" /\u003e\r\n\r\n                        {/* Attributes Grid */}\r\n                        \u003cdiv className=\"grid grid-cols-2 gap-4\"\u003e\r\n                            \u003cdiv className=\"space-y-1\"\u003e\r\n                                \u003clabel className=\"text-[10px] uppercase font-bold text-slate-500 pl-1\"\u003eDuraÃ§Ã£o (Min)\u003c/label\u003e\r\n                                \u003cdiv className=\"bg-slate-950/50 rounded-lg border border-white/5 p-0.5\"\u003e\r\n                                    \u003cDurationStepper value={duration} onChange={setDuration} step={1} min={0} /\u003e\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n                            \u003cdiv className=\"space-y-1\"\u003e\r\n                                \u003clabel className=\"text-[10px] uppercase font-bold text-slate-500 pl-1\"\u003ePrioridade\u003c/label\u003e\r\n                                \u003cPrioritySelector value={priority} onChange={setPriority} /\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n\r\n                        \u003cdiv className=\"space-y-1\"\u003e\r\n                            \u003clabel className=\"text-[10px] uppercase font-bold text-slate-500 pl-1\"\u003eVincular a Tema (Opcional)\u003c/label\u003e\r\n                            \u003cselect\r\n                                value={relatedThemeId}\r\n                                onChange={e =\u003e setRelatedThemeId(e.target.value)}\r\n                                disabled={!!defaultThemeId \u0026\u0026 !goalToEdit}\r\n                                className={`w-full bg-slate-950/50 border border-white/5 h-9 rounded-lg text-xs px-2 outline-none focus:border-blue-500/50 text-slate-300 ${!!defaultThemeId \u0026\u0026 !goalToEdit ? \u0027opacity-60 cursor-not-allowed font-bold text-blue-400\u0027 : \u0027\u0027}`}\r\n                            \u003e\r\n                                \u003coption value=\"\"\u003eSem vÃ­nculo\u003c/option\u003e\r\n                                {themes.map(t =\u003e (\r\n                                    \u003coption key={t.id} value={t.id}\u003e{t.title}\u003c/option\u003e\r\n                                ))}\r\n                            \u003c/select\u003e\r\n                        \u003c/div\u003e\r\n\r\n                        \u003cdiv className=\"space-y-1\"\u003e\r\n                            \u003clabel className=\"text-[10px] uppercase font-bold text-slate-500 pl-1\"\u003eCategoria\u003c/label\u003e\r\n                            \u003cInput\r\n                                value={category}\r\n                                onChange={e =\u003e setCategory(e.target.value)}\r\n                                placeholder=\"Ex: Estudos, SaÃºde, FinanÃ§as...\"\r\n                                className=\"bg-slate-950/50 border-white/5 h-9 text-xs\"\r\n                            /\u003e\r\n                        \u003c/div\u003e\r\n\r\n                        \u003cdiv className=\"grid grid-cols-2 gap-4\"\u003e\r\n                            \u003cdiv className=\"space-y-1\"\u003e\r\n                                \u003clabel className=\"text-[10px] uppercase font-bold text-slate-500 pl-1\"\u003eÃcone\u003c/label\u003e\r\n                                \u003cSymbolPicker\r\n                                    value={icon}\r\n                                    onChange={setIcon}\r\n                                    placeholder=\"ðŸŽ¯\"\r\n                                /\u003e\r\n                            \u003c/div\u003e\r\n                            \u003cdiv className=\"space-y-1\"\u003e\r\n                                \u003clabel className=\"text-[10px] uppercase font-bold text-slate-500 pl-1\"\u003eCor\u003c/label\u003e\r\n                                \u003cColorPicker\r\n                                    value={color}\r\n                                    onChange={setColor}\r\n                                    disabledColors={goalToEdit ? usedColors.filter(c =\u003e c !== goalToEdit.color) : usedColors}\r\n                                /\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Image */}\r\n                    \u003cdiv className=\"bg-slate-900/20 rounded-xl mt-5 px-6\"\u003e\r\n                        \u003cImageUpload label=\"Capa do Card (Opcional)\" value={imageUrl} onChange={setImageUrl} /\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Footer Actions */}\r\n                    \u003cdiv className=\"flex items-center justify-between gap-3 pt-4 border-t border-white/5 mt-6 px-6\"\u003e\r\n                        {goalToEdit \u0026\u0026 (\r\n                            \u003cbutton\r\n                                type=\"button\"\r\n                                onClick={handleDelete}\r\n                                className=\"flex items-center gap-2 px-3 py-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors text-xs font-bold uppercase tracking-wide\"\r\n                            \u003e\r\n                                \u003cTrash2 className=\"w-4 h-4\" /\u003e\r\n                                Excluir\r\n                            \u003c/button\u003e\r\n                        )}\r\n                        \u003cdiv className=\"flex items-center gap-3 ml-auto\"\u003e\r\n                            \u003cButton\r\n                                type=\"button\"\r\n                                variant=\"ghost\"\r\n                                onClick={onClose}\r\n                                className=\"text-slate-400 hover:text-white text-xs h-9 px-4\"\r\n                            \u003e\r\n                                Cancelar\r\n                            \u003c/Button\u003e\r\n                            \u003cButton\r\n                                type=\"submit\"\r\n                                className=\"bg-blue-600 hover:bg-blue-500 text-white shadow-lg shadow-blue-500/20 text-xs font-bold uppercase tracking-wide h-9 px-6 rounded-lg transition-all active:scale-95\"\r\n                            \u003e\r\n                                {goalToEdit ? \"Salvar\" : \"Criar Meta\"}\r\n                            \u003c/Button\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/form\u003e\r\n            \u003c/div \u003e\r\n        \u003c/Modal \u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\goals\\components\\ChecklistBuilder.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\goals\\components\\GoalDetailsModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027toggleGoal\u0027 is assigned a value but never used.","line":18,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \u0027react\u0027;\r\nimport { Target, CheckCircle2, Clock, Calendar, Trophy, ArrowRight, Activity } from \u0027lucide-react\u0027;\r\nimport { Modal } from \u0027../../../components/ui/Modal\u0027;\r\nimport { useStudy } from \u0027../../../context/StudyContext\u0027;\r\nimport { format } from \u0027date-fns\u0027;\r\nimport { cn } from \u0027../../../lib/utils\u0027;\r\nimport type { Goal } from \u0027../../../types\u0027;\r\nimport SummaryTimeline from \u0027../../../components/ui/SummaryTimeline\u0027;\r\nimport { IconRenderer } from \u0027../../../components/ui/IconRenderer\u0027;\r\n\r\ninterface GoalDetailsModalProps {\r\n    isOpen: boolean;\r\n    onClose: () =\u003e void;\r\n    goal: Goal | null;\r\n}\r\n\r\nexport const GoalDetailsModal: React.FC\u003cGoalDetailsModalProps\u003e = ({ isOpen, onClose, goal }) =\u003e {\r\n    const { toggleGoal, toggleGoalItem } = useStudy();\r\n\r\n    if (!goal) return null;\r\n\r\n    const isCompleted = goal.progress === 100;\r\n    const isHabit = goal.type === \u0027habit\u0027;\r\n    const isChecklist = goal.type === \u0027checklist\u0027;\r\n\r\n    const colorScheme = isCompleted\r\n        ? {\r\n            text: \u0027text-emerald-400\u0027,\r\n            bg: \u0027bg-emerald-500/10\u0027,\r\n            border: \u0027border-emerald-500/20\u0027,\r\n            gradient: \u0027from-emerald-600 to-emerald-400\u0027\r\n        }\r\n        : {\r\n            text: \u0027text-blue-400\u0027,\r\n            bg: \u0027bg-blue-500/10\u0027,\r\n            border: \u0027border-blue-500/20\u0027,\r\n            gradient: \u0027from-blue-600 to-purple-600\u0027\r\n        };\r\n\r\n    return (\r\n        \u003cModal isOpen={isOpen} onClose={onClose} title={null} maxWidth=\"2xl\"\u003e\r\n            \u003cdiv className=\"relative overflow-hidden p-6 sm:p-8\"\u003e\r\n\r\n                \u003cdiv className=\"relative z-10 flex flex-col gap-8\"\u003e\r\n                    {/* Header: Icon, Title, Category */}\r\n                    \u003cdiv className=\"flex items-start gap-6\"\u003e\r\n                        \u003cdiv className={cn(\r\n                            \"w-20 h-20 rounded-3xl flex items-center justify-center shrink-0 shadow-2xl border-2\",\r\n                            \"bg-gradient-to-br\",\r\n                            isCompleted ? \"from-emerald-600 to-emerald-500 border-emerald-400/50\" : \"from-blue-600 to-purple-600 border-blue-400/50\"\r\n                        )}\u003e\r\n                            {/* Gloss removed */}\r\n                            \u003cIconRenderer icon={goal.icon} size={40} className=\"text-white drop-shadow-lg\" fallback={\u003cTarget className=\"w-10 h-10\" /\u003e} /\u003e\r\n                        \u003c/div\u003e\r\n\r\n                        \u003cdiv className=\"flex-1 min-w-0\"\u003e\r\n                            \u003cdiv className=\"flex items-center gap-2 mb-2\"\u003e\r\n                                \u003cspan className={cn(\r\n                                    \"px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border\",\r\n                                    colorScheme.bg, colorScheme.text, colorScheme.border\r\n                                )}\u003e\r\n                                    {goal.category || (isHabit ? \u0027HÃBITO\u0027 : \u0027META\u0027)}\r\n                                \u003c/span\u003e\r\n                                \u003cspan className=\"px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-800 text-slate-400 border border-slate-700/50\"\u003e\r\n                                    {isHabit ? \u0027Repetitivo\u0027 : isChecklist ? \u0027Sequencial\u0027 : \u0027Simples\u0027}\r\n                                \u003c/span\u003e\r\n                            \u003c/div\u003e\r\n                            \u003ch2 className=\"text-3xl font-black text-white leading-tight break-words\"\u003e\r\n                                {goal.title}\r\n                            \u003c/h2\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Progress Bar Display */}\r\n                    \u003cdiv className=\"bg-slate-900/20 rounded-3xl p-6 shadow-inner\"\u003e\r\n                        \u003cdiv className=\"flex justify-between items-end mb-4\"\u003e\r\n                            \u003cdiv className=\"space-y-1\"\u003e\r\n                                \u003cspan className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2\"\u003e\r\n                                    \u003cTrophy className=\"w-3 h-3\" /\u003e Progresso Geral\r\n                                \u003c/span\u003e\r\n                                \u003cdiv className=\"text-4xl font-black text-white\"\u003e\r\n                                    {Math.round(goal.progress)}%\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n                            {goal.deadline \u0026\u0026 (\r\n                                \u003cdiv className=\"text-right space-y-1\"\u003e\r\n                                    \u003cspan className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center justify-end gap-2\"\u003e\r\n                                        Prazo \u003cCalendar className=\"w-3 h-3\" /\u003e\r\n                                    \u003c/span\u003e\r\n                                    \u003cdiv className=\"text-sm font-bold text-slate-300\"\u003e\r\n                                        {format(new Date(goal.deadline), \u0027dd/MM/yyyy\u0027)}\r\n                                    \u003c/div\u003e\r\n                                \u003c/div\u003e\r\n                            )}\r\n                        \u003c/div\u003e\r\n                        \u003cdiv className=\"h-4 bg-slate-950/80 rounded-full p-1 border border-slate-800 shadow-inner\"\u003e\r\n                            \u003cdiv\r\n                                className={cn(\r\n                                    \"h-full rounded-full transition-all duration-1000 ease-out shadow-lg\",\r\n                                    \"bg-gradient-to-r\",\r\n                                    colorScheme.gradient\r\n                                )}\r\n                                style={{ width: `${goal.progress}%` }}\r\n                            \u003e\r\n\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Checklist Content */}\r\n                    {isChecklist \u0026\u0026 goal.checklist \u0026\u0026 (\r\n                        \u003cdiv className=\"space-y-4\"\u003e\r\n                            \u003ch3 className=\"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 px-1\"\u003e\r\n                                \u003cActivity className=\"w-4 h-4\" /\u003e Etapas do Projeto\r\n                            \u003c/h3\u003e\r\n                            \u003cdiv className=\"grid gap-3\"\u003e\r\n                                {[...(goal.checklist || [])].sort((a, b) =\u003e (a.order ?? 0) - (b.order ?? 0)).map((item, idx) =\u003e (\r\n                                    \u003cdiv\r\n                                        key={item.id}\r\n                                        onClick={() =\u003e toggleGoalItem(goal.id, item.id)}\r\n                                        className={cn(\r\n                                            \"group flex items-center gap-4 p-4 rounded-2xl border transition-all cursor-pointer\",\r\n                                            item.completed\r\n                                                ? \"bg-emerald-500/5 border-emerald-500/20 opacity-70\"\r\n                                                : \"bg-slate-900/60 hover:bg-slate-800/60 shadow-lg\"\r\n                                        )}\r\n                                    \u003e\r\n                                        \u003cdiv className={cn(\r\n                                            \"w-10 h-10 rounded-xl flex items-center justify-center transition-all\",\r\n                                            item.completed\r\n                                                ? \"bg-emerald-500 text-white\"\r\n                                                : \"bg-slate-800 text-slate-500 group-hover:bg-blue-500/20 group-hover:text-blue-400\"\r\n                                        )}\u003e\r\n                                            {item.completed ? \u003cCheckCircle2 className=\"w-6 h-6\" /\u003e : \u003cspan className=\"font-black text-lg\"\u003e{idx + 1}\u003c/span\u003e}\r\n                                        \u003c/div\u003e\r\n                                        \u003cdiv className=\"flex-1 min-w-0\"\u003e\r\n                                            \u003cdiv className={cn(\r\n                                                \"font-bold text-sm transition-all\",\r\n                                                item.completed ? \"text-slate-400 line-through\" : \"text-white\"\r\n                                            )}\u003e\r\n                                                {item.title}\r\n                                            \u003c/div\u003e\r\n                                            \u003cdiv className=\"flex items-center gap-3 mt-1\"\u003e\r\n                                                {(item.durationDays ?? 0) \u003e 0 \u0026\u0026 (\r\n                                                    \u003cspan className=\"text-[10px] font-bold text-slate-500 flex items-center gap-1\"\u003e\r\n                                                        \u003cClock className=\"w-2.5 h-2.5\" /\u003e {item.durationDays} dias\r\n                                                    \u003c/span\u003e\r\n                                                )}\r\n                                                {item.deadline \u0026\u0026 (\r\n                                                    \u003cspan className=\"text-[10px] font-bold text-blue-400 flex items-center gap-1\"\u003e\r\n                                                        \u003cCalendar className=\"w-2.5 h-2.5\" /\u003e {format(new Date(item.deadline), \u0027dd/MM\u0027)}\r\n                                                    \u003c/span\u003e\r\n                                                )}\r\n                                            \u003c/div\u003e\r\n                                        \u003c/div\u003e\r\n                                        \u003cArrowRight className={cn(\r\n                                            \"w-4 h-4 transition-all transform group-hover:translate-x-1\",\r\n                                            item.completed ? \"text-emerald-500/40\" : \"text-slate-600 group-hover:text-blue-400\"\r\n                                        )} /\u003e\r\n                                    \u003c/div\u003e\r\n                                ))}\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                    )}\r\n\r\n                    {/* Habit History Content */}\r\n                    {isHabit \u0026\u0026 (\r\n                        \u003cdiv className=\"space-y-4\"\u003e\r\n                            \u003ch3 className=\"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 px-1\"\u003e\r\n                                \u003cClock className=\"w-4 h-4\" /\u003e HistÃ³rico Recente\r\n                            \u003c/h3\u003e\r\n                            \u003cdiv className=\"bg-slate-900/20 rounded-3xl p-6\"\u003e\r\n                                \u003cdiv className=\"flex flex-wrap gap-2\"\u003e\r\n                                    {/* Show last 14 days logic */}\r\n                                    {Array.from({ length: 14 }).map((_, i) =\u003e {\r\n                                        const d = new Date();\r\n                                        d.setDate(d.getDate() - (13 - i));\r\n                                        const dateStr = format(d, \u0027yyyy-MM-dd\u0027);\r\n                                        const isDone = goal.completionHistory?.some(h =\u003e h.startsWith(dateStr));\r\n\r\n                                        return (\r\n                                            \u003cdiv\r\n                                                key={i}\r\n                                                className={cn(\r\n                                                    \"w-8 h-8 rounded-lg flex items-center justify-center text-[10px] font-bold transition-all\",\r\n                                                    isDone\r\n                                                        ? \"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20\"\r\n                                                        : \"bg-slate-800 text-slate-600 border border-slate-700/50\"\r\n                                                )}\r\n                                                title={format(d, \u0027dd/MM/yyyy\u0027)}\r\n                                            \u003e\r\n                                                {format(d, \u0027d\u0027)}\r\n                                            \u003c/div\u003e\r\n                                        );\r\n                                    })}\r\n                                \u003c/div\u003e\r\n                                \u003cp className=\"text-[10px] text-slate-500 mt-4 text-center\"\u003e\r\n                                    Visualizando os Ãºltimos 14 dias de consistÃªncia.\r\n                                \u003c/p\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                    )}\r\n\r\n                    {/* Stats or Additional Info */}\r\n                    \u003cdiv className=\"grid grid-cols-2 gap-4\"\u003e\r\n                        \u003cdiv className=\"bg-slate-900/20 rounded-2xl p-4\"\u003e\r\n                            \u003cspan className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest block mb-2\"\u003eInÃ­cio\u003c/span\u003e\r\n                            \u003cdiv className=\"text-white font-bold flex items-center gap-2\"\u003e\r\n                                \u003cCalendar className=\"w-4 h-4 text-blue-400\" /\u003e\r\n                                {goal.startDate ? format(new Date(goal.startDate), \u0027dd/MM/yyyy\u0027) : format(new Date(goal.createdAt), \u0027dd/MM/yyyy\u0027)}\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                        \u003cdiv className=\"bg-slate-900/20 rounded-2xl p-4\"\u003e\r\n                            \u003cspan className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest block mb-2\"\u003eEsforÃ§o Total\u003c/span\u003e\r\n                            \u003cdiv className=\"text-white font-bold flex items-center gap-2\"\u003e\r\n                                \u003cClock className=\"w-4 h-4 text-purple-400\" /\u003e\r\n                                {Math.floor((goal.timeSpent || 0) / 60)}h {(goal.timeSpent || 0) % 60}m\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Summary Timeline - Box de Resumo/HistÃ³rico */}\r\n                    \u003cdiv className=\"bg-slate-900/40 rounded-[2rem] overflow-hidden\"\u003e\r\n                        \u003cdiv className=\"p-6 sm:p-8 bg-slate-950/40\"\u003e\r\n                            \u003cSummaryTimeline\r\n                                summaries={goal.summaries || []}\r\n                                title=\"HistÃ³rico da Meta\"\r\n                                maxItems={5}\r\n                                showEmptyState={true}\r\n                            /\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Bottom Action */}\r\n                    \u003cbutton\r\n                        onClick={onClose}\r\n                        className=\"w-full h-14 bg-white/5 hover:bg-white/10 rounded-2xl font-black text-white uppercase tracking-widest transition-all shadow-xl active:scale-[0.98]\"\r\n                    \u003e\r\n                        Fechar Detalhes\r\n                    \u003c/button\u003e\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n        \u003c/Modal\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\goals\\components\\GoalTypeSelector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\goals\\components\\ScheduleFields.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\goals\\hooks\\useGoalFormLogic.ts","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\goals\\hooks\\useGoalFormLogic.ts:50:13\n  48 |     useEffect(() =\u003e {\n  49 |         if (isOpen) {\n\u003e 50 |             setErrors({});\n     |             ^^^^^^^^^ Avoid calling setState() directly within an effect\n  51 |             setTitle(goalToEdit?.title || \u0027\u0027);\n  52 |             setType(goalToEdit?.type || defaultType || \u0027simple\u0027);\n  53 |             setCategory(goalToEdit?.category || \u0027\u0027);","line":50,"column":13,"nodeType":null,"endLine":50,"endColumn":22},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\goals\\hooks\\useGoalFormLogic.ts:120:17\n  118 |\n  119 |             if (currentLastString !== newLastString) {\n\u003e 120 |                 setChecklist(updatedItems);\n      |                 ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  121 |                 if (finalDate) setDeadline(finalDate);\n  122 |             }\n  123 |         }","line":120,"column":17,"nodeType":null,"endLine":120,"endColumn":29},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: \u0027checklist\u0027, \u0027recalculateSchedule\u0027, and \u0027type\u0027. Either include them or remove the dependency array.","line":124,"column":8,"nodeType":"ArrayExpression","endLine":124,"endColumn":19,"suggestions":""}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from \u0027react\u0027;\r\nimport { useStudy } from \u0027../../../context/StudyContext\u0027;\r\nimport { format, addDays } from \u0027date-fns\u0027;\r\nimport type { Goal } from \u0027../../../types\u0027;\r\nimport { z } from \u0027zod\u0027;\r\n\r\ninterface UseGoalFormLogicProps {\r\n    isOpen: boolean;\r\n    onClose: () =\u003e void;\r\n    goalToEdit?: Goal;\r\n    defaultThemeId?: string;\r\n    defaultType?: \u0027simple\u0027 | \u0027checklist\u0027 | \u0027habit\u0027;\r\n}\r\n\r\nconst goalSchema = z.object({\r\n    title: z.string().min(3, \u0027O tÃ­tulo da meta deve ter pelo menos 3 caracteres\u0027),\r\n    startDate: z.string().min(1, \u0027A data de inÃ­cio Ã© obrigatÃ³ria\u0027),\r\n    deadline: z.string().min(1, \u0027O prazo Ã© obrigatÃ³rio\u0027),\r\n    type: z.enum([\u0027simple\u0027, \u0027checklist\u0027, \u0027habit\u0027])\r\n});\r\n\r\nexport const useGoalFormLogic = ({ isOpen, onClose, goalToEdit, defaultThemeId, defaultType }: UseGoalFormLogicProps) =\u003e {\r\n    const [title, setTitle] = useState(\u0027\u0027);\r\n    const [type, setType] = useState\u003c\u0027simple\u0027 | \u0027checklist\u0027 | \u0027habit\u0027\u003e(defaultType || \u0027simple\u0027);\r\n    const [category, setCategory] = useState(\u0027\u0027);\r\n    const [priority, setPriority] = useState\u003cany\u003e(goalToEdit?.priority || \u0027medium\u0027);\r\n    const [relatedThemeId, setRelatedThemeId] = useState(\u0027\u0027);\r\n    const [startDate, setStartDate] = useState(format(new Date(), \u0027yyyy-MM-dd\u0027));\r\n    const [deadline, setDeadline] = useState(\u0027\u0027);\r\n    const [recurrence, setRecurrence] = useState\u003cnumber[]\u003e([]);\r\n    const [icon, setIcon] = useState(\u0027\u0027);\r\n    const [color, setColor] = useState(\u0027\u0027);\r\n    const [imageUrl, setImageUrl] = useState(\u0027\u0027);\r\n    const [duration, setDuration] = useState(\u0027\u0027);\r\n    const [checklist, setChecklist] = useState\u003cany[]\u003e(goalToEdit?.checklist || []);\r\n\r\n    const [errors, setErrors] = useState\u003cRecord\u003cstring, string\u003e\u003e({});\r\n\r\n    const { addGoal, updateGoal, deleteGoal, themes, tasks, goals } = useStudy();\r\n\r\n    const usedColors = [\r\n        ...themes.map(t =\u003e t.color),\r\n        ...tasks.map(t =\u003e t.color),\r\n        ...goals.map(g =\u003e g.color)\r\n    ].filter(Boolean) as string[];\r\n\r\n    // Reset or Set values when goalToEdit changes\r\n    useEffect(() =\u003e {\r\n        if (isOpen) {\r\n            setErrors({});\r\n            setTitle(goalToEdit?.title || \u0027\u0027);\r\n            setType(goalToEdit?.type || defaultType || \u0027simple\u0027);\r\n            setCategory(goalToEdit?.category || \u0027\u0027);\r\n            setPriority(goalToEdit?.priority || \u0027medium\u0027);\r\n            setRelatedThemeId(goalToEdit?.relatedThemeId || defaultThemeId || \u0027\u0027);\r\n            setStartDate(goalToEdit?.startDate || format(new Date(), \u0027yyyy-MM-dd\u0027));\r\n            setDeadline(goalToEdit?.deadline || \u0027\u0027);\r\n            setRecurrence(goalToEdit?.recurrence || []);\r\n            setIcon(goalToEdit?.icon || \u0027\u0027);\r\n            setColor(goalToEdit?.color || \u0027\u0027);\r\n            setImageUrl(goalToEdit?.imageUrl || \u0027\u0027);\r\n            setDuration(goalToEdit?.durationMinutes?.toString() || \u0027\u0027);\r\n            setChecklist(goalToEdit?.checklist || []);\r\n\r\n            // If creating a NEW Habit, default recurrence to include Today\r\n            const isNewItem = !goalToEdit;\r\n            const currentType = (goalToEdit?.type || defaultType || \u0027simple\u0027);\r\n\r\n            if (isNewItem \u0026\u0026 currentType === \u0027habit\u0027) {\r\n                const todayDow = new Date().getDay();\r\n                setRecurrence([todayDow]);\r\n            }\r\n        }\r\n    }, [isOpen, goalToEdit, defaultThemeId, defaultType]);\r\n\r\n    // Helper to parse YYYY-MM-DD as Local Midnight (avoiding UTC timezone issues)\r\n    const parseLocalDate = (dateStr: string): Date =\u003e {\r\n        if (/^\\d{4}-\\d{2}-\\d{2}$/.test(dateStr)) {\r\n            const [y, m, d] = dateStr.split(\u0027-\u0027).map(Number);\r\n            return new Date(y, m - 1, d); // Local Midnight\r\n        }\r\n        return new Date(dateStr);\r\n    };\r\n\r\n    // Recalculate dates for all items based on sequence\r\n    const recalculateSchedule = (items: any[], baseStart: string) =\u003e {\r\n        let currentDate = parseLocalDate(baseStart);\r\n\r\n        const updatedItems = items.map((item, index) =\u003e {\r\n            const durationDays = parseInt(item.estimatedTime || \u00271\u0027) || 1;\r\n            const start = new Date(currentDate);\r\n            const end = addDays(start, durationDays);\r\n\r\n            const itemWithDates = {\r\n                ...item,\r\n                startDate: format(start, \u0027yyyy-MM-dd\u0027),\r\n                deadline: format(end, \u0027yyyy-MM-dd\u0027),\r\n                order: index\r\n            };\r\n\r\n            currentDate = end;\r\n            return itemWithDates;\r\n        });\r\n\r\n        const finalDate = updatedItems.length \u003e 0\r\n            ? updatedItems[updatedItems.length - 1].deadline\r\n            : \u0027\u0027;\r\n\r\n        return { updatedItems, finalDate };\r\n    };\r\n\r\n    // Update schedule when Start Date changes\r\n    useEffect(() =\u003e {\r\n        if (type === \u0027checklist\u0027 \u0026\u0026 checklist.length \u003e 0 \u0026\u0026 startDate) {\r\n            const { updatedItems, finalDate } = recalculateSchedule(checklist, startDate);\r\n            const currentLastString = JSON.stringify(checklist.map(i =\u003e i.startDate + i.deadline));\r\n            const newLastString = JSON.stringify(updatedItems.map(i =\u003e i.startDate + i.deadline));\r\n\r\n            if (currentLastString !== newLastString) {\r\n                setChecklist(updatedItems);\r\n                if (finalDate) setDeadline(finalDate);\r\n            }\r\n        }\r\n    }, [startDate]);\r\n\r\n    const handleSubmit = (e: React.FormEvent) =\u003e {\r\n        e.preventDefault();\r\n        setErrors({});\r\n\r\n        // Pre-calculation for Checklist type\r\n        let finalChecklist = checklist;\r\n        let finalDeadline = deadline;\r\n\r\n        if (type === \u0027checklist\u0027) {\r\n            const result = recalculateSchedule(checklist, startDate);\r\n            finalChecklist = result.updatedItems;\r\n            finalDeadline = result.finalDate || deadline;\r\n        }\r\n\r\n        // Validate\r\n        const result = goalSchema.safeParse({\r\n            title,\r\n            startDate,\r\n            deadline: finalDeadline,\r\n            type\r\n        });\r\n\r\n        if (!result.success) {\r\n            const newErrors: Record\u003cstring, string\u003e = {};\r\n            result.error.issues.forEach(err =\u003e {\r\n                if (err.path[0]) newErrors[err.path[0].toString()] = err.message;\r\n            });\r\n            setErrors(newErrors);\r\n            return;\r\n        }\r\n\r\n        const goalData = {\r\n            title,\r\n            type,\r\n            category,\r\n            priority,\r\n            startDate,\r\n            deadline: finalDeadline,\r\n            recurrence: type === \u0027habit\u0027 ? recurrence : undefined,\r\n            relatedThemeId: relatedThemeId || undefined,\r\n            icon: icon || undefined,\r\n            color: color || undefined,\r\n            imageUrl: imageUrl || undefined,\r\n            durationMinutes: duration ? parseInt(duration) : undefined,\r\n            checklist: type === \u0027checklist\u0027 ? finalChecklist : undefined\r\n        };\r\n\r\n        if (goalToEdit) {\r\n            updateGoal(goalToEdit.id, goalData);\r\n        } else {\r\n            addGoal(goalData);\r\n        }\r\n\r\n        onClose();\r\n    };\r\n\r\n    const handleDelete = () =\u003e {\r\n        if (goalToEdit \u0026\u0026 window.confirm(\u0027Tem certeza que deseja excluir esta meta?\u0027)) {\r\n            deleteGoal(goalToEdit.id);\r\n            onClose();\r\n        }\r\n    };\r\n\r\n    return {\r\n        // State\r\n        title, setTitle,\r\n        type, setType,\r\n        category, setCategory,\r\n        priority, setPriority,\r\n        relatedThemeId, setRelatedThemeId,\r\n        startDate, setStartDate,\r\n        deadline, setDeadline,\r\n        recurrence, setRecurrence,\r\n        icon, setIcon,\r\n        color, setColor,\r\n        imageUrl, setImageUrl,\r\n        duration, setDuration,\r\n        checklist, setChecklist,\r\n        errors, setErrors, // Export errors\r\n\r\n        // Derived\r\n        usedColors,\r\n        themes,\r\n\r\n        // Actions\r\n        handleSubmit,\r\n        handleDelete,\r\n        recalculateSchedule\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\integrations\\IntegrationsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\lists\\GoalList.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027useRef\u0027 is defined but never used.","line":1,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027CARD_HEIGHT\u0027 is assigned a value but never used.","line":44,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":44,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027MIN_COL_WIDTH\u0027 is assigned a value but never used.","line":45,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":45,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027GAP\u0027 is assigned a value but never used.","line":46,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":46,"endColumn":14}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useRef } from \u0027react\u0027;\r\nimport { useStudy } from \u0027../../context/StudyContext\u0027;\r\nimport { usePomodoroContext } from \u0027../../context/PomodoroContext\u0027;\r\nimport { useConfirm } from \u0027../../context/ConfirmContext\u0027;\r\nimport { Target, Pencil, Trash2, Clock, CheckCircle2, Play, Lock } from \u0027lucide-react\u0027;\r\nimport { format } from \u0027date-fns\u0027;\r\nimport { parseLocalDate } from \u0027../../utils/dateHelpers\u0027;\r\nimport { AddGoalModal } from \u0027../goals/components/AddGoalModal\u0027;\r\nimport { GoalDetailsModal } from \u0027../goals/components/GoalDetailsModal\u0027;\r\nimport type { Goal } from \u0027../../types\u0027;\r\nimport { cn } from \u0027../../lib/utils\u0027;\r\n\r\nexport const GoalList = () =\u003e {\r\n    const { goals, toggleGoal, deleteGoal, startFocus } = useStudy();\r\n    const { startFocusSession } = usePomodoroContext();\r\n    const { confirm } = useConfirm();\r\n    const [editingGoal, setEditingGoal] = useState\u003cGoal | undefined\u003e(undefined);\r\n    const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n    const [selectedGoalForDetails, setSelectedGoalForDetails] = useState\u003cGoal | null\u003e(null);\r\n    const [isDetailsModalOpen, setIsDetailsModalOpen] = useState(false);\r\n    const [selectedCategory, setSelectedCategory] = useState\u003cstring\u003e(\u0027Todos\u0027);\r\n\r\n    const handleCloseEditModal = () =\u003e {\r\n        setEditingGoal(undefined);\r\n        setIsEditModalOpen(false);\r\n    };\r\n\r\n    const handleEditGoal = (goal: Goal) =\u003e {\r\n        setEditingGoal(goal);\r\n        setIsEditModalOpen(true);\r\n    };\r\n\r\n    const handleOpenDetails = (goal: Goal) =\u003e {\r\n        setSelectedGoalForDetails(goal);\r\n        setIsDetailsModalOpen(true);\r\n    };\r\n\r\n    const handleCloseDetails = () =\u003e {\r\n        setSelectedGoalForDetails(null);\r\n        setIsDetailsModalOpen(false);\r\n    };\r\n\r\n    // Card dimensions - Premium layout\r\n    const CARD_HEIGHT = 340;\r\n    const MIN_COL_WIDTH = 340;\r\n    const GAP = 24;\r\n\r\n    const filteredGoals = goals.filter(g =\u003e {\r\n        if (g.relatedThemeId) return false;\r\n        const cat = g.category || (g.type === \u0027habit\u0027 ? \u0027HÃ¡bitos\u0027 : \u0027Geral\u0027);\r\n        return selectedCategory === \u0027Todos\u0027 || cat === selectedCategory;\r\n    });\r\n\r\n    const categories = [\u0027Todos\u0027, ...Array.from(new Set(goals.filter(g =\u003e !g.relatedThemeId).map(g =\u003e g.category || (g.type === \u0027habit\u0027 ? \u0027HÃ¡bitos\u0027 : \u0027Geral\u0027))))];\r\n\r\n    // Premium Goal Card PRO - Ultra Modern Design\r\n    const GoalCard = ({ goal }: { goal: Goal }) =\u003e {\r\n        const isCompleted = goal.progress === 100;\r\n\r\n        // Dynamic Color System - Unique colors per category (no repeats unless same category)\r\n        const getColors = () =\u003e {\r\n            if (isCompleted) return {\r\n                bg: \u0027bg-emerald-950/30\u0027,\r\n                border: \u0027border-emerald-500/30\u0027,\r\n                glow: \u0027shadow-[0_0_50px_-12px_rgba(16,185,129,0.3)]\u0027,\r\n                accent: \u0027text-emerald-400\u0027,\r\n                gradient: \u0027from-emerald-500 to-emerald-700\u0027,\r\n                button: \u0027bg-emerald-500 text-white shadow-emerald-500/40\u0027\r\n            };\r\n\r\n            // Pool of 12 distinct color themes\r\n            const colorPool = [\r\n                { // Blue\r\n                    bg: \u0027bg-blue-950/30\u0027, border: \u0027border-blue-500/30\u0027,\r\n                    glow: \u0027shadow-[0_0_40px_-10px_rgba(59,130,246,0.3)]\u0027, accent: \u0027text-blue-400\u0027,\r\n                    gradient: \u0027from-blue-500 to-indigo-600\u0027, button: \u0027bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-blue-500/40\u0027\r\n                },\r\n                { // Rose\r\n                    bg: \u0027bg-rose-950/30\u0027, border: \u0027border-rose-500/30\u0027,\r\n                    glow: \u0027shadow-[0_0_40px_-10px_rgba(244,63,94,0.3)]\u0027, accent: \u0027text-rose-400\u0027,\r\n                    gradient: \u0027from-rose-500 to-pink-600\u0027, button: \u0027bg-gradient-to-r from-rose-500 to-pink-600 text-white shadow-rose-500/40\u0027\r\n                },\r\n                { // Orange\r\n                    bg: \u0027bg-orange-950/30\u0027, border: \u0027border-orange-500/30\u0027,\r\n                    glow: \u0027shadow-[0_0_40px_-10px_rgba(249,115,22,0.3)]\u0027, accent: \u0027text-orange-400\u0027,\r\n                    gradient: \u0027from-orange-500 to-amber-600\u0027, button: \u0027bg-gradient-to-r from-orange-500 to-amber-600 text-white shadow-orange-500/40\u0027\r\n                },\r\n                { // Cyan\r\n                    bg: \u0027bg-cyan-950/30\u0027, border: \u0027border-cyan-500/30\u0027,\r\n                    glow: \u0027shadow-[0_0_40px_-10px_rgba(6,182,212,0.3)]\u0027, accent: \u0027text-cyan-400\u0027,\r\n                    gradient: \u0027from-cyan-500 to-teal-600\u0027, button: \u0027bg-gradient-to-r from-cyan-500 to-teal-600 text-white shadow-cyan-500/40\u0027\r\n                },\r\n                { // Violet\r\n                    bg: \u0027bg-violet-950/30\u0027, border: \u0027border-violet-500/30\u0027,\r\n                    glow: \u0027shadow-[0_0_40px_-10px_rgba(139,92,246,0.3)]\u0027, accent: \u0027text-violet-400\u0027,\r\n                    gradient: \u0027from-violet-500 to-purple-600\u0027, button: \u0027bg-gradient-to-r from-violet-500 to-purple-600 text-white shadow-violet-500/40\u0027\r\n                },\r\n                { // Lime\r\n                    bg: \u0027bg-lime-950/30\u0027, border: \u0027border-lime-500/30\u0027,\r\n                    glow: \u0027shadow-[0_0_40px_-10px_rgba(132,204,22,0.3)]\u0027, accent: \u0027text-lime-400\u0027,\r\n                    gradient: \u0027from-lime-500 to-green-600\u0027, button: \u0027bg-gradient-to-r from-lime-500 to-green-600 text-white shadow-lime-500/40\u0027\r\n                },\r\n                { // Amber\r\n                    bg: \u0027bg-amber-950/30\u0027, border: \u0027border-amber-500/30\u0027,\r\n                    glow: \u0027shadow-[0_0_40px_-10px_rgba(245,158,11,0.3)]\u0027, accent: \u0027text-amber-400\u0027,\r\n                    gradient: \u0027from-amber-500 to-yellow-600\u0027, button: \u0027bg-gradient-to-r from-amber-500 to-yellow-600 text-white shadow-amber-500/40\u0027\r\n                },\r\n                { // Pink\r\n                    bg: \u0027bg-pink-950/30\u0027, border: \u0027border-pink-500/30\u0027,\r\n                    glow: \u0027shadow-[0_0_40px_-10px_rgba(236,72,153,0.3)]\u0027, accent: \u0027text-pink-400\u0027,\r\n                    gradient: \u0027from-pink-500 to-fuchsia-600\u0027, button: \u0027bg-gradient-to-r from-pink-500 to-fuchsia-600 text-white shadow-pink-500/40\u0027\r\n                },\r\n                { // Teal\r\n                    bg: \u0027bg-teal-950/30\u0027, border: \u0027border-teal-500/30\u0027,\r\n                    glow: \u0027shadow-[0_0_40px_-10px_rgba(20,184,166,0.3)]\u0027, accent: \u0027text-teal-400\u0027,\r\n                    gradient: \u0027from-teal-500 to-emerald-600\u0027, button: \u0027bg-gradient-to-r from-teal-500 to-emerald-600 text-white shadow-teal-500/40\u0027\r\n                },\r\n                { // Indigo\r\n                    bg: \u0027bg-indigo-950/30\u0027, border: \u0027border-indigo-500/30\u0027,\r\n                    glow: \u0027shadow-[0_0_40px_-10px_rgba(99,102,241,0.3)]\u0027, accent: \u0027text-indigo-400\u0027,\r\n                    gradient: \u0027from-indigo-500 to-blue-600\u0027, button: \u0027bg-gradient-to-r from-indigo-500 to-blue-600 text-white shadow-indigo-500/40\u0027\r\n                },\r\n                { // Red\r\n                    bg: \u0027bg-red-950/30\u0027, border: \u0027border-red-500/30\u0027,\r\n                    glow: \u0027shadow-[0_0_40px_-10px_rgba(239,68,68,0.3)]\u0027, accent: \u0027text-red-400\u0027,\r\n                    gradient: \u0027from-red-500 to-rose-600\u0027, button: \u0027bg-gradient-to-r from-red-500 to-rose-600 text-white shadow-red-500/40\u0027\r\n                },\r\n                { // Sky\r\n                    bg: \u0027bg-sky-950/30\u0027, border: \u0027border-sky-500/30\u0027,\r\n                    glow: \u0027shadow-[0_0_40px_-10px_rgba(14,165,233,0.3)]\u0027, accent: \u0027text-sky-400\u0027,\r\n                    gradient: \u0027from-sky-500 to-blue-600\u0027, button: \u0027bg-gradient-to-r from-sky-500 to-blue-600 text-white shadow-sky-500/40\u0027\r\n                }\r\n            ];\r\n\r\n            // Hash function to get consistent index from category name\r\n            const hashCategory = (str: string): number =\u003e {\r\n                let hash = 0;\r\n                const s = str.toLowerCase().trim();\r\n                for (let i = 0; i \u003c s.length; i++) {\r\n                    const char = s.charCodeAt(i);\r\n                    hash = ((hash \u003c\u003c 5) - hash) + char;\r\n                    hash = hash \u0026 hash; // Convert to 32bit integer\r\n                }\r\n                return Math.abs(hash);\r\n            };\r\n\r\n            const category = goal.category || goal.type || \u0027geral\u0027;\r\n            const colorIndex = hashCategory(category) % colorPool.length;\r\n\r\n            return colorPool[colorIndex];\r\n        };\r\n\r\n        const theme = getColors();\r\n\r\n        // Date-based locking logic\r\n        const todayStr = format(new Date(), \u0027yyyy-MM-dd\u0027);\r\n        const isFuture = !!(goal.startDate \u0026\u0026 goal.startDate \u003e todayStr);\r\n        const lockReason = isFuture ? `Agendado para ${format(new Date(goal.startDate + \u0027T00:00:00\u0027), \u0027dd/MM\u0027)}` : \"\";\r\n\r\n        return (\r\n            \u003cdiv className=\"h-full relative\"\u003e\r\n                {/* Card Container */}\r\n                \u003cdiv\r\n                    className={cn(\r\n                        \"relative h-full flex flex-col rounded-[1.5rem] overflow-hidden transition-all duration-500\",\r\n                        \"border backdrop-blur-3xl\",\r\n                        theme.bg, theme.border, theme.glow\r\n                    )}\r\n                \u003e\r\n                    {/* Background Noise/Texture */}\r\n                    \u003cdiv className=\"absolute inset-0 bg-[url(\u0027https://grainy-gradients.vercel.app/noise.svg\u0027)] opacity-20 pointer-events-none mix-blend-overlay\" /\u003e\r\n\r\n\r\n\r\n\r\n\r\n                    {/* CONTENT AREA */}\r\n                    \u003cdiv className=\"flex-1 p-4 flex flex-col relative z-20\"\u003e\r\n\r\n                        {/* HEADER: Icon \u0026 Title */}\r\n                        \u003cdiv className=\"flex items-start gap-3 mb-2\"\u003e\r\n                            \u003cdiv className={cn(\r\n                                \"w-10 h-10 rounded-lg flex items-center justify-center shrink-0 shadow-md relative overflow-hidden\",\r\n                                \"bg-gradient-to-br border border-slate-800/50\",\r\n                                theme.gradient\r\n                            )}\u003e\r\n                                {/* Inner Shine */}\r\n                                \u003cdiv className=\"absolute inset-0 bg-gradient-to-tr from-transparent via-white/20 to-transparent opacity-60\" /\u003e\r\n                                \u003cdiv className=\"relative z-10 text-lg\"\u003e\r\n                                    {goal.icon || \u003cTarget className=\"w-5 h-5 text-white\" /\u003e}\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n\r\n                            \u003cdiv className=\"flex-1 min-w-0\"\u003e\r\n                                \u003ch3 className=\"text-sm font-bold text-white leading-tight tracking-tight line-clamp-1 mb-1\"\u003e\r\n                                    {goal.title}\r\n                                \u003c/h3\u003e\r\n                                {/* Meta Tags */}\r\n                                \u003cdiv className=\"flex flex-wrap items-center gap-1.5\"\u003e\r\n                                    \u003cspan className={cn(\r\n                                        \"text-[9px] font-bold uppercase tracking-wide px-2 py-0.5 rounded border bg-slate-800/50\",\r\n                                        theme.border, theme.accent\r\n                                    )}\u003e\r\n                                        {goal.category || (goal.type === \u0027habit\u0027 ? \u0027HÃ¡bito\u0027 : \u0027Meta\u0027)}\r\n                                    \u003c/span\u003e\r\n                                    {goal.deadline \u0026\u0026 (\r\n                                        \u003cspan className=\"text-[10px] font-medium text-slate-400 flex items-center gap-1\"\u003e\r\n                                            \u003cClock className=\"w-3 h-3\" /\u003e\r\n                                            {format(parseLocalDate(goal.deadline), \u0027dd/MM\u0027)}\r\n                                        \u003c/span\u003e\r\n                                    )}\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n\r\n                            {/* ACTIONS - Static \u0026 Organized */}\r\n                            \u003cdiv className=\"flex items-center gap-1.5 ml-auto shrink-0 self-start\"\u003e\r\n                                \u003cbutton\r\n                                    onClick={(e) =\u003e { e.stopPropagation(); handleEditGoal(goal); }}\r\n                                    className=\"w-7 h-7 flex items-center justify-center rounded-md bg-slate-800/80 hover:bg-slate-700 text-slate-300 hover:text-white border border-slate-600/50 transition-colors duration-300\"\r\n                                    title=\"Editar\"\r\n                                \u003e\r\n                                    \u003cPencil className=\"w-3 h-3\" /\u003e\r\n                                \u003c/button\u003e\r\n                                \u003cbutton\r\n                                    onClick={async (e) =\u003e {\r\n                                        e.stopPropagation();\r\n                                        const confirmed = await confirm({\r\n                                            title: \u0027Excluir Meta\u0027,\r\n                                            message: `Excluir \"${goal.title}\"?`,\r\n                                            confirmText: \u0027Excluir\u0027,\r\n                                            isDangerous: true\r\n                                        });\r\n                                        if (confirmed) deleteGoal(goal.id);\r\n                                    }}\r\n                                    className=\"w-7 h-7 flex items-center justify-center rounded-md bg-slate-800/80 hover:bg-red-900/50 text-slate-300 hover:text-red-400 border border-slate-600/50 transition-colors duration-300\"\r\n                                    title=\"Excluir\"\r\n                                \u003e\r\n                                    \u003cTrash2 className=\"w-3 h-3\" /\u003e\r\n                                \u003c/button\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n\r\n                        {/* MIDDLE: Progress */}\r\n                        \u003cdiv className=\"mt-auto space-y-2\"\u003e\r\n                            \u003cdiv className=\"flex justify-between items-end\"\u003e\r\n                                \u003cspan className=\"text-[10px] font-semibold text-slate-500 uppercase tracking-wider\"\u003eProgresso\u003c/span\u003e\r\n                                \u003cdiv className=\"flex items-baseline gap-0.5\"\u003e\r\n                                    \u003cspan className={cn(\"text-2xl font-black tracking-tighter\", theme.accent)}\u003e\r\n                                        {goal.progress}\r\n                                    \u003c/span\u003e\r\n                                    \u003cspan className=\"text-sm font-bold text-slate-600\"\u003e%\u003c/span\u003e\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n\r\n                            {/* Ultra Bar */}\r\n                            \u003cdiv className=\"h-4 bg-slate-950/50 rounded-full p-1 shadow-inner border border-slate-800/50\"\u003e\r\n                                \u003cdiv\r\n                                    className={cn(\r\n                                        \"h-full rounded-full relative overflow-hidden transition-all duration-1000 ease-out\",\r\n                                        theme.gradient\r\n                                    )}\r\n                                    style={{ width: `${Math.max(goal.progress, 5)}%` }} // Min width for visibility\r\n                                \u003e\r\n                                    \u003cdiv className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-[shimmer_8s_infinite]\" /\u003e\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n\r\n                        {/* BOTTOM: Actions */}\r\n                        \u003cdiv className=\"mt-3 flex items-center gap-2\"\u003e\r\n                            \u003cbutton\r\n                                onClick={(e) =\u003e {\r\n                                    e.stopPropagation();\r\n                                    if (goal.type === \u0027habit\u0027) {\r\n                                        const isDone = goal.completionHistory?.some((d: string) =\u003e d.startsWith(format(new Date(), \u0027yyyy-MM-dd\u0027)));\r\n                                        if (!isDone) toggleGoal(goal.id);\r\n                                    } else {\r\n                                        handleOpenDetails(goal);\r\n                                    }\r\n                                }}\r\n                                className={cn(\r\n                                    \"flex-1 rounded-lg font-bold text-[10px] uppercase tracking-wide transition-all active:scale-95 border border-slate-800/50 hover:bg-slate-800/50 hover:border-slate-800/50 text-slate-300 flex items-center justify-center gap-1.5 h-10\",\r\n                                    goal.type === \u0027habit\u0027 ? \u0027bg-slate-800/50\u0027 : \u0027bg-transparent\u0027\r\n                                )}\r\n                            \u003e\r\n                                {goal.type === \u0027habit\u0027 ? (\r\n                                    \u003c\u003e\r\n                                        {isFuture ? \u003cLock className=\"w-4 h-4\" /\u003e : \u003cCheckCircle2 className=\"w-4 h-4\" /\u003e}\r\n                                        \u003cspan\u003e{isFuture ? \"Bloqueado\" : \"Concluir\"}\u003c/span\u003e\r\n                                    \u003c/\u003e\r\n                                ) : \u0027Detalhes\u0027}\r\n                            \u003c/button\u003e\r\n\r\n                            \u003cbutton\r\n                                onClick={(e) =\u003e {\r\n                                    e.stopPropagation();\r\n                                    if (isFuture) return;\r\n                                    const duration = goal.durationMinutes || 25;\r\n                                    startFocus(goal.id, \u0027goal\u0027, goal.title, duration);\r\n                                    startFocusSession(goal.id, duration);\r\n                                }}\r\n                                disabled={isFuture}\r\n                                className={cn(\r\n                                    \"w-10 h-10 rounded-lg flex items-center justify-center shadow-lg transition-all active:scale-95\",\r\n                                    isFuture\r\n                                        ? \"bg-slate-800 border border-slate-700 text-slate-600 cursor-not-allowed\"\r\n                                        : theme.button\r\n                                )}\r\n                                title={isFuture ? lockReason : \"Iniciar Foco\"}\r\n                            \u003e\r\n                                {isFuture ? \u003cLock className=\"w-4 h-4\" /\u003e : \u003cPlay className=\"w-4 h-4 fill-current ml-0.5\" /\u003e}\r\n                            \u003c/button\u003e\r\n                        \u003c/div\u003e\r\n\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n        );\r\n    };\r\n\r\n    return (\r\n        \u003cdiv className=\"space-y-8 w-full pt-8 relative pb-20\"\u003e\r\n            {/* Ambient Background Glows */}\r\n            \u003cdiv className=\"absolute top-[-20%] left-[-10%] w-[50%] h-[50%] bg-blue-500/10 rounded-full blur-[120px] pointer-events-none\" /\u003e\r\n            \u003cdiv className=\"absolute bottom-[-20%] right-[-10%] w-[50%] h-[50%] bg-emerald-500/10 rounded-full blur-[120px] pointer-events-none\" /\u003e\r\n\r\n            {/* Header Section */}\r\n            \u003cdiv className=\"flex flex-col md:flex-row md:items-end justify-between gap-6 px-6 relative z-10\"\u003e\r\n                \u003cdiv className=\"space-y-2\"\u003e\r\n                    \u003ch2 className=\"text-4xl md:text-5xl font-black text-white tracking-tighter text-glow drop-shadow-xl\"\u003eMinhas Metas\u003c/h2\u003e\r\n                    \u003cp className=\"text-slate-400 text-sm font-medium tracking-wide\"\u003eTransforme seus sonhos em realidade.\u003c/p\u003e\r\n                \u003c/div\u003e\r\n\r\n                \u003cbutton\r\n                    onClick={() =\u003e setIsEditModalOpen(true)}\r\n                    className=\"px-8 py-4 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400 text-white rounded-2xl font-bold shadow-xl shadow-blue-900/30 active:scale-95 transition-all flex items-center gap-3 ring-1 ring-white/10 backdrop-blur-md\"\r\n                \u003e\r\n                    \u003cspan className=\"text-2xl leading-none font-light pb-0.5\"\u003e+\u003c/span\u003e\r\n                    Nova Meta\r\n                \u003c/button\u003e\r\n            \u003c/div\u003e\r\n\r\n            {/* Filters */}\r\n            {goals.length \u003e 0 \u0026\u0026 (\r\n                \u003cdiv className=\"flex items-center gap-3 overflow-x-auto pb-4 scrollbar-hide px-6 relative z-10\"\u003e\r\n                    {categories.map(cat =\u003e (\r\n                        \u003cbutton\r\n                            key={cat}\r\n                            onClick={() =\u003e setSelectedCategory(cat)}\r\n                            className={cn(\r\n                                \"px-6 py-3 rounded-2xl text-xs font-bold uppercase tracking-wider transition-all border backdrop-blur-md shadow-lg\",\r\n                                selectedCategory === cat\r\n                                    ? \"bg-blue-600/20 border-blue-500/50 text-blue-200 shadow-blue-900/20 active-glow\"\r\n                                    : \"bg-slate-900/40 border-slate-800/50 text-slate-500 hover:bg-slate-800/40 hover:text-slate-300\"\r\n                            )}\r\n                        \u003e\r\n                            {cat}\r\n                        \u003c/button\u003e\r\n                    ))}\r\n                \u003c/div\u003e\r\n            )}\r\n\r\n            \u003cdiv className=\"relative px-2 z-10\"\u003e\r\n                {filteredGoals.length === 0 ? (\r\n                    \u003cdiv className=\"flex flex-col items-center justify-center h-[500px] text-center px-4\"\u003e\r\n                        \u003cdiv className=\"w-32 h-32 bg-slate-900/30 backdrop-blur-md rounded-full flex items-center justify-center mb-8 ring-1 ring-white/10 shadow-2xl relative overflow-hidden\"\u003e\r\n                            \u003cdiv className=\"absolute inset-0 bg-gradient-to-tr from-white/5 to-transparent skew-x-12 opacity-50\" /\u003e\r\n                            \u003cTarget className=\"w-12 h-12 text-slate-600 drop-shadow-lg\" /\u003e\r\n                        \u003c/div\u003e\r\n                        \u003ch3 className=\"text-3xl font-bold text-white mb-3 text-glow\"\u003eNenhuma meta encontrada\u003c/h3\u003e\r\n                        \u003cp className=\"text-slate-400 max-w-sm mb-10 leading-relaxed\"\u003eNÃ£o encontramos metas nesta categoria. Que tal criar algo novo?\u003c/p\u003e\r\n                        \u003cbutton onClick={() =\u003e setIsEditModalOpen(true)} className=\"px-10 py-4 bg-slate-800/50 hover:bg-white/10 border border-slate-800/50 text-white rounded-2xl font-bold transition-all shadow-lg backdrop-blur-sm\"\u003e\r\n                            Criar Nova Meta\r\n                        \u003c/button\u003e\r\n                    \u003c/div\u003e\r\n                ) : (\r\n                    \u003cdiv className=\"p-4\"\u003e\r\n                        \u003cdiv className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\"\u003e\r\n                            {filteredGoals.map((goal) =\u003e (\r\n                                \u003cdiv key={goal.id} className=\"h-[200px]\"\u003e\r\n                                    \u003cGoalCard goal={goal} /\u003e\r\n                                \u003c/div\u003e\r\n                            ))}\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n                )}\r\n            \u003c/div\u003e\r\n\r\n            \u003cAddGoalModal\r\n                isOpen={isEditModalOpen}\r\n                onClose={handleCloseEditModal}\r\n                goalToEdit={editingGoal}\r\n            /\u003e\r\n\r\n            \u003cGoalDetailsModal\r\n                isOpen={isDetailsModalOpen}\r\n                onClose={handleCloseDetails}\r\n                goal={selectedGoalForDetails}\r\n            /\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\lists\\ProjectList.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027useEffect\u0027 is defined but never used.","line":1,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Filter\u0027 is defined but never used.","line":2,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027LayoutList\u0027 is defined but never used.","line":2,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027setCategoryFilter\u0027 is assigned a value but never used.","line":12,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":45}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from \u0027react\u0027;\r\nimport { Plus, Filter, LayoutGrid, LayoutList } from \u0027lucide-react\u0027;\r\nimport { useProjectContext } from \u0027../../context/ProjectProvider\u0027;\r\nimport { ProjectCard } from \u0027../projects/components/ProjectCard\u0027;\r\nimport { AddProjectModal } from \u0027../projects/components/AddProjectModal\u0027;\r\nimport type { Project } from \u0027../../types\u0027;\r\n\r\nexport const ProjectList = () =\u003e {\r\n    const { projects } = useProjectContext();\r\n    const [isAddModalOpen, setIsAddModalOpen] = useState(false);\r\n    const [statusFilter, setStatusFilter] = useState\u003cProject[\u0027status\u0027] | \u0027all\u0027\u003e(\u0027all\u0027);\r\n    const [categoryFilter, setCategoryFilter] = useState\u003cProject[\u0027category\u0027] | \u0027all\u0027\u003e(\u0027all\u0027);\r\n\r\n    const filteredProjects = projects.filter(project =\u003e {\r\n        if (statusFilter !== \u0027all\u0027 \u0026\u0026 project.status !== statusFilter) return false;\r\n        if (categoryFilter !== \u0027all\u0027 \u0026\u0026 project.category !== categoryFilter) return false;\r\n        return true;\r\n    });\r\n\r\n    const statusCounts = {\r\n        all: projects.length,\r\n        planning: projects.filter(p =\u003e p.status === \u0027planning\u0027).length,\r\n        active: projects.filter(p =\u003e p.status === \u0027active\u0027).length,\r\n        paused: projects.filter(p =\u003e p.status === \u0027paused\u0027).length,\r\n        completed: projects.filter(p =\u003e p.status === \u0027completed\u0027).length,\r\n    };\r\n\r\n    return (\r\n        \u003cdiv className=\"space-y-6 w-full pt-8 relative pb-20 fade-in\"\u003e\r\n            {/* Animated Background */}\r\n            \u003cdiv className=\"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none -z-10\"\u003e\r\n                \u003cdiv className=\"absolute top-20 left-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-[100px] animate-pulse\" /\u003e\r\n                \u003cdiv className=\"absolute bottom-20 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-[100px] animate-pulse delay-1000\" /\u003e\r\n            \u003c/div\u003e\r\n\r\n            {/* Header */}\r\n            \u003cdiv className=\"flex items-center justify-between\"\u003e\r\n                \u003cdiv\u003e\r\n                    \u003ch1 className=\"text-3xl font-black text-white tracking-tight\"\u003e\r\n                        Projetos\r\n                    \u003c/h1\u003e\r\n                    \u003cp className=\"text-slate-400 mt-1\"\u003e\r\n                        Gerencie seus projetos profissionais e pessoais\r\n                    \u003c/p\u003e\r\n                \u003c/div\u003e\r\n                \u003cbutton\r\n                    onClick={() =\u003e setIsAddModalOpen(true)}\r\n                    className=\"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold transition-all flex items-center gap-2 shadow-lg shadow-blue-500/20\"\r\n                \u003e\r\n                    \u003cPlus className=\"w-4 h-4\" /\u003e\r\n                    Novo Projeto\r\n                \u003c/button\u003e\r\n            \u003c/div\u003e\r\n\r\n            {/* Filters */}\r\n            \u003cdiv className=\"flex flex-wrap gap-2\"\u003e\r\n                {/* Status Filters */}\r\n                {([\u0027all\u0027, \u0027planning\u0027, \u0027active\u0027, \u0027paused\u0027, \u0027completed\u0027] as const).map(status =\u003e {\r\n                    const labels = {\r\n                        all: \u0027Todos\u0027,\r\n                        planning: \u0027Planejando\u0027,\r\n                        active: \u0027Ativos\u0027,\r\n                        paused: \u0027Pausados\u0027,\r\n                        completed: \u0027ConcluÃ­dos\u0027,\r\n                    };\r\n\r\n                    const colors = {\r\n                        all: \u0027bg-slate-500/20 text-slate-300 border-slate-500/30\u0027,\r\n                        planning: \u0027bg-slate-500/20 text-slate-300 border-slate-500/30\u0027,\r\n                        active: \u0027bg-blue-500/20 text-blue-300 border-blue-500/30\u0027,\r\n                        paused: \u0027bg-amber-500/20 text-amber-300 border-amber-500/30\u0027,\r\n                        completed: \u0027bg-emerald-500/20 text-emerald-300 border-emerald-500/30\u0027,\r\n                    };\r\n\r\n                    return (\r\n                        \u003cbutton\r\n                            key={status}\r\n                            onClick={() =\u003e setStatusFilter(status)}\r\n                            className={`px-4 py-2 rounded-lg font-medium text-sm border transition-all ${statusFilter === status\r\n                                    ? colors[status] + \u0027 ring-2 ring-white/20\u0027\r\n                                    : \u0027bg-slate-900/50 text-slate-400 border-slate-700 hover:bg-slate-800\u0027\r\n                                }`}\r\n                        \u003e\r\n                            {labels[status]} ({statusCounts[status]})\r\n                        \u003c/button\u003e\r\n                    );\r\n                })}\r\n            \u003c/div\u003e\r\n\r\n            {/* Projects Grid */}\r\n            {filteredProjects.length === 0 ? (\r\n                \u003cdiv className=\"flex flex-col items-center justify-center h-[400px] text-center\"\u003e\r\n                    \u003cdiv className=\"w-24 h-24 bg-slate-900/30 backdrop-blur-md rounded-full flex items-center justify-center mb-6 ring-1 ring-white/10\"\u003e\r\n                        \u003cLayoutGrid className=\"w-10 h-10 text-slate-600\" /\u003e\r\n                    \u003c/div\u003e\r\n                    \u003ch3 className=\"text-xl font-bold text-white mb-2\"\u003e\r\n                        {statusFilter === \u0027all\u0027 ? \u0027Nenhum projeto ainda\u0027 : `Nenhum projeto ${statusFilter === \u0027planning\u0027 ? \u0027em planejamento\u0027 : statusFilter}`}\r\n                    \u003c/h3\u003e\r\n                    \u003cp className=\"text-slate-400 max-w-sm mb-6\"\u003e\r\n                        {statusFilter === \u0027all\u0027\r\n                            ? \u0027Crie seu primeiro projeto para comeÃ§ar a organizar suas entregas\u0027\r\n                            : \u0027Experimente filtrar por outro status\u0027}\r\n                    \u003c/p\u003e\r\n                    {statusFilter === \u0027all\u0027 \u0026\u0026 (\r\n                        \u003cbutton\r\n                            onClick={() =\u003e setIsAddModalOpen(true)}\r\n                            className=\"bg-blue-600 hover:bg-blue-500 text-white px-6 py-3 rounded-lg font-bold transition-all flex items-center gap-2\"\r\n                        \u003e\r\n                            \u003cPlus className=\"w-5 h-5\" /\u003e\r\n                            Criar Primeiro Projeto\r\n                        \u003c/button\u003e\r\n                    )}\r\n                \u003c/div\u003e\r\n            ) : (\r\n                \u003cdiv className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\"\u003e\r\n                    {filteredProjects.map(project =\u003e (\r\n                        \u003cProjectCard\r\n                            key={project.id}\r\n                            project={project}\r\n                            onClick={() =\u003e {\r\n                                // TODO: Open details modal\r\n                                console.log(\u0027Open project:\u0027, project.id);\r\n                            }}\r\n                        /\u003e\r\n                    ))}\r\n                \u003c/div\u003e\r\n            )}\r\n\r\n            {/* Add Project Modal */}\r\n            \u003cAddProjectModal\r\n                isOpen={isAddModalOpen}\r\n                onClose={() =\u003e setIsAddModalOpen(false)}\r\n            /\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\lists\\TaskList.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027toggleTask\u0027 is assigned a value but never used.","line":14,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027toggleGoalItem\u0027 is assigned a value but never used.","line":14,"column":63,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":77},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027startAudio\u0027 is assigned a value but never used.","line":16,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027getItemSize\u0027 is assigned a value but never used.","line":67,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":67,"endColumn":22}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useRef, useMemo, useEffect } from \u0027react\u0027;\r\nimport { useStudy } from \u0027../../context/StudyContext\u0027;\r\nimport { usePomodoroContext } from \u0027../../context/PomodoroContext\u0027;\r\nimport { useAudio } from \u0027../../context/AudioContext\u0027;\r\nimport { useConfirm } from \u0027../../context/ConfirmContext\u0027;\r\nimport { CheckSquare, Pencil, Trash2, Play, Lock, Target, Loader2 } from \u0027lucide-react\u0027;\r\nimport { format } from \u0027date-fns\u0027;\r\nimport { parseLocalDate } from \u0027../../utils/dateHelpers\u0027;\r\nimport { AddTaskModal } from \u0027../forms/AddTaskModal\u0027;\r\nimport { TaskDetailsModal } from \u0027../tasks/components/TaskDetailsModal\u0027;\r\nimport type { Task } from \u0027../../types\u0027;\r\n\r\nexport const TaskList = () =\u003e {\r\n    const { tasks, toggleTask, deleteTask, startFocus, goals, toggleGoalItem } = useStudy();\r\n    const { startFocusSession, linkedItemId, isActive } = usePomodoroContext();\r\n    const { startAudio } = useAudio();\r\n    const { confirm } = useConfirm();\r\n    const [editingTask, setEditingTask] = useState\u003cTask | undefined\u003e(undefined);\r\n    const [isAddModalOpen, setIsAddModalOpen] = useState(false);\r\n    const [selectedDetailedTask, setSelectedDetailedTask] = useState\u003cTask | null\u003e(null);\r\n\r\n    // We need a ref to the list to reset cache when tasks change (if using VariableSizeList with index-based size)\r\n    const listRef = useRef\u003cany\u003e(null);\r\n\r\n    // Sort tasks: Newest first (by createdAt)\r\n    const sortedItems = useMemo(() =\u003e {\r\n        // Flatten Goal Steps\r\n        const steps = goals.flatMap(g =\u003e\r\n            (g.checklist || []).map(item =\u003e ({\r\n                id: item.id,\r\n                title: `${item.title} (${g.title})`, // Contextual title\r\n                status: (item.completed ? \u0027completed\u0027 : \u0027pending\u0027) as \u0027completed\u0027 | \u0027pending\u0027,\r\n                createdAt: g.createdAt || 0, // Fallback to goal creation\r\n                type: \u0027step\u0027, // Internal type\r\n                goalId: g.id, // Reference to parent\r\n                priority: g.priority,\r\n                imageUrl: undefined as string | undefined, // Steps don\u0027t have images usually\r\n                color: g.color, // Inherit goal color\r\n                date: item.deadline, // Map deadline to date\r\n                startDate: undefined as string | undefined,\r\n                endDate: undefined as string | undefined,\r\n                durationMinutes: 25, // Default duration\r\n                completionHistory: [] as string[]\r\n            }))\r\n        );\r\n\r\n        const all = [...tasks, ...steps];\r\n\r\n        return all.sort((a, b) =\u003e {\r\n            // Sort by status (pending first) then by date\r\n            if (a.status === \u0027pending\u0027 \u0026\u0026 b.status === \u0027completed\u0027) return -1;\r\n            if (a.status === \u0027completed\u0027 \u0026\u0026 b.status === \u0027pending\u0027) return 1;\r\n\r\n            const timeA = a.createdAt || 0;\r\n            const timeB = b.createdAt || 0;\r\n            return timeB - timeA;\r\n        });\r\n    }, [tasks, goals]);\r\n\r\n    // Reset list cache when tasks change to ensure correct heights map\r\n    useEffect(() =\u003e {\r\n        if (listRef.current) {\r\n            listRef.current.resetAfterIndex(0);\r\n        }\r\n    }, [sortedItems]);\r\n\r\n    const getItemSize = (index: number) =\u003e {\r\n        const item = sortedItems[index];\r\n        if (!item) return 0;\r\n        // Base height ~110px + Image height ~96px (h-24) + margin\r\n        return item.imageUrl ? 230 : 130;\r\n    };\r\n\r\n    return (\r\n        \u003cdiv className=\"space-y-6 h-full flex flex-col pt-6 overflow-hidden\"\u003e\r\n            \u003cdiv className=\"flex items-center justify-between shrink-0 mb-4 px-4\"\u003e\r\n                \u003ch2 className=\"text-2xl font-bold text-slate-100\"\u003eMinhas Tarefas\u003c/h2\u003e\r\n                \u003cbutton\r\n                    onClick={() =\u003e setIsAddModalOpen(true)}\r\n                    className=\"group relative px-4 py-2 bg-slate-900 rounded-lg font-bold text-white shadow-lg hover:scale-[1.02] active:scale-95 transition-all duration-300 overflow-hidden ring-1 ring-white/10\"\r\n                \u003e\r\n                    \u003cdiv className=\"absolute inset-0 bg-gradient-to-r from-blue-600 to-indigo-600 opacity-80 group-hover:opacity-100 transition-opacity\" /\u003e\r\n                    \u003cspan className=\"relative flex items-center gap-1.5 text-sm\"\u003e\r\n                        \u003cspan className=\"text-lg leading-none font-light mb-0.5\"\u003e+\u003c/span\u003e\r\n                        Nova Tarefa\r\n                    \u003c/span\u003e\r\n                \u003c/button\u003e\r\n            \u003c/div\u003e\r\n\r\n            \u003cdiv className=\"flex-1 min-h-0 relative px-4\"\u003e\r\n                {sortedItems.length === 0 ? (\r\n                    \u003cdiv className=\"glass-card text-center py-20 rounded-3xl relative overflow-hidden group border border-slate-800/50 border-dashed bg-slate-900/30\"\u003e\r\n                        \u003cdiv className=\"relative z-10\"\u003e\r\n                            \u003cdiv className=\"w-16 h-16 bg-slate-800/50 rounded-full flex items-center justify-center mx-auto mb-4 ring-1 ring-white/10 shadow-xl shadow-black/20 group-hover:scale-110 transition-transform duration-500\"\u003e\r\n                                \u003cCheckSquare className=\"w-8 h-8 text-slate-500 group-hover:text-blue-400 transition-colors\" /\u003e\r\n                            \u003c/div\u003e\r\n                            \u003ch3 className=\"text-xl font-bold text-white mb-2\"\u003eTudo em dia!\u003c/h3\u003e\r\n                            \u003cp className=\"text-slate-500 max-w-xs mx-auto mb-6 text-sm\"\u003eNenhuma tarefa pendente. Aproveite para adicionar novos objetivos.\u003c/p\u003e\r\n                            \u003cbutton\r\n                                onClick={() =\u003e setIsAddModalOpen(true)}\r\n                                className=\"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white rounded-lg font-bold transition-all hover:scale-105 shadow-lg shadow-blue-500/25 ring-1 ring-white/20 text-sm\"\r\n                            \u003e\r\n                                Criar Primeira Tarefa\r\n                            \u003c/button\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n                ) : (\r\n                    \u003cdiv className=\"h-full overflow-y-auto custom-scrollbar pb-20\"\u003e\r\n                        {sortedItems.map((item, index) =\u003e {\r\n                            const isLinked = linkedItemId === item.id;\r\n                            const isLocked = isLinked \u0026\u0026 isActive;\r\n                            const isStep = item.type === \u0027step\u0027;\r\n\r\n                            // Date-based locking\r\n                            const todayStr = format(new Date(), \u0027yyyy-MM-dd\u0027);\r\n                            const itemDate = item.date || ((\u0027startDate\u0027 in item \u0026\u0026 item.startDate) ? (item.startDate as string).split(\u0027T\u0027)[0] : undefined);\r\n                            const isFuture = !!(itemDate \u0026\u0026 itemDate \u003e todayStr);\r\n\r\n                            // Find first pending task\r\n                            const firstPendingIndex = sortedItems.findIndex(t =\u003e t.status === \u0027pending\u0027);\r\n                            const isFirstPending = index === firstPendingIndex \u0026\u0026 item.status === \u0027pending\u0027;\r\n                            const isBlocked = !!((item.status === \u0027pending\u0027 \u0026\u0026 !isFirstPending) || isFuture);\r\n                            const lockReason = isFuture ? `Agendado para ${format(parseLocalDate(itemDate || todayStr), \u0027dd/MM\u0027)}` : \"Complete a tarefa anterior primeiro\";\r\n\r\n                            return (\r\n                                \u003cdiv key={item.id} style={{ height: item.imageUrl ? 230 : 130, marginBottom: 12 }} className=\"px-1 pr-4\"\u003e\r\n                                    \u003cdiv\r\n                                        style={{ \u0027--hover-color\u0027: item.color || \u0027#3b82f6\u0027 } as React.CSSProperties}\r\n                                        className={`h-full border rounded-xl overflow-hidden transition-colors transition-shadow duration-300 group flex flex-col ${isBlocked\r\n                                            ? \u0027bg-slate-900/30 border-slate-800/30 opacity-60\u0027\r\n                                            : isLinked\r\n                                                ? \u0027bg-slate-900 border-rose-500/50 shadow-lg shadow-rose-900/10\u0027\r\n                                                : \u0027bg-slate-900 border-slate-800 hover:border-[var(--hover-color)]\u0027\r\n                                            }`}\r\n                                    \u003e\r\n                                        {item.imageUrl \u0026\u0026 (\r\n                                            \u003cdiv className=\"h-24 w-full relative bg-slate-800 shrink-0\"\u003e\r\n                                                \u003cimg src={item.imageUrl} alt={item.title} className=\"w-full h-full object-cover\" /\u003e\r\n                                            \u003c/div\u003e\r\n                                        )}\r\n                                        \u003cdiv className=\"flex items-center gap-4 p-4 flex-1\"\u003e\r\n                                            \u003cbutton\r\n                                                onClick={() =\u003e {\r\n                                                    return;\r\n                                                }}\r\n                                                disabled={true}\r\n                                                className={`w-6 h-6 rounded border-2 flex items-center justify-center transition-colors shrink-0 ${isBlocked\r\n                                                    ? \u0027border-slate-600 bg-slate-800/50 cursor-not-allowed\u0027\r\n                                                    : isLocked\r\n                                                        ? \u0027border-rose-500/50 bg-rose-500/10 cursor-not-allowed\u0027\r\n                                                        : item.status === \u0027completed\u0027\r\n                                                            ? \u0027bg-emerald-500 border-emerald-500 cursor-not-allowed\u0027\r\n                                                            : (() =\u003e {\r\n                                                                const today = format(new Date(), \u0027yyyy-MM-dd\u0027);\r\n                                                                const isDoneToday = item.completionHistory?.some((d: string) =\u003e d.startsWith(today));\r\n                                                                return isDoneToday\r\n                                                                    ? \u0027bg-emerald-500/20 border-emerald-500/50 cursor-not-allowed\u0027\r\n                                                                    : \u0027border-slate-500 hover:border-emerald-500 cursor-default\u0027;\r\n                                                            })()\r\n                                                    }`}\r\n                                                title={isBlocked ? lockReason : isLocked ? \"Conclua o Pomodoro primeiro!\" : \"Utilize o Pomodoro para concluir\"}\r\n                                            \u003e\r\n                                                {isBlocked ? (\r\n                                                    \u003cLock className=\"w-3 h-3 text-slate-500\" /\u003e\r\n                                                ) : isLocked ? (\r\n                                                    \u003cLock className=\"w-3 h-3 text-rose-500\" /\u003e\r\n                                                ) : (\r\n                                                    (item.status === \u0027completed\u0027 || item.completionHistory?.some((d: string) =\u003e d.startsWith(format(new Date(), \u0027yyyy-MM-dd\u0027)))) \u0026\u0026 \u003cCheckSquare className=\"w-4 h-4 text-white\" /\u003e\r\n                                                )}\r\n                                            \u003c/button\u003e\r\n\r\n                                            \u003cdiv className=\"flex-1 min-w-0\" onClick={() =\u003e !isStep \u0026\u0026 setSelectedDetailedTask(item as Task)}\u003e\r\n                                                \u003cdiv className=\"flex items-center gap-2\"\u003e\r\n                                                    {isStep \u0026\u0026 \u003cTarget className=\"w-3 h-3 text-slate-500\" /\u003e}\r\n                                                    \u003cp className={`font-medium truncate ${isBlocked\r\n                                                        ? \u0027text-slate-600\u0027\r\n                                                        : item.status === \u0027completed\u0027\r\n                                                            ? \u0027text-slate-500 line-through\u0027\r\n                                                            : (item.date \u0026\u0026 parseLocalDate(item.date) \u003c new Date(new Date().setHours(0, 0, 0, 0)))\r\n                                                                ? \u0027text-red-400\u0027\r\n                                                                : \u0027text-slate-200 cursor-pointer hover:underline\u0027\r\n                                                        }`}\u003e\r\n                                                        {item.title}\r\n                                                    \u003c/p\u003e\r\n                                                \u003c/div\u003e\r\n\r\n                                                {(item.type === \u0027period\u0027 || item.type === \u0027recurring\u0027) \u0026\u0026 \u0027progress\u0027 in item \u0026\u0026 item.progress \u0026\u0026 (\r\n                                                    \u003cdiv className=\"mt-2 space-y-1\"\u003e\r\n                                                        \u003cdiv className=\"flex justify-between items-center text-[10px]\"\u003e\r\n                                                            \u003cspan className=\"text-slate-500 font-bold uppercase tracking-wider\"\u003eProgresso\u003c/span\u003e\r\n                                                            \u003cspan className=\"text-slate-400 font-bold\"\u003e\r\n                                                                {item.progress.current}/{item.progress.total}\r\n                                                            \u003c/span\u003e\r\n                                                        \u003c/div\u003e\r\n                                                        \u003cdiv className=\"h-1.5 bg-slate-900 rounded-full overflow-hidden\"\u003e\r\n                                                            \u003cdiv\r\n                                                                className=\"h-full bg-gradient-to-r from-blue-600 to-purple-600 rounded-full transition-all duration-500\"\r\n                                                                style={{ width: `${Math.min(100, (item.progress.current / item.progress.total) * 100)}%` }}\r\n                                                            /\u003e\r\n                                                        \u003c/div\u003e\r\n                                                    \u003c/div\u003e\r\n                                                )}\r\n\r\n                                                \u003cdiv className=\"flex gap-2 text-xs text-slate-500 mt-1 flex-wrap\"\u003e\r\n                                                    {isBlocked \u0026\u0026 (\r\n                                                        \u003cspan className=\"flex items-center gap-1 px-2 py-0.5 bg-slate-800/50 text-slate-600 rounded font-medium shrink-0\"\u003e\r\n                                                            \u003cLock className=\"w-3 h-3\" /\u003e\r\n                                                            Bloqueada\r\n                                                        \u003c/span\u003e\r\n                                                    )}\r\n                                                    \u003cspan className={`capitalize px-2 py-0.5 rounded font-medium shrink-0 ${item.priority === \u0027high\u0027 ? \u0027bg-red-500/20 text-red-400\u0027 :\r\n                                                        item.priority === \u0027medium\u0027 ? \u0027bg-amber-500/20 text-amber-400\u0027 :\r\n                                                            \u0027bg-slate-800 text-slate-400\u0027\r\n                                                        }`}\u003e\r\n                                                        {item.priority === \u0027high\u0027 ? \u0027Alta\u0027 : item.priority === \u0027medium\u0027 ? \u0027MÃ©dia\u0027 : \u0027Baixa\u0027}\r\n                                                    \u003c/span\u003e\r\n                                                    \u003cspan className=\"capitalize px-2 py-0.5 bg-slate-800 rounded shrink-0\"\u003e\r\n                                                        {item.type === \u0027day\u0027 ? \u0027Dia\u0027 : item.type === \u0027period\u0027 ? \u0027PerÃ­odo\u0027 : item.type === \u0027recurring\u0027 ? \u0027Recorrente\u0027 : \u0027Meta\u0027}\r\n                                                    \u003c/span\u003e\r\n                                                    {item.type === \u0027period\u0027 \u0026\u0026 item.startDate \u0026\u0026 (\r\n                                                        \u003cspan className=\"shrink-0 text-slate-400\"\u003e\r\n                                                            InÃ­cio: {format(parseLocalDate(item.startDate), \u0027dd/MM/yyyy\u0027)}\r\n                                                        \u003c/span\u003e\r\n                                                    )}\r\n                                                    {item.type === \u0027period\u0027 \u0026\u0026 item.endDate \u0026\u0026 (\r\n                                                        \u003cspan className={`shrink-0 ${parseLocalDate(item.endDate) \u003c new Date(new Date().setHours(0, 0, 0, 0)) ? \u0027text-red-400 font-bold animate-pulse\u0027 : \u0027text-slate-400\u0027}`}\u003e\r\n                                                            Fim: {format(parseLocalDate(item.endDate), \u0027dd/MM/yyyy\u0027)}\r\n                                                        \u003c/span\u003e\r\n                                                    )}\r\n                                                    {item.type === \u0027day\u0027 \u0026\u0026 item.date \u0026\u0026 (\r\n                                                        \u003cspan className={`shrink-0 ${!item.status \u0026\u0026 parseLocalDate(item.date) \u003c new Date(new Date().setHours(0, 0, 0, 0)) ? \u0027text-red-400 font-bold animate-pulse\u0027 : \u0027\u0027}`}\u003e\r\n                                                            {isBlocked ? \u0027InÃ­cio: \u0027 : \u0027\u0027}{format(parseLocalDate(item.date), \u0027dd/MM/yyyy\u0027)}\r\n                                                        \u003c/span\u003e\r\n                                                    )}\r\n                                                \u003c/div\u003e\r\n                                            \u003c/div\u003e\r\n\r\n                                            \u003cdiv className=\"flex gap-2 items-center shrink-0\"\u003e\r\n                                                {item.status !== \u0027completed\u0027 \u0026\u0026 (\r\n                                                    \u003cbutton\r\n                                                        onClick={(e) =\u003e {\r\n                                                            e.stopPropagation();\r\n                                                            if (isBlocked) {\r\n                                                                alert(lockReason || \"Esta tarefa estÃ¡ bloqueada.\");\r\n                                                                return;\r\n                                                            }\r\n\r\n                                                            // PRIORIDADE MÃXIMA: Bloqueio de dias futuros\r\n                                                            const todayStr = format(new Date(), \u0027yyyy-MM-dd\u0027);\r\n                                                            const itemDate = item.date || ((\u0027startDate\u0027 in item \u0026\u0026 item.startDate) ? (item.startDate as string).split(\u0027T\u0027)[0] : undefined);\r\n\r\n                                                            if (itemDate \u0026\u0026 itemDate \u003e todayStr) {\r\n                                                                alert(`Item agendado para o futuro (${format(parseLocalDate(itemDate), \u0027dd/MM/yyyy\u0027)}).`);\r\n                                                                return;\r\n                                                            }\r\n\r\n                                                            const duration = item.durationMinutes || 25;\r\n                                                            if (isStep \u0026\u0026 item.goalId) {\r\n                                                                startFocus(item.id, \u0027goal\u0027, item.title, duration, undefined, undefined, item.goalId);\r\n                                                            } else {\r\n                                                                startFocus(item.id, \u0027task\u0027, item.title, duration);\r\n                                                            }\r\n                                                            startFocusSession(item.id, duration);\r\n                                                        }}\r\n                                                        disabled={isBlocked}\r\n                                                        className={`w-10 h-10 rounded-full flex items-center justify-center transition-all shadow-lg group/btn hover:scale-105 active:scale-95 ${isBlocked\r\n                                                            ? \u0027bg-slate-800/30 border-slate-700/30 text-slate-600 cursor-not-allowed\u0027\r\n                                                            : isLinked \u0026\u0026 isActive\r\n                                                                ? \u0027bg-rose-500/20 border-rose-500/50 text-rose-400 animate-pulse\u0027\r\n                                                                : \u0027bg-slate-800 hover:bg-emerald-500 border border-slate-700 hover:border-emerald-500 text-slate-400 hover:text-white\u0027\r\n                                                            }`}\r\n                                                        title={isBlocked ? lockReason : \"Iniciar Foco Imediatamente\"}\r\n                                                    \u003e\r\n                                                        {isLinked \u0026\u0026 isActive ? (\r\n                                                            \u003cLoader2 className=\"w-5 h-5 animate-spin\" /\u003e\r\n                                                        ) : (\r\n                                                            \u003cPlay className={`w-4 h-4 fill-current ml-0.5`} /\u003e\r\n                                                        )}\r\n                                                    \u003c/button\u003e\r\n                                                )}\r\n\r\n                                                \u003cdiv className=\"w-px h-4 bg-slate-800 mx-1\" /\u003e\r\n\r\n                                                {!isStep \u0026\u0026 !isBlocked \u0026\u0026 (\r\n                                                    \u003c\u003e\r\n                                                        \u003cbutton\r\n                                                            onClick={() =\u003e setEditingTask(item as Task)}\r\n                                                            className=\"p-2 text-slate-400 hover:text-blue-400 hover:bg-slate-800 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-300 relative z-20\"\r\n                                                        \u003e\r\n                                                            \u003cPencil className=\"w-4 h-4\" /\u003e\r\n                                                        \u003c/button\u003e\r\n                                                        \u003cbutton\r\n                                                            onClick={async () =\u003e {\r\n                                                                const confirmed = await confirm({\r\n                                                                    title: \u0027Excluir Tarefa\u0027,\r\n                                                                    message: `Tem certeza que deseja excluir \"${item.title}\"?`,\r\n                                                                    confirmText: \u0027Excluir\u0027,\r\n                                                                    cancelText: \u0027Cancelar\u0027,\r\n                                                                    isDangerous: true\r\n                                                                });\r\n                                                                if (confirmed) deleteTask(item.id);\r\n                                                            }}\r\n                                                            className=\"p-2 text-slate-400 hover:text-red-400 hover:bg-slate-800 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-300 relative z-20\"\r\n                                                        \u003e\r\n                                                            \u003cTrash2 className=\"w-4 h-4\" /\u003e\r\n                                                        \u003c/button\u003e\r\n                                                    \u003c/\u003e\r\n                                                )}\r\n                                            \u003c/div\u003e\r\n                                        \u003c/div\u003e\r\n                                    \u003c/div\u003e\r\n                                \u003c/div\u003e\r\n                            );\r\n                        })}\r\n                    \u003c/div\u003e\r\n                )}\r\n            \u003c/div\u003e\r\n\r\n            {/* Modals */}\r\n            \u003cAddTaskModal\r\n                isOpen={!!editingTask || isAddModalOpen}\r\n                onClose={() =\u003e {\r\n                    setEditingTask(undefined);\r\n                    setIsAddModalOpen(false);\r\n                }}\r\n                taskToEdit={editingTask}\r\n            /\u003e\r\n\r\n            \u003cTaskDetailsModal\r\n                isOpen={!!selectedDetailedTask}\r\n                onClose={() =\u003e setSelectedDetailedTask(null)}\r\n                task={selectedDetailedTask}\r\n            /\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\lists\\ThemeList.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027addDays\u0027 is defined but never used.","line":5,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Modal\u0027 is defined but never used.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Cell\u0027 is assigned a value but never used.","line":49,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":49,"endColumn":15}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \u0027react\u0027;\r\nimport { useSearchParams } from \u0027react-router-dom\u0027;\r\nimport { useStudy } from \u0027../../context/StudyContext\u0027;\r\nimport { Layers } from \u0027lucide-react\u0027;\r\nimport { format, addDays } from \u0027date-fns\u0027;\r\nimport { AddThemeModal } from \u0027../themes/components/AddThemeModal\u0027;\r\nimport { Modal } from \u0027../../components/ui/Modal\u0027;\r\n\r\nimport type { Theme } from \u0027../../types\u0027;\r\nimport { ThemeCard } from \u0027../themes/components/ThemeCard\u0027;\r\nimport { useSRSLogic } from \u0027../../hooks/useSRSLogic\u0027;\r\n// Lazy load StudyContentModal\r\n\r\nimport { ThemeDetailsModal } from \u0027../themes/components/ThemeDetailsModal\u0027;\r\n\r\ninterface ThemeListProps {\r\n    forceCategory?: \u0027project\u0027 | \u0027study\u0027;\r\n    defaultCategory?: \u0027project\u0027 | \u0027study\u0027;\r\n}\r\n\r\n\r\n// Lazy Definition\r\nconst StudyContentModal = React.lazy(() =\u003e import(\u0027../themes/components/StudyContentModal\u0027).then(m =\u003e ({ default: m.StudyContentModal })));\r\n\r\nexport const ThemeList = ({ forceCategory, defaultCategory }: ThemeListProps = {}) =\u003e {\r\n    // ...\r\n\r\n    const { themes, deleteTheme, updateSubthemeContent, unlockedSubthemes, completeReview } = useStudy();\r\n    const { calculateQueuedDates, getThemeCompletionDate } = useSRSLogic();\r\n    const [editingTheme, setEditingTheme] = useState\u003cTheme | undefined\u003e(undefined);\r\n    const [selectedSubthemeForNotes, setSelectedSubthemeForNotes] = useState\u003cany\u003e(null);\r\n\r\n    const [isAddModalOpen, setIsAddModalOpen] = useState(false);\r\n    const [selectedThemeForDetails, setSelectedThemeForDetails] = useState\u003cTheme | null\u003e(null);\r\n\r\n    const [searchParams] = useSearchParams();\r\n    // Use forceCategory prop if provided, otherwise use query param\r\n    const categoryFilter = forceCategory || searchParams.get(\u0027category\u0027);\r\n\r\n    // Filter themes based on category\r\n    // If category=\u0027project\u0027, show ONLY projects. Otherwise, show study themes (exclude projects)\r\n    const visibleThemes = categoryFilter === \u0027project\u0027\r\n        ? themes.filter(t =\u003e t.category === \u0027project\u0027)\r\n        : themes.filter(t =\u003e t.category !== \u0027project\u0027);\r\n\r\n    // Queue Logic\r\n    const queuedSubthemesMap = calculateQueuedDates(visibleThemes);\r\n\r\n    const Cell = ({ columnIndex, rowIndex, style, data }: any) =\u003e {\r\n        const { themes, columnCount, onEdit, onDelete, getCompletion, ...rest } = data;\r\n        const index = rowIndex * columnCount + columnIndex;\r\n\r\n        if (index \u003e= themes.length) {\r\n            return null;\r\n        }\r\n\r\n        const theme = themes[index];\r\n\r\n        return (\r\n            \u003cdiv style={{ ...style, padding: \u002712px\u0027 }}\u003e\r\n                \u003cThemeCard\r\n                    theme={theme}\r\n                    completionDate={getCompletion(theme)}\r\n                    onEdit={() =\u003e onEdit(theme)}\r\n                    onDelete={() =\u003e onDelete(theme.id)}\r\n                    {...rest}\r\n                /\u003e\r\n            \u003c/div\u003e\r\n        );\r\n    };\r\n\r\n    return (\r\n        \u003cdiv className=\"h-[calc(100vh-6rem)] flex flex-col gap-6 pb-4\"\u003e\r\n            {/* Header with Glow */}\r\n            \u003cdiv className=\"shrink-0 relative flex flex-col md:flex-row md:items-end justify-between gap-4 px-1\"\u003e\r\n                \u003cdiv className=\"absolute -top-10 -left-10 w-64 h-64 bg-blue-500/20 rounded-full blur-[100px] -z-10 pointer-events-none\" /\u003e\r\n                \u003cdiv\u003e\r\n                    \u003ch2 className=\"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-slate-200 to-slate-500 mb-2\"\u003e\r\n                        {categoryFilter === \u0027project\u0027 ? \u0027Meus Projetos\u0027 : \u0027Meus Mundos de Estudo\u0027}\r\n                    \u003c/h2\u003e\r\n                    \u003cp className=\"text-slate-400 max-w-2xl\"\u003e\r\n                        {categoryFilter === \u0027project\u0027\r\n                            ? \u0027Organize e acompanhe seus projetos e objetivos prÃ¡ticos.\u0027\r\n                            : \u0027Gerencie suas trilhas de conhecimento e acompanhe o progresso de cada universo.\u0027}\r\n                    \u003c/p\u003e\r\n                \u003c/div\u003e\r\n\r\n                \u003cbutton\r\n                    onClick={() =\u003e setIsAddModalOpen(true)}\r\n                    className=\"group relative px-6 py-3 bg-slate-900 rounded-xl font-bold text-white shadow-xl hover:scale-[1.02] active:scale-95 transition-all duration-300 overflow-hidden ring-1 ring-white/10 shrink-0\"\r\n                \u003e\r\n                    \u003cdiv className=\"absolute inset-0 bg-gradient-to-r from-blue-600 to-indigo-600 opacity-80 group-hover:opacity-100 transition-opacity\" /\u003e\r\n                    \u003cspan className=\"relative flex items-center gap-2\"\u003e\r\n                        \u003cspan className=\"text-xl leading-none font-light mb-0.5\"\u003e+\u003c/span\u003e\r\n                        Novo Tema\r\n                    \u003c/span\u003e\r\n                \u003c/button\u003e\r\n            \u003c/div\u003e\r\n\r\n            {/* List with AutoSizer */}\r\n            \u003cdiv className=\"flex-1 min-h-0\"\u003e\r\n                {visibleThemes.length === 0 ? (\r\n                    \u003cdiv className=\"glass-card text-center py-20 rounded-3xl relative overflow-hidden group\"\u003e\r\n                        \u003cdiv className=\"relative z-10\"\u003e\r\n                            \u003cdiv className=\"w-20 h-20 bg-slate-800/50 rounded-full flex items-center justify-center mx-auto mb-6 ring-1 ring-white/10 shadow-xl shadow-black/20 group-hover:scale-110 transition-transform duration-500\"\u003e\r\n                                \u003cLayers className=\"w-10 h-10 text-slate-500 group-hover:text-blue-400 transition-colors\" /\u003e\r\n                            \u003c/div\u003e\r\n                            \u003ch3 className=\"text-2xl font-bold text-white mb-2\"\u003eSeu Universo estÃ¡ Vazio\u003c/h3\u003e\r\n                            \u003cp className=\"text-slate-400 max-w-md mx-auto mb-8 text-lg\"\u003eCrie seu primeiro tema de estudos para comeÃ§ar a organizar seu conhecimento.\u003c/p\u003e\r\n                            \u003cbutton\r\n                                onClick={() =\u003e setIsAddModalOpen(true)}\r\n                                className=\"px-8 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white rounded-xl font-bold transition-all hover:scale-105 shadow-lg shadow-blue-500/25 ring-1 ring-white/20\"\r\n                            \u003e\r\n                                Criar Primeiro Tema\r\n                            \u003c/button\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n                ) : (\r\n                    \u003cdiv className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 pb-20\"\u003e\r\n                        {visibleThemes.map(theme =\u003e (\r\n                            \u003cThemeCard\r\n                                key={theme.id}\r\n                                theme={theme}\r\n                                completionDate={getThemeCompletionDate(theme, queuedSubthemesMap)}\r\n                                onEdit={() =\u003e setEditingTheme(theme)}\r\n                                onDelete={() =\u003e deleteTheme(theme.id)}\r\n                                onOpenNotes={setSelectedSubthemeForNotes}\r\n                                onOpenDetails={() =\u003e setSelectedThemeForDetails(theme)}\r\n                                queuedSubthemesMap={queuedSubthemesMap}\r\n                                unlockedSubthemes={unlockedSubthemes}\r\n                            /\u003e\r\n                        ))}\r\n                    \u003c/div\u003e\r\n                )}\r\n            \u003c/div\u003e\r\n\r\n            \u003cAddThemeModal\r\n                isOpen={!!editingTheme || isAddModalOpen}\r\n                onClose={() =\u003e {\r\n                    setEditingTheme(undefined);\r\n                    setIsAddModalOpen(false);\r\n                }}\r\n                themeToEdit={editingTheme}\r\n                defaultCategory={defaultCategory}\r\n            /\u003e\r\n\r\n            \u003cThemeDetailsModal\r\n                isOpen={!!selectedThemeForDetails}\r\n                onClose={() =\u003e setSelectedThemeForDetails(null)}\r\n                theme={selectedThemeForDetails}\r\n            /\u003e\r\n\r\n            {/* Study Content Modal (New Comprehensive Version) */}\r\n            \u003cReact.Suspense fallback={null}\u003e\r\n                \u003cStudyContentModal\r\n                    isOpen={!!selectedSubthemeForNotes}\r\n                    onClose={() =\u003e setSelectedSubthemeForNotes(null)}\r\n                    subtheme={selectedSubthemeForNotes}\r\n                    onSave={(content: string) =\u003e {\r\n                        // 1. Save Content\r\n                        updateSubthemeContent(selectedSubthemeForNotes.id, content);\r\n\r\n                        // 2. Check for PENDING reviews due today or earlier\r\n                        const todayStr = format(new Date(), \u0027yyyy-MM-dd\u0027);\r\n                        const pendingReview = selectedSubthemeForNotes.reviews.find((r: any) =\u003e\r\n                            r.status === \u0027pending\u0027 \u0026\u0026 r.date \u003c= todayStr\r\n                        );\r\n\r\n                        if (pendingReview) {\r\n                            completeReview(selectedSubthemeForNotes.id, pendingReview.number);\r\n                        }\r\n\r\n                        setSelectedSubthemeForNotes(null);\r\n                    }}\r\n                /\u003e\r\n            \u003c/React.Suspense\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\onboarding\\OnboardingModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027useEffect\u0027 is defined but never used.","line":1,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027User\u0027 is defined but never used.","line":3,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027BookOpen\u0027 is defined but never used.","line":3,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Check\u0027 is defined but never used.","line":3,"column":48,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":53},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027useStudy\u0027 is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":18}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from \u0027react\u0027;\r\nimport { motion, AnimatePresence } from \u0027framer-motion\u0027;\r\nimport { Sparkles, ArrowRight, User, BookOpen, Check } from \u0027lucide-react\u0027;\r\nimport { useAuth } from \u0027../../context/AuthContext\u0027;\r\nimport { useStudy } from \u0027../../context/StudyContext\u0027;\r\n\r\ninterface OnboardingModalProps {\r\n    isOpen: boolean;\r\n    onClose: () =\u003e void;\r\n}\r\n\r\nexport const OnboardingModal: React.FC\u003cOnboardingModalProps\u003e = ({ isOpen, onClose }) =\u003e {\r\n    const { user, updateProfile } = useAuth();\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n    const handleFinalize = async () =\u003e {\r\n        setIsSubmitting(true);\r\n        // If name is still generic, set it to something better or just use email part\r\n        if (user?.name === \u0027User\u0027 || !user?.name) {\r\n            const defaultName = user?.email?.split(\u0027@\u0027)[0] || \u0027Estudante\u0027;\r\n            await updateProfile({ display_name: defaultName });\r\n        }\r\n\r\n        // Mark as dismissed in localStorage to avoid re-triggering just because it\u0027s empty\r\n        localStorage.setItem(\u0027onboarding_dismissed\u0027, \u0027true\u0027);\r\n\r\n        onClose();\r\n        setIsSubmitting(false);\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        \u003cAnimatePresence\u003e\r\n            \u003cdiv className=\"fixed inset-0 z-[100] flex items-center justify-center p-4\"\u003e\r\n                \u003cmotion.div\r\n                    initial={{ opacity: 0 }}\r\n                    animate={{ opacity: 1 }}\r\n                    exit={{ opacity: 0 }}\r\n                    className=\"absolute inset-0 bg-slate-950/90 backdrop-blur-xl\"\r\n                /\u003e\r\n\r\n                \u003cmotion.div\r\n                    initial={{ scale: 0.9, opacity: 0, y: 20 }}\r\n                    animate={{ scale: 1, opacity: 1, y: 0 }}\r\n                    exit={{ scale: 0.9, opacity: 0, y: 20 }}\r\n                    className=\"relative w-full max-w-md bg-slate-900 border border-white/10 rounded-3xl shadow-2xl overflow-hidden\"\r\n                \u003e\r\n                    {/* Background Effects */}\r\n                    \u003cdiv className=\"absolute top-0 left-0 w-full h-1/2 bg-blue-600/10 blur-[50px] pointer-events-none\" /\u003e\r\n\r\n                    \u003cdiv className=\"p-8 relative z-10 text-center space-y-6\"\u003e\r\n                        \u003cdiv className=\"w-20 h-20 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-3xl mx-auto flex items-center justify-center shadow-lg shadow-blue-500/30\"\u003e\r\n                            \u003cSparkles className=\"w-10 h-10 text-white\" /\u003e\r\n                        \u003c/div\u003e\r\n\r\n                        \u003cdiv\u003e\r\n                            \u003ch2 className=\"text-2xl font-black text-white mb-2\"\u003eBem-vindo ao RevisÃ£o \u003cspan className=\"text-blue-400\"\u003ePRO\u003c/span\u003e\u003c/h2\u003e\r\n                            \u003cp className=\"text-slate-400\"\u003eSua jornada para a maestria nos estudos comeÃ§a aqui. Explore sua dashboard e comece a criar suas missÃµes.\u003c/p\u003e\r\n                        \u003c/div\u003e\r\n\r\n                        \u003cbutton\r\n                            onClick={handleFinalize}\r\n                            disabled={isSubmitting}\r\n                            className=\"w-full py-4 bg-white text-slate-950 font-bold rounded-xl hover:scale-[1.02] transition-transform flex items-center justify-center gap-2 disabled:opacity-50\"\r\n                        \u003e\r\n                            {isSubmitting ? \u0027Iniciando...\u0027 : \u0027ComeÃ§ar Agora\u0027} \u003cArrowRight className=\"w-4 h-4\" /\u003e\r\n                        \u003c/button\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/motion.div\u003e\r\n            \u003c/div\u003e\r\n        \u003c/AnimatePresence\u003e\r\n    );\r\n};\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\pomodoro\\FocusSoundsPlayer.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Pause\u0027 is defined but never used.","line":3,"column":58,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":63}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from \u0027react\u0027;\r\nimport { Howl } from \u0027howler\u0027;\r\nimport { Volume2, VolumeX, CloudRain, Wind, Radio, Play, Pause } from \u0027lucide-react\u0027;\r\nimport { cn } from \u0027../../lib/utils\u0027;\r\nimport { motion, AnimatePresence } from \u0027framer-motion\u0027;\r\n\r\nconst SOUNDS = [\r\n    { id: \u0027rain\u0027, label: \u0027Chuva\u0027, icon: CloudRain, src: \u0027https://assets.mixkit.co/sfx/preview/mixkit-light-rain-loop-1253.mp3\u0027, color: \u0027text-blue-400\u0027 },\r\n    { id: \u0027white\u0027, label: \u0027RuÃ­do Branco\u0027, icon: Radio, src: \u0027https://assets.mixkit.co/sfx/preview/mixkit-white-noise-1262.mp3\u0027, color: \u0027text-slate-400\u0027 },\r\n    { id: \u0027wind\u0027, label: \u0027Vento\u0027, icon: Wind, src: \u0027https://assets.mixkit.co/sfx/preview/mixkit-wind-through-trees-1224.mp3\u0027, color: \u0027text-emerald-400\u0027 },\r\n];\r\n\r\nexport const FocusSoundsPlayer = () =\u003e {\r\n    const [currentSound, setCurrentSound] = useState\u003cstring | null\u003e(null);\r\n    const [isPlaying, setIsPlaying] = useState(false);\r\n    const [volume, setVolume] = useState(0.5);\r\n    const [howl, setHowl] = useState\u003cHowl | null\u003e(null);\r\n    const [isExpanded, setIsExpanded] = useState(false);\r\n\r\n    useEffect(() =\u003e {\r\n        return () =\u003e {\r\n            if (howl) howl.unload();\r\n        };\r\n    }, [howl]);\r\n\r\n    const toggleSound = (soundId: string) =\u003e {\r\n        if (currentSound === soundId \u0026\u0026 isPlaying) {\r\n            howl?.pause();\r\n            setIsPlaying(false);\r\n            return;\r\n        }\r\n\r\n        if (howl) {\r\n            howl.stop();\r\n        }\r\n\r\n        const sound = SOUNDS.find(s =\u003e s.id === soundId);\r\n        if (sound) {\r\n            const newHowl = new Howl({\r\n                src: [sound.src],\r\n                html5: true,\r\n                loop: true,\r\n                volume: volume,\r\n            });\r\n            newHowl.play();\r\n            setHowl(newHowl);\r\n            setCurrentSound(soundId);\r\n            setIsPlaying(true);\r\n        }\r\n    };\r\n\r\n    const handleVolumeChange = (e: React.ChangeEvent\u003cHTMLInputElement\u003e) =\u003e {\r\n        const newVol = parseFloat(e.target.value);\r\n        setVolume(newVol);\r\n        if (howl) howl.volume(newVol);\r\n    };\r\n\r\n    const activeSound = SOUNDS.find(s =\u003e s.id === currentSound);\r\n\r\n    return (\r\n        \u003cdiv className=\"relative\"\u003e\r\n            {/* Minimized / Trigger */}\r\n            \u003cbutton\r\n                onClick={() =\u003e setIsExpanded(!isExpanded)}\r\n                className={cn(\r\n                    \"flex items-center gap-2 px-3 py-2 rounded-xl transition-all border\",\r\n                    isPlaying\r\n                        ? \"bg-indigo-500/20 text-indigo-300 border-indigo-500/30 shadow-[0_0_15px_rgba(99,102,241,0.2)]\"\r\n                        : \"bg-slate-800/50 text-slate-400 border-white/5 hover:bg-white/10\"\r\n                )}\r\n            \u003e\r\n                {isPlaying ? \u003cVolume2 className=\"w-4 h-4\" /\u003e : \u003cVolumeX className=\"w-4 h-4\" /\u003e}\r\n                \u003cspan className=\"text-xs font-bold uppercase tracking-wider hidden md:inline\"\u003e\r\n                    {isPlaying ? activeSound?.label : \"Sons\"}\r\n                \u003c/span\u003e\r\n            \u003c/button\u003e\r\n\r\n            {/* Expanded Menu */}\r\n            \u003cAnimatePresence\u003e\r\n                {isExpanded \u0026\u0026 (\r\n                    \u003cmotion.div\r\n                        initial={{ opacity: 0, y: 10, scale: 0.95 }}\r\n                        animate={{ opacity: 1, y: 0, scale: 1 }}\r\n                        exit={{ opacity: 0, y: 10, scale: 0.95 }}\r\n                        className=\"absolute bottom-full right-0 mb-3 w-64 bg-slate-950/90 backdrop-blur-2xl border border-white/10 rounded-2xl shadow-2xl p-4 z-50 ring-1 ring-white/5\"\r\n                    \u003e\r\n                        \u003cdiv className=\"flex justify-between items-center mb-4\"\u003e\r\n                            \u003ch4 className=\"text-xs font-bold text-slate-400 uppercase tracking-widest\"\u003eAmbiente\u003c/h4\u003e\r\n                            {isPlaying \u0026\u0026 (\r\n                                \u003cdiv className=\"flex items-center gap-1\"\u003e\r\n                                    \u003cspan className=\"w-0.5 h-2 bg-indigo-500 animate-[bounce_1s_infinite]\" /\u003e\r\n                                    \u003cspan className=\"w-0.5 h-3 bg-indigo-500 animate-[bounce_1.2s_infinite]\" /\u003e\r\n                                    \u003cspan className=\"w-0.5 h-2 bg-indigo-500 animate-[bounce_0.8s_infinite]\" /\u003e\r\n                                \u003c/div\u003e\r\n                            )}\r\n                        \u003c/div\u003e\r\n\r\n                        \u003cdiv className=\"space-y-2 mb-4\"\u003e\r\n                            {SOUNDS.map(sound =\u003e (\r\n                                \u003cbutton\r\n                                    key={sound.id}\r\n                                    onClick={() =\u003e toggleSound(sound.id)}\r\n                                    className={cn(\r\n                                        \"w-full flex items-center justify-between p-2 rounded-xl transition-all border\",\r\n                                        currentSound === sound.id \u0026\u0026 isPlaying\r\n                                            ? \"bg-indigo-600/20 border-indigo-500/30 shadow-inner\"\r\n                                            : \"bg-white/5 border-transparent hover:bg-white/10\"\r\n                                    )}\r\n                                \u003e\r\n                                    \u003cdiv className=\"flex items-center gap-3\"\u003e\r\n                                        \u003cdiv className={cn(\"p-1.5 rounded-lg\", currentSound === sound.id \u0026\u0026 isPlaying ? \"bg-indigo-500 text-white\" : \"bg-slate-800 text-slate-400\")}\u003e\r\n                                            \u003csound.icon className=\"w-4 h-4\" /\u003e\r\n                                        \u003c/div\u003e\r\n                                        \u003cspan className={cn(\"text-xs font-bold\", currentSound === sound.id \u0026\u0026 isPlaying ? \"text-indigo-200\" : \"text-slate-300\")}\u003e\r\n                                            {sound.label}\r\n                                        \u003c/span\u003e\r\n                                    \u003c/div\u003e\r\n                                    {currentSound === sound.id \u0026\u0026 isPlaying \u0026\u0026 \u003cPlay className=\"w-3 h-3 text-indigo-400 fill-current\" /\u003e}\r\n                                \u003c/button\u003e\r\n                            ))}\r\n                        \u003c/div\u003e\r\n\r\n                        {/* Volume Slider */}\r\n                        \u003cdiv className=\"flex items-center gap-3 px-1\"\u003e\r\n                            \u003cVolume2 className=\"w-3 h-3 text-slate-500\" /\u003e\r\n                            \u003cinput\r\n                                type=\"range\"\r\n                                min=\"0\"\r\n                                max=\"1\"\r\n                                step=\"0.01\"\r\n                                value={volume}\r\n                                onChange={handleVolumeChange}\r\n                                className=\"w-full h-1 bg-slate-800 rounded-lg appearance-none cursor-pointer [\u0026::-webkit-slider-thumb]:appearance-none [\u0026::-webkit-slider-thumb]:w-3 [\u0026::-webkit-slider-thumb]:h-3 [\u0026::-webkit-slider-thumb]:bg-indigo-500 [\u0026::-webkit-slider-thumb]:rounded-full [\u0026::-webkit-slider-thumb]:shadow-[0_0_8px_rgba(99,102,241,0.5)]\"\r\n                            /\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/motion.div\u003e\r\n                )}\r\n            \u003c/AnimatePresence\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\pomodoro\\PomodoroWidget.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027useRef\u0027 is defined but never used.","line":1,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Square\u0027 is defined but never used.","line":7,"column":103,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":109},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027handleClose\u0027 is assigned a value but never used.","line":30,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":22},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\pomodoro\\PomodoroWidget.tsx:87:13\n  85 |         // Only show validate if we have an active focus AND timer is finished AND we were in focus mode\n  86 |         if (timeLeft === 0 \u0026\u0026 mode === \u0027focus\u0027 \u0026\u0026 activeFocus) {\n\u003e 87 |             setShowValidate(true);\n     |             ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  88 |             setValidationStep(\u0027validate\u0027); // Start at validation step\n  89 |             setIsMinimized(false); // Force open\n  90 |         } else if (timeLeft !== 0) {","line":87,"column":13,"nodeType":null,"endLine":87,"endColumn":28}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useRef, useEffect, useState } from \u0027react\u0027;\r\nimport { motion } from \u0027framer-motion\u0027;\r\nimport { usePomodoroContext } from \u0027../../context/PomodoroContext\u0027;\r\nimport { useStudy } from \u0027../../context/StudyContext\u0027;\r\nimport { useAudio } from \u0027../../context/AudioContext\u0027; // Added\r\nimport { useConfirm } from \u0027../../context/ConfirmContext\u0027;\r\nimport { Play, Pause, SkipForward, RefreshCw, Timer, X, Volume2, CloudRain, Zap, Waves, CheckCircle2, Square } from \u0027lucide-react\u0027; // Added icons\r\nimport { cn } from \u0027../../lib/utils\u0027;\r\n\r\nexport const PomodoroWidget = () =\u003e {\r\n    const {\r\n        mode,\r\n        timeLeft,\r\n        isActive,\r\n        cycles,\r\n        linkedItemId,\r\n        toggleTimer,\r\n        resetTimer,\r\n        skipTimer,\r\n        isWidgetVisible,\r\n        closeWidget,\r\n        openWidget,\r\n        settings\r\n    } = usePomodoroContext();\r\n\r\n    const { endFocus, activeFocus, completeReview, toggleTask, toggleGoal, toggleGoalItem } = useStudy();\r\n    const { isPlaying: isAudioPlaying, togglePlay: toggleAudio, volume, setVolume, currentSound, setSound } = useAudio();\r\n    const { confirm: confirmAction } = useConfirm();\r\n\r\n    const handleClose = async () =\u003e {\r\n        if (linkedItemId || activeFocus) {\r\n            const confirmed = await confirmAction({ message: \u0027Deseja cancelar o foco atual?\u0027, isDangerous: true });\r\n            if (!confirmed) {\r\n                return;\r\n            }\r\n            endFocus(false);\r\n            resetTimer();\r\n        }\r\n        closeWidget();\r\n    };\r\n\r\n    const formatTime = (seconds: number) =\u003e {\r\n        const m = Math.floor(seconds / 60);\r\n        const s = seconds % 60;\r\n        return `${m.toString().padStart(2, \u00270\u0027)}:${s.toString().padStart(2, \u00270\u0027)}`;\r\n    };\r\n\r\n    const getModeLabel = () =\u003e {\r\n        switch (mode) {\r\n            case \u0027focus\u0027: return \u0027Foco\u0027;\r\n            case \u0027shortBreak\u0027: return \u0027Pausa Curta\u0027;\r\n            case \u0027longBreak\u0027: return \u0027Pausa Longa\u0027;\r\n        }\r\n    };\r\n\r\n    const getModeColor = () =\u003e {\r\n        switch (mode) {\r\n            case \u0027focus\u0027: return \u0027from-rose-500 to-red-600 border-rose-500/20 shadow-rose-900/20\u0027;\r\n            case \u0027shortBreak\u0027: return \u0027from-emerald-500 to-green-600 border-emerald-500/20 shadow-emerald-900/20\u0027;\r\n            case \u0027longBreak\u0027: return \u0027from-blue-500 to-indigo-600 border-blue-500/20 shadow-blue-900/20\u0027;\r\n        }\r\n    };\r\n\r\n    // State for minimizing\r\n    const [isMinimized, setIsMinimized] = useState(true);\r\n    const [isDragging, setIsDragging] = useState(false);\r\n    const [position, setPosition] = useState(() =\u003e {\r\n        const saved = localStorage.getItem(\u0027pomodoro-position\u0027);\r\n        return saved ? JSON.parse(saved) : { x: 0, y: 0 };\r\n    });\r\n    const [showValidate, setShowValidate] = useState(false);\r\n    const [validationStep, setValidationStep] = useState\u003c\u0027validate\u0027 | \u0027summary\u0027\u003e(\u0027validate\u0027); // New step state\r\n    const [showSoundPanel, setShowSoundPanel] = useState(false);\r\n    const [summaryText, setSummaryText] = useState(\u0027\u0027);\r\n\r\n    const getModeDuration = () =\u003e {\r\n        if (mode === \u0027focus\u0027) return settings.focusDuration * 60;\r\n        if (mode === \u0027shortBreak\u0027) return settings.shortBreakDuration * 60;\r\n        return settings.longBreakDuration * 60;\r\n    };\r\n    const circleProgress = (timeLeft / getModeDuration()) * 100;\r\n\r\n    // Effect: Detect Focus End for Validation\r\n    useEffect(() =\u003e {\r\n        // Only show validate if we have an active focus AND timer is finished AND we were in focus mode\r\n        if (timeLeft === 0 \u0026\u0026 mode === \u0027focus\u0027 \u0026\u0026 activeFocus) {\r\n            setShowValidate(true);\r\n            setValidationStep(\u0027validate\u0027); // Start at validation step\r\n            setIsMinimized(false); // Force open\r\n        } else if (timeLeft !== 0) {\r\n            // Clear validation state if timer is not 0 (e.g. reset)\r\n            setShowValidate(false);\r\n            setSummaryText(\u0027\u0027);\r\n        }\r\n    }, [timeLeft, mode, activeFocus]);\r\n\r\n    const handleConfirmValidation = () =\u003e {\r\n        setValidationStep(\u0027summary\u0027);\r\n    };\r\n\r\n    const handleFinalizeSession = async () =\u003e {\r\n        if (!activeFocus) return;\r\n\r\n        try {\r\n            // Identify if something was written (passed to completion functions)\r\n            if (activeFocus.type === \u0027subtheme\u0027) {\r\n                if (activeFocus.reviewNumber !== undefined) {\r\n                    await completeReview(activeFocus.id, activeFocus.reviewNumber, activeFocus.reviewType || \u0027review\u0027, \u0027medium\u0027, summaryText);\r\n                }\r\n            } else if (activeFocus.type === \u0027task\u0027) {\r\n                toggleTask(activeFocus.id, undefined, summaryText);\r\n            } else if (activeFocus.type === \u0027goal\u0027) {\r\n                if (activeFocus.parentId) {\r\n                    toggleGoalItem(activeFocus.parentId, activeFocus.id, undefined, summaryText);\r\n                } else {\r\n                    toggleGoal(activeFocus.id, undefined, summaryText);\r\n                }\r\n            }\r\n\r\n            // Cleanup: No new pomodoro should appear\r\n            setShowValidate(false);\r\n            endFocus(true, summaryText); // StudyContext cleanup\r\n            resetTimer();   // Reset time to default\r\n            closeWidget();  // Close widget entirely\r\n\r\n            // Reset local states\r\n            setSummaryText(\u0027\u0027);\r\n            setValidationStep(\u0027validate\u0027);\r\n        } catch (error) {\r\n            console.error(\"Failed to validate:\", error);\r\n        }\r\n    };\r\n\r\n    // Fail-safe: Ensure widget is visible if timer is active\r\n    // Fail-safe: Ensure widget is visible if timer is active\r\n    useEffect(() =\u003e {\r\n        if (isActive \u0026\u0026 !isWidgetVisible) {\r\n            openWidget();\r\n        }\r\n    }, [isActive, isWidgetVisible, openWidget]);\r\n\r\n    // IF WIDGET IS NOT VISIBLE, RENDER THE FLOATING FAB (LAUNCHER)\r\n    if (!isWidgetVisible) {\r\n        return (\r\n            \u003cmotion.div\r\n                drag\r\n                dragMomentum={false}\r\n                dragElastic={0}\r\n                onDragStart={() =\u003e setIsDragging(true)}\r\n                onDragEnd={(_, info) =\u003e {\r\n                    setTimeout(() =\u003e setIsDragging(false), 100);\r\n                    const newPos = { x: position.x + info.offset.x, y: position.y + info.offset.y };\r\n                    setPosition(newPos);\r\n                    localStorage.setItem(\u0027pomodoro-position\u0027, JSON.stringify(newPos));\r\n                }}\r\n                style={{ x: position.x, y: position.y }}\r\n                whileHover={{ scale: 1.05 }}\r\n                whileTap={{ scale: 0.95 }}\r\n                whileDrag={{ scale: 1.1 }}\r\n                className={cn(\r\n                    \"fixed bottom-24 md:bottom-6 right-4 md:right-6 z-[9999]\",\r\n                    \"w-16 h-16 rounded-full flex items-center justify-center shadow-2xl\",\r\n                    \"bg-slate-900/90 backdrop-blur-xl border border-white/10 text-white group cursor-grab active:cursor-grabbing\",\r\n                    isActive ? \"border-rose-500/50 shadow-rose-500/20\" : \"hover:border-emerald-500/50 shadow-black/50\"\r\n                )}\r\n            \u003e\r\n                \u003cdiv\r\n                    className=\"absolute inset-0 z-0 rounded-full\"\r\n                    onClick={() =\u003e !isDragging \u0026\u0026 toggleTimer()}\r\n                    onDoubleClick={(e) =\u003e {\r\n                        e.stopPropagation();\r\n                        openWidget();\r\n                    }}\r\n                /\u003e\r\n\r\n                {/* Progress Ring if Active */}\r\n                {isActive \u0026\u0026 (\r\n                    \u003csvg className=\"absolute inset-0 w-full h-full -rotate-90 scale-90 pointer-events-none\"\u003e\r\n                        \u003ccircle cx=\"32\" cy=\"32\" r=\"28\" className=\"fill-none stroke-white/5\" strokeWidth=\"4\" /\u003e\r\n                        \u003cmotion.circle\r\n                            cx=\"32\" cy=\"32\" r=\"28\"\r\n                            className=\"fill-none stroke-rose-500\"\r\n                            strokeWidth=\"4\"\r\n                            strokeLinecap=\"round\"\r\n                            initial={{ pathLength: 0 }}\r\n                            animate={{ pathLength: circleProgress / 100 }}\r\n                            transition={{ duration: 0.5 }}\r\n                        /\u003e\r\n                    \u003c/svg\u003e\r\n                )}\r\n\r\n                \u003cdiv className=\"relative z-10 flex items-center justify-center pointer-events-none\"\u003e\r\n                    {isActive ? (\r\n                        \u003cdiv className=\"flex flex-col items-center\"\u003e\r\n                            \u003cspan className=\"text-[11px] font-mono font-black text-rose-400 leading-none mb-0.5\"\u003e\r\n                                {formatTime(timeLeft)}\r\n                            \u003c/span\u003e\r\n                            \u003cPlay className=\"w-2.5 h-2.5 fill-rose-500 text-rose-500\" /\u003e\r\n                        \u003c/div\u003e\r\n                    ) : (\r\n                        \u003cTimer className=\"w-7 h-7 text-slate-400 group-hover:text-emerald-400 transition-colors\" /\u003e\r\n                    )}\r\n                \u003c/div\u003e\r\n\r\n                {/* Pulsing glow if active */}\r\n                {isActive \u0026\u0026 (\r\n                    \u003cdiv className=\"absolute inset-0 rounded-full bg-rose-500/20 animate-pulse -z-10 pointer-events-none\" /\u003e\r\n                )}\r\n\r\n                {/* Hint to open */}\r\n                \u003cdiv className=\"absolute -top-1 -right-1 bg-blue-500 w-4 h-4 rounded-full flex items-center justify-center shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none\"\u003e\r\n                    \u003cTimer className=\"w-2.5 h-2.5 text-white\" /\u003e\r\n                \u003c/div\u003e\r\n            \u003c/motion.div\u003e\r\n        );\r\n    }\r\n\r\n    // MINIMIZED VIEW (Floating Pill)\r\n    if (isMinimized \u0026\u0026 !showValidate) {\r\n        return (\r\n            \u003cmotion.div\r\n                layoutId=\"pomodoro-widget\"\r\n                drag\r\n                dragMomentum={false}\r\n                dragElastic={0}\r\n                onDragStart={() =\u003e setIsDragging(true)}\r\n                onDragEnd={(_, info) =\u003e {\r\n                    setTimeout(() =\u003e setIsDragging(false), 100);\r\n                    const newPos = { x: position.x + info.offset.x, y: position.y + info.offset.y };\r\n                    setPosition(newPos);\r\n                    localStorage.setItem(\u0027pomodoro-position\u0027, JSON.stringify(newPos));\r\n                }}\r\n                style={{ x: position.x, y: position.y }}\r\n                whileDrag={{ scale: 1.1 }}\r\n                className={cn(\r\n                    \"fixed bottom-24 md:bottom-6 right-4 md:right-6 z-[9999] p-1 rounded-full shadow-2xl backdrop-blur-xl border cursor-grab active:cursor-grabbing group\",\r\n                    \"bg-slate-900/95 border-slate-700/50 hover:border-slate-500\",\r\n                    mode === \u0027focus\u0027 ? \u0027shadow-rose-900/30\u0027 : mode === \u0027shortBreak\u0027 ? \u0027shadow-emerald-900/30\u0027 : \u0027shadow-blue-900/30\u0027\r\n                )}\r\n            \u003e\r\n                \u003cdiv className=\"relative w-16 h-16 flex items-center justify-center\"\u003e\r\n                    \u003cdiv\r\n                        className=\"absolute inset-0 z-20 rounded-full\"\r\n                        onClick={() =\u003e !isDragging \u0026\u0026 toggleTimer()}\r\n                        onDoubleClick={(e) =\u003e {\r\n                            e.stopPropagation();\r\n                            setIsMinimized(false);\r\n                        }}\r\n                    /\u003e\r\n\r\n                    \u003csvg className=\"absolute inset-0 w-full h-full -rotate-90 scale-90 pointer-events-none\"\u003e\r\n                        \u003ccircle cx=\"32\" cy=\"32\" r=\"28\" className=\"fill-none stroke-slate-800\" strokeWidth=\"4\" /\u003e\r\n                        \u003ccircle\r\n                            cx=\"32\" cy=\"32\" r=\"28\"\r\n                            className={cn(\r\n                                \"fill-none transition-all duration-1000\",\r\n                                mode === \u0027focus\u0027 ? \"stroke-rose-500\" : mode === \u0027shortBreak\u0027 ? \"stroke-emerald-500\" : \"stroke-blue-500\"\r\n                            )}\r\n                            strokeWidth=\"4\"\r\n                            strokeDasharray=\"176\" // 2 * PI * 28\r\n                            strokeDashoffset={176 - (176 * (circleProgress / 100))}\r\n                            strokeLinecap=\"round\"\r\n                        /\u003e\r\n                    \u003c/svg\u003e\r\n\r\n                    \u003cdiv className=\"flex flex-col items-center justify-center relative z-10 pointer-events-none\"\u003e\r\n                        \u003cspan className={cn(\r\n                            \"text-[11px] font-mono font-black border-b border-transparent leading-none\",\r\n                            mode === \u0027focus\u0027 ? \"text-rose-400\" : mode === \u0027shortBreak\u0027 ? \"text-emerald-400\" : \"text-blue-400\"\r\n                        )}\u003e\r\n                            {formatTime(timeLeft)}\r\n                        \u003c/span\u003e\r\n                        \u003cdiv className=\"mt-0.5 opacity-60\"\u003e\r\n                            {isActive ? (\r\n                                \u003cPause className={cn(\"w-2 h-2 fill-current\", mode === \u0027focus\u0027 ? \"text-rose-500\" : \"text-emerald-500\")} /\u003e\r\n                            ) : (\r\n                                \u003cPlay className={cn(\"w-2 h-2 fill-current\", mode === \u0027focus\u0027 ? \"text-rose-500\" : \"text-emerald-500\")} /\u003e\r\n                            )}\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Quick Expand Hint */}\r\n                    \u003cdiv className=\"absolute bottom-1 right-1 bg-blue-500/20 w-3 h-3 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none\"\u003e\r\n                        \u003cdiv className=\"w-1.5 h-1.5 bg-blue-400 rounded-full animate-pulse\" /\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n            \u003c/motion.div\u003e\r\n        );\r\n    }\r\n\r\n    // MAXIMIZED VIEW (Overlay)\r\n    return (\r\n        \u003c\u003e\r\n            \u003cmotion.div\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                exit={{ opacity: 0 }}\r\n                className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-[9990]\"\r\n                onClick={() =\u003e setIsMinimized(true)}\r\n            /\u003e\r\n\r\n            \u003cdiv className=\"fixed inset-0 z-[9999] pointer-events-none flex items-center justify-center\"\u003e\r\n                \u003cmotion.div\r\n                    layoutId=\"pomodoro-widget\"\r\n                    initial={{ scale: 0.9, opacity: 0 }}\r\n                    animate={{ scale: 1, opacity: 1 }}\r\n                    exit={{ scale: 0.9, opacity: 0 }}\r\n                    className={cn(\r\n                        \"pointer-events-auto relative flex flex-col items-center\",\r\n                        \"w-[90vw] max-w-sm md:w-96 rounded-[2.5rem] p-6 md:p-8 shadow-2xl backdrop-blur-2xl border cursor-default overflow-hidden transition-colors duration-500\",\r\n                        \"bg-slate-900/95 border-slate-800/50\",\r\n                        \"text-white\",\r\n                        getModeColor().replace(\u0027from-\u0027, \u0027border-\u0027)\r\n                    )}\r\n                    style={{\r\n                        boxShadow: mode === \u0027focus\u0027 ? \u00270 0 100px -10px rgba(244, 63, 94, 0.4)\u0027 :\r\n                            mode === \u0027shortBreak\u0027 ? \u00270 10px 40px -10px rgba(16, 185, 129, 0.2)\u0027 :\r\n                                \u00270 10px 40px -10px rgba(59, 130, 246, 0.2)\u0027\r\n                    }}\r\n                \u003e\r\n                    {/* Header */}\r\n                    \u003cdiv className=\"flex items-center justify-between w-full mb-8 mt-2\"\u003e\r\n                        \u003cdiv className=\"flex items-center gap-2\"\u003e\r\n                            \u003cdiv className={cn(\r\n                                \"p-2 rounded-xl bg-slate-800/50\",\r\n                                mode === \u0027focus\u0027 ? \u0027text-rose-400\u0027 :\r\n                                    mode === \u0027shortBreak\u0027 ? \u0027text-emerald-400\u0027 : \u0027text-blue-400\u0027\r\n                            )}\u003e\r\n                                \u003cTimer className=\"w-4 h-4\" /\u003e\r\n                            \u003c/div\u003e\r\n                            \u003cspan className=\"text-xs font-black uppercase tracking-[0.2em] select-none text-slate-400\"\u003e\r\n                                {getModeLabel()}\r\n                            \u003c/span\u003e\r\n                        \u003c/div\u003e\r\n\r\n                        \u003cdiv className=\"flex gap-2\"\u003e\r\n                            \u003cbutton\r\n                                onClick={() =\u003e setShowSoundPanel(!showSoundPanel)}\r\n                                className={cn(\r\n                                    \"p-2 transition-all rounded-xl hover:bg-slate-800/50\",\r\n                                    isAudioPlaying ? \"text-blue-400 bg-blue-500/10\" : \"text-slate-500 hover:text-white\"\r\n                                )}\r\n                                title=\"Sons de Foco\"\r\n                            \u003e\r\n                                \u003cVolume2 className=\"w-5 h-5\" /\u003e\r\n                            \u003c/button\u003e\r\n                            \u003cbutton\r\n                                onClick={() =\u003e setIsMinimized(true)}\r\n                                className=\"p-2 text-slate-500 hover:text-white transition-all rounded-xl hover:bg-slate-800/50\"\r\n                                title=\"Minimizar\"\r\n                            \u003e\r\n                                \u003cX className=\"w-5 h-5\" /\u003e\r\n                            \u003c/button\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Check if Sound Panel is open */}\r\n                    {showSoundPanel ? (\r\n                        \u003cdiv className=\"w-full h-56 mb-10 overflow-hidden flex flex-col gap-4\"\u003e\r\n                            {/* ... Sound Panel Content ... */}\r\n                            \u003cdiv className=\"flex items-center justify-between px-2\"\u003e\r\n                                \u003cspan className=\"text-sm font-bold text-slate-400 uppercase tracking-wider\"\u003eAmbiente\u003c/span\u003e\r\n                                \u003cdiv className=\"flex items-center gap-2\"\u003e\r\n                                    \u003cVolume2 className=\"w-4 h-4 text-slate-500\" /\u003e\r\n                                    \u003cinput\r\n                                        type=\"range\"\r\n                                        min=\"0\" max=\"1\" step=\"0.05\"\r\n                                        value={volume}\r\n                                        onChange={(e) =\u003e setVolume(parseFloat(e.target.value))}\r\n                                        className=\"w-24 accent-blue-500 h-1.5 bg-slate-700 rounded-lg appearance-none cursor-pointer\"\r\n                                    /\u003e\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n\r\n                            \u003cdiv className=\"grid grid-cols-2 gap-3 mt-2\"\u003e\r\n                                {[\r\n                                    { id: \u0027white\u0027, label: \u0027RuÃ­do Branco\u0027, icon: Zap },\r\n                                    { id: \u0027pink\u0027, label: \u0027RuÃ­do Rosa\u0027, icon: Waves },\r\n                                    { id: \u0027brown\u0027, label: \u0027RuÃ­do Marrom\u0027, icon: Volume2 },\r\n                                    { id: \u0027rain\u0027, label: \u0027Chuva\u0027, icon: CloudRain },\r\n                                ].map((sound) =\u003e (\r\n                                    \u003cbutton\r\n                                        key={sound.id}\r\n                                        onClick={() =\u003e {\r\n                                            if (currentSound === sound.id \u0026\u0026 isAudioPlaying) {\r\n                                                toggleAudio();\r\n                                            } else {\r\n                                                setSound(sound.id as any);\r\n                                                if (!isAudioPlaying) toggleAudio();\r\n                                            }\r\n                                        }}\r\n                                        className={cn(\r\n                                            \"flex flex-col items-center justify-center p-4 rounded-2xl border transition-all duration-300\",\r\n                                            currentSound === sound.id \u0026\u0026 isAudioPlaying\r\n                                                ? \"bg-blue-500/20 border-blue-500/50 text-white\"\r\n                                                : \"bg-slate-800/50 border-slate-800/50 text-slate-400 hover:bg-slate-800/50 hover:text-slate-200\"\r\n                                        )}\r\n                                    \u003e\r\n                                        \u003csound.icon className={cn(\"w-6 h-6 mb-2\", currentSound === sound.id \u0026\u0026 isAudioPlaying \u0026\u0026 \"animate-pulse\")} /\u003e\r\n                                        \u003cspan className=\"text-xs font-bold\"\u003e{sound.label}\u003c/span\u003e\r\n                                    \u003c/button\u003e\r\n                                ))}\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                    ) : showValidate ? (\r\n                        validationStep === \u0027validate\u0027 ? (\r\n                            /* Step 1: Validation Button Only */\r\n                            \u003cdiv className=\"w-full h-auto min-h-[14rem] mb-6 flex flex-col items-center justify-center animate-in fade-in zoom-in-95 duration-300\"\u003e\r\n                                \u003cdiv className=\"text-center mb-8\"\u003e\r\n                                    \u003cdiv className=\"w-20 h-20 bg-emerald-500/20 rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce\"\u003e\r\n                                        \u003cCheckCircle2 className=\"w-10 h-10 text-emerald-500\" /\u003e\r\n                                    \u003c/div\u003e\r\n                                    \u003ch3 className=\"text-2xl font-bold text-white mb-2\"\u003eFoco Finalizado!\u003c/h3\u003e\r\n                                    \u003cp className=\"text-slate-400\"\u003eExcelente trabalho. Vamos registrar?\u003c/p\u003e\r\n                                \u003c/div\u003e\r\n\r\n                                \u003cbutton\r\n                                    onClick={handleConfirmValidation}\r\n                                    className=\"w-full py-4 bg-emerald-500 hover:bg-emerald-600 active:bg-emerald-700 text-white font-bold rounded-2xl transition-all shadow-lg shadow-emerald-500/20 flex items-center justify-center gap-2 group\"\r\n                                \u003e\r\n                                    \u003cspan\u003eValidar SessÃ£o\u003c/span\u003e\r\n                                    \u003cCheckCircle2 className=\"w-5 h-5 group-hover:scale-110 transition-transform\" /\u003e\r\n                                \u003c/button\u003e\r\n                            \u003c/div\u003e\r\n                        ) : (\r\n                            /* Step 2: Summary Input */\r\n                            \u003cdiv className=\"w-full h-auto min-h-[14rem] mb-6 flex flex-col animate-in fade-in slide-in-from-right-4 duration-300\"\u003e\r\n                                \u003cdiv className=\"text-center mb-4\"\u003e\r\n                                    \u003ch3 className=\"text-xl font-bold text-white mb-1\"\u003eResumo da SessÃ£o ðŸ“\u003c/h3\u003e\r\n                                    \u003cp className=\"text-sm text-slate-400\"\u003eO que vocÃª aprendeu ou realizou?\u003c/p\u003e\r\n                                \u003c/div\u003e\r\n\r\n                                \u003ctextarea\r\n                                    value={summaryText}\r\n                                    onChange={(e) =\u003e setSummaryText(e.target.value)}\r\n                                    placeholder=\"Escreva aqui seu resumo...\"\r\n                                    className=\"w-full flex-1 bg-slate-800/50 border border-slate-700/50 rounded-xl p-4 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50 resize-none mb-4\"\r\n                                    autoFocus\r\n                                /\u003e\r\n\r\n                                \u003cbutton\r\n                                    onClick={handleFinalizeSession}\r\n                                    className=\"w-full py-3 bg-blue-600 hover:bg-blue-700 active:bg-blue-800 text-white font-bold rounded-xl transition-colors shadow-lg shadow-blue-500/20 flex items-center justify-center gap-2\"\r\n                                \u003e\r\n                                    \u003cCheckCircle2 className=\"w-5 h-5\" /\u003e\r\n                                    \u003cspan\u003eSalvar \u0026 Concluir\u003c/span\u003e\r\n                                \u003c/button\u003e\r\n                            \u003c/div\u003e\r\n                        )\r\n                    ) : (\r\n                        /* Progress Circle Large */\r\n                        \u003cdiv\r\n                            onClick={toggleTimer}\r\n                            className=\"relative w-56 h-56 mx-auto mb-10 flex items-center justify-center cursor-pointer group hover:scale-105 transition-transform\"\r\n                        \u003e\r\n                            \u003csvg className=\"absolute inset-0 w-full h-full -rotate-90\"\u003e\r\n                                \u003ccircle\r\n                                    cx=\"112\" cy=\"112\" r=\"100\"\r\n                                    className=\"fill-none stroke-slate-800/50\"\r\n                                    strokeWidth=\"8\"\r\n                                /\u003e\r\n                                \u003cmotion.circle\r\n                                    cx=\"112\" cy=\"112\" r=\"100\"\r\n                                    className={cn(\r\n                                        \"fill-none stroke-current\",\r\n                                        mode === \u0027focus\u0027 ? \"text-rose-500\" :\r\n                                            mode === \u0027shortBreak\u0027 ? \"text-emerald-500\" : \"text-blue-500\"\r\n                                    )}\r\n                                    strokeWidth=\"8\"\r\n                                    strokeDasharray=\"628\" // 2 * PI * 100\r\n                                    animate={{ strokeDashoffset: 628 - (628 * (1 - circleProgress / 100)) }}\r\n                                    strokeLinecap=\"round\"\r\n                                    transition={{ duration: 1, ease: \"linear\" }}\r\n                                /\u003e\r\n                            \u003c/svg\u003e\r\n\r\n                            \u003cdiv className=\"text-center z-10 select-none\"\u003e\r\n                                \u003cdiv className={cn(\r\n                                    \"text-6xl font-mono font-black tracking-tighter tabular-nums\",\r\n                                    mode === \u0027focus\u0027 ? \u0027text-white\u0027 :\r\n                                        mode === \u0027shortBreak\u0027 ? \u0027text-emerald-500\u0027 : \u0027text-blue-500\u0027\r\n                                )}\u003e\r\n                                    {formatTime(timeLeft)}\r\n                                \u003c/div\u003e\r\n                                \u003cdiv className=\"flex justify-center gap-1.5 mt-6\"\u003e\r\n                                    {[...Array(4)].map((_, i) =\u003e (\r\n                                        \u003cdiv\r\n                                            key={i}\r\n                                            className={cn(\r\n                                                \"w-2 h-2 rounded-full transition-colors\",\r\n                                                i \u003c (cycles % 4) ? \"bg-blue-400\" : \"bg-slate-700\"\r\n                                            )}\r\n                                        /\u003e\r\n                                    ))}\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                    )}\r\n\r\n                    {/* Controls */}\r\n                    {!showValidate \u0026\u0026 (\r\n                        \u003cdiv className=\"flex flex-col gap-4 mb-4\"\u003e\r\n                            \u003cdiv className=\"flex items-center justify-center gap-6\"\u003e\r\n                                \u003cbutton\r\n                                    onClick={resetTimer}\r\n                                    className=\"p-4 rounded-2xl hover:bg-slate-800/50 text-slate-400 hover:text-white transition-all active:scale-90\"\r\n                                \u003e\r\n                                    \u003cRefreshCw className=\"w-6 h-6\" /\u003e\r\n                                \u003c/button\u003e\r\n\r\n                                \u003cbutton\r\n                                    onClick={toggleTimer}\r\n                                    className={cn(\r\n                                        \"w-20 h-20 flex items-center justify-center rounded-[2rem] shadow-2xl transition-all active:scale-95 text-white\",\r\n                                        \"bg-gradient-to-br\",\r\n                                        mode === \u0027focus\u0027 ? \"from-rose-500 to-rose-600 shadow-rose-500/30\" :\r\n                                            mode === \u0027shortBreak\u0027 ? \"from-emerald-500 to-emerald-600 shadow-emerald-500/30\" :\r\n                                                \"from-blue-500 to-blue-600 shadow-blue-500/30\"\r\n                                    )}\r\n                                \u003e\r\n                                    {isActive ? \u003cPause className=\"w-8 h-8 fill-white\" /\u003e : \u003cPlay className=\"w-8 h-8 fill-white ml-2\" /\u003e}\r\n                                \u003c/button\u003e\r\n\r\n                                \u003cbutton\r\n                                    onClick={skipTimer}\r\n                                    className=\"p-4 rounded-2xl hover:bg-slate-800/50 text-slate-400 hover:text-white transition-all active:scale-90\"\r\n                                \u003e\r\n                                    \u003cSkipForward className=\"w-6 h-6\" /\u003e\r\n                                \u003c/button\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                    )}\r\n                \u003c/motion.div\u003e\r\n            \u003c/div\u003e\r\n        \u003c/\u003e\r\n    );\r\n};\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\projects\\components\\AddProjectModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Calendar\u0027 is defined but never used.","line":4,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":27}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \u0027react\u0027;\r\nimport type { Project } from \u0027../../../types\u0027;\r\nimport { Modal } from \u0027../../../components/ui/Modal\u0027;\r\nimport { X, Plus, Calendar } from \u0027lucide-react\u0027;\r\nimport { useProjectContext } from \u0027../../../context/ProjectProvider\u0027;\r\nimport { SymbolPicker } from \u0027../../../components/forms/SymbolPicker\u0027;\r\n\r\ninterface AddProjectModalProps {\r\n    isOpen: boolean;\r\n    onClose: () =\u003e void;\r\n}\r\n\r\nexport const AddProjectModal: React.FC\u003cAddProjectModalProps\u003e = ({ isOpen, onClose }) =\u003e {\r\n    const { addProject } = useProjectContext();\r\n\r\n    const [title, setTitle] = useState(\u0027\u0027);\r\n    const [description, setDescription] = useState(\u0027\u0027);\r\n    const [category, setCategory] = useState\u003cProject[\u0027category\u0027]\u003e(\u0027personal\u0027);\r\n    const [status, setStatus] = useState\u003cProject[\u0027status\u0027]\u003e(\u0027planning\u0027);\r\n    const [startDate, setStartDate] = useState(\u0027\u0027);\r\n    const [deadline, setDeadline] = useState(\u0027\u0027);\r\n    const [icon, setIcon] = useState(\u0027ðŸ“\u0027);\r\n\r\n    const handleSubmit = (e: React.FormEvent) =\u003e {\r\n        e.preventDefault();\r\n\r\n        if (!title.trim()) return;\r\n\r\n        addProject({\r\n            title: title.trim(),\r\n            description: description.trim() || undefined,\r\n            category,\r\n            status,\r\n            startDate: startDate || undefined,\r\n            deadline: deadline || undefined,\r\n            icon,\r\n            linkedTaskIds: [],\r\n            linkedGoalIds: [],\r\n        });\r\n\r\n        // Reset form\r\n        setTitle(\u0027\u0027);\r\n        setDescription(\u0027\u0027);\r\n        setCategory(\u0027personal\u0027);\r\n        setStatus(\u0027planning\u0027);\r\n        setStartDate(\u0027\u0027);\r\n        setDeadline(\u0027\u0027);\r\n        setIcon(\u0027ðŸ“\u0027);\r\n\r\n        onClose();\r\n    };\r\n\r\n    const categoryOptions = [\r\n        { value: \u0027professional\u0027, label: \u0027Profissional\u0027, icon: \u0027ðŸ’¼\u0027 },\r\n        { value: \u0027personal\u0027, label: \u0027Pessoal\u0027, icon: \u0027ðŸ \u0027 },\r\n        { value: \u0027academic\u0027, label: \u0027AcadÃªmico\u0027, icon: \u0027ðŸŽ“\u0027 },\r\n    ] as const;\r\n\r\n    const statusOptions = [\r\n        { value: \u0027planning\u0027, label: \u0027Planejando\u0027 },\r\n        { value: \u0027active\u0027, label: \u0027Ativo\u0027 },\r\n        { value: \u0027paused\u0027, label: \u0027Pausado\u0027 },\r\n        { value: \u0027completed\u0027, label: \u0027ConcluÃ­do\u0027 },\r\n    ] as const;\r\n\r\n    return (\r\n        \u003cModal isOpen={isOpen} onClose={onClose} maxWidth=\"lg\"\u003e\r\n            \u003cdiv className=\"p-6\"\u003e\r\n                {/* Header */}\r\n                \u003cdiv className=\"flex items-center justify-between mb-6\"\u003e\r\n                    \u003ch2 className=\"text-2xl font-bold text-white\"\u003eNovo Projeto\u003c/h2\u003e\r\n                    \u003cbutton\r\n                        onClick={onClose}\r\n                        className=\"text-slate-400 hover:text-white transition-colors\"\r\n                    \u003e\r\n                        \u003cX className=\"w-6 h-6\" /\u003e\r\n                    \u003c/button\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* Form */}\r\n                \u003cform onSubmit={handleSubmit} className=\"space-y-5\"\u003e\r\n                    {/* Icon \u0026 Title */}\r\n                    \u003cdiv className=\"flex gap-3\"\u003e\r\n                        \u003cdiv className=\"w-[120px] flex-shrink-0\"\u003e\r\n                            \u003clabel className=\"block text-xs font-bold text-slate-500 uppercase mb-2\"\u003e\r\n                                Ãcone\r\n                            \u003c/label\u003e\r\n                            \u003cSymbolPicker\r\n                                value={icon}\r\n                                onChange={setIcon}\r\n                                placeholder=\"ðŸ“\"\r\n                            /\u003e\r\n                        \u003c/div\u003e\r\n                        \u003cdiv className=\"flex-1\"\u003e\r\n                            \u003clabel className=\"block text-xs font-bold text-slate-500 uppercase mb-2\"\u003e\r\n                                Nome do Projeto\r\n                            \u003c/label\u003e\r\n                            \u003cinput\r\n                                type=\"text\"\r\n                                value={title}\r\n                                onChange={(e) =\u003e setTitle(e.target.value)}\r\n                                placeholder=\"Ex: App de FinanÃ§as\"\r\n                                className=\"w-full h-[40px] bg-slate-900/50 border border-slate-700 rounded-lg px-4 text-white placeholder-slate-500 focus:border-blue-500 focus:outline-none transition-all\"\r\n                                required\r\n                            /\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Description */}\r\n                    \u003ctextarea\r\n                        value={description}\r\n                        onChange={(e) =\u003e setDescription(e.target.value)}\r\n                        placeholder=\"DescriÃ§Ã£o (opcional)\"\r\n                        className=\"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-4 py-2 text-white placeholder-slate-500 focus:border-blue-500 focus:outline-none resize-none\"\r\n                        rows={3}\r\n                    /\u003e\r\n\r\n                    {/* Category \u0026 Status */}\r\n                    \u003cdiv className=\"grid grid-cols-2 gap-3\"\u003e\r\n                        \u003cdiv\u003e\r\n                            \u003clabel className=\"block text-xs font-bold text-slate-500 uppercase mb-2\"\u003e\r\n                                Categoria\r\n                            \u003c/label\u003e\r\n                            \u003cdiv className=\"grid grid-cols-3 gap-2\"\u003e\r\n                                {categoryOptions.map(opt =\u003e (\r\n                                    \u003cbutton\r\n                                        key={opt.value}\r\n                                        type=\"button\"\r\n                                        onClick={() =\u003e setCategory(opt.value)}\r\n                                        className={`p-2 rounded-lg text-xs font-medium transition-all ${category === opt.value\r\n                                            ? \u0027bg-blue-500 text-white\u0027\r\n                                            : \u0027bg-slate-800 text-slate-400 hover:bg-slate-700\u0027\r\n                                            }`}\r\n                                    \u003e\r\n                                        \u003cdiv className=\"text-lg mb-1\"\u003e{opt.icon}\u003c/div\u003e\r\n                                        {opt.label}\r\n                                    \u003c/button\u003e\r\n                                ))}\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n\r\n                        \u003cdiv\u003e\r\n                            \u003clabel className=\"block text-xs font-bold text-slate-500 uppercase mb-2\"\u003e\r\n                                Status Inicial\r\n                            \u003c/label\u003e\r\n                            \u003cselect\r\n                                value={status}\r\n                                onChange={(e) =\u003e setStatus(e.target.value as Project[\u0027status\u0027])}\r\n                                className=\"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-3 py-2 text-white focus:border-blue-500 focus:outline-none\"\r\n                            \u003e\r\n                                {statusOptions.map(opt =\u003e (\r\n                                    \u003coption key={opt.value} value={opt.value}\u003e\r\n                                        {opt.label}\r\n                                    \u003c/option\u003e\r\n                                ))}\r\n                            \u003c/select\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Dates */}\r\n                    \u003cdiv className=\"grid grid-cols-2 gap-3\"\u003e\r\n                        \u003cdiv\u003e\r\n                            \u003clabel className=\"block text-xs font-bold text-slate-500 uppercase mb-2\"\u003e\r\n                                Data de InÃ­cio\r\n                            \u003c/label\u003e\r\n                            \u003cinput\r\n                                type=\"date\"\r\n                                value={startDate}\r\n                                onChange={(e) =\u003e setStartDate(e.target.value)}\r\n                                className=\"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-3 py-2 text-white focus:border-blue-500 focus:outline-none\"\r\n                            /\u003e\r\n                        \u003c/div\u003e\r\n\r\n                        \u003cdiv\u003e\r\n                            \u003clabel className=\"block text-xs font-bold text-slate-500 uppercase mb-2\"\u003e\r\n                                Deadline\r\n                            \u003c/label\u003e\r\n                            \u003cinput\r\n                                type=\"date\"\r\n                                value={deadline}\r\n                                onChange={(e) =\u003e setDeadline(e.target.value)}\r\n                                className=\"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-3 py-2 text-white focus:border-blue-500 focus:outline-none\"\r\n                            /\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Actions */}\r\n                    \u003cdiv className=\"flex gap-3 pt-4\"\u003e\r\n                        \u003cbutton\r\n                            type=\"button\"\r\n                            onClick={onClose}\r\n                            className=\"flex-1 px-4 py-2 rounded-lg text-slate-400 hover:text-white transition-colors\"\r\n                        \u003e\r\n                            Cancelar\r\n                        \u003c/button\u003e\r\n                        \u003cbutton\r\n                            type=\"submit\"\r\n                            disabled={!title.trim()}\r\n                            className=\"flex-1 bg-blue-600 hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-bold transition-all flex items-center justify-center gap-2\"\r\n                        \u003e\r\n                            \u003cPlus className=\"w-4 h-4\" /\u003e\r\n                            Criar Projeto\r\n                        \u003c/button\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/form\u003e\r\n            \u003c/div\u003e\r\n        \u003c/Modal\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\projects\\components\\ProjectCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Target\u0027 is defined but never used.","line":3,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":47}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \u0027react\u0027;\r\nimport type { Project } from \u0027../../../types\u0027;\r\nimport { Calendar, CheckCircle2, Link2, Target } from \u0027lucide-react\u0027;\r\nimport { format } from \u0027date-fns\u0027;\r\nimport { ptBR } from \u0027date-fns/locale\u0027;\r\nimport { IconRenderer } from \u0027../../../components/ui/IconRenderer\u0027;\r\n\r\ninterface ProjectCardProps {\r\n    project: Project;\r\n    onClick: () =\u003e void;\r\n}\r\n\r\nexport const ProjectCard: React.FC\u003cProjectCardProps\u003e = ({ project, onClick }) =\u003e {\r\n    const statusConfig = {\r\n        planning: { label: \u0027Planejando\u0027, color: \u0027bg-slate-500/20 text-slate-300\u0027, dot: \u0027bg-slate-500\u0027 },\r\n        active: { label: \u0027Ativo\u0027, color: \u0027bg-blue-500/20 text-blue-300\u0027, dot: \u0027bg-blue-500\u0027 },\r\n        paused: { label: \u0027Pausado\u0027, color: \u0027bg-amber-500/20 text-amber-300\u0027, dot: \u0027bg-amber-500\u0027 },\r\n        completed: { label: \u0027ConcluÃ­do\u0027, color: \u0027bg-emerald-500/20 text-emerald-300\u0027, dot: \u0027bg-emerald-500\u0027 },\r\n    };\r\n\r\n    const categoryConfig = {\r\n        professional: { label: \u0027Profissional\u0027, icon: \u0027ðŸ’¼\u0027 },\r\n        personal: { label: \u0027Pessoal\u0027, icon: \u0027ðŸ \u0027 },\r\n        academic: { label: \u0027AcadÃªmico\u0027, icon: \u0027ðŸŽ“\u0027 },\r\n    };\r\n\r\n    const status = statusConfig[project.status];\r\n    const category = categoryConfig[project.category];\r\n    const completedMilestones = project.milestones.filter(m =\u003e m.completed).length;\r\n\r\n    return (\r\n        \u003cdiv\r\n            onClick={onClick}\r\n            className=\"bg-slate-900/40 hover:bg-slate-800/50 border border-slate-800/50 rounded-2xl p-6 cursor-pointer transition-all hover:scale-[1.02] hover:shadow-xl group\"\r\n        \u003e\r\n            {/* Header */}\r\n            \u003cdiv className=\"flex items-start justify-between mb-4\"\u003e\r\n                \u003cdiv className=\"flex items-center gap-3\"\u003e\r\n                    \u003cdiv className=\"text-3xl\"\u003e\r\n                        \u003cIconRenderer icon={project.icon || category.icon} size={32} className=\"text-white\" /\u003e\r\n                    \u003c/div\u003e\r\n                    \u003cdiv\u003e\r\n                        \u003ch3 className=\"text-white font-bold text-lg group-hover:text-blue-300 transition-colors\"\u003e\r\n                            {project.title}\r\n                        \u003c/h3\u003e\r\n                        \u003cp className=\"text-slate-400 text-xs mt-0.5\"\u003e{category.label}\u003c/p\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n\r\n                \u003cdiv className={`px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1.5 ${status.color}`}\u003e\r\n                    \u003cdiv className={`w-2 h-2 rounded-full ${status.dot} animate-pulse`} /\u003e\r\n                    {status.label}\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n\r\n            {/* Description */}\r\n            {project.description \u0026\u0026 (\r\n                \u003cp className=\"text-slate-400 text-sm mb-4 line-clamp-2\"\u003e\r\n                    {project.description}\r\n                \u003c/p\u003e\r\n            )}\r\n\r\n            {/* Progress Bar */}\r\n            \u003cdiv className=\"mb-4\"\u003e\r\n                \u003cdiv className=\"flex items-center justify-between mb-2\"\u003e\r\n                    \u003cspan className=\"text-xs text-slate-500\"\u003eProgresso\u003c/span\u003e\r\n                    \u003cspan className=\"text-xs font-bold text-blue-400\"\u003e{project.progress}%\u003c/span\u003e\r\n                \u003c/div\u003e\r\n                \u003cdiv className=\"h-2 bg-slate-800 rounded-full overflow-hidden\"\u003e\r\n                    \u003cdiv\r\n                        className=\"h-full bg-gradient-to-r from-blue-500 to-purple-500 rounded-full transition-all duration-500\"\r\n                        style={{ width: `${project.progress}%` }}\r\n                    /\u003e\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n\r\n            {/* Metadata */}\r\n            \u003cdiv className=\"flex items-center gap-4 text-xs text-slate-500\"\u003e\r\n                {project.milestones.length \u003e 0 \u0026\u0026 (\r\n                    \u003cdiv className=\"flex items-center gap-1.5\"\u003e\r\n                        \u003cCheckCircle2 className=\"w-4 h-4\" /\u003e\r\n                        \u003cspan\u003e{completedMilestones}/{project.milestones.length} marcos\u003c/span\u003e\r\n                    \u003c/div\u003e\r\n                )}\r\n\r\n                {(project.linkedTaskIds.length \u003e 0 || project.linkedGoalIds.length \u003e 0) \u0026\u0026 (\r\n                    \u003cdiv className=\"flex items-center gap-1.5\"\u003e\r\n                        \u003cLink2 className=\"w-4 h-4\" /\u003e\r\n                        \u003cspan\u003e{project.linkedTaskIds.length + project.linkedGoalIds.length} vinculados\u003c/span\u003e\r\n                    \u003c/div\u003e\r\n                )}\r\n\r\n                {project.deadline \u0026\u0026 (\r\n                    \u003cdiv className=\"flex items-center gap-1.5\"\u003e\r\n                        \u003cCalendar className=\"w-4 h-4\" /\u003e\r\n                        \u003cspan\u003e{format(new Date(project.deadline), \"d \u0027de\u0027 MMM\", { locale: ptBR })}\u003c/span\u003e\r\n                    \u003c/div\u003e\r\n                )}\r\n            \u003c/div\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\settings\\Settings.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027themes\u0027 is assigned a value but never used.","line":14,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":52},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027tasks\u0027 is assigned a value but never used.","line":14,"column":54,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":59},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027goals\u0027 is assigned a value but never used.","line":14,"column":61,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":66},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027studyGamification\u0027 is assigned a value but never used.","line":14,"column":82,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":99},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027zenMode\u0027 is assigned a value but never used.","line":14,"column":101,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":108},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\settings\\Settings.tsx:29:36\n  27 |\n  28 |     useEffect(() =\u003e {\n\u003e 29 |         if (profile?.display_name) setDisplayName((profile.display_name as string) ?? \u0027\u0027);\n     |                                    ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  30 |         if (profile?.avatar_url) setAvatarUrl((profile.avatar_url as string) ?? \u0027\u0027);\n  31 |         if (settings) {\n  32 |             setFocusDuration(settings.focusDuration);","line":29,"column":36,"nodeType":null,"endLine":29,"endColumn":50}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from \u0027react\u0027;\r\nimport { useAuth } from \u0027../../context/AuthContext\u0027;\r\nimport { usePomodoroContext } from \u0027../../context/PomodoroContext\u0027;\r\nimport { useStudy } from \u0027../../context/StudyContext\u0027;\r\nimport { User, Timer, Save, Trash2, ShieldAlert, RefreshCw } from \u0027lucide-react\u0027;\r\nimport { Card } from \u0027../../components/ui/Card\u0027;\r\nimport { ConfirmationModal } from \u0027../../components/ui/ConfirmationModal\u0027;\r\nimport { ImageUpload } from \u0027../../components/forms/ImageUpload\u0027;\r\nimport { BackupSection } from \u0027../../components/settings/BackupSection\u0027;\r\n\r\nexport const Settings = () =\u003e {\r\n    const { user, profile, updateProfile } = useAuth();\r\n    const { settings, updateSettings } = usePomodoroContext();\r\n    const { resetAccount, resetGamification, themes, tasks, goals, gamification: studyGamification, zenMode } = useStudy();\r\n\r\n    // Local state for form inputs\r\n    const [displayName, setDisplayName] = useState(\u0027\u0027);\r\n    const [avatarUrl, setAvatarUrl] = useState(\u0027\u0027);\r\n    const [focusDuration, setFocusDuration] = useState(25);\r\n    const [shortBreak, setShortBreak] = useState(5);\r\n    const [longBreak, setLongBreak] = useState(15);\r\n    const [strictMode, setStrictMode] = useState(false);\r\n    const [isSaved, setIsSaved] = useState(false);\r\n    const [isDangerModalOpen, setIsDangerModalOpen] = useState(false);\r\n    const [isResetGamificationModalOpen, setIsResetGamificationModalOpen] = useState(false);\r\n\r\n\r\n    useEffect(() =\u003e {\r\n        if (profile?.display_name) setDisplayName((profile.display_name as string) ?? \u0027\u0027);\r\n        if (profile?.avatar_url) setAvatarUrl((profile.avatar_url as string) ?? \u0027\u0027);\r\n        if (settings) {\r\n            setFocusDuration(settings.focusDuration);\r\n            setShortBreak(settings.shortBreakDuration);\r\n            setLongBreak(settings.longBreakDuration);\r\n            setStrictMode(settings.strictMode || false);\r\n        }\r\n    }, [profile, settings]);\r\n\r\n    const handleSaveProfile = async () =\u003e {\r\n        await updateProfile({\r\n            display_name: displayName,\r\n            avatar_url: avatarUrl\r\n        });\r\n        setIsSaved(true);\r\n        setTimeout(() =\u003e setIsSaved(false), 2000);\r\n    };\r\n\r\n    const handleSaveTimer = () =\u003e {\r\n        updateSettings({\r\n            focusDuration,\r\n            shortBreakDuration: shortBreak,\r\n            longBreakDuration: longBreak,\r\n            strictMode\r\n        });\r\n        setIsSaved(true);\r\n        setTimeout(() =\u003e setIsSaved(false), 2000);\r\n    };\r\n\r\n    return (\r\n        \u003cdiv className=\"space-y-6 max-w-4xl mx-auto pb-20 fade-in\"\u003e\r\n            \u003cheader className=\"mb-8\"\u003e\r\n                \u003ch1 className=\"text-3xl font-black text-white tracking-tight\"\u003eConfiguraÃ§Ãµes\u003c/h1\u003e\r\n                \u003cp className=\"text-slate-400 mt-1\"\u003ePersonalize sua experiÃªncia de estudos.\u003c/p\u003e\r\n            \u003c/header\u003e\r\n\r\n            {/* Profile Section */}\r\n            \u003csection className=\"space-y-4\"\u003e\r\n                \u003ch2 className=\"text-lg font-bold text-slate-200 flex items-center gap-2\"\u003e\r\n                    \u003cUser className=\"w-5 h-5 text-blue-400\" /\u003e\r\n                    Perfil\r\n                \u003c/h2\u003e\r\n                \u003cCard className=\"bg-slate-900/50 border-slate-800\"\u003e\r\n                    \u003cdiv className=\"flex flex-col md:flex-row gap-8 items-start\"\u003e\r\n                        {/* 1. Avatar Column */}\r\n                        \u003cdiv className=\"flex flex-col items-center gap-3 shrink-0 mx-auto md:mx-0\"\u003e\r\n                            \u003cdiv className=\"relative group\"\u003e\r\n                                \u003cdiv className=\"w-24 h-24 rounded-full overflow-hidden border-2 border-slate-700 shadow-xl bg-slate-800\"\u003e\r\n                                    {profile?.avatar_url || avatarUrl ? (\r\n                                        \u003cimg\r\n                                            src={avatarUrl || (profile?.avatar_url as string) || \u0027\u0027}\r\n                                            alt=\"Profile\"\r\n                                            className=\"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110\"\r\n                                        /\u003e\r\n                                    ) : (\r\n                                        \u003cdiv className=\"w-full h-full flex items-center justify-center text-3xl font-bold text-slate-500\"\u003e\r\n                                            {displayName ? displayName[0].toUpperCase() : user?.email?.[0].toUpperCase()}\r\n                                        \u003c/div\u003e\r\n                                    )}\r\n                                \u003c/div\u003e\r\n                                {/* Overlay for Upload */}\r\n                                \u003cdiv className=\"absolute inset-0 rounded-full bg-black/60 opacity-0 group-hover:opacity-100 transition-all flex items-center justify-center backdrop-blur-sm cursor-pointer border-2 border-white/20\"\u003e\r\n                                    \u003cImageUpload value={avatarUrl} onChange={setAvatarUrl} /\u003e\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n                            \u003cspan className=\"text-[10px] uppercase font-bold text-slate-500 tracking-wider\"\u003eFoto de Perfil\u003c/span\u003e\r\n                        \u003c/div\u003e\r\n\r\n                        {/* 2. Info Column */}\r\n                        \u003cdiv className=\"flex-1 space-y-5 w-full\"\u003e\r\n                            \u003cdiv className=\"grid grid-cols-1 md:grid-cols-2 gap-5\"\u003e\r\n                                \u003cdiv className=\"space-y-1.5\"\u003e\r\n                                    \u003clabel className=\"text-xs font-bold text-slate-500 uppercase flex items-center gap-2\"\u003e\r\n                                        Nome de ExibiÃ§Ã£o\r\n                                    \u003c/label\u003e\r\n                                    \u003cinput\r\n                                        type=\"text\"\r\n                                        value={displayName}\r\n                                        onChange={(e) =\u003e setDisplayName(e.target.value)}\r\n                                        className=\"bg-slate-950 border border-slate-700 rounded-lg px-4 py-2.5 text-white w-full focus:border-blue-500 focus:ring-1 focus:ring-blue-500/50 focus:outline-none transition-all\"\r\n                                        placeholder=\"Como vocÃª quer ser chamado?\"\r\n                                    /\u003e\r\n                                \u003c/div\u003e\r\n\r\n                                \u003cdiv className=\"space-y-1.5 opacity-60 pointer-events-none select-none\"\u003e\r\n                                    \u003clabel className=\"text-xs font-bold text-slate-500 uppercase flex items-center gap-2\"\u003e\r\n                                        Email (NÃ£o editÃ¡vel)\r\n                                    \u003c/label\u003e\r\n                                    \u003cinput\r\n                                        type=\"text\"\r\n                                        value={user?.email}\r\n                                        readOnly\r\n                                        className=\"bg-slate-900/50 border border-slate-800 rounded-lg px-4 py-2.5 text-slate-400 w-full cursor-not-allowed\"\r\n                                    /\u003e\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n\r\n                            \u003cdiv className=\"flex justify-end pt-2\"\u003e\r\n                                \u003cbutton\r\n                                    onClick={handleSaveProfile}\r\n                                    disabled={!displayName.trim()}\r\n                                    className=\"bg-blue-600 hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-2.5 rounded-lg font-bold text-sm transition-all flex items-center gap-2 shadow-lg shadow-blue-500/20 active:translate-y-0.5\"\r\n                                \u003e\r\n                                    \u003cSave className=\"w-4 h-4\" /\u003e\r\n                                    Salvar AlteraÃ§Ãµes\r\n                                \u003c/button\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/Card\u003e\r\n            \u003c/section\u003e\r\n\r\n            {/* Timer Section */}\r\n            \u003csection className=\"space-y-4\"\u003e\r\n                \u003ch2 className=\"text-lg font-bold text-slate-200 flex items-center gap-2\"\u003e\r\n                    \u003cTimer className=\"w-5 h-5 text-amber-400\" /\u003e\r\n                    Foco \u0026 Pomodoro\r\n                \u003c/h2\u003e\r\n                \u003cCard className=\"bg-slate-900/50 border-slate-800\"\u003e\r\n                    \u003cdiv className=\"grid grid-cols-1 md:grid-cols-4 gap-6\"\u003e\r\n                        \u003cdiv\u003e\r\n                            \u003clabel className=\"text-xs font-bold text-slate-500 uppercase block mb-2\"\u003eFoco (min)\u003c/label\u003e\r\n                            \u003cinput\r\n                                type=\"number\"\r\n                                value={focusDuration}\r\n                                onChange={(e) =\u003e setFocusDuration(Number(e.target.value))}\r\n                                className=\"bg-slate-950 border border-slate-700 rounded-lg px-3 py-2 text-white w-full font-mono text-lg focus:border-amber-500 focus:outline-none\"\r\n                            /\u003e\r\n                        \u003c/div\u003e\r\n                        \u003cdiv\u003e\r\n                            \u003clabel className=\"text-xs font-bold text-slate-500 uppercase block mb-2\"\u003ePausa Curta (min)\u003c/label\u003e\r\n                            \u003cinput\r\n                                type=\"number\"\r\n                                value={shortBreak}\r\n                                onChange={(e) =\u003e setShortBreak(Number(e.target.value))}\r\n                                className=\"bg-slate-950 border border-slate-700 rounded-lg px-3 py-2 text-white w-full font-mono text-lg focus:border-amber-500 focus:outline-none\"\r\n                            /\u003e\r\n                        \u003c/div\u003e\r\n                        \u003cdiv\u003e\r\n                            \u003clabel className=\"text-xs font-bold text-slate-500 uppercase block mb-2\"\u003ePausa Longa (min)\u003c/label\u003e\r\n                            \u003cinput\r\n                                type=\"number\"\r\n                                value={longBreak}\r\n                                onChange={(e) =\u003e setLongBreak(Number(e.target.value))}\r\n                                className=\"bg-slate-950 border border-slate-700 rounded-lg px-3 py-2 text-white w-full font-mono text-lg focus:border-amber-500 focus:outline-none\"\r\n                            /\u003e\r\n                        \u003c/div\u003e\r\n                        \u003cdiv\u003e\r\n                            \u003clabel className=\"text-xs font-bold text-slate-500 uppercase block mb-2\"\u003eModo Strict\u003c/label\u003e\r\n                            \u003cdiv className=\"flex items-center gap-3 mt-2\"\u003e\r\n                                \u003cbutton\r\n                                    onClick={() =\u003e setStrictMode(!strictMode)}\r\n                                    className={`w-12 h-6 rounded-full p-1 transition-colors ${strictMode ? \u0027bg-amber-600\u0027 : \u0027bg-slate-700\u0027}`}\r\n                                \u003e\r\n                                    \u003cdiv className={`w-4 h-4 bg-white rounded-full transition-transform ${strictMode ? \u0027translate-x-6\u0027 : \u0027translate-x-0\u0027}`} /\u003e\r\n                                \u003c/button\u003e\r\n                                \u003cspan className=\"text-xs text-slate-400\"\u003e\r\n                                    {strictMode ? \u0027Ativado (Esconde Menu)\u0027 : \u0027Desativado\u0027}\r\n                                \u003c/span\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n                    \u003cdiv className=\"mt-6 flex justify-end\"\u003e\r\n                        \u003cbutton\r\n                            onClick={handleSaveTimer}\r\n                            className=\"bg-amber-600 hover:bg-amber-500 text-white px-4 py-2 rounded-lg font-bold transition-all flex items-center gap-2\"\r\n                        \u003e\r\n                            \u003cSave className=\"w-4 h-4\" /\u003e\r\n                            Atualizar Timer\r\n                        \u003c/button\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/Card\u003e\r\n            \u003c/section\u003e\r\n\r\n            {/* Data Management Section */}\r\n            \u003csection className=\"space-y-4\"\u003e\r\n                \u003ch2 className=\"text-lg font-bold text-slate-200 flex items-center gap-2\"\u003e\r\n                    \u003cTimer className=\"w-5 h-5 text-emerald-400\" /\u003e\r\n                    Dados e Backup\r\n                \u003c/h2\u003e\r\n                \u003cBackupSection /\u003e\r\n            \u003c/section\u003e\r\n\r\n            {/* Danger Zone */}\r\n            \u003csection className=\"space-y-4 opacity-80 hover:opacity-100 transition-opacity\"\u003e\r\n                \u003ch2 className=\"text-lg font-bold text-red-400 flex items-center gap-2\"\u003e\r\n                    \u003cShieldAlert className=\"w-5 h-5\" /\u003e\r\n                    Zona de Perigo\r\n                \u003c/h2\u003e\r\n                \u003cCard className=\"bg-red-950/10 border-red-900/30 border-dashed\"\u003e\r\n                    \u003cdiv className=\"flex flex-col gap-6\"\u003e\r\n                        {/* Reset Gamification */}\r\n                        \u003cdiv className=\"flex items-center justify-between pb-6 border-b border-red-900/30\"\u003e\r\n                            \u003cdiv\u003e\r\n                                \u003ch3 className=\"font-bold text-red-200\"\u003eResetar GamificaÃ§Ã£o\u003c/h3\u003e\r\n                                \u003cp className=\"text-xs text-red-300/60 mt-1\"\u003e\r\n                                    Zera seu NÃ­vel, XP e Conquistas, mas \u003cspan className=\"text-red-300 font-bold\"\u003eMANTÃ‰M\u003c/span\u003e seus temas e tarefas.\r\n                                \u003c/p\u003e\r\n                            \u003c/div\u003e\r\n                            \u003cbutton\r\n                                onClick={() =\u003e setIsResetGamificationModalOpen(true)}\r\n                                className=\"bg-red-950 hover:bg-red-900 text-red-400 border border-red-800 px-4 py-2 rounded-lg font-bold text-sm transition-all flex items-center gap-2\"\r\n                            \u003e\r\n                                \u003cRefreshCw className=\"w-4 h-4\" /\u003e\r\n                                Resetar XP\r\n                            \u003c/button\u003e\r\n                        \u003c/div\u003e\r\n\r\n                        {/* Reset All */}\r\n                        \u003cdiv className=\"flex items-center justify-between\"\u003e\r\n                            \u003cdiv\u003e\r\n                                \u003ch3 className=\"font-bold text-red-200\"\u003eZerar Tudo (ComeÃ§ar do Zero)\u003c/h3\u003e\r\n                                \u003cp className=\"text-xs text-red-300/60 mt-1\"\u003e\r\n                                    Apaga permanentemente: \u003cspan className=\"font-bold text-red-400\"\u003eMetas, CalendÃ¡rio e Tarefas\u003c/span\u003e.\r\n                                \u003c/p\u003e\r\n                            \u003c/div\u003e\r\n                            \u003cbutton\r\n                                onClick={() =\u003e setIsDangerModalOpen(true)}\r\n                                className=\"bg-red-950 hover:bg-red-900 text-red-400 border border-red-800 px-4 py-2 rounded-lg font-bold text-sm transition-all flex items-center gap-2\"\r\n                            \u003e\r\n                                \u003cTrash2 className=\"w-4 h-4\" /\u003e\r\n                                Zerar Tudo\r\n                            \u003c/button\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/Card\u003e\r\n            \u003c/section\u003e\r\n\r\n            {isSaved \u0026\u0026 (\r\n                \u003cdiv className=\"fixed bottom-8 right-8 bg-emerald-500 text-white px-6 py-3 rounded-xl shadow-lg shadow-emerald-500/20 font-bold animate-in slide-in-from-bottom-5 fade-in\"\u003e\r\n                    AlteraÃ§Ãµes salvas!\r\n                \u003c/div\u003e\r\n            )}\r\n\r\n            \u003cConfirmationModal\r\n                isOpen={isDangerModalOpen}\r\n                onClose={() =\u003e setIsDangerModalOpen(false)}\r\n                onConfirm={() =\u003e {\r\n                    resetAccount();\r\n                    setIsDangerModalOpen(false);\r\n                }}\r\n                title=\"Zerar Tudo?\"\r\n                description=\"VocÃª estÃ¡ prestes a apagar TODAS as suas Metas, Itens do CalendÃ¡rio e Tarefas. Esta aÃ§Ã£o Ã© irreversÃ­vel. Tem certeza que deseja recomeÃ§ar do zero?\"\r\n                confirmText=\"Sim, Zerar Tudo\"\r\n                type=\"danger\"\r\n            /\u003e\r\n\r\n            \u003cConfirmationModal\r\n                isOpen={isResetGamificationModalOpen}\r\n                onClose={() =\u003e setIsResetGamificationModalOpen(false)}\r\n                onConfirm={async () =\u003e {\r\n                    await resetGamification();\r\n                    setIsResetGamificationModalOpen(false);\r\n                }}\r\n                title=\"Resetar Apenas GamificaÃ§Ã£o?\"\r\n                description=\"VocÃª voltarÃ¡ para o NÃ­vel 1 com 0 XP. Suas conquistas serÃ£o bloqueadas novamente. Seus temas e tarefas NÃƒO serÃ£o apagados.\"\r\n                confirmText=\"Sim, Zerar meu XP\"\r\n                type=\"danger\"\r\n            /\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\study\\StudySession.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\study\\StudySession.tsx:39:13\n  37 |\n  38 |         if (found) {\n\u003e 39 |             setSubtheme(found);\n     |             ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  40 |             setThemeColor(color);\n  41 |         }\n  42 |     }, [subthemeId, themes]);","line":39,"column":13,"nodeType":null,"endLine":39,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027grade\u0027 is defined but never used.","line":48,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":48,"endColumn":37}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from \u0027react\u0027;\r\nimport { useStudy } from \u0027../../context/StudyContext\u0027;\r\nimport { Flashcard } from \u0027./components/Flashcard\u0027;\r\nimport { StudyControls } from \u0027./components/StudyControls\u0027;\r\nimport { ArrowLeft, Loader2, Award } from \u0027lucide-react\u0027;\r\n\r\ninterface StudySessionProps {\r\n    subthemeId: string;\r\n    onExit: () =\u003e void;\r\n}\r\n\r\nexport const StudySession: React.FC\u003cStudySessionProps\u003e = ({ subthemeId, onExit }) =\u003e {\r\n    const { themes, completeReview } = useStudy();\r\n\r\n    // State\r\n    const [isFlipped, setIsFlipped] = useState(false);\r\n    const [subtheme, setSubtheme] = useState\u003cany\u003e(null);\r\n    const [themeColor, setThemeColor] = useState(\u0027#3b82f6\u0027);\r\n    const [isCompleted, setIsCompleted] = useState(false);\r\n\r\n    // Load Subtheme\r\n    useEffect(() =\u003e {\r\n        if (!subthemeId || themes.length === 0) return;\r\n\r\n        // Find subs in themes\r\n        let found = null;\r\n        let color = \u0027#3b82f6\u0027;\r\n\r\n        for (const t of themes) {\r\n            const s = t.subthemes.find(sub =\u003e sub.id === subthemeId);\r\n            if (s) {\r\n                found = s;\r\n                color = t.color || \u0027#3b82f6\u0027;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (found) {\r\n            setSubtheme(found);\r\n            setThemeColor(color);\r\n        }\r\n    }, [subthemeId, themes]);\r\n\r\n    const handleFlip = () =\u003e {\r\n        setIsFlipped(!isFlipped);\r\n    };\r\n\r\n    const handleGrade = async (grade: \u0027bad\u0027 | \u0027hard\u0027 | \u0027good\u0027 | \u0027easy\u0027) =\u003e {\r\n        if (!subtheme) return;\r\n\r\n        // In future: pass grade to algorithm\r\n        await completeReview(subtheme.id, subtheme.reviews, \u0027review\u0027);\r\n\r\n        setIsCompleted(true);\r\n        // Delay to exit\r\n        setTimeout(() =\u003e {\r\n            onExit();\r\n        }, 1500);\r\n    };\r\n\r\n    if (!subtheme) {\r\n        return (\r\n            \u003cdiv className=\"flex items-center justify-center h-screen bg-slate-950\"\u003e\r\n                \u003cLoader2 className=\"w-8 h-8 text-blue-500 animate-spin\" /\u003e\r\n            \u003c/div\u003e\r\n        );\r\n    }\r\n\r\n    if (isCompleted) {\r\n        return (\r\n            \u003cdiv className=\"flex flex-col items-center justify-center h-screen bg-slate-950 animate-in fade-in duration-500 relative z-50\"\u003e\r\n                \u003cdiv className=\"w-24 h-24 bg-emerald-500/20 rounded-full flex items-center justify-center mb-6 ring-4 ring-emerald-500/10 animate-bounce\"\u003e\r\n                    \u003cAward className=\"w-12 h-12 text-emerald-400\" /\u003e\r\n                \u003c/div\u003e\r\n                \u003ch2 className=\"text-3xl font-bold text-white mb-2\"\u003eExcelente!\u003c/h2\u003e\r\n                \u003cp className=\"text-slate-400\"\u003eRevisÃ£o concluÃ­da com sucesso.\u003c/p\u003e\r\n            \u003c/div\u003e\r\n        );\r\n    }\r\n\r\n    return (\r\n        \u003cdiv className=\"fixed inset-0 z-[100] flex flex-col h-screen bg-slate-950 relative overflow-hidden animate-in zoom-in-95 duration-300\"\u003e\r\n            {/* Zen Background */}\r\n            \u003cdiv className=\"absolute inset-0 bg-[url(\u0027https://grainy-gradients.vercel.app/noise.svg\u0027)] opacity-5 mix-blend-overlay pointer-events-none\" /\u003e\r\n            \u003cdiv\r\n                className=\"absolute top-[-20%] left-[-10%] w-[50%] h-[50%] blur-[120px] opacity-20 pointer-events-none transition-colors duration-1000\"\r\n                style={{ backgroundColor: themeColor }}\r\n            /\u003e\r\n\r\n            {/* Header */}\r\n            \u003cheader className=\"flex items-center justify-between p-6 relative z-10\"\u003e\r\n                \u003cbutton\r\n                    onClick={onExit}\r\n                    className=\"p-2 text-slate-400 hover:text-white hover:bg-slate-800/50 rounded-xl transition-all\"\r\n                \u003e\r\n                    \u003cArrowLeft className=\"w-6 h-6\" /\u003e\r\n                \u003c/button\u003e\r\n                \u003cdiv className=\"flex flex-col items-center\"\u003e\r\n                    \u003cspan className=\"text-xs font-bold text-slate-500 uppercase tracking-widest\"\u003eRevisÃ£o\u003c/span\u003e\r\n                \u003c/div\u003e\r\n                \u003cdiv className=\"w-10\" /\u003e\r\n            \u003c/header\u003e\r\n\r\n            {/* Main Stage */}\r\n            \u003cmain className=\"flex-1 flex flex-col items-center justify-center p-6 relative z-10 pb-20\"\u003e\r\n                \u003cFlashcard\r\n                    frontContent={subtheme.title}\r\n                    backContent={subtheme.text_content || \"Sem descriÃ§Ã£o disponÃ­vel para estudo.\"}\r\n                    isFlipped={isFlipped}\r\n                    onFlip={handleFlip}\r\n                /\u003e\r\n            \u003c/main\u003e\r\n\r\n            {/* Controls */}\r\n            \u003cfooter className=\"fixed bottom-0 w-full p-8 pb-12 flex justify-center bg-gradient-to-t from-slate-950 via-slate-950/90 to-transparent pointer-events-none\"\u003e\r\n                \u003cdiv className=\"pointer-events-auto\"\u003e\r\n                    \u003cStudyControls\r\n                        isVisible={isFlipped}\r\n                        onGrade={handleGrade}\r\n                    /\u003e\r\n                \u003c/div\u003e\r\n            \u003c/footer\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\study\\components\\Flashcard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027useState\u0027 is defined but never used.","line":1,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":25}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \u0027react\u0027;\r\nimport { cn } from \u0027../../../lib/utils\u0027; // Assuming global utils path\r\nimport DOMPurify from \u0027dompurify\u0027;\r\n\r\ninterface FlashcardProps {\r\n    frontContent: string;\r\n    backContent: string;\r\n    isFlipped: boolean;\r\n    onFlip: () =\u003e void;\r\n}\r\n\r\nexport const Flashcard: React.FC\u003cFlashcardProps\u003e = ({ frontContent, backContent, isFlipped, onFlip }) =\u003e {\r\n    return (\r\n        \u003cdiv\r\n            className=\"perspective-1000 w-full max-w-2xl h-96 cursor-pointer group\"\r\n            onClick={onFlip}\r\n        \u003e\r\n            \u003cdiv className={cn(\r\n                \"relative w-full h-full transition-all duration-500 transform-style-3d\",\r\n                isFlipped ? \"rotate-y-180\" : \"\"\r\n            )}\u003e\r\n                {/* Front */}\r\n                \u003cdiv className=\"absolute w-full h-full backface-hidden\"\u003e\r\n                    \u003cdiv className=\"w-full h-full bg-slate-900 border-2 border-slate-700/50 rounded-3xl flex flex-col items-center justify-center p-8 shadow-2xl hover:border-slate-600 transition-colors\"\u003e\r\n                        \u003cspan className=\"text-sm font-bold text-slate-500 uppercase tracking-[0.2em] mb-4\"\u003ePergunta\u003c/span\u003e\r\n                        \u003ch2 className=\"text-3xl md:text-4xl font-bold text-center text-slate-100 leading-tight\"\u003e\r\n                            {frontContent}\r\n                        \u003c/h2\u003e\r\n                        \u003cspan className=\"absolute bottom-8 text-xs text-slate-600 animate-pulse\"\u003eToque para virar\u003c/span\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* Back */}\r\n                \u003cdiv className=\"absolute w-full h-full backface-hidden rotate-y-180\"\u003e\r\n                    \u003cdiv className=\"w-full h-full bg-gradient-to-br from-blue-900/40 to-slate-900 border-2 border-blue-500/30 rounded-3xl flex flex-col items-center justify-center p-8 shadow-[0_0_30px_rgba(59,130,246,0.1)]\"\u003e\r\n                        \u003cspan className=\"text-sm font-bold text-blue-400 uppercase tracking-[0.2em] mb-4\"\u003eResposta\u003c/span\u003e\r\n                        \u003cdiv\r\n                            className=\"text-xl md:text-2xl text-center text-slate-200 leading-relaxed overflow-y-auto max-h-full custom-scrollbar prose prose-invert\"\r\n                            dangerouslySetInnerHTML={{ __html: DOMPurify.sanitize(backContent) }}\r\n                        /\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\study\\components\\StudyControls.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\summaries\\SummariesPage.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Sparkles\u0027 is defined but never used.","line":2,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":28}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo } from \u0027react\u0027;\r\nimport { FileText, Sparkles, Calendar as CalendarIcon, Filter } from \u0027lucide-react\u0027;\r\nimport { useStudy } from \u0027../../context/StudyContext\u0027;\r\nimport { Timeline } from \u0027../../components/timeline\u0027;\r\nimport type { SummaryEntry } from \u0027../../types\u0027;\r\n\r\nexport const SummariesPage: React.FC = () =\u003e {\r\n    const { goals, themes, tasks } = useStudy();\r\n    const [filterType, setFilterType] = React.useState\u003cSummaryEntry[\u0027type\u0027] | \u0027all\u0027\u003e(\u0027all\u0027);\r\n    const [searchTerm, setSearchTerm] = React.useState(\u0027\u0027);\r\n\r\n    // Collect all summaries from all sources\r\n    const allSummaries = useMemo(() =\u003e {\r\n        const summaries: SummaryEntry[] = [];\r\n\r\n        // Track source type for each entry if not already in metadata\r\n        tasks.forEach(task =\u003e {\r\n            if (task.summaries) {\r\n                task.summaries.forEach(s =\u003e {\r\n                    summaries.push({\r\n                        ...s,\r\n                        metadata: {\r\n                            ...s.metadata,\r\n                            entityId: s.metadata?.entityId || task.id,\r\n                            entityType: s.metadata?.entityType || \u0027task\u0027,\r\n                            entityTitle: s.metadata?.entityTitle || task.title,\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n        });\r\n\r\n        goals.forEach(goal =\u003e {\r\n            if (goal.summaries) {\r\n                goal.summaries.forEach(s =\u003e {\r\n                    summaries.push({\r\n                        ...s,\r\n                        metadata: {\r\n                            ...s.metadata,\r\n                            entityId: s.metadata?.entityId || goal.id,\r\n                            entityType: s.metadata?.entityType || \u0027goal\u0027,\r\n                            entityTitle: s.metadata?.entityTitle || goal.title,\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n        });\r\n\r\n        themes.forEach(theme =\u003e {\r\n            const themeType = theme.category === \u0027project\u0027 ? \u0027project\u0027 : \u0027theme\u0027;\r\n            if (theme.summaries) {\r\n                theme.summaries.forEach(s =\u003e {\r\n                    summaries.push({\r\n                        ...s,\r\n                        metadata: {\r\n                            ...s.metadata,\r\n                            entityId: s.metadata?.entityId || theme.id,\r\n                            entityType: s.metadata?.entityType || themeType,\r\n                            entityTitle: s.metadata?.entityTitle || theme.title,\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n            theme.subthemes.forEach(subtheme =\u003e {\r\n                if (subtheme.summaries) {\r\n                    subtheme.summaries.forEach(s =\u003e {\r\n                        summaries.push({\r\n                            ...s,\r\n                            metadata: {\r\n                                ...s.metadata,\r\n                                entityId: s.metadata?.entityId || subtheme.id,\r\n                                entityType: s.metadata?.entityType || themeType,\r\n                                entityTitle: s.metadata?.entityTitle || subtheme.title,\r\n                            }\r\n                        });\r\n                    });\r\n                }\r\n            });\r\n        });\r\n\r\n        return summaries.sort((a, b) =\u003e\r\n            new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime()\r\n        );\r\n    }, [tasks, goals, themes]);\r\n\r\n    // Update filter logic to use entityType\r\n    const [entityFilter, setEntityFilter] = React.useState\u003cNonNullable\u003cSummaryEntry[\u0027metadata\u0027]\u003e[\u0027entityType\u0027] | \u0027all\u0027\u003e(\u0027all\u0027);\r\n\r\n    const filteredSummaries = useMemo(() =\u003e {\r\n        let filtered = allSummaries;\r\n\r\n        if (entityFilter !== \u0027all\u0027) {\r\n            filtered = filtered.filter(s =\u003e s.metadata?.entityType === entityFilter);\r\n        }\r\n\r\n        if (filterType !== \u0027all\u0027) {\r\n            filtered = filtered.filter(s =\u003e s.type === filterType);\r\n        }\r\n\r\n        if (searchTerm.trim()) {\r\n            const term = searchTerm.toLowerCase();\r\n            filtered = filtered.filter(s =\u003e\r\n                s.title?.toLowerCase().includes(term) ||\r\n                s.description?.toLowerCase().includes(term) ||\r\n                s.metadata?.entityTitle?.toLowerCase().includes(term)\r\n            );\r\n        }\r\n\r\n        return filtered;\r\n    }, [allSummaries, entityFilter, filterType, searchTerm]);\r\n\r\n    const counts = useMemo(() =\u003e {\r\n        return {\r\n            all: allSummaries.length,\r\n            task: allSummaries.filter(s =\u003e s.metadata?.entityType === \u0027task\u0027).length,\r\n            goal: allSummaries.filter(s =\u003e s.metadata?.entityType === \u0027goal\u0027).length,\r\n            theme: allSummaries.filter(s =\u003e s.metadata?.entityType === \u0027theme\u0027).length,\r\n            project: allSummaries.filter(s =\u003e s.metadata?.entityType === \u0027project\u0027).length,\r\n        };\r\n    }, [allSummaries]);\r\n\r\n    const entityButtons = [\r\n        { type: \u0027all\u0027 as const, label: \u0027Todos\u0027, color: \u0027from-slate-500 to-slate-600\u0027, bgColor: \u0027bg-slate-500/10\u0027, borderColor: \u0027border-slate-500/30\u0027 },\r\n        { type: \u0027goal\u0027 as const, label: \u0027Metas\u0027, color: \u0027from-blue-500 to-blue-600\u0027, bgColor: \u0027bg-blue-500/10\u0027, borderColor: \u0027border-blue-500/30\u0027 },\r\n        { type: \u0027task\u0027 as const, label: \u0027Tarefas\u0027, color: \u0027from-purple-500 to-purple-600\u0027, bgColor: \u0027bg-purple-500/10\u0027, borderColor: \u0027border-purple-500/30\u0027 },\r\n        { type: \u0027theme\u0027 as const, label: \u0027Temas\u0027, color: \u0027from-orange-500 to-orange-600\u0027, bgColor: \u0027bg-orange-500/10\u0027, borderColor: \u0027border-orange-500/30\u0027 },\r\n        { type: \u0027project\u0027 as const, label: \u0027Projetos\u0027, color: \u0027from-green-500 to-green-600\u0027, bgColor: \u0027bg-green-500/10\u0027, borderColor: \u0027border-green-500/30\u0027 },\r\n    ];\r\n\r\n    const filterButtons: { type: SummaryEntry[\u0027type\u0027] | \u0027all\u0027, label: string }[] = [\r\n        { type: \u0027all\u0027, label: \u0027Todos os tipos\u0027 },\r\n        { type: \u0027review\u0027, label: \u0027RevisÃµes\u0027 },\r\n        { type: \u0027session\u0027, label: \u0027SessÃµes de Foco\u0027 },\r\n        { type: \u0027goal\u0027, label: \u0027Progresso\u0027 },\r\n        { type: \u0027completion\u0027, label: \u0027ConclusÃµes\u0027 },\r\n        { type: \u0027note\u0027, label: \u0027Notas\u0027 }\r\n    ];\r\n\r\n    return (\r\n        \u003cdiv className=\"w-full min-h-screen relative pb-32\"\u003e\r\n            {/* Animated Background */}\r\n            \u003cdiv className=\"absolute inset-0 opacity-30 pointer-events-none overflow-hidden\"\u003e\r\n                \u003cdiv className=\"absolute top-0 -left-4 w-96 h-96 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob\" /\u003e\r\n                \u003cdiv className=\"absolute top-0 -right-4 w-96 h-96 bg-blue-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000\" /\u003e\r\n                \u003cdiv className=\"absolute -bottom-8 left-20 w-96 h-96 bg-orange-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000\" /\u003e\r\n            \u003c/div\u003e\r\n\r\n            \u003cdiv className=\"relative z-10 max-w-7xl mx-auto\"\u003e\r\n                {/* Header */}\r\n                \u003cdiv className=\"mb-8\"\u003e\r\n                    \u003cdiv className=\"flex items-center gap-3 mb-6\"\u003e\r\n                        \u003cdiv className=\"w-12 h-12 rounded-2xl bg-gradient-to-br from-purple-500/20 to-blue-500/20 border border-purple-500/30 flex items-center justify-center backdrop-blur-xl shadow-lg shadow-purple-900/20\"\u003e\r\n                            \u003cFileText className=\"w-6 h-6 text-purple-400\" /\u003e\r\n                        \u003c/div\u003e\r\n                        \u003cdiv\u003e\r\n                            \u003ch1 className=\"text-3xl md:text-4xl font-bold bg-gradient-to-r from-white via-purple-200 to-blue-200 bg-clip-text text-transparent\"\u003e\r\n                                Resumos \u0026 HistÃ³rico\r\n                            \u003c/h1\u003e\r\n                            \u003cp className=\"text-slate-400 text-sm md:text-base\"\u003e\r\n                                Acompanhe todas as suas atividades e conquistas\r\n                            \u003c/p\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Entity Boxes - Main Categories */}\r\n                    \u003cdiv className=\"bg-slate-800/40 backdrop-blur-xl border border-slate-700/50 rounded-[2.5rem] p-8 mb-8 shadow-2xl\"\u003e\r\n                        \u003ch3 className=\"text-sm font-bold text-slate-500 uppercase tracking-widest mb-6 px-2\"\u003eCategorias de HistÃ³rico\u003c/h3\u003e\r\n                        \u003cdiv className=\"grid grid-cols-2 lg:grid-cols-5 gap-6\"\u003e\r\n                            {entityButtons.map((btn) =\u003e {\r\n                                const count = counts[btn.type as keyof typeof counts] || (btn.type === \u0027all\u0027 ? counts.all : 0);\r\n                                const isActive = entityFilter === btn.type;\r\n\r\n                                return (\r\n                                    \u003cbutton\r\n                                        key={btn.type}\r\n                                        onClick={() =\u003e setEntityFilter(btn.type)}\r\n                                        className={`\r\n                                            relative p-6 rounded-[2rem] border transition-all duration-300 group\r\n                                            ${isActive\r\n                                                ? `${btn.bgColor} ${btn.borderColor} scale-105 shadow-xl`\r\n                                                : \u0027bg-slate-900/40 border-white/5 hover:bg-slate-800/60\u0027\r\n                                            }\r\n                                        `}\r\n                                    \u003e\r\n                                        \u003cdiv className=\"relative flex flex-col items-center\"\u003e\r\n                                            \u003cdiv className={`\r\n                                                text-3xl font-black mb-2 transition-transform duration-300 group-hover:scale-110\r\n                                                ${isActive ? \u0027bg-gradient-to-r \u0027 + btn.color + \u0027 bg-clip-text text-transparent\u0027 : \u0027text-slate-300\u0027}\r\n                                            `}\u003e\r\n                                                {count}\r\n                                            \u003c/div\u003e\r\n                                            \u003cdiv className={`text-sm font-bold tracking-wide uppercase ${isActive ? \u0027text-white\u0027 : \u0027text-slate-500\u0027}`}\u003e\r\n                                                {btn.label}\r\n                                            \u003c/div\u003e\r\n                                        \u003c/div\u003e\r\n                                    \u003c/button\u003e\r\n                                );\r\n                            })}\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Filter Bar \u0026 Search */}\r\n                    \u003cdiv className=\"flex flex-col md:flex-row gap-4 items-center\"\u003e\r\n                        \u003cdiv className=\"flex flex-wrap gap-2 flex-1\"\u003e\r\n                            {filterButtons.map(btn =\u003e (\r\n                                \u003cbutton\r\n                                    key={btn.type}\r\n                                    onClick={() =\u003e setFilterType(filterType === btn.type ? \u0027all\u0027 : btn.type)}\r\n                                    className={`\r\n                                        px-4 py-2 rounded-full text-xs font-bold transition-all\r\n                                        ${filterType === btn.type\r\n                                            ? \u0027bg-white text-slate-900 shadow-lg\u0027\r\n                                            : \u0027bg-slate-800/50 text-slate-400 border border-white/5 hover:bg-slate-700/50\u0027}\r\n                                    `}\r\n                                \u003e\r\n                                    {btn.label}\r\n                                \u003c/button\u003e\r\n                            ))}\r\n                        \u003c/div\u003e\r\n                        \u003cdiv className=\"relative w-full md:w-96\"\u003e\r\n                            \u003cinput\r\n                                type=\"text\"\r\n                                placeholder=\"Buscar em resumos...\"\r\n                                value={searchTerm}\r\n                                onChange={(e) =\u003e setSearchTerm(e.target.value)}\r\n                                className=\"w-full bg-slate-800/40 backdrop-blur-xl border border-white/5 rounded-2xl py-3 px-4 pl-12 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-purple-500/50 transition-all shadow-lg\"\r\n                            /\u003e\r\n                            \u003cFilter className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500\" /\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* Timeline Box */}\r\n                \u003cdiv className=\"bg-slate-800/40 backdrop-blur-xl border border-slate-700/50 rounded-[2.5rem] p-10 shadow-2xl\"\u003e\r\n                    \u003cdiv className=\"flex items-center gap-4 mb-10 pb-6 border-b border-white/5\"\u003e\r\n                        \u003cdiv className=\"w-14 h-14 rounded-2xl bg-gradient-to-br from-purple-500/20 to-blue-500/20 flex items-center justify-center shadow-lg\"\u003e\r\n                            \u003cCalendarIcon className=\"w-7 h-7 text-purple-400\" /\u003e\r\n                        \u003c/div\u003e\r\n                        \u003cdiv\u003e\r\n                            \u003ch2 className=\"text-2xl font-black text-white tracking-tight\"\u003eTimeline de Atividades\u003c/h2\u003e\r\n                            \u003cp className=\"text-slate-400 font-medium\"\u003e\r\n                                {filteredSummaries.length \u003e 0\r\n                                    ? `${filteredSummaries.length} ${filteredSummaries.length === 1 ? \u0027evento encontrado\u0027 : \u0027eventos encontrados\u0027}`\r\n                                    : \u0027Nenhum evento encontrado\u0027\r\n                                }\r\n                            \u003c/p\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    \u003cTimeline\r\n                        items={filteredSummaries}\r\n                        emptyMessage={searchTerm ? \u0027Nenhum resultado encontrado\u0027 : \u0027Suas atividades aparecerÃ£o aqui automaticamente\u0027}\r\n                    /\u003e\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n\r\n            {/* Custom Styles */}\r\n            \u003cstyle\u003e{`\r\n                @keyframes blob {\r\n                    0%, 100% { transform: translate(0, 0) scale(1); }\r\n                    25% { transform: translate(20px, -50px) scale(1.1); }\r\n                    50% { transform: translate(-20px, 20px) scale(0.9); }\r\n                    75% { transform: translate(50px, 50px) scale(1.05); }\r\n                }\r\n                .animate-blob {\r\n                    animation: blob 7s infinite;\r\n                }\r\n                .animation-delay-2000 {\r\n                    animation-delay: 2s;\r\n                }\r\n                .animation-delay-4000 {\r\n                    animation-delay: 4s;\r\n                }\r\n            `}\u003c/style\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\tasks\\components\\TaskDetailsModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027ptBR\u0027 is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":14}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \u0027react\u0027;\r\nimport { CheckSquare, Clock, Calendar, Trophy, PlayCircle, Activity, FileText } from \u0027lucide-react\u0027;\r\nimport { Modal } from \u0027../../../components/ui/Modal\u0027;\r\nimport { useStudy } from \u0027../../../context/StudyContext\u0027;\r\nimport { format } from \u0027date-fns\u0027;\r\nimport { ptBR } from \u0027date-fns/locale\u0027;\r\nimport { cn } from \u0027../../../lib/utils\u0027;\r\nimport type { Task } from \u0027../../../types\u0027;\r\nimport SummaryTimeline from \u0027../../../components/ui/SummaryTimeline\u0027;\r\nimport { usePomodoroContext } from \u0027../../../context/PomodoroContext\u0027;\r\nimport { IconRenderer } from \u0027../../../components/ui/IconRenderer\u0027;\r\n\r\ninterface TaskDetailsModalProps {\r\n    isOpen: boolean;\r\n    onClose: () =\u003e void;\r\n    task: Task | null;\r\n}\r\n\r\nexport const TaskDetailsModal: React.FC\u003cTaskDetailsModalProps\u003e = ({ isOpen, onClose, task }) =\u003e {\r\n    const { startFocus } = useStudy();\r\n    const { startFocusSession } = usePomodoroContext();\r\n\r\n    if (!task) return null;\r\n\r\n    const isCompleted = task.status === \u0027completed\u0027;\r\n    const isPeriod = task.type === \u0027period\u0027;\r\n    const isRecurring = task.type === \u0027recurring\u0027;\r\n\r\n    const colorScheme = isCompleted\r\n        ? {\r\n            text: \u0027text-emerald-400\u0027,\r\n            bg: \u0027bg-emerald-500/10\u0027,\r\n            border: \u0027border-emerald-500/20\u0027,\r\n            gradient: \u0027from-emerald-600 to-emerald-400\u0027\r\n        }\r\n        : {\r\n            text: \u0027text-blue-400\u0027,\r\n            bg: \u0027bg-blue-500/10\u0027,\r\n            border: \u0027border-blue-500/20\u0027,\r\n            gradient: \u0027from-blue-600 to-indigo-600\u0027\r\n        };\r\n\r\n    const handleStartFocus = () =\u003e {\r\n        const duration = task.durationMinutes || 25;\r\n        startFocus(task.id, \u0027task\u0027, task.title, duration);\r\n        startFocusSession(task.id, duration);\r\n        onClose();\r\n    };\r\n\r\n    return (\r\n        \u003cModal isOpen={isOpen} onClose={onClose} title=\"\" maxWidth=\"2xl\"\u003e\r\n            \u003cdiv className=\"relative overflow-hidden p-6 sm:p-8\"\u003e\r\n                {/* Background Decoration */}\r\n                \u003cdiv className=\"absolute top-[-10%] right-[-10%] w-[300px] h-[300px] bg-blue-600/5 rounded-full blur-[100px] pointer-events-none\" /\u003e\r\n                \u003cdiv className=\"absolute bottom-[-10%] left-[-10%] w-[250px] h-[250px] bg-indigo-600/5 rounded-full blur-[80px] pointer-events-none\" /\u003e\r\n\r\n                \u003cdiv className=\"relative z-10 flex flex-col gap-8\"\u003e\r\n                    {/* Header: Icon, Title, Category */}\r\n                    \u003cdiv className=\"flex items-start gap-6\"\u003e\r\n                        \u003cdiv className={cn(\r\n                            \"w-20 h-20 rounded-3xl flex items-center justify-center shrink-0 shadow-2xl border-2 relative overflow-hidden\",\r\n                            \"bg-gradient-to-br\",\r\n                            isCompleted ? \"from-emerald-600 to-emerald-500 border-emerald-400/50\" : \"from-blue-600 to-indigo-600 border-blue-400/50\"\r\n                        )}\u003e\r\n\r\n                            \u003cIconRenderer icon={task.icon} size={40} className=\"text-white drop-shadow-lg relative z-10\" fallback={\u003cCheckSquare className=\"w-10 h-10\" /\u003e} /\u003e\r\n                        \u003c/div\u003e\r\n\r\n                        \u003cdiv className=\"flex-1 min-w-0\"\u003e\r\n                            \u003cdiv className=\"flex items-center gap-2 mb-2\"\u003e\r\n                                \u003cspan className={cn(\r\n                                    \"px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border\",\r\n                                    colorScheme.bg, colorScheme.text, colorScheme.border\r\n                                )}\u003e\r\n                                    TAREFA\r\n                                \u003c/span\u003e\r\n                                \u003cspan className=\"px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-800 text-slate-400 border border-slate-800/50\"\u003e\r\n                                    {task.type === \u0027day\u0027 ? \u0027ÃšNICA\u0027 : isPeriod ? \u0027PERÃODO\u0027 : \u0027RECORRENTE\u0027}\r\n                                \u003c/span\u003e\r\n                                \u003cspan className={cn(\r\n                                    \"px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border\",\r\n                                    task.priority === \u0027high\u0027 ? \u0027bg-red-500/10 text-red-400 border-red-500/20\u0027 :\r\n                                        task.priority === \u0027medium\u0027 ? \u0027bg-amber-500/10 text-amber-400 border-amber-500/20\u0027 :\r\n                                            \u0027bg-emerald-500/10 text-emerald-400 border-emerald-500/20\u0027\r\n                                )}\u003e\r\n                                    {task.priority === \u0027high\u0027 ? \u0027ALTA\u0027 : task.priority === \u0027medium\u0027 ? \u0027MÃ‰DIA\u0027 : \u0027BAIXA\u0027}\r\n                                \u003c/span\u003e\r\n                            \u003c/div\u003e\r\n                            \u003ch2 className=\"text-3xl font-black text-white leading-tight break-words\"\u003e\r\n                                {task.title}\r\n                            \u003c/h2\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Progress Bar Display (for Period/Recurring) */}\r\n                    {(isPeriod || isRecurring) \u0026\u0026 task.progress \u0026\u0026 (\r\n                        \u003cdiv className=\"bg-slate-900/20 rounded-3xl p-6 shadow-inner\"\u003e\r\n                            \u003cdiv className=\"flex justify-between items-end mb-4\"\u003e\r\n                                \u003cdiv className=\"space-y-1\"\u003e\r\n                                    \u003cspan className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2\"\u003e\r\n                                        \u003cTrophy className=\"w-3 h-3\" /\u003e Progresso da MissÃ£o\r\n                                    \u003c/span\u003e\r\n                                    \u003cdiv className=\"text-4xl font-black text-white\"\u003e\r\n                                        {task.progress.current}/{task.progress.total}\r\n                                    \u003c/div\u003e\r\n                                \u003c/div\u003e\r\n                                \u003cdiv className=\"text-right space-y-1\"\u003e\r\n                                    \u003cspan className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center justify-end gap-2\"\u003e\r\n                                        Status Atual\r\n                                    \u003c/span\u003e\r\n                                    \u003cdiv className={cn(\r\n                                        \"text-sm font-bold\",\r\n                                        isCompleted ? \"text-emerald-400\" : \"text-blue-400\"\r\n                                    )}\u003e\r\n                                        {isCompleted ? \u0027Finalizado\u0027 : \u0027Em Andamento\u0027}\r\n                                    \u003c/div\u003e\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n                            \u003cdiv className=\"h-4 bg-slate-950/80 rounded-full p-1 border border-slate-800/50 shadow-inner relative overflow-hidden\"\u003e\r\n                                \u003cdiv\r\n                                    className={cn(\r\n                                        \"h-full rounded-full transition-all duration-1000 ease-out shadow-lg\",\r\n                                        \"bg-gradient-to-r\",\r\n                                        colorScheme.gradient\r\n                                    )}\r\n                                    style={{ width: `${Math.min(100, (task.progress.current / task.progress.total) * 100)}%` }}\r\n                                \u003e\r\n\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                    )}\r\n\r\n                    {/* Main Stats */}\r\n                    \u003cdiv className=\"grid grid-cols-2 sm:grid-cols-4 gap-4\"\u003e\r\n                        \u003cdiv className=\"bg-slate-900/20 rounded-2xl p-4\"\u003e\r\n                            \u003cspan className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest block mb-2\"\u003eInÃ­cio\u003c/span\u003e\r\n                            \u003cdiv className=\"text-white font-bold flex items-center gap-2 text-sm\"\u003e\r\n                                \u003cCalendar className=\"w-4 h-4 text-blue-400\" /\u003e\r\n                                {task.startDate || task.date ? format(new Date((task.startDate || task.date) + \u0027T00:00:00\u0027), \u0027dd/MM/yy\u0027) : \u0027--/--/--\u0027}\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                        \u003cdiv className=\"bg-slate-900/20 rounded-2xl p-4\"\u003e\r\n                            \u003cspan className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest block mb-2\"\u003ePrazo\u003c/span\u003e\r\n                            \u003cdiv className=\"text-white font-bold flex items-center gap-2 text-sm\"\u003e\r\n                                \u003cCalendar className=\"w-4 h-4 text-rose-400\" /\u003e\r\n                                {task.endDate || task.date ? format(new Date((task.endDate || task.date) + \u0027T00:00:00\u0027), \u0027dd/MM/yy\u0027) : \u0027--/--/--\u0027}\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                        \u003cdiv className=\"bg-slate-900/20 rounded-2xl p-4\"\u003e\r\n                            \u003cspan className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest block mb-2\"\u003eDuraÃ§Ã£o\u003c/span\u003e\r\n                            \u003cdiv className=\"text-white font-bold flex items-center gap-2 text-sm\"\u003e\r\n                                \u003cClock className=\"w-4 h-4 text-amber-400\" /\u003e\r\n                                {task.durationMinutes || 25} min\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                        \u003cdiv className=\"bg-slate-900/20 rounded-2xl p-4\"\u003e\r\n                            \u003cspan className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest block mb-2\"\u003eTotal Gasto\u003c/span\u003e\r\n                            \u003cdiv className=\"text-white font-bold flex items-center gap-2 text-sm\"\u003e\r\n                                \u003cActivity className=\"w-4 h-4 text-emerald-400\" /\u003e\r\n                                {Math.floor((task.timeSpent || 0) / 60)}h {(task.timeSpent || 0) % 60}m\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Description or Current Summary Note */}\r\n                    \u003cdiv className=\"bg-slate-900/20 rounded-3xl p-6 space-y-4\"\u003e\r\n                        \u003ch3 className=\"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 px-1\"\u003e\r\n                            \u003cFileText className=\"w-4 h-4\" /\u003e Notas da Tarefa\r\n                        \u003c/h3\u003e\r\n                        \u003cdiv className=\"text-slate-300 text-sm leading-relaxed italic bg-slate-950/50 p-4 rounded-xl border border-slate-800/50\"\u003e\r\n                            {task.summary || \"Nenhuma nota especÃ­fica para esta tarefa ainda.\"}\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Summary Timeline - Box de Resumo/HistÃ³rico */}\r\n                    \u003cdiv className=\"bg-slate-900/40 rounded-[2rem] overflow-hidden\"\u003e\r\n                        \u003cdiv className=\"p-6 sm:p-8 bg-slate-950/40\"\u003e\r\n                            \u003cSummaryTimeline\r\n                                summaries={task.summaries || []}\r\n                                title=\"HistÃ³rico da Tarefa\"\r\n                                maxItems={5}\r\n                                showEmptyState={true}\r\n                            /\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Bottom Action */}\r\n                    \u003cdiv className=\"flex gap-4\"\u003e\r\n                        \u003cbutton\r\n                            onClick={onClose}\r\n                            className=\"flex-1 h-14 bg-white/5 hover:bg-white/10 rounded-2xl font-black text-white uppercase tracking-widest transition-all shadow-xl active:scale-[0.98]\"\r\n                        \u003e\r\n                            Fechar\r\n                        \u003c/button\u003e\r\n                        {!isCompleted \u0026\u0026 (\r\n                            \u003cbutton\r\n                                onClick={handleStartFocus}\r\n                                className=\"flex-[2] h-14 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 border border-blue-400/20 rounded-2xl font-black text-white uppercase tracking-widest transition-all shadow-xl shadow-blue-500/20 flex items-center justify-center gap-3 active:scale-[0.98]\"\r\n                            \u003e\r\n                                \u003cPlayCircle className=\"w-6 h-6\" /\u003e\r\n                                Iniciar Foco\r\n                            \u003c/button\u003e\r\n                        )}\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n        \u003c/Modal\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\themes\\components\\AddThemeModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\themes\\components\\StudyContentModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027format\u0027 is defined but never used.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027ptBR\u0027 is defined but never used.","line":9,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":14}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \u0027react\u0027;\r\nimport { motion, AnimatePresence } from \u0027framer-motion\u0027;\r\nimport { X, BookOpen, Save, Clock, Brain, History, Sparkles, Maximize2 } from \u0027lucide-react\u0027;\r\nimport { RichTextEditor } from \u0027../../../components/ui/RichTextEditor\u0027;\r\nimport { Modal } from \u0027../../../components/ui/Modal\u0027;\r\nimport { cn } from \u0027../../../lib/utils\u0027;\r\nimport type { Subtheme } from \u0027../../../types\u0027;\r\nimport { format } from \u0027date-fns\u0027;\r\nimport { ptBR } from \u0027date-fns/locale\u0027;\r\nimport SummaryTimeline from \u0027../../../components/ui/SummaryTimeline\u0027;\r\n\r\ninterface StudyContentModalProps {\r\n    isOpen: boolean;\r\n    onClose: () =\u003e void;\r\n    subtheme: Subtheme | null;\r\n    onSave: (content: string) =\u003e void;\r\n}\r\n\r\nexport const StudyContentModal: React.FC\u003cStudyContentModalProps\u003e = ({ isOpen, onClose, subtheme, onSave }) =\u003e {\r\n    const [content, setContent] = useState(subtheme?.text_content || \u0027\u0027);\r\n    const [activeTab, setActiveTab] = useState\u003c\u0027content\u0027 | \u0027history\u0027\u003e(\u0027content\u0027);\r\n    const [isFullscreen, setIsFullscreen] = useState(false);\r\n\r\n    // Update internal content when subtheme changes\r\n    React.useEffect(() =\u003e {\r\n        if (subtheme) {\r\n            setContent(subtheme.text_content || \u0027\u0027);\r\n        }\r\n    }, [subtheme]);\r\n\r\n    if (!subtheme) return null;\r\n\r\n    const timeSpentH = Math.floor((subtheme.timeSpent || 0) / 60);\r\n    const timeSpentM = (subtheme.timeSpent || 0) % 60;\r\n\r\n    return (\r\n        \u003cModal\r\n            isOpen={isOpen}\r\n            onClose={onClose}\r\n            title={null} // Custom Header\r\n            maxWidth={isFullscreen ? \u0027full\u0027 : \u00273xl\u0027}\r\n            padding={false}\r\n            className={cn(\"transition-all duration-500\", isFullscreen ? \"h-[95vh]\" : \"h-[85vh]\")}\r\n        \u003e\r\n            \u003cdiv className=\"flex flex-col h-full bg-slate-950 overflow-hidden rounded-2xl border border-slate-800/50 shadow-2xl\"\u003e\r\n                {/* Custom Header */}\r\n                \u003cdiv className=\"p-6 border-b border-slate-800/50 bg-slate-900/40 relative overflow-hidden shrink-0\"\u003e\r\n                    \u003cdiv className=\"absolute top-0 right-0 w-64 h-full bg-blue-500/5 blur-3xl rounded-full pointer-events-none\" /\u003e\r\n\r\n                    \u003cdiv className=\"flex items-start justify-between relative z-10\"\u003e\r\n                        \u003cdiv className=\"flex items-center gap-4\"\u003e\r\n                            \u003cdiv className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg shadow-blue-500/20\"\u003e\r\n                                \u003cBookOpen className=\"w-6 h-6 text-white\" /\u003e\r\n                            \u003c/div\u003e\r\n                            \u003cdiv\u003e\r\n                                \u003ch2 className=\"text-xl font-bold text-white tracking-tight\"\u003e{subtheme.title}\u003c/h2\u003e\r\n                                \u003cdiv className=\"flex items-center gap-3 mt-1\"\u003e\r\n                                    \u003cspan className=\"flex items-center gap-1 text-[10px] font-bold text-slate-500 uppercase tracking-widest\"\u003e\r\n                                        \u003cClock className=\"w-3 h-3\" /\u003e\r\n                                        {timeSpentH}h {timeSpentM}m de Estudo\r\n                                    \u003c/span\u003e\r\n                                    \u003cspan className=\"w-1 h-1 bg-slate-800 rounded-full\" /\u003e\r\n                                    \u003cspan className=\"flex items-center gap-1 text-[10px] font-bold text-blue-400 uppercase tracking-widest\"\u003e\r\n                                        \u003cBrain className=\"w-3 h-3\" /\u003e\r\n                                        SRS NÃ­vel {subtheme.reviews.filter(r =\u003e r.status === \u0027completed\u0027).length}\r\n                                    \u003c/span\u003e\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                        \u003cbutton\r\n                            onClick={onClose}\r\n                            className=\"p-2 hover:bg-slate-800/50 rounded-xl text-slate-500 hover:text-white transition-all\"\r\n                        \u003e\r\n                            \u003cX className=\"w-5 h-5\" /\u003e\r\n                        \u003c/button\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Tabs */}\r\n                    \u003cdiv className=\"flex gap-1 mt-6 p-1 bg-black/40 rounded-xl w-fit border border-slate-800/50\"\u003e\r\n                        \u003cbutton\r\n                            onClick={() =\u003e setActiveTab(\u0027content\u0027)}\r\n                            className={cn(\r\n                                \"flex items-center gap-2 px-4 py-1.5 rounded-lg text-xs font-bold transition-all\",\r\n                                activeTab === \u0027content\u0027 ? \"bg-slate-800 text-white shadow-lg\" : \"text-slate-500 hover:text-slate-300\"\r\n                            )}\r\n                        \u003e\r\n                            \u003cFileTextIcon className=\"w-3.5 h-3.5\" /\u003e\r\n                            ConteÃºdo Principal\r\n                        \u003c/button\u003e\r\n                        \u003cbutton\r\n                            onClick={() =\u003e setActiveTab(\u0027history\u0027)}\r\n                            className={cn(\r\n                                \"flex items-center gap-2 px-4 py-1.5 rounded-lg text-xs font-bold transition-all\",\r\n                                activeTab === \u0027history\u0027 ? \"bg-slate-800 text-white shadow-lg\" : \"text-slate-500 hover:text-slate-300\"\r\n                            )}\r\n                        \u003e\r\n                            \u003cHistory className=\"w-3.5 h-3.5\" /\u003e\r\n                            DiÃ¡rio \u0026 Resumos\r\n                        \u003c/button\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* Content Area */}\r\n                \u003cdiv className=\"flex-1 overflow-y-auto p-6 custom-scrollbar\"\u003e\r\n                    \u003cAnimatePresence mode=\"wait\"\u003e\r\n                        {activeTab === \u0027content\u0027 ? (\r\n                            \u003cmotion.div\r\n                                key=\"content\"\r\n                                initial={{ opacity: 0, y: 10 }}\r\n                                animate={{ opacity: 1, y: 0 }}\r\n                                exit={{ opacity: 0, y: -10 }}\r\n                                className=\"space-y-6\"\r\n                            \u003e\r\n                                \u003cdiv className=\"flex items-center justify-between mb-2\"\u003e\r\n                                    \u003ch3 className=\"text-sm font-bold text-slate-400 uppercase tracking-widest\"\u003eAnotaÃ§Ãµes do MÃ³dulo\u003c/h3\u003e\r\n                                    \u003cdiv className=\"flex items-center gap-2\"\u003e\r\n                                        \u003cbutton className=\"flex items-center gap-1.5 px-3 py-1.5 bg-indigo-500/10 hover:bg-indigo-500/20 text-indigo-400 rounded-lg text-[10px] font-bold uppercase transition-all border border-indigo-500/20\"\u003e\r\n                                            \u003cSparkles className=\"w-3 h-3\" /\u003e\r\n                                            Gerar com IA\r\n                                        \u003c/button\u003e\r\n                                    \u003c/div\u003e\r\n                                \u003c/div\u003e\r\n\r\n                                \u003cRichTextEditor\r\n                                    content={content}\r\n                                    onChange={setContent}\r\n                                /\u003e\r\n\r\n                                \u003cdiv className=\"bg-slate-900/30 border border-slate-800/50 rounded-2xl p-4 flex items-center gap-4\"\u003e\r\n                                    \u003cdiv className=\"p-2 rounded-lg bg-emerald-500/10 text-emerald-500\"\u003e\r\n                                        \u003cMaximize2 className=\"w-4 h-4\" /\u003e\r\n                                    \u003c/div\u003e\r\n                                    \u003cdiv className=\"flex-1 min-w-0\"\u003e\r\n                                        \u003cp className=\"text-xs font-bold text-white\"\u003eModo de Leitura Focado\u003c/p\u003e\r\n                                        \u003cp className=\"text-[10px] text-slate-500\"\u003eExpanda para estudar sem distraÃ§Ãµes.\u003c/p\u003e\r\n                                    \u003c/div\u003e\r\n                                    \u003cbutton\r\n                                        onClick={() =\u003e setIsFullscreen(!isFullscreen)}\r\n                                        className=\"px-3 py-1 bg-slate-800 hover:bg-slate-700 text-white rounded-lg text-[10px] font-bold\"\r\n                                    \u003e\r\n                                        {isFullscreen ? \u0027REDUZIR\u0027 : \u0027ABRIR\u0027}\r\n                                    \u003c/button\u003e\r\n                                \u003c/div\u003e\r\n                            \u003c/motion.div\u003e\r\n                        ) : (\r\n                            \u003cmotion.div\r\n                                key=\"history\"\r\n                                initial={{ opacity: 0, y: 10 }}\r\n                                animate={{ opacity: 1, y: 0 }}\r\n                                exit={{ opacity: 0, y: -10 }}\r\n                                className=\"space-y-4\"\r\n                            \u003e\r\n                                {(!subtheme.summaries || subtheme.summaries.length === 0) \u0026\u0026 (!subtheme.reviews || subtheme.reviews.filter(r =\u003e r.status === \u0027completed\u0027).length === 0) ? (\r\n                                    \u003cdiv className=\"text-center py-20 bg-slate-900/20 rounded-[2rem] border border-dashed border-slate-800\"\u003e\r\n                                        \u003cHistory className=\"w-12 h-12 text-slate-700 mx-auto mb-4\" /\u003e\r\n                                        \u003cp className=\"text-slate-500 font-medium\"\u003eNenhum resumo disponÃ­vel ainda.\u003c/p\u003e\r\n                                        \u003cp className=\"text-xs text-slate-600 mt-1\"\u003eConclua uma revisÃ£o para registrar seus aprendizados.\u003c/p\u003e\r\n                                    \u003c/div\u003e\r\n                                ) : (\r\n                                    \u003cSummaryTimeline summaries={subtheme.summaries || []} title=\"HistÃ³rico de Estudos\" /\u003e\r\n                                )}\r\n                            \u003c/motion.div\u003e\r\n                        )}\r\n                    \u003c/AnimatePresence\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* Footer */}\r\n                {activeTab === \u0027content\u0027 \u0026\u0026 (\r\n                    \u003cdiv className=\"p-4 border-t border-slate-800/50 bg-slate-900/40 shrink-0 flex items-center justify-between\"\u003e\r\n                        \u003cp className=\"text-[10px] text-slate-500 font-medium italic\"\u003e\r\n                            Alt + S para salvar rapidamente\r\n                        \u003c/p\u003e\r\n                        \u003cbutton\r\n                            onClick={() =\u003e onSave(content)}\r\n                            className=\"group relative flex items-center gap-2 px-6 py-2.5 bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl font-bold text-sm shadow-lg shadow-emerald-500/20 transition-all hover:scale-[1.02] active:scale-95\"\r\n                        \u003e\r\n                            \u003cSave className=\"w-4 h-4\" /\u003e\r\n                            Salvar AlteraÃ§Ãµes\r\n                        \u003c/button\u003e\r\n                    \u003c/div\u003e\r\n                )}\r\n            \u003c/div\u003e\r\n        \u003c/Modal\u003e\r\n    );\r\n};\r\n\r\nconst FileTextIcon = (props: any) =\u003e (\r\n    \u003csvg\r\n        {...props}\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width=\"24\"\r\n        height=\"24\"\r\n        viewBox=\"0 0 24 24\"\r\n        fill=\"none\"\r\n        stroke=\"currentColor\"\r\n        strokeWidth=\"2\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n    \u003e\r\n        \u003cpath d=\"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z\" /\u003e\u003cpath d=\"M14 2v4a2 2 0 0 0 2 2h4\" /\u003e\u003cpath d=\"M10 9H8\" /\u003e\u003cpath d=\"M16 13H8\" /\u003e\u003cpath d=\"M16 17H8\" /\u003e\r\n    \u003c/svg\u003e\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\themes\\components\\SubthemeItem.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027useRef\u0027 is defined but never used.","line":1,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027themeColor\u0027 is defined but never used.","line":20,"column":37,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":47},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027startAudio\u0027 is assigned a value but never used.","line":25,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":23}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useRef } from \u0027react\u0027;\r\nimport { useStudy } from \u0027../../../context/StudyContext\u0027;\r\nimport { usePomodoroContext } from \u0027../../../context/PomodoroContext\u0027;\r\nimport { useAudio } from \u0027../../../context/AudioContext\u0027;\r\nimport { Play, FileText, ChevronDown, BookOpen, Lock } from \u0027lucide-react\u0027;\r\nimport { format } from \u0027date-fns\u0027;\r\nimport { cn } from \u0027../../../lib/utils\u0027;\r\nimport type { Subtheme, Review } from \u0027../../../types\u0027;\r\nimport { useSRSLogic } from \u0027../../../hooks/useSRSLogic\u0027;\r\nimport { SummaryHistoryModal } from \u0027./SummaryHistoryModal\u0027;\r\n\r\ninterface SubthemeItemProps {\r\n    sub: Subtheme;\r\n    themeColor: string;\r\n    projectedStart?: string;\r\n    onOpenNotes: (sub: Subtheme) =\u003e void;\r\n    unlockedSubthemes: string[];\r\n}\r\n\r\nexport const SubthemeItem = ({ sub, themeColor, projectedStart, onOpenNotes, unlockedSubthemes }: SubthemeItemProps) =\u003e {\r\n    const [isExpanded, setIsExpanded] = useState(false);\r\n\r\n    const { startFocus } = useStudy();\r\n    const { startFocusSession, isActive } = usePomodoroContext();\r\n    const { startAudio } = useAudio();\r\n    const { generateProjectedReviews } = useSRSLogic();\r\n\r\n    // Strict Summary Unlock Logic\r\n    const isUnlocked = unlockedSubthemes \u0026\u0026 unlockedSubthemes.includes(sub.id);\r\n\r\n    // Determines items to show\r\n    let displayReviews = [...sub.reviews];\r\n    const isProjectedView = sub.status === \u0027queue\u0027 \u0026\u0026 projectedStart \u0026\u0026 displayReviews.length === 0;\r\n\r\n    if (isProjectedView \u0026\u0026 projectedStart) {\r\n        displayReviews = generateProjectedReviews(projectedStart);\r\n    }\r\n    const sortedReviews = displayReviews.sort((a: Review, b: Review) =\u003e new Date(a.date).getTime() - new Date(b.date).getTime());\r\n\r\n    // Status Config\r\n    const statusConfig: Record\u003cstring, { color: string; bg: string; border: string; icon: string; label: string }\u003e = {\r\n        active: { color: \u0027text-emerald-400\u0027, bg: \u0027bg-emerald-500/10\u0027, border: \u0027border-emerald-500/20\u0027, icon: \u0027âš¡\u0027, label: \u0027Ativo\u0027 },\r\n        completed: { color: \u0027text-blue-400\u0027, bg: \u0027bg-blue-500/10\u0027, border: \u0027border-blue-500/20\u0027, icon: \u0027âœ“\u0027, label: \u0027ConcluÃ­do\u0027 },\r\n        queue: { color: \u0027text-slate-400\u0027, bg: \u0027bg-slate-800/50\u0027, border: \u0027border-slate-700/50\u0027, icon: \u0027â³\u0027, label: \u0027Fila\u0027 },\r\n    };\r\n    const status = statusConfig[sub.status as string] || statusConfig.queue;\r\n\r\n    const [isSummaryOpen, setIsSummaryOpen] = useState(false);\r\n\r\n    // ... existing statusConfig ...\r\n\r\n    const isModule = sub.difficulty === \u0027module\u0027;\r\n\r\n    if (isModule) {\r\n        // ... module render ...\r\n        return (\r\n            \u003cdiv className=\"relative py-2 flex items-center justify-center overflow-hidden\"\u003e\r\n                \u003cdiv className=\"absolute inset-0 flex items-center\"\u003e\r\n                    \u003cdiv className=\"w-full border-t border-slate-800/50\"\u003e\u003c/div\u003e\r\n                \u003c/div\u003e\r\n                \u003cspan className=\"relative bg-slate-950 px-3 text-[10px] font-black uppercase tracking-[0.2em] text-slate-600\"\u003e\r\n                    {sub.title}\r\n                \u003c/span\u003e\r\n            \u003c/div\u003e\r\n        );\r\n    }\r\n\r\n    return (\r\n        \u003c\u003e\r\n            \u003cdiv className={cn(\r\n                \"rounded-xl transition-all duration-300 border group/item overflow-hidden\",\r\n                isExpanded ? \"bg-slate-900 border-slate-700 shadow-xl\" : \"bg-slate-900/40 border-slate-800/50 hover:bg-slate-900/60 hover:border-slate-700/50\"\r\n            )}\u003e\r\n                \u003cdiv\r\n                    onClick={() =\u003e setIsExpanded(!isExpanded)}\r\n                    className=\"p-3 flex items-center gap-3 cursor-pointer select-none\"\r\n                \u003e\r\n                    {/* Status Dot */}\r\n                    \u003cdiv className={cn(\"w-2 h-2 rounded-full shadow-[0_0_8px]\", status.bg.replace(\u0027bg-\u0027, \u0027bg-\u0027).replace(\u0027/10\u0027, \u0027\u0027))}\r\n                        style={{ backgroundColor: status.color.replace(\u0027text-\u0027, \u0027\u0027), boxShadow: `0 0 8px currentColor` }}\r\n                    /\u003e\r\n\r\n                    \u003cspan className={cn(\r\n                        \"flex-1 text-sm font-medium transition-colors truncate\",\r\n                        isExpanded ? \"text-white\" : \"text-slate-400 group-hover:item:text-slate-200\",\r\n                        sub.status === \u0027completed\u0027 \u0026\u0026 \"line-through opacity-50 text-slate-600\"\r\n                    )}\u003e\r\n                        {sub.title}\r\n                    \u003c/span\u003e\r\n\r\n                    \u003cdiv className=\"flex items-center gap-2\"\u003e\r\n                        {/* Summary History Button (New) */}\r\n                        \u003cbutton\r\n                            onClick={(e) =\u003e {\r\n                                e.stopPropagation();\r\n                                setIsSummaryOpen(true);\r\n                            }}\r\n                            className={cn(\r\n                                \"w-7 h-7 flex items-center justify-center rounded-lg border transition-all\",\r\n                                \"bg-slate-800 border-slate-700 text-slate-500 hover:bg-indigo-500/20 hover:text-indigo-300 hover:border-indigo-500/30\"\r\n                            )}\r\n                            title=\"DiÃ¡rio de Aprendizado / Resumos\"\r\n                        \u003e\r\n                            \u003cBookOpen className=\"w-3.5 h-3.5 fill-current\" /\u003e\r\n                        \u003c/button\u003e\r\n\r\n                        {/* Edit Content / Notes Button */}\r\n                        \u003cbutton\r\n                            onClick={(e) =\u003e {\r\n                                e.stopPropagation();\r\n                                if (isUnlocked) onOpenNotes(sub);\r\n                            }}\r\n                            disabled={!isUnlocked}\r\n                            className={cn(\r\n                                \"w-7 h-7 flex items-center justify-center rounded-lg border transition-all\",\r\n                                !isUnlocked\r\n                                    ? \"bg-slate-800/50 border-slate-700/50 text-slate-600 cursor-not-allowed opacity-50\"\r\n                                    : sub.text_content\r\n                                        ? \"bg-indigo-500/10 border-indigo-500/30 text-indigo-400 hover:bg-indigo-500 hover:text-white\"\r\n                                        : \"bg-slate-800 border-slate-700 text-slate-500 hover:bg-indigo-500/20 hover:text-indigo-300 hover:border-indigo-500/30\"\r\n                            )}\r\n                            title={isUnlocked ? \"AnotaÃ§Ãµes do ConteÃºdo\" : \"Complete um Pomodoro hoje para liberar o conteÃºdo\"}\r\n                        \u003e\r\n                            \u003cFileText className=\"w-3.5 h-3.5 fill-current\" /\u003e\r\n                        \u003c/button\u003e\r\n\r\n                        {/* Play Button for Subtheme */}\r\n                        {(() =\u003e {\r\n                            // Determine availability\r\n                            let isLocked = false;\r\n                            let lockReason = \"\";\r\n                            const todayStr = format(new Date(), \u0027yyyy-MM-dd\u0027);\r\n\r\n                            if (sub.status === \u0027completed\u0027) {\r\n                                isLocked = true;\r\n                                lockReason = \"Tema concluÃ­do! ParabÃ©ns!\";\r\n                            } else if (sub.status === \u0027queue\u0027) {\r\n                                isLocked = true;\r\n                                lockReason = \"Este mÃ³dulo ainda nÃ£o foi iniciado.\";\r\n                                if (projectedStart) lockReason += ` PrevisÃ£o: ${format(new Date(projectedStart), \u0027dd/MM\u0027)}`;\r\n                            } else if (sub.status === \u0027active\u0027) {\r\n                                const nextReview = sub.reviews.find((r: any) =\u003e r.status === \u0027pending\u0027);\r\n                                if (!nextReview) {\r\n                                    isLocked = true;\r\n                                    lockReason = \"Sem revisÃµes pendentes.\";\r\n                                } else if (nextReview.date \u003e todayStr) {\r\n                                    isLocked = true;\r\n                                    lockReason = `PrÃ³xima revisÃ£o agendada para ${format(new Date(nextReview.date), \u0027dd/MM\u0027)}`;\r\n                                }\r\n                            }\r\n\r\n                            return (\r\n                                \u003cbutton\r\n                                    onClick={(e) =\u003e {\r\n                                        e.stopPropagation();\r\n                                        // Critical: Check Ref (sync) AND State (async) AND Context (global)\r\n                                        if (isLocked || isActive) return;\r\n\r\n                                        startFocus(sub.id, \u0027subtheme\u0027, sub.title, 25);\r\n                                        startFocusSession(sub.id, 25);\r\n                                    }}\r\n                                    disabled={isLocked || isActive}\r\n                                    className={cn(\r\n                                        \"w-7 h-7 flex items-center justify-center rounded-lg border transition-all relative group/playbtn\",\r\n                                        isLocked || isActive\r\n                                            ? \"bg-slate-800/50 border-slate-700/50 text-slate-600 cursor-not-allowed\"\r\n                                            : \"bg-slate-800 hover:bg-emerald-600 border-slate-700 hover:border-emerald-500 text-slate-400 hover:text-white\"\r\n                                    )}\r\n                                    title={isActive ? \"Foco em andamento\" : (isLocked ? lockReason : \"Focar neste Tema\")}\r\n                                \u003e\r\n                                    {isLocked ? (\r\n                                        \u003cLock className=\"w-3 h-3 text-slate-600\" /\u003e\r\n                                    ) : (\r\n                                        \u003cPlay className=\"w-3 h-3 fill-current\" /\u003e\r\n                                    )}\r\n                                \u003c/button\u003e\r\n                            );\r\n                        })()}\r\n\r\n                        \u003cChevronDown className={cn(\"w-4 h-4 text-slate-600 transition-transform duration-300\", isExpanded \u0026\u0026 \"rotate-180 text-white\")} /\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* Expanded Content */}\r\n                {isExpanded \u0026\u0026 (\r\n                    \u003cdiv className=\"px-3 pb-3 border-t border-slate-800/50 animate-in slide-in-from-top-2 duration-200\"\u003e\r\n                        \u003cdiv className=\"mt-2 grid gap-1\"\u003e\r\n                            {sortedReviews.length === 0 ? (\r\n                                \u003cp className=\"text-[10px] text-slate-600 italic text-center py-2\"\u003eSem revisÃµes agendadas.\u003c/p\u003e\r\n                            ) : (\r\n                                \u003cdiv className=\"relative\"\u003e\r\n                                    {/* Timeline Line (Visual Only) */}\r\n                                    \u003cdiv className=\"absolute left-3 top-2 bottom-2 w-px bg-slate-800/50\" /\u003e\r\n\r\n                                    {sortedReviews.map((rev: any, idx: number) =\u003e {\r\n                                        const isDone = rev.status === \u0027completed\u0027;\r\n                                        const isNext = !isDone \u0026\u0026 !rev.isProjected \u0026\u0026 rev.number === (sortedReviews.find((r: any) =\u003e r.status === \u0027pending\u0027)?.number || 0);\r\n\r\n                                        return (\r\n                                            \u003cdiv key={idx} className=\"relative flex items-center gap-3 py-1.5 pl-1 group/rev\"\u003e\r\n                                                {/* Dot on Timeline */}\r\n                                                \u003cdiv className={cn(\r\n                                                    \"relative z-10 w-4 h-4 rounded-full border-2 flex items-center justify-center text-[8px] font-bold transition-all\",\r\n                                                    isDone\r\n                                                        ? \"bg-slate-900 border-emerald-500 text-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.2)]\"\r\n                                                        : isNext\r\n                                                            ? \"bg-blue-500 border-blue-400 text-white animate-pulse shadow-[0_0_10px_rgba(59,130,246,0.5)]\"\r\n                                                            : \"bg-slate-900 border-slate-700 text-slate-600\"\r\n                                                )}\u003e\r\n                                                    {isDone ? \u0027âœ“\u0027 : rev.number}\r\n                                                \u003c/div\u003e\r\n\r\n                                                \u003cdiv className=\"flex-1 flex items-center justify-between text-xs p-1.5 rounded-lg hover:bg-slate-800/50 transition-colors\"\u003e\r\n                                                    \u003cspan className={cn(\"font-mono\", isDone ? \"text-emerald-400\" : isNext ? \"text-blue-300\" : \"text-slate-500\")}\u003e\r\n                                                        {format(new Date(rev.date), \u0027dd/MM/yyyy\u0027)}\r\n                                                    \u003c/span\u003e\r\n                                                    \u003cspan className={cn(\"text-[10px] font-bold uppercase\",\r\n                                                        isDone ? \"text-emerald-500\" :\r\n                                                            rev.isProjected ? \"text-slate-700 italic\" :\r\n                                                                isNext ? \"text-blue-400\" : \"text-amber-500/50\"\r\n                                                    )}\u003e\r\n                                                        {rev.isProjected ? \u0027Estimado\u0027 : isDone ? \u0027Feito\u0027 : isNext ? \u0027PrÃ³ximo\u0027 : \u0027Pendente\u0027}\r\n                                                    \u003c/span\u003e\r\n                                                \u003c/div\u003e\r\n                                            \u003c/div\u003e\r\n                                        );\r\n                                    })}\r\n                                \u003c/div\u003e\r\n                            )}\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n                )}\r\n            \u003c/div\u003e\r\n\r\n            \u003cSummaryHistoryModal\r\n                isOpen={isSummaryOpen}\r\n                onClose={() =\u003e setIsSummaryOpen(false)}\r\n                subtheme={sub}\r\n            /\u003e\r\n        \u003c/\u003e\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\themes\\components\\SummaryHistoryModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Quote\u0027 is defined but never used.","line":3,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Calendar\u0027 is defined but never used.","line":3,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":38},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027format\u0027 is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027ptBR\u0027 is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027cn\u0027 is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":12}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \u0027react\u0027;\r\nimport { motion, AnimatePresence } from \u0027framer-motion\u0027;\r\nimport { X, BookOpen, Quote, Calendar } from \u0027lucide-react\u0027;\r\nimport { format } from \u0027date-fns\u0027;\r\nimport { ptBR } from \u0027date-fns/locale\u0027;\r\nimport { cn } from \u0027../../../lib/utils\u0027;\r\nimport type { Subtheme } from \u0027../../../types\u0027;\r\nimport SummaryTimeline from \u0027../../../components/ui/SummaryTimeline\u0027;\r\n\r\ninterface SummaryHistoryModalProps {\r\n    isOpen: boolean;\r\n    onClose: () =\u003e void;\r\n    subtheme: Subtheme;\r\n}\r\n\r\nexport const SummaryHistoryModal: React.FC\u003cSummaryHistoryModalProps\u003e = ({ isOpen, onClose, subtheme }) =\u003e {\r\n\r\n    return (\r\n        \u003cAnimatePresence\u003e\r\n            {isOpen \u0026\u0026 (\r\n                \u003c\u003e\r\n                    {/* Backdrop */}\r\n                    \u003cmotion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9998]\"\r\n                        onClick={onClose}\r\n                    /\u003e\r\n\r\n                    {/* Modal Content */}\r\n                    \u003cdiv className=\"fixed inset-0 z-[9999] flex items-center justify-center p-4 pointer-events-none\"\u003e\r\n                        \u003cmotion.div\r\n                            initial={{ scale: 0.95, opacity: 0, y: 20 }}\r\n                            animate={{ scale: 1, opacity: 1, y: 0 }}\r\n                            exit={{ scale: 0.95, opacity: 0, y: 20 }}\r\n                            className=\"bg-slate-900 border border-slate-800 rounded-2xl w-full max-w-lg shadow-2xl pointer-events-auto flex flex-col max-h-[85vh]\"\r\n                        \u003e\r\n                            {/* Header */}\r\n                            \u003cdiv className=\"p-6 border-b border-slate-800 flex items-start justify-between bg-slate-900/50 rounded-t-2xl\"\u003e\r\n                                \u003cdiv\u003e\r\n                                    \u003cdiv className=\"flex items-center gap-2 text-indigo-400 mb-1\"\u003e\r\n                                        \u003cBookOpen className=\"w-5 h-5\" /\u003e\r\n                                        \u003cspan className=\"text-xs font-bold uppercase tracking-widest\"\u003eDiÃ¡rio de Aprendizado\u003c/span\u003e\r\n                                    \u003c/div\u003e\r\n                                    \u003ch2 className=\"text-xl font-bold text-white\"\u003e{subtheme.title}\u003c/h2\u003e\r\n                                \u003c/div\u003e\r\n                                \u003cbutton\r\n                                    onClick={onClose}\r\n                                    className=\"p-2 hover:bg-slate-800 rounded-lg text-slate-500 hover:text-white transition-colors\"\r\n                                \u003e\r\n                                    \u003cX className=\"w-5 h-5\" /\u003e\r\n                                \u003c/button\u003e\r\n                            \u003c/div\u003e\r\n\r\n                            {/* Scrollable Content */}\r\n                            \u003cdiv className=\"flex-1 overflow-y-auto p-6 space-y-6 scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-transparent\"\u003e\r\n                                \u003cSummaryTimeline\r\n                                    summaries={subtheme.summaries || []}\r\n                                    title=\"HistÃ³rico de RevisÃ£o\"\r\n                                    showEmptyState={true}\r\n                                /\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/motion.div\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/\u003e\r\n            )}\r\n        \u003c/AnimatePresence\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\themes\\components\\ThemeCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027completionDate\u0027 is defined but never used.","line":18,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":50}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { BrainCircuit, Pencil, Trash2 } from \u0027lucide-react\u0027;\r\nimport { cn } from \u0027../../../lib/utils\u0027;\r\nimport type { Theme, Subtheme } from \u0027../../../types\u0027;\r\nimport { SubthemeItem } from \u0027./SubthemeItem\u0027;\r\nimport { IconRenderer } from \u0027../../../components/ui/IconRenderer\u0027;\r\n\r\ninterface ThemeCardProps {\r\n    theme: Theme;\r\n    completionDate: string | null;\r\n    queuedSubthemesMap: Map\u003cstring, string\u003e;\r\n    onEdit: () =\u003e void;\r\n    onDelete: () =\u003e void;\r\n    onOpenNotes: (sub: Subtheme) =\u003e void;\r\n    onOpenDetails: () =\u003e void;\r\n    unlockedSubthemes: string[];\r\n}\r\n\r\nexport const ThemeCard = ({ theme, completionDate, queuedSubthemesMap, onEdit, onDelete, onOpenNotes, onOpenDetails, unlockedSubthemes }: ThemeCardProps) =\u003e {\r\n    const themeColor = theme.color || \u0027#3b82f6\u0027;\r\n\r\n    // Calculate Progress\r\n    const totalSubs = theme.subthemes.length;\r\n    const completedSubs = theme.subthemes.filter((s: Subtheme) =\u003e s.status === \u0027completed\u0027).length;\r\n    const progress = totalSubs === 0 ? 0 : (completedSubs / totalSubs) * 100;\r\n\r\n    return (\r\n        \u003cdiv className=\"group relative w-full h-full flex flex-col\"\u003e\r\n            {/* Main Card Structure */}\r\n            \u003cdiv\r\n                onClick={onOpenDetails}\r\n                className=\"relative flex-1 bg-[#0f111a] rounded-[2rem] border border-slate-800/50 overflow-hidden transition-all duration-300 hover:border-slate-700 hover:shadow-2xl hover:shadow-black/50 hover:translate-y-[-2px] cursor-pointer\"\r\n            \u003e\r\n\r\n                {/* Ambient Background Gradient (restored \"Design de Antes\" feel) */}\r\n                \u003cdiv\r\n                    className=\"absolute inset-0 opacity-20 pointer-events-none\"\r\n                    style={{\r\n                        background: `radial-gradient(circle at top left, ${themeColor}, transparent 70%)`\r\n                    }}\r\n                /\u003e\r\n\r\n                {/* Header Content (The screenshot part) */}\r\n                \u003cdiv className=\"relative p-6 z-10\"\u003e\r\n                    \u003cdiv className=\"flex items-start gap-4\"\u003e\r\n                        \u003cdiv className=\"flex items-center gap-5 flex-1 min-w-0\"\u003e\r\n                            {/* Icon Box */}\r\n                            \u003cdiv\r\n                                className=\"w-16 h-16 rounded-2xl border border-white/10 flex items-center justify-center shrink-0 bg-gradient-to-br from-white/5 to-white/0 shadow-lg\"\r\n                                style={{ boxShadow: `0 8px 32px -8px ${themeColor}40` }}\r\n                            \u003e\r\n                                {theme.imageUrl ? (\r\n                                    \u003cimg\r\n                                        src={theme.imageUrl}\r\n                                        alt={theme.title}\r\n                                        className=\"w-full h-full object-cover rounded-2xl opacity-90\"\r\n                                    /\u003e\r\n                                ) : (\r\n                                    \u003cdiv className=\"text-white/90 transform group-hover:scale-110 transition-transform duration-500\"\u003e\r\n                                        \u003cIconRenderer icon={theme.icon} size={32} fallback={\u003cBrainCircuit className=\"w-8 h-8\" /\u003e} /\u003e\r\n                                    \u003c/div\u003e\r\n                                )}\r\n                            \u003c/div\u003e\r\n\r\n                            {/* Title \u0026 Badge */}\r\n                            \u003cdiv className=\"flex-1 min-w-0\"\u003e\r\n                                \u003ch3 className=\"text-2xl font-bold text-white tracking-tight leading-tight mb-2 drop-shadow-sm truncate\"\u003e\r\n                                    {theme.title}\r\n                                \u003c/h3\u003e\r\n                                \u003cdiv className=\"flex items-center gap-2 flex-wrap\"\u003e\r\n                                    \u003cspan className=\"inline-flex items-center px-3 py-1 rounded-full bg-black/40 border border-white/5 text-[10px] font-bold text-slate-400 uppercase tracking-widest backdrop-blur-sm\"\u003e\r\n                                        {totalSubs} {totalSubs === 1 ? \u0027MÃ³dulo\u0027 : \u0027MÃ³dulos\u0027}\r\n                                    \u003c/span\u003e\r\n                                    {/* Category Badge */}\r\n                                    \u003cspan className={`inline-flex items-center px-2 py-0.5 rounded-md text-[9px] font-bold uppercase tracking-wider border ${theme.category === \u0027project\u0027\r\n                                        ? \u0027bg-emerald-500/10 text-emerald-400 border-emerald-500/20\u0027\r\n                                        : \u0027bg-blue-500/10 text-blue-400 border-blue-500/20\u0027\r\n                                        }`}\u003e\r\n                                        {theme.category === \u0027project\u0027 ? \u0027Projeto\u0027 : \u0027Tema\u0027}\r\n                                    \u003c/span\u003e\r\n                                    {/* Start Date */}\r\n                                    {theme.startDate \u0026\u0026 (\r\n                                        \u003cspan className=\"inline-flex items-center gap-1 px-2 py-0.5 rounded-md text-[9px] font-bold bg-slate-800/60 text-slate-300 border border-slate-600/40\"\u003e\r\n                                            InÃ­cio: {new Date(theme.startDate).toLocaleDateString(\u0027pt-BR\u0027, { day: \u00272-digit\u0027, month: \u00272-digit\u0027 })}\r\n                                        \u003c/span\u003e\r\n                                    )}\r\n                                    {/* Deadline */}\r\n                                    {theme.deadline \u0026\u0026 (\r\n                                        \u003cspan className=\"inline-flex items-center gap-1 px-2 py-0.5 rounded-md text-[9px] font-bold bg-slate-800/60 text-slate-300 border border-slate-600/40\"\u003e\r\n                                            Fim: {new Date(theme.deadline).toLocaleDateString(\u0027pt-BR\u0027, { day: \u00272-digit\u0027, month: \u00272-digit\u0027 })}\r\n                                        \u003c/span\u003e\r\n                                    )}\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n\r\n                        {/* Actions - Positioned on the right */}\r\n                        {/* Actions - Positioned on the right */}\r\n                        \u003cdiv className=\"flex gap-1.5 shrink-0 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none group-hover:pointer-events-auto\"\u003e\r\n                            \u003cbutton\r\n                                onClick={(e) =\u003e { e.stopPropagation(); onEdit(); }}\r\n                                className=\"w-8 h-8 flex items-center justify-center bg-slate-950/40 hover:bg-blue-600/80 backdrop-blur-md rounded-full text-slate-400 hover:text-white transition-all duration-200 border border-white/5 hover:border-blue-400/50 shadow-sm\"\r\n                                title=\"Editar tema\"\r\n                            \u003e\r\n                                \u003cPencil className=\"w-3.5 h-3.5\" /\u003e\r\n                            \u003c/button\u003e\r\n                            \u003cbutton\r\n                                onClick={(e) =\u003e { e.stopPropagation(); onDelete(); }}\r\n                                className=\"w-8 h-8 flex items-center justify-center bg-slate-950/40 hover:bg-red-600/80 backdrop-blur-md rounded-full text-slate-400 hover:text-white transition-all duration-200 border border-white/5 hover:border-red-400/50 shadow-sm\"\r\n                                title=\"Excluir tema\"\r\n                            \u003e\r\n                                \u003cTrash2 className=\"w-3.5 h-3.5\" /\u003e\r\n                            \u003c/button\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* Body Content (Progress + Subthemes) - Kept but styled comfortably below header */}\r\n                \u003cdiv className=\"relative px-6 pb-6 space-y-6\"\u003e\r\n\r\n                    {/* Progress Bar */}\r\n                    \u003cdiv className=\"space-y-2\"\u003e\r\n                        \u003cdiv className=\"flex justify-between items-center text-xs px-1\"\u003e\r\n                            \u003cspan className=\"text-slate-500 font-bold uppercase tracking-wider\"\u003eProgresso\u003c/span\u003e\r\n                            \u003cspan className=\"text-slate-300 font-bold\"\u003e{Math.round(progress)}%\u003c/span\u003e\r\n                        \u003c/div\u003e\r\n                        \u003cdiv className=\"h-1.5 bg-slate-900 rounded-full overflow-hidden\"\u003e\r\n                            \u003cdiv\r\n                                className=\"h-full rounded-full transition-all duration-1000 ease-out relative group-hover:shadow-[0_0_12px_rgba(255,255,255,0.3)]\"\r\n                                style={{ width: `${progress}%`, background: themeColor }}\r\n                            \u003e\r\n                                \u003cdiv className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent w-full -translate-x-full animate-[shimmer_2s_infinite]\" /\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Subthemes List (Grouped by Modules) */}\r\n                    \u003cdiv className=\"space-y-3 max-h-[260px] overflow-y-auto custom-scrollbar pr-1\"\u003e\r\n                        {(() =\u003e {\r\n                            const groups: { module: Subtheme | null, items: Subtheme[] }[] = [];\r\n                            let currentGroup: { module: Subtheme | null, items: Subtheme[] } | null = null;\r\n\r\n                            theme.subthemes.forEach(sub =\u003e {\r\n                                if (sub.difficulty === \u0027module\u0027) {\r\n                                    currentGroup = { module: sub, items: [] };\r\n                                    groups.push(currentGroup);\r\n                                } else {\r\n                                    if (!currentGroup) {\r\n                                        currentGroup = { module: null, items: [] };\r\n                                        groups.push(currentGroup);\r\n                                    }\r\n                                    currentGroup.items.push(sub);\r\n                                }\r\n                            });\r\n\r\n                            return groups.map((group, gIdx) =\u003e (\r\n                                \u003cdiv key={gIdx} className=\"space-y-1.5\"\u003e\r\n                                    {group.module \u0026\u0026 (\r\n                                        \u003cSubthemeItem\r\n                                            sub={group.module}\r\n                                            themeColor={themeColor}\r\n                                            onOpenNotes={onOpenNotes}\r\n                                            unlockedSubthemes={unlockedSubthemes}\r\n                                        /\u003e\r\n                                    )}\r\n                                    \u003cdiv className={cn(\"space-y-1.5\", group.module \u0026\u0026 \"pl-2 border-l border-slate-800/50 ml-1\")}\u003e\r\n                                        {group.items.map(sub =\u003e (\r\n                                            \u003cSubthemeItem\r\n                                                key={sub.id}\r\n                                                sub={sub}\r\n                                                themeColor={themeColor}\r\n                                                projectedStart={queuedSubthemesMap.get(sub.id)}\r\n                                                onOpenNotes={onOpenNotes}\r\n                                                unlockedSubthemes={unlockedSubthemes}\r\n                                            /\u003e\r\n                                        ))}\r\n                                    \u003c/div\u003e\r\n                                \u003c/div\u003e\r\n                            ));\r\n                        })()}\r\n                        {theme.subthemes.length === 0 \u0026\u0026 (\r\n                            \u003cdiv className=\"py-6 text-center border border-dashed border-slate-800 rounded-xl bg-slate-900/30\"\u003e\r\n                                \u003cp className=\"text-slate-500 text-xs\"\u003eSem mÃ³dulos ainda\u003c/p\u003e\r\n                            \u003c/div\u003e\r\n                        )}\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n\r\n            \u003c/div\u003e\r\n        \u003c/div\u003e\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\features\\themes\\components\\ThemeDetailsModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027ArrowRight\u0027 is defined but never used.","line":2,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":59},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Activity\u0027 is defined but never used.","line":2,"column":61,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":69},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027themes\u0027 is assigned a value but never used.","line":18,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027colorScheme\u0027 is assigned a value but never used.","line":45,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":45,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027nextDate\u0027 is assigned a value but never used.","line":186,"column":39,"nodeType":null,"messageId":"unusedVar","endLine":186,"endColumn":47}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \u0027react\u0027;\r\nimport { BrainCircuit, Clock, Calendar, Trophy, ArrowRight, Activity, BookOpen, Layers, CheckCircle2 } from \u0027lucide-react\u0027;\r\nimport { Modal } from \u0027../../../components/ui/Modal\u0027;\r\nimport { useStudy } from \u0027../../../context/StudyContext\u0027;\r\nimport { format, isValid } from \u0027date-fns\u0027;\r\nimport { cn } from \u0027../../../lib/utils\u0027;\r\nimport type { Theme, Subtheme } from \u0027../../../types\u0027;\r\nimport SummaryTimeline from \u0027../../../components/ui/SummaryTimeline\u0027;\r\nimport { IconRenderer } from \u0027../../../components/ui/IconRenderer\u0027;\r\n\r\ninterface ThemeDetailsModalProps {\r\n    isOpen: boolean;\r\n    onClose: () =\u003e void;\r\n    theme: Theme | null;\r\n}\r\n\r\nexport const ThemeDetailsModal: React.FC\u003cThemeDetailsModalProps\u003e = ({ isOpen, onClose, theme }) =\u003e {\r\n    const { themes } = useStudy();\r\n    const [expandedSubthemeId, setExpandedSubthemeId] = useState\u003cstring | null\u003e(null);\r\n\r\n    if (!theme) return null;\r\n\r\n    // Helper function to format minutes to hours and minutes\r\n    const formatMinutesToHours = (totalMinutes: number): string =\u003e {\r\n        const hours = Math.floor(totalMinutes / 60);\r\n        const minutes = totalMinutes % 60;\r\n\r\n        if (hours === 0) {\r\n            return `${minutes}m`;\r\n        } else if (minutes === 0) {\r\n            return `${hours}h`;\r\n        } else {\r\n            return `${hours}h ${minutes}m`;\r\n        }\r\n    };\r\n\r\n    // Recalculate progress based on subthemes\r\n    const totalSubs = theme.subthemes.length;\r\n    const completedSubs = theme.subthemes.filter((s: Subtheme) =\u003e s.status === \u0027completed\u0027).length;\r\n    const progress = totalSubs === 0 ? 0 : (completedSubs / totalSubs) * 100;\r\n    const isCompleted = progress === 100;\r\n\r\n    const themeColor = theme.color || \u0027#3b82f6\u0027;\r\n\r\n    const colorScheme = isCompleted\r\n        ? {\r\n            text: \u0027text-emerald-400\u0027,\r\n            bg: \u0027bg-emerald-500/10\u0027,\r\n            border: \u0027border-emerald-500/20\u0027,\r\n            gradient: \u0027from-emerald-600 to-emerald-400\u0027\r\n        }\r\n        : {\r\n            text: \u0027text-blue-400\u0027,\r\n            bg: \u0027bg-blue-500/10\u0027,\r\n            border: \u0027border-blue-500/20\u0027,\r\n            gradient: `from-[${themeColor}] to-purple-600`\r\n        };\r\n\r\n    const getNextReviewDate = (sub: Subtheme) =\u003e {\r\n        const pending = sub.reviews.find(r =\u003e r.status === \u0027pending\u0027);\r\n        return pending?.date;\r\n    };\r\n\r\n    const totalMinutes = theme.subthemes.reduce((acc, s) =\u003e acc + (s.durationMinutes || 0), 0);\r\n\r\n    return (\r\n        \u003cModal isOpen={isOpen} onClose={onClose} title=\"\" maxWidth=\"3xl\"\u003e\r\n            \u003cdiv className=\"relative overflow-hidden p-6 sm:p-8\"\u003e\r\n                {/* Background Decoration */}\r\n                \u003cdiv\r\n                    className=\"absolute top-[-10%] right-[-10%] w-[300px] h-[300px] rounded-full blur-[100px] pointer-events-none opacity-10\"\r\n                    style={{ backgroundColor: themeColor }}\r\n                /\u003e\r\n                \u003cdiv className=\"absolute bottom-[-10%] left-[-10%] w-[250px] h-[250px] bg-purple-600/5 rounded-full blur-[80px] pointer-events-none\" /\u003e\r\n\r\n                \u003cdiv className=\"relative z-10 flex flex-col gap-8\"\u003e\r\n                    {/* Header: Icon, Title, Category */}\r\n                    \u003cdiv className=\"flex items-start gap-6\"\u003e\r\n                        \u003cdiv\r\n                            className={cn(\r\n                                \"w-20 h-20 rounded-3xl flex items-center justify-center shrink-0 shadow-2xl border-2 relative overflow-hidden\",\r\n                                \"bg-gradient-to-br\"\r\n                            )}\r\n                            style={{\r\n                                background: isCompleted ? undefined : `linear-gradient(to bottom right, ${themeColor}, #6366f1)`,\r\n                                borderColor: `${themeColor}50`\r\n                            }}\r\n                        \u003e\r\n\r\n                            {theme.imageUrl ? (\r\n                                \u003cimg src={theme.imageUrl} alt={theme.title} className=\"w-full h-full object-cover relative z-10\" /\u003e\r\n                            ) : (\r\n                                \u003cIconRenderer icon={theme.icon} size={40} className=\"text-white drop-shadow-lg relative z-10\" fallback={\u003cBrainCircuit className=\"w-10 h-10\" /\u003e} /\u003e\r\n                            )}\r\n                        \u003c/div\u003e\r\n\r\n                        \u003cdiv className=\"flex-1 min-w-0\"\u003e\r\n                            \u003cdiv className=\"flex items-center gap-2 mb-2\"\u003e\r\n                                \u003cspan className={cn(\r\n                                    \"px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border\",\r\n                                    theme.category === \u0027project\u0027 ? \"bg-emerald-500/10 text-emerald-400 border-emerald-500/20\" : \"bg-blue-500/10 text-blue-400 border-blue-500/20\"\r\n                                )}\u003e\r\n                                    {theme.category === \u0027project\u0027 ? \u0027PROJETO\u0027 : \u0027TEMA DE ESTUDO\u0027}\r\n                                \u003c/span\u003e\r\n                                \u003cspan className=\"px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-800 text-slate-400 border border-slate-800/50\"\u003e\r\n                                    {totalSubs} {totalSubs === 1 ? \u0027MÃ“DULO\u0027 : \u0027MÃ“DULOS\u0027}\r\n                                \u003c/span\u003e\r\n                            \u003c/div\u003e\r\n                            \u003ch2 className=\"text-3xl font-black text-white leading-tight break-words\"\u003e\r\n                                {theme.title}\r\n                            \u003c/h2\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Progress Bar Display */}\r\n                    \u003cdiv className=\"bg-slate-900/20 rounded-3xl p-6 shadow-inner\"\u003e\r\n                        \u003cdiv className=\"flex justify-between items-end mb-4\"\u003e\r\n                            \u003cdiv className=\"space-y-1\"\u003e\r\n                                \u003cspan className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2\"\u003e\r\n                                    \u003cTrophy className=\"w-3 h-3\" /\u003e ConclusÃ£o dos MÃ³dulos\r\n                                \u003c/span\u003e\r\n                                \u003cdiv className=\"text-4xl font-black text-white\"\u003e\r\n                                    {Math.round(progress)}%\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n                            \u003cdiv className=\"text-right space-y-1\"\u003e\r\n                                \u003cspan className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center justify-end gap-2\"\u003e\r\n                                    Estado Geral\r\n                                \u003c/span\u003e\r\n                                \u003cdiv className={cn(\r\n                                    \"text-sm font-bold\",\r\n                                    isCompleted ? \"text-emerald-400\" : \"text-blue-400\"\r\n                                )}\u003e\r\n                                    {isCompleted ? \u0027Especialista\u0027 : \u0027Em Aprendizado\u0027}\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                        \u003cdiv className=\"h-4 bg-slate-950/80 rounded-full p-1 border border-slate-800/50 shadow-inner\"\u003e\r\n                            \u003cdiv\r\n                                className={cn(\r\n                                    \"h-full rounded-full transition-all duration-1000 ease-out shadow-lg\"\r\n                                )}\r\n                                style={{\r\n                                    width: `${progress}%`,\r\n                                    background: isCompleted ? undefined : `linear-gradient(to right, ${themeColor}, #a855f7)`,\r\n                                    backgroundColor: isCompleted ? \u0027#10b981\u0027 : undefined\r\n                                }}\r\n                            \u003e\r\n\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Stats Grid */}\r\n                    \u003cdiv className=\"grid grid-cols-2 sm:grid-cols-3 gap-4\"\u003e\r\n                        \u003cdiv className=\"bg-slate-900/20 rounded-2xl p-4\"\u003e\r\n                            \u003cspan className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest block mb-2\"\u003eCriado em\u003c/span\u003e\r\n                            \u003cdiv className=\"text-white font-bold flex items-center gap-2 text-sm\"\u003e\r\n                                \u003cCalendar className=\"w-4 h-4 text-blue-400\" /\u003e\r\n                                {format(new Date(theme.createdAt), \u0027dd/MM/yy\u0027)}\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                        \u003cdiv className=\"bg-slate-900/20 rounded-2xl p-4\"\u003e\r\n                            \u003cspan className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest block mb-1\"\u003eMÃ³dulos ConcluÃ­dos\u003c/span\u003e\r\n                            \u003cdiv className=\"text-white font-bold flex items-center gap-2 text-xl\"\u003e\r\n                                \u003cBookOpen className=\"w-5 h-5 text-emerald-400\" /\u003e\r\n                                {completedSubs}\u003cspan className=\"text-slate-500 text-sm\"\u003e/{totalSubs}\u003c/span\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                        \u003cdiv className=\"bg-slate-900/20 rounded-2xl p-4 block sm:hidden md:block\"\u003e\r\n                            \u003cspan className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest block mb-2\"\u003eEsforÃ§o Estimado\u003c/span\u003e\r\n                            \u003cdiv className=\"text-white font-bold flex items-center gap-2 text-sm\"\u003e\r\n                                \u003cClock className=\"w-4 h-4 text-amber-400\" /\u003e\r\n                                {totalMinutes} min \u003cspan className=\"text-slate-400 font-normal\"\u003e({formatMinutesToHours(totalMinutes)})\u003c/span\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* List of Modules Summary */}\r\n                    \u003cdiv className=\"space-y-4\"\u003e\r\n                        \u003ch3 className=\"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 px-1\"\u003e\r\n                            \u003cLayers className=\"w-4 h-4\" /\u003e Resumo dos MÃ³dulos\r\n                        \u003c/h3\u003e\r\n                        \u003cdiv className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\"\u003e\r\n                            {theme.subthemes.map((sub, idx) =\u003e {\r\n                                const nextDate = getNextReviewDate(sub);\r\n                                const isExpanded = expandedSubthemeId === sub.id;\r\n\r\n                                return (\r\n                                    \u003cdiv\r\n                                        key={sub.id}\r\n                                        onClick={() =\u003e setExpandedSubthemeId(isExpanded ? null : sub.id)}\r\n                                        className={cn(\r\n                                            \"rounded-xl border transition-all duration-300 cursor-pointer overflow-hidden\",\r\n                                            sub.status === \u0027completed\u0027\r\n                                                ? \"bg-emerald-500/5 border-emerald-500/20\"\r\n                                                : isExpanded\r\n                                                    ? \"bg-slate-800/40 border-slate-700 ring-1 ring-slate-600\"\r\n                                                    : \"bg-slate-900/20 border-transparent hover:border-slate-800\"\r\n                                        )}\r\n                                    \u003e\r\n                                        \u003cdiv className=\"p-3 flex items-center justify-between gap-3\"\u003e\r\n                                            \u003cdiv className=\"flex items-center gap-3 min-w-0\"\u003e\r\n                                                \u003cdiv className={cn(\r\n                                                    \"w-6 h-6 rounded-md flex items-center justify-center text-[10px] font-bold shrink-0 transition-colors\",\r\n                                                    sub.status === \u0027completed\u0027 ? \"bg-emerald-500 text-white\" : \"bg-slate-800 text-slate-500\"\r\n                                                )}\u003e\r\n                                                    {idx + 1}\r\n                                                \u003c/div\u003e\r\n                                                \u003cspan className={cn(\r\n                                                    \"text-xs font-bold truncate transition-colors\",\r\n                                                    sub.status === \u0027completed\u0027 ? \"text-slate-400 line-through\" : isExpanded ? \"text-white\" : \"text-slate-200\"\r\n                                                )}\u003e\r\n                                                    {sub.title}\r\n                                                \u003c/span\u003e\r\n                                            \u003c/div\u003e\r\n                                            {sub.status === \u0027completed\u0027 \u0026\u0026 \u003cCheckCircle2 className=\"w-3.5 h-3.5 text-emerald-500\" /\u003e}\r\n                                        \u003c/div\u003e\r\n\r\n                                        {/* Expanded Details */}\r\n                                        \u003cdiv className={cn(\r\n                                            \"grid transition-[grid-template-rows] duration-300 ease-out\",\r\n                                            isExpanded ? \"grid-rows-[1fr] border-t border-slate-800/50\" : \"grid-rows-[0fr]\"\r\n                                        )}\u003e\r\n                                            \u003cdiv className=\"overflow-hidden\"\u003e\r\n                                                \u003cdiv className=\"p-3 pt-0 mt-3 space-y-3\"\u003e\r\n                                                    {/* Dates Info */}\r\n                                                    \u003cdiv className=\"flex flex-wrap gap-4 text-[10px] text-slate-400\"\u003e\r\n                                                        {sub.introductionDate \u0026\u0026 (\r\n                                                            \u003cdiv className=\"flex items-center gap-1.5\"\u003e\r\n                                                                \u003cCalendar className=\"w-3 h-3 text-slate-500\" /\u003e\r\n                                                                \u003cspan\u003eInÃ­cio: \u003cspan className=\"text-slate-200 font-medium\"\u003e{format(new Date(sub.introductionDate), \u0027dd/MM/yy\u0027)}\u003c/span\u003e\u003c/span\u003e\r\n                                                            \u003c/div\u003e\r\n                                                        )}\r\n                                                        {sub.status === \u0027queue\u0027 \u0026\u0026 (\r\n                                                            \u003cdiv className=\"flex items-center gap-1.5 text-amber-500\"\u003e\r\n                                                                \u003cClock className=\"w-3 h-3\" /\u003e\r\n                                                                \u003cspan\u003eAguardando na Fila\u003c/span\u003e\r\n                                                            \u003c/div\u003e\r\n                                                        )}\r\n                                                    \u003c/div\u003e\r\n\r\n                                                    {/* All Reviews List */}\r\n                                                    {sub.reviews \u0026\u0026 sub.reviews.length \u003e 0 \u0026\u0026 (\r\n                                                        \u003cdiv className=\"bg-slate-950/30 rounded-lg p-2\"\u003e\r\n                                                            \u003cspan className=\"text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-2 block pl-1\"\u003eCronograma de RevisÃµes\u003c/span\u003e\r\n                                                            \u003cdiv className=\"grid grid-cols-3 sm:grid-cols-6 gap-2\"\u003e\r\n                                                                {sub.reviews.map((review, rIdx) =\u003e {\r\n                                                                    const isDone = review.status === \u0027completed\u0027;\r\n                                                                    const date = new Date(review.date);\r\n                                                                    const isPast = date \u003c new Date() \u0026\u0026 !isDone;\r\n\r\n                                                                    return (\r\n                                                                        \u003cdiv key={rIdx} className={cn(\r\n                                                                            \"flex flex-col items-center justify-center p-1.5 rounded-lg border text-center transition-colors\",\r\n                                                                            isDone\r\n                                                                                ? \"bg-emerald-500/10 border-emerald-500/20 text-emerald-400\"\r\n                                                                                : isPast\r\n                                                                                    ? \"bg-red-500/10 border-red-500/20 text-red-400\"\r\n                                                                                    : \"bg-slate-800/40 border-slate-800 text-slate-400\"\r\n                                                                        )}\u003e\r\n                                                                            \u003cspan className=\"text-[9px] font-black opacity-60\"\u003eR{review.number}\u003c/span\u003e\r\n                                                                            \u003cspan className=\"text-[10px] font-bold leading-tight\"\u003e\r\n                                                                                {isValid(date) ? format(date, \u0027dd/MM\u0027) : \u0027--\u0027}\r\n                                                                            \u003c/span\u003e\r\n                                                                            {isDone \u0026\u0026 \u003cCheckCircle2 className=\"w-2.5 h-2.5 mt-0.5\" /\u003e}\r\n                                                                        \u003c/div\u003e\r\n                                                                    );\r\n                                                                })}\r\n                                                            \u003c/div\u003e\r\n                                                        \u003c/div\u003e\r\n                                                    )}\r\n                                                \u003c/div\u003e\r\n                                            \u003c/div\u003e\r\n                                        \u003c/div\u003e\r\n                                    \u003c/div\u003e\r\n                                );\r\n                            })}\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Summary Timeline - Box de Resumo/HistÃ³rico */}\r\n                    \u003cdiv className=\"bg-slate-900/40 rounded-[2rem] overflow-hidden\"\u003e\r\n                        \u003cdiv className=\"p-6 sm:p-8 bg-slate-950/40\"\u003e\r\n                            \u003cSummaryTimeline\r\n                                summaries={theme.summaries || []}\r\n                                title=\"HistÃ³rico do Tema\"\r\n                                maxItems={5}\r\n                                showEmptyState={true}\r\n                            /\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    {/* Bottom Action */}\r\n                    \u003cbutton\r\n                        onClick={onClose}\r\n                        className=\"w-full h-14 bg-white/5 hover:bg-white/10 rounded-2xl font-black text-white uppercase tracking-widest transition-all shadow-xl active:scale-[0.98]\"\r\n                    \u003e\r\n                        Fechar Detalhes\r\n                    \u003c/button\u003e\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n        \u003c/Modal\u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\__tests__\\useLocalStorage.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027vi\u0027 is defined but never used.","line":1,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":34}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect, vi, beforeEach } from \u0027vitest\u0027;\r\nimport { renderHook, act } from \u0027@testing-library/react\u0027;\r\nimport { useLocalStorage } from \u0027../useLocalStorage\u0027;\r\n\r\ndescribe(\u0027useLocalStorage\u0027, () =\u003e {\r\n    beforeEach(() =\u003e {\r\n        localStorage.clear();\r\n    });\r\n\r\n    it(\u0027returns initial value when no stored value exists\u0027, () =\u003e {\r\n        const { result } = renderHook(() =\u003e\r\n            useLocalStorage(\u0027test-key\u0027, \u0027default-value\u0027)\r\n        );\r\n\r\n        expect(result.current[0]).toBe(\u0027default-value\u0027);\r\n    });\r\n\r\n    it(\u0027saves value to localStorage\u0027, () =\u003e {\r\n        const { result } = renderHook(() =\u003e\r\n            useLocalStorage(\u0027test-key\u0027, \u0027initial\u0027)\r\n        );\r\n\r\n        act(() =\u003e {\r\n            result.current[1](\u0027new-value\u0027);\r\n        });\r\n\r\n        expect(localStorage.getItem(\u0027test-key\u0027)).toBe(JSON.stringify(\u0027new-value\u0027));\r\n        expect(result.current[0]).toBe(\u0027new-value\u0027);\r\n    });\r\n\r\n    it(\u0027loads existing value from localStorage\u0027, () =\u003e {\r\n        localStorage.setItem(\u0027test-key\u0027, JSON.stringify(\u0027stored-value\u0027));\r\n\r\n        const { result } = renderHook(() =\u003e\r\n            useLocalStorage(\u0027test-key\u0027, \u0027default\u0027)\r\n        );\r\n\r\n        expect(result.current[0]).toBe(\u0027stored-value\u0027);\r\n    });\r\n\r\n    it(\u0027handles objects\u0027, () =\u003e {\r\n        const { result } = renderHook(() =\u003e\r\n            useLocalStorage(\u0027test-obj\u0027, { foo: \u0027bar\u0027 })\r\n        );\r\n\r\n        act(() =\u003e {\r\n            result.current[1]({ foo: \u0027baz\u0027 });\r\n        });\r\n\r\n        expect(result.current[0]).toEqual({ foo: \u0027baz\u0027 });\r\n    });\r\n\r\n    it(\u0027handles invalid JSON in localStorage\u0027, () =\u003e {\r\n        localStorage.setItem(\u0027test-key\u0027, \u0027invalid-json{\u0027);\r\n\r\n        const { result } = renderHook(() =\u003e\r\n            useLocalStorage(\u0027test-key\u0027, \u0027default\u0027)\r\n        );\r\n\r\n        // Should fallback to default on parse error\r\n        expect(result.current[0]).toBe(\u0027default\u0027);\r\n    });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\useDashboardData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\useDevice.ts","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\useDevice.ts:13:9\n  11 |         // Detect iOS\n  12 |         const ios = /iphone|ipad|ipod/.test(userAgent);\n\u003e 13 |         setIsIOS(ios);\n     |         ^^^^^^^^ Avoid calling setState() directly within an effect\n  14 |\n  15 |         // Detect Android\n  16 |         const android = /android/.test(userAgent);","line":13,"column":9,"nodeType":null,"endLine":13,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from \u0027react\u0027;\r\n\r\nexport const useDevice = () =\u003e {\r\n    const [isIOS, setIsIOS] = useState(false);\r\n    const [isAndroid, setIsAndroid] = useState(false);\r\n    const [isPWA, setIsPWA] = useState(false);\r\n\r\n    useEffect(() =\u003e {\r\n        const userAgent = window.navigator.userAgent.toLowerCase();\r\n\r\n        // Detect iOS\r\n        const ios = /iphone|ipad|ipod/.test(userAgent);\r\n        setIsIOS(ios);\r\n\r\n        // Detect Android\r\n        const android = /android/.test(userAgent);\r\n        setIsAndroid(android);\r\n\r\n        // Detect PWA Mode\r\n        const isStandalone = window.matchMedia(\u0027(display-mode: standalone)\u0027).matches || (window.navigator as any).standalone === true;\r\n        setIsPWA(isStandalone);\r\n\r\n    }, []);\r\n\r\n    return {\r\n        isIOS,\r\n        isAndroid,\r\n        isPWA,\r\n        isMobile: isIOS || isAndroid,\r\n        // Helper classes for Safe Area\r\n        safeAreaTopClass: isIOS \u0026\u0026 isPWA ? \u0027pt-[env(safe-area-inset-top)]\u0027 : \u0027\u0027,\r\n        safeAreaBottomClass: isIOS \u0026\u0026 isPWA ? \u0027pb-[env(safe-area-inset-bottom)]\u0027 : \u0027\u0027,\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\useGlobalSearch.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\useGoals.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027useToast\u0027 is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":18}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { renderHook, act } from \u0027@testing-library/react\u0027;\r\nimport { describe, it, expect, vi, beforeEach } from \u0027vitest\u0027;\r\nimport { useGoals } from \u0027./useGoals\u0027;\r\nimport { SyncQueueService } from \u0027../services/SyncQueueService\u0027;\r\nimport { useToast } from \u0027../context/ToastContext\u0027;\r\nimport { XP_VALUES } from \u0027../config/gamification\u0027;\r\n\r\n// Mock dependencies\r\nvi.mock(\u0027../services/SyncQueueService\u0027, () =\u003e ({\r\n    SyncQueueService: {\r\n        enqueue: vi.fn(),\r\n    },\r\n}));\r\n\r\nvi.mock(\u0027../context/ToastContext\u0027, () =\u003e ({\r\n    useToast: vi.fn(() =\u003e ({\r\n        showToast: vi.fn(),\r\n    })),\r\n}));\r\n\r\nvi.mock(\u0027../utils/celebration\u0027, () =\u003e ({\r\n    celebrate: vi.fn(),\r\n}));\r\n\r\nvi.mock(\u0027../utils/summaries\u0027, () =\u003e ({\r\n    addGoalProgressSummary: vi.fn(),\r\n    addCompletionSummary: vi.fn(),\r\n}));\r\n\r\nvi.mock(\u0027../utils/deletedItemsBlacklist\u0027, () =\u003e ({\r\n    addToBlacklist: vi.fn(),\r\n    removeFromBlacklist: vi.fn(),\r\n}));\r\n\r\n// Mock crypto.randomUUID\r\nvi.stubGlobal(\u0027crypto\u0027, {\r\n    randomUUID: () =\u003e \u0027test-uuid-\u0027 + Math.random().toString(36).substring(2)\r\n});\r\n\r\ndescribe(\u0027useGoals hook\u0027, () =\u003e {\r\n    const mockUser = { id: \u0027user-123\u0027, email: \u0027test@example.com\u0027 };\r\n    const mockGamification = { level: 1, xp: 0, nextLevelXp: 100 };\r\n    const awardXP = vi.fn();\r\n    const updateStats = vi.fn();\r\n\r\n    beforeEach(() =\u003e {\r\n        vi.clearAllMocks();\r\n        localStorage.clear();\r\n    });\r\n\r\n    it(\u0027should initialize with goals from localStorage\u0027, () =\u003e {\r\n        const initialGoals = [{ id: \u00271\u0027, title: \u0027Test Goal\u0027, category: \u0027Study\u0027, progress: 0 }];\r\n        localStorage.setItem(\u0027study_goals_backup\u0027, JSON.stringify(initialGoals));\r\n\r\n        const { result } = renderHook(() =\u003e useGoals({\r\n            user: mockUser as any,\r\n            gamification: mockGamification as any,\r\n            awardXP,\r\n            updateStats\r\n        }));\r\n\r\n        expect(result.current.goals).toEqual(initialGoals);\r\n    });\r\n\r\n    it(\u0027should add a new goal and trigger sync\u0027, async () =\u003e {\r\n        const { result } = renderHook(() =\u003e useGoals({\r\n            user: mockUser as any,\r\n            gamification: mockGamification as any,\r\n            awardXP,\r\n            updateStats\r\n        }));\r\n\r\n        const newGoalData = {\r\n            title: \u0027New Goal\u0027,\r\n            type: \u0027simple\u0027,\r\n            category: \u0027Study\u0027,\r\n            deadline: \u00272026-12-31\u0027,\r\n            description: \u0027Description\u0027,\r\n            icon: \u0027ðŸŽ¯\u0027\r\n        };\r\n\r\n        await act(async () =\u003e {\r\n            await result.current.addGoal(newGoalData as any);\r\n        });\r\n\r\n        expect(result.current.goals).toHaveLength(1);\r\n        expect(result.current.goals[0].title).toBe(\u0027New Goal\u0027);\r\n        expect(awardXP).toHaveBeenCalledWith(XP_VALUES.GOAL * 0.1);\r\n        expect(SyncQueueService.enqueue).toHaveBeenCalledWith(expect.objectContaining({\r\n            type: \u0027ADD\u0027,\r\n            table: \u0027goals\u0027\r\n        }));\r\n    });\r\n\r\n    it(\u0027should fail to add a goal if validation fails\u0027, async () =\u003e {\r\n        const { result } = renderHook(() =\u003e useGoals({\r\n            user: mockUser as any,\r\n            gamification: mockGamification as any,\r\n            awardXP,\r\n            updateStats\r\n        }));\r\n\r\n        const invalidGoal = { title: \u0027\u0027 }; // Title is required and must be min 1\r\n\r\n        await act(async () =\u003e {\r\n            await result.current.addGoal(invalidGoal as any);\r\n        });\r\n\r\n        expect(result.current.goals).toHaveLength(0);\r\n    });\r\n\r\n    it(\u0027should delete a goal and add to blacklist\u0027, async () =\u003e {\r\n        const initialGoals = [{ id: \u0027goal-to-delete\u0027, title: \u0027Delete Me\u0027, category: \u0027Study\u0027 }];\r\n        localStorage.setItem(\u0027study_goals_backup\u0027, JSON.stringify(initialGoals));\r\n\r\n        const { result } = renderHook(() =\u003e useGoals({\r\n            user: mockUser as any,\r\n            gamification: mockGamification as any,\r\n            awardXP,\r\n            updateStats\r\n        }));\r\n\r\n        await act(async () =\u003e {\r\n            await result.current.deleteGoal(\u0027goal-to-delete\u0027);\r\n        });\r\n\r\n        expect(result.current.goals).toHaveLength(0);\r\n        expect(SyncQueueService.enqueue).toHaveBeenCalledWith(expect.objectContaining({\r\n            type: \u0027DELETE\u0027,\r\n            table: \u0027goals\u0027\r\n        }));\r\n    });\r\n\r\n    it(\u0027should update a goal\u0027, async () =\u003e {\r\n        const initialGoals = [{ id: \u00271\u0027, title: \u0027Old Title\u0027, category: \u0027Study\u0027 }];\r\n        localStorage.setItem(\u0027study_goals_backup\u0027, JSON.stringify(initialGoals));\r\n\r\n        const { result } = renderHook(() =\u003e useGoals({\r\n            user: mockUser as any,\r\n            gamification: mockGamification as any,\r\n            awardXP,\r\n            updateStats\r\n        }));\r\n\r\n        await act(async () =\u003e {\r\n            await result.current.updateGoal(\u00271\u0027, { title: \u0027New Title\u0027 });\r\n        });\r\n\r\n        expect(result.current.goals[0].title).toBe(\u0027New Title\u0027);\r\n    });\r\n\r\n    it(\u0027should toggle goal status and award XP\u0027, async () =\u003e {\r\n        const initialGoals = [{\r\n            id: \u00271\u0027,\r\n            title: \u0027Test Goal\u0027,\r\n            category: \u0027Study\u0027,\r\n            progress: 0,\r\n            completionHistory: []\r\n        }];\r\n        localStorage.setItem(\u0027study_goals_backup\u0027, JSON.stringify(initialGoals));\r\n\r\n        const { result } = renderHook(() =\u003e useGoals({\r\n            user: mockUser as any,\r\n            gamification: mockGamification as any,\r\n            awardXP,\r\n            updateStats\r\n        }));\r\n\r\n        await act(async () =\u003e {\r\n            await result.current.toggleGoal(\u00271\u0027);\r\n        });\r\n\r\n        expect(result.current.goals[0].progress).toBe(100);\r\n        expect(awardXP).toHaveBeenCalledWith(XP_VALUES.GOAL);\r\n    });\r\n\r\n    it(\u0027should calculate progress correctly when toggling checklist items\u0027, async () =\u003e {\r\n        const initialGoals = [{\r\n            id: \u0027checklist-goal\u0027,\r\n            title: \u0027Checklist\u0027,\r\n            type: \u0027checklist\u0027,\r\n            category: \u0027Study\u0027,\r\n            progress: 0,\r\n            checklist: [\r\n                { id: \u0027item-1\u0027, title: \u0027Item 1\u0027, completed: false, order: 0 },\r\n                { id: \u0027item-2\u0027, title: \u0027Item 2\u0027, completed: false, order: 1 }\r\n            ]\r\n        }];\r\n        localStorage.setItem(\u0027study_goals_backup\u0027, JSON.stringify(initialGoals));\r\n\r\n        const { result } = renderHook(() =\u003e useGoals({\r\n            user: mockUser as any,\r\n            gamification: mockGamification as any,\r\n            awardXP,\r\n            updateStats\r\n        }));\r\n\r\n        await act(async () =\u003e {\r\n            await result.current.toggleGoalItem(\u0027checklist-goal\u0027, \u0027item-1\u0027);\r\n        });\r\n\r\n        expect(result.current.goals[0].progress).toBe(50);\r\n        expect(result.current.goals[0].checklist![0].completed).toBe(true);\r\n\r\n        await act(async () =\u003e {\r\n            await result.current.toggleGoalItem(\u0027checklist-goal\u0027, \u0027item-2\u0027);\r\n        });\r\n\r\n        expect(result.current.goals[0].progress).toBe(100);\r\n    });\r\n\r\n    it(\u0027should handle habit toggling and history\u0027, async () =\u003e {\r\n        const initialGoals = [{\r\n            id: \u0027habit-goal\u0027,\r\n            title: \u0027Habit\u0027,\r\n            type: \u0027habit\u0027,\r\n            category: \u0027Study\u0027,\r\n            completionHistory: []\r\n        }];\r\n        localStorage.setItem(\u0027study_goals_backup\u0027, JSON.stringify(initialGoals));\r\n\r\n        const { result } = renderHook(() =\u003e useGoals({\r\n            user: mockUser as any,\r\n            gamification: mockGamification as any,\r\n            awardXP,\r\n            updateStats\r\n        }));\r\n\r\n        await act(async () =\u003e {\r\n            await result.current.toggleGoal(\u0027habit-goal\u0027);\r\n        });\r\n\r\n        // Habit should add to history\r\n        expect(result.current.goals[0].completionHistory).toHaveLength(1);\r\n        expect(awardXP).toHaveBeenCalledWith(XP_VALUES.GOAL / 5);\r\n    });\r\n\r\n    it(\u0027should fail to update a goal if validation fails\u0027, async () =\u003e {\r\n        const initialGoals = [{ id: \u00271\u0027, title: \u0027Goal\u0027, category: \u0027Study\u0027, type: \u0027simple\u0027 }];\r\n        localStorage.setItem(\u0027study_goals_backup\u0027, JSON.stringify(initialGoals));\r\n\r\n        const { result } = renderHook(() =\u003e useGoals({\r\n            user: mockUser as any,\r\n            gamification: mockGamification as any,\r\n            awardXP,\r\n            updateStats\r\n        }));\r\n\r\n        await act(async () =\u003e {\r\n            await result.current.updateGoal(\u00271\u0027, { title: \u0027\u0027 }); // Invalid title\r\n        });\r\n\r\n        expect(result.current.goals[0].title).toBe(\u0027Goal\u0027); // Title should not change\r\n    });\r\n\r\n    it(\u0027should add progress summary when updating goal progress\u0027, async () =\u003e {\r\n        const initialGoals = [{ id: \u00271\u0027, title: \u0027Goal\u0027, category: \u0027Study\u0027, type: \u0027simple\u0027, progress: 0 }];\r\n        localStorage.setItem(\u0027study_goals_backup\u0027, JSON.stringify(initialGoals));\r\n\r\n        const { result } = renderHook(() =\u003e useGoals({\r\n            user: mockUser as any,\r\n            gamification: mockGamification as any,\r\n            awardXP,\r\n            updateStats\r\n        }));\r\n\r\n        await act(async () =\u003e {\r\n            await result.current.updateGoal(\u00271\u0027, { progress: 50 });\r\n        });\r\n\r\n        const { addGoalProgressSummary } = await import(\u0027../utils/summaries\u0027);\r\n        expect(addGoalProgressSummary).toHaveBeenCalled();\r\n    });\r\n\r\n    it(\u0027should block future dates in toggleGoalItem\u0027, async () =\u003e {\r\n        const initialGoals = [{\r\n            id: \u00271\u0027,\r\n            type: \u0027checklist\u0027,\r\n            category: \u0027Study\u0027,\r\n            checklist: [{ id: \u0027i1\u0027, title: \u0027Item\u0027, completed: false, order: 0 }]\r\n        }];\r\n        localStorage.setItem(\u0027study_goals_backup\u0027, JSON.stringify(initialGoals));\r\n\r\n        const { result } = renderHook(() =\u003e useGoals({\r\n            user: mockUser as any,\r\n            gamification: mockGamification as any,\r\n            awardXP,\r\n            updateStats\r\n        }));\r\n\r\n        const futureDate = \u00272099-12-31\u0027;\r\n\r\n        await act(async () =\u003e {\r\n            await result.current.toggleGoalItem(\u00271\u0027, \u0027i1\u0027, futureDate);\r\n        });\r\n\r\n        expect(result.current.goals[0].checklist![0].completed).toBe(false);\r\n    });\r\n\r\n    it(\u0027should generate summary when completing a checklist item\u0027, async () =\u003e {\r\n        const initialGoals = [{\r\n            id: \u00271\u0027,\r\n            type: \u0027checklist\u0027,\r\n            category: \u0027Study\u0027,\r\n            checklist: [{ id: \u0027i1\u0027, title: \u0027Item\u0027, completed: false, order: 0 }]\r\n        }];\r\n        localStorage.setItem(\u0027study_goals_backup\u0027, JSON.stringify(initialGoals));\r\n\r\n        const { result } = renderHook(() =\u003e useGoals({\r\n            user: mockUser as any,\r\n            gamification: mockGamification as any,\r\n            awardXP,\r\n            updateStats\r\n        }));\r\n\r\n        await act(async () =\u003e {\r\n            await result.current.toggleGoalItem(\u00271\u0027, \u0027i1\u0027);\r\n        });\r\n\r\n        const { addGoalProgressSummary } = await import(\u0027../utils/summaries\u0027);\r\n        expect(addGoalProgressSummary).toHaveBeenCalled();\r\n    });\r\n\r\n    it(\u0027should return empty goals if localStorage contains invalid JSON\u0027, () =\u003e {\r\n        localStorage.setItem(\u0027study_goals_backup\u0027, \u0027invalid-json{\u0027);\r\n\r\n        // Suppress console.error for this test\r\n        const consoleSpy = vi.spyOn(console, \u0027error\u0027).mockImplementation(() =\u003e { });\r\n\r\n        const { result } = renderHook(() =\u003e useGoals({\r\n            user: mockUser as any,\r\n            gamification: mockGamification as any,\r\n            awardXP,\r\n            updateStats\r\n        }));\r\n\r\n        expect(result.current.goals).toEqual([]);\r\n        expect(consoleSpy).toHaveBeenCalled();\r\n        consoleSpy.mockRestore();\r\n    });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\useGoals.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027_gamification\u0027 is defined but never used.","line":22,"column":48,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":61},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027_updateStats\u0027 is defined but never used.","line":22,"column":85,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":97},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027_error\u0027 is defined but never used.","line":113,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":113,"endColumn":24}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from \u0027react\u0027;\r\nimport { logger } from \u0027../utils/logger\u0027;\r\nimport type { Goal } from \u0027../types\u0027;\r\nimport type { User } from \u0027../types/sync\u0027;\r\nimport type { GamificationState, GameStats } from \u0027../types/gamification\u0027;\r\nimport { GoalSchema } from \u0027../lib/validation\u0027;\r\nimport { SyncQueueService } from \u0027../services/SyncQueueService\u0027;\r\nimport { XP_VALUES } from \u0027../config/gamification\u0027;\r\nimport { celebrate } from \u0027../utils/celebration\u0027;\r\nimport { format } from \u0027date-fns\u0027;\r\nimport { useToast } from \u0027../context/ToastContext\u0027;\r\nimport { addGoalProgressSummary, addCompletionSummary } from \u0027../utils/summaries\u0027;\r\nimport { addToBlacklist, removeFromBlacklist } from \u0027../utils/deletedItemsBlacklist\u0027;\r\n\r\ninterface UseGoalsProps {\r\n    user: User | null;\r\n    gamification: GamificationState;\r\n    awardXP: (amount: number) =\u003e void;\r\n    updateStats: (updates: Partial\u003cGameStats\u003e) =\u003e void;\r\n}\r\n\r\nexport const useGoals = ({ user, gamification: _gamification, awardXP, updateStats: _updateStats }: UseGoalsProps) =\u003e {\r\n    const { showToast } = useToast();\r\n    const [goals, setGoals] = useState\u003cGoal[]\u003e(() =\u003e {\r\n        try {\r\n            const saved = localStorage.getItem(\u0027study_goals_backup\u0027);\r\n            return saved ? JSON.parse(saved) : [];\r\n        } catch (e) {\r\n            logger.error(\"Failed to parse study_goals_backup\", e);\r\n            return [];\r\n        }\r\n    });\r\n\r\n    useEffect(() =\u003e {\r\n        localStorage.setItem(\u0027study_goals_backup\u0027, JSON.stringify(goals));\r\n\r\n        // ðŸ›¡ï¸ CLEANUP: Remove orphaned keys\r\n        const orphanedKeys = [\u0027study_goals\u0027, \u0027study-panel-goals\u0027, \u0027goals_backup\u0027];\r\n        orphanedKeys.forEach(key =\u003e {\r\n            if (localStorage.getItem(key)) {\r\n                logger.info(`ðŸ§¹ Cleaning orphaned localStorage key: ${key}`);\r\n                localStorage.removeItem(key);\r\n            }\r\n        });\r\n    }, [goals]);\r\n\r\n    const addGoal = async (goal: Omit\u003cGoal, \u0027id\u0027 | \u0027progress\u0027 | \u0027createdAt\u0027\u003e) =\u003e {\r\n        if (!user) {\r\n            showToast(\"Erro: UsuÃ¡rio nÃ£o identificado.\", \"error\");\r\n            return;\r\n        }\r\n        // Validation\r\n        const val = GoalSchema.omit({ id: true, progress: true }).safeParse(goal);\r\n        if (!val.success) {\r\n            showToast(\"Erro: \" + val.error.issues[0].message, \"error\");\r\n            return;\r\n        }\r\n\r\n        const newGoal: Goal = {\r\n            ...goal,\r\n            id: crypto.randomUUID(),\r\n            createdAt: Date.now(),\r\n            progress: 0,\r\n            completionHistory: [],\r\n            sessions: [],\r\n            timeSpent: 0\r\n        };\r\n\r\n        // 1. Optimistic Update\r\n        const updatedGoals = [...goals, newGoal];\r\n        setGoals(updatedGoals);\r\n\r\n        awardXP(XP_VALUES.GOAL * 0.1);\r\n\r\n        // 2. Queue Sync\r\n        SyncQueueService.enqueue({\r\n            type: \u0027ADD\u0027,\r\n            table: \u0027goals\u0027,\r\n            data: { ...newGoal, user_id: user.id }\r\n        });\r\n\r\n        const todayStr = format(new Date(), \u0027yyyy-MM-dd\u0027);\r\n        if (newGoal.startDate \u0026\u0026 newGoal.startDate \u003e todayStr) {\r\n            showToast(`Meta agendada para iniciar em ${format(new Date(newGoal.startDate + \u0027T00:00:00\u0027), \u0027dd/MM\u0027)}!`, \"success\");\r\n        } else {\r\n            showToast(\"Meta criada com sucesso!\", \"success\");\r\n        }\r\n    };\r\n\r\n    const deleteGoal = async (goalId: string) =\u003e {\r\n        logger.info(`ðŸ—‘ï¸ deleteGoal called for ID: ${goalId}`);\r\n        // Optimistic Update\r\n        const previousGoals = [...goals];\r\n        const updatedGoals = goals.filter(g =\u003e g.id !== goalId);\r\n        setGoals(updatedGoals);\r\n\r\n        // ðŸ”¥ CRITICAL: Force IMMEDIATE localStorage update\r\n        localStorage.setItem(\u0027study_goals_backup\u0027, JSON.stringify(updatedGoals));\r\n        logger.info(`ðŸ’¾ Forced localStorage update: ${updatedGoals.length} goals remaining`);\r\n\r\n        // ðŸš« NUCLEAR OPTION: Add to permanent blacklist\r\n        addToBlacklist(goalId, \u0027goal\u0027);\r\n\r\n        showToast(\"Meta excluÃ­da com sucesso!\", \"success\");\r\n\r\n        try {\r\n            // Queue Sync\r\n            SyncQueueService.enqueue({\r\n                type: \u0027DELETE\u0027,\r\n                table: \u0027goals\u0027,\r\n                data: { id: goalId }\r\n            });\r\n        } catch (_error) {\r\n            setGoals(previousGoals);\r\n            localStorage.setItem(\u0027study_goals_backup\u0027, JSON.stringify(previousGoals));\r\n            removeFromBlacklist(goalId, \u0027goal\u0027);\r\n            showToast(\"Erro ao excluir meta.\", \"error\");\r\n        }\r\n    };\r\n\r\n    const updateGoal = async (id: string, updates: Partial\u003cGoal\u003e) =\u003e {\r\n        // Validation\r\n        const val = GoalSchema.partial().safeParse(updates);\r\n        if (!val.success) {\r\n            showToast(\"Erro: Dados invÃ¡lidos.\", \"error\");\r\n            return;\r\n        }\r\n\r\n        // Se o progresso foi atualizado, adicionar resumo\r\n        if (updates.progress !== undefined) {\r\n            const currentGoal = goals.find(g =\u003e g.id === id);\r\n            if (currentGoal \u0026\u0026 currentGoal.progress !== updates.progress) {\r\n                const currentSummaries = currentGoal.summaries || [];\r\n                updates.summaries = addGoalProgressSummary(\r\n                    currentSummaries,\r\n                    updates.progress,\r\n                    `Progresso atualizado de ${Math.round(currentGoal.progress)}% para ${Math.round(updates.progress)}%`,\r\n                    currentGoal.category,\r\n                    { id: currentGoal.id, type: \u0027goal\u0027, title: currentGoal.title }\r\n                );\r\n            }\r\n        }\r\n\r\n        setGoals(prev =\u003e prev.map(g =\u003e g.id === id ? { ...g, ...updates } : g));\r\n\r\n        if (user) {\r\n            SyncQueueService.enqueue({\r\n                type: \u0027UPDATE\u0027,\r\n                table: \u0027goals\u0027,\r\n                data: { id, ...updates, user_id: user.id }\r\n            });\r\n        }\r\n    };\r\n\r\n    const toggleGoal = async (goalId: string, dateStr?: string, summaryText?: string) =\u003e {\r\n        const goal = goals.find(g =\u003e g.id === goalId);\r\n        if (!goal) return;\r\n\r\n        const now = new Date();\r\n        const todayStr = format(now, \u0027yyyy-MM-dd\u0027);\r\n        const date = dateStr || todayStr;\r\n\r\n        // PRIORIDADE MÃXIMA: Bloquear dias futuros\r\n        if (date \u003e todayStr) {\r\n            showToast(\"VocÃª nÃ£o pode concluir atividades de dias futuros!\", \"error\");\r\n            return;\r\n        }\r\n        let updates: Partial\u003cGoal\u003e = {};\r\n        let xpAwarded = 0;\r\n        let isCompletedAction = false;\r\n\r\n        // Check history for ALL goal types to prevent XP farming\r\n        const history = goal.completionHistory || [];\r\n        const hasCompletedTargetDate = history.some(d =\u003e d.startsWith(date));\r\n\r\n        if (goal.type === \u0027habit\u0027) {\r\n            let newHistory;\r\n            if (hasCompletedTargetDate) {\r\n                // Uncheck: Deduct XP\r\n                newHistory = history.filter(d =\u003e !d.startsWith(date));\r\n                xpAwarded = -(XP_VALUES.GOAL / 5);\r\n            } else {\r\n                // Check\r\n                const completionIso = new Date().toISOString();\r\n                newHistory = [...history, completionIso];\r\n                xpAwarded = XP_VALUES.GOAL / 5;\r\n                isCompletedAction = true;\r\n            }\r\n            updates = { completionHistory: newHistory };\r\n\r\n            // Update progress for UI\r\n            const isCompletedToday = !hasCompletedTargetDate;\r\n            updates.progress = isCompletedToday ? 100 : 0;\r\n\r\n            // Adicionar resumo para hÃ¡bitos\r\n            if (isCompletedAction) {\r\n                const currentSummaries = goal.summaries || [];\r\n                updates.summaries = addCompletionSummary(\r\n                    currentSummaries,\r\n                    summaryText || `HÃ¡bito \"${goal.title}\" concluÃ­do em ${format(now, \u0027dd/MM/yyyy \\\u0027Ã s\\\u0027 HH:mm\u0027)}`,\r\n                    \u0027habit\u0027,\r\n                    { id: goal.id, type: \u0027goal\u0027, title: goal.title }\r\n                );\r\n            }\r\n\r\n        } else {\r\n            // Standard Goal\r\n            const isComplete = goal.progress \u003e= 100;\r\n\r\n            if (isComplete) {\r\n                updates = { progress: 0 };\r\n                xpAwarded = -XP_VALUES.GOAL;\r\n            } else {\r\n                updates = { progress: 100 };\r\n\r\n                if (!hasCompletedTargetDate) {\r\n                    const completionIso = new Date().toISOString();\r\n                    updates.completionHistory = [...history, completionIso];\r\n                    xpAwarded = XP_VALUES.GOAL;\r\n                    isCompletedAction = true;\r\n\r\n                    // Adicionar resumo para metas padrÃ£o\r\n                    const currentSummaries = goal.summaries || [];\r\n                    updates.summaries = addCompletionSummary(\r\n                        currentSummaries,\r\n                        summaryText || `Meta \"${goal.title}\" concluÃ­da com sucesso! ðŸŽ¯`,\r\n                        \u0027goal\u0027,\r\n                        { id: goal.id, type: \u0027goal\u0027, title: goal.title }\r\n                    );\r\n                }\r\n            }\r\n        }\r\n\r\n        // 1. Optimistic Update\r\n        setGoals(prev =\u003e prev.map(g =\u003e g.id === goalId ? { ...g, ...updates } : g));\r\n\r\n        // 2. Side Effects\r\n        if (xpAwarded !== 0) {\r\n            awardXP(xpAwarded);\r\n        }\r\n        if (isCompletedAction) {\r\n            celebrate();\r\n        }\r\n\r\n        // 3. Queue Sync\r\n        if (user) {\r\n            SyncQueueService.enqueue({\r\n                type: \u0027UPDATE\u0027,\r\n                table: \u0027goals\u0027,\r\n                data: { id: goalId, ...updates, user_id: user.id }\r\n            });\r\n        }\r\n    };\r\n\r\n    const toggleGoalItem = async (goalId: string, itemId: string, dateStr?: string, summaryText?: string) =\u003e {\r\n        const goal = goals.find(g =\u003e g.id === goalId);\r\n        if (!goal || !goal.checklist) return;\r\n\r\n        const now = new Date();\r\n        const todayStr = format(now, \u0027yyyy-MM-dd\u0027);\r\n        const date = dateStr || todayStr;\r\n\r\n        // PRIORIDADE MÃXIMA: Bloquear dias futuros\r\n        if (date \u003e todayStr) {\r\n            showToast(\"VocÃª nÃ£o pode concluir atividades de dias futuros!\", \"error\");\r\n            return;\r\n        }\r\n\r\n        const updatedChecklist = goal.checklist.map(item =\u003e {\r\n            if (item.id === itemId) {\r\n                const isNowCompleted = !item.completed;\r\n                return {\r\n                    ...item,\r\n                    completed: isNowCompleted,\r\n                    completedAt: isNowCompleted ? new Date().toISOString() : undefined\r\n                };\r\n            }\r\n            return item;\r\n        });\r\n\r\n        const totalItems = updatedChecklist.length;\r\n        const completedItems = updatedChecklist.filter(i =\u003e i.completed).length;\r\n        const newProgress = totalItems \u003e 0 ? Math.round((completedItems / totalItems) * 100) : 0;\r\n\r\n        const updates: Partial\u003cGoal\u003e = {\r\n            checklist: updatedChecklist,\r\n            progress: newProgress\r\n        };\r\n\r\n        // Add summary if item completed\r\n        const completedItem = updatedChecklist.find(i =\u003e i.id === itemId);\r\n        if (completedItem?.completed) {\r\n            const currentSummaries = goal.summaries || [];\r\n            updates.summaries = addGoalProgressSummary(\r\n                currentSummaries,\r\n                newProgress,\r\n                summaryText || `Item \"${completedItem.title}\" concluÃ­do! (${newProgress}%)`,\r\n                goal.category,\r\n                { id: goal.id, type: \u0027goal\u0027, title: goal.title }\r\n            );\r\n        }\r\n\r\n        // 1. Optimistic Update\r\n        setGoals(prev =\u003e prev.map(g =\u003e g.id === goalId ? { ...g, ...updates } : g));\r\n\r\n        // 2. Award XP if completing an item\r\n        const item = updatedChecklist.find(i =\u003e i.id === itemId);\r\n        if (item?.completed) {\r\n            awardXP(XP_VALUES.GOAL / 10);\r\n        }\r\n\r\n        if (user) {\r\n            SyncQueueService.enqueue({\r\n                type: \u0027UPDATE\u0027,\r\n                table: \u0027goals\u0027,\r\n                data: { id: goalId, ...updates, user_id: user.id }\r\n            });\r\n        }\r\n    };\r\n\r\n    return {\r\n        goals,\r\n        setGoals,\r\n        addGoal,\r\n        updateGoal,\r\n        deleteGoal,\r\n        toggleGoal,\r\n        toggleGoalItem\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\useLayoutModals.ts","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\useLayoutModals.ts:68:13\n  66 |             setIsSummaryModalOpen(false);\n  67 |             setIsMissionModalOpen(false);\n\u003e 68 |             setIsTaskModalOpen(false);\n     |             ^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  69 |             setIsGoalModalOpen(false);\n  70 |             setIsThemeModalOpen(false);\n  71 |             setIsSidebarOpen(false);","line":68,"column":13,"nodeType":null,"endLine":68,"endColumn":31},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: \u0027setIsMissionModalOpen\u0027. Either include it or remove the dependency array. If \u0027setIsMissionModalOpen\u0027 changes too often, find the parent component that defines it and wrap that definition in useCallback.","line":76,"column":8,"nodeType":"ArrayExpression","endLine":76,"endColumn":44,"suggestions":""}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from \u0027react\u0027;\r\nimport { useAuth } from \u0027../context/AuthContext\u0027;\r\nimport { useStudy } from \u0027../context/StudyContext\u0027;\r\nimport type { Goal, Theme } from \u0027../types\u0027;\r\n\r\nexport const useLayoutModals = (\r\n    activeFocus: boolean,\r\n    setIsSummaryModalOpen: (isOpen: boolean) =\u003e void,\r\n    isMissionModalOpen: boolean,\r\n    setIsMissionModalOpen: (isOpen: boolean) =\u003e void\r\n) =\u003e {\r\n    const { user } = useAuth();\r\n    const { themes, goals, tasks } = useStudy();\r\n\r\n    // Modals\r\n    const [isTaskModalOpen, setIsTaskModalOpen] = useState(false);\r\n    const [isGoalModalOpen, setIsGoalModalOpen] = useState(false);\r\n    const [isThemeModalOpen, setIsThemeModalOpen] = useState(false);\r\n    const [isSidebarOpen, setIsSidebarOpen] = useState(false);\r\n    const [isOnboardingOpen, setIsOnboardingOpen] = useState(false);\r\n\r\n    // Edit states\r\n    const [goalToEdit, setGoalToEdit] = useState\u003cundefined | Goal\u003e(undefined);\r\n    const [themeToEdit, setThemeToEdit] = useState\u003cundefined | Theme\u003e(undefined);\r\n    const [preselectedThemeId, setPreselectedThemeId] = useState\u003cundefined | string\u003e(undefined);\r\n    const [themeCategory, setThemeCategory] = useState\u003c\u0027study\u0027 | \u0027project\u0027\u003e(\u0027study\u0027);\r\n    const [defaultGoalType, setDefaultGoalType] = useState\u003c\u0027simple\u0027 | \u0027checklist\u0027 | \u0027habit\u0027\u003e(\u0027simple\u0027);\r\n\r\n    const handleEditGoal = (goal: Goal) =\u003e {\r\n        setGoalToEdit(goal);\r\n        setIsGoalModalOpen(true);\r\n        setIsSummaryModalOpen(false);\r\n    };\r\n\r\n    const handleEditTheme = (theme: Theme) =\u003e {\r\n        setThemeToEdit(theme);\r\n        // Determine category from theme\r\n        setThemeCategory((theme as any).category || \u0027study\u0027);\r\n        setIsThemeModalOpen(true);\r\n        setIsSummaryModalOpen(false);\r\n    };\r\n\r\n    const handleOpenGoalModalWithTheme = (themeId: string) =\u003e {\r\n        setPreselectedThemeId(themeId);\r\n        setGoalToEdit(undefined); // Ensure we are not editing\r\n        setIsGoalModalOpen(true);\r\n        setIsSummaryModalOpen(false); // Close summary to focus on creation\r\n    };\r\n\r\n    // Onboarding Trigger\r\n    useEffect(() =\u003e {\r\n        const isCompletelyEmpty = themes.length === 0 \u0026\u0026 goals.length === 0 \u0026\u0026 tasks.length === 0;\r\n        const isDismissed = localStorage.getItem(\u0027onboarding_dismissed\u0027) === \u0027true\u0027;\r\n\r\n        const timer = setTimeout(() =\u003e {\r\n            if (user \u0026\u0026 !isDismissed \u0026\u0026 (user.name === \u0027User\u0027 || user.name === undefined || isCompletelyEmpty)) {\r\n                setIsOnboardingOpen(true);\r\n            }\r\n        }, 1000);\r\n        return () =\u003e clearTimeout(timer);\r\n    }, [user, themes.length, goals.length, tasks.length]);\r\n\r\n    // Auto-close overlaying UI when Focus Mode starts\r\n    useEffect(() =\u003e {\r\n        if (activeFocus) {\r\n            setIsSummaryModalOpen(false);\r\n            setIsMissionModalOpen(false);\r\n            setIsTaskModalOpen(false);\r\n            setIsGoalModalOpen(false);\r\n            setIsThemeModalOpen(false);\r\n            setIsSidebarOpen(false);\r\n            // Note: isMobileMenuOpen logic remains in component or needs to be passed here if managed here\r\n            // But MobileMenu logic was in MainLayout state: [isMobileMenuOpen, setIsMobileMenuOpen] \r\n            // We should probably include it here to centralize ALL overlay UI state.\r\n        }\r\n    }, [activeFocus, setIsSummaryModalOpen]);\r\n\r\n\r\n    return {\r\n        state: {\r\n            isTaskModalOpen,\r\n            isGoalModalOpen,\r\n            isThemeModalOpen,\r\n            isMissionModalOpen,\r\n            isSidebarOpen,\r\n            isOnboardingOpen,\r\n            goalToEdit,\r\n            themeToEdit,\r\n            preselectedThemeId,\r\n            themeCategory,\r\n            defaultGoalType\r\n        },\r\n        actions: {\r\n            setIsTaskModalOpen,\r\n            setIsGoalModalOpen,\r\n            setIsThemeModalOpen,\r\n            setIsMissionModalOpen,\r\n            setIsSidebarOpen,\r\n            setIsOnboardingOpen,\r\n            setGoalToEdit,\r\n            setThemeToEdit,\r\n            setPreselectedThemeId,\r\n            setThemeCategory,\r\n            setDefaultGoalType,\r\n            handleEditGoal,\r\n            handleEditTheme,\r\n            handleOpenGoalModalWithTheme\r\n        }\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\useLocalStorage.ts","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\useLocalStorage.ts:42:9\n  40 |\n  41 |     useEffect(() =\u003e {\n\u003e 42 |         setStoredValue(readValue());\n     |         ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  43 |     }, [key]);\n  44 |\n  45 |     return [storedValue, setValue] as const;","line":42,"column":9,"nodeType":null,"endLine":42,"endColumn":23},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: \u0027readValue\u0027. Either include it or remove the dependency array.","line":43,"column":8,"nodeType":"ArrayExpression","endLine":43,"endColumn":13,"suggestions":""}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from \u0027react\u0027;\r\n\r\nexport function useLocalStorage\u003cT\u003e(key: string, initialValue: T) {\r\n    // Get from local storage then\r\n    // parse stored json or return initialValue\r\n    const readValue = () =\u003e {\r\n        if (typeof window === \u0027undefined\u0027) {\r\n            return initialValue;\r\n        }\r\n\r\n        try {\r\n            const item = window.localStorage.getItem(key);\r\n            if (!item) return initialValue;\r\n            const parsed = JSON.parse(item);\r\n            return parsed !== null ? parsed : initialValue;\r\n        } catch (error) {\r\n            console.warn(`Error reading localStorage key â€œ${key}â€:`, error);\r\n            return initialValue;\r\n        }\r\n    };\r\n\r\n    const [storedValue, setStoredValue] = useState\u003cT\u003e(readValue);\r\n\r\n    // Return a wrapped version of useState\u0027s setter function that ...\r\n    // ... persists the new value to localStorage.\r\n    const setValue = (value: T | ((val: T) =\u003e T)) =\u003e {\r\n        try {\r\n            // Allow value to be a function so we have same API as useState\r\n            const valueToStore = value instanceof Function ? value(storedValue) : value;\r\n\r\n            setStoredValue(valueToStore);\r\n\r\n            if (typeof window !== \u0027undefined\u0027) {\r\n                window.localStorage.setItem(key, JSON.stringify(valueToStore));\r\n            }\r\n        } catch (error) {\r\n            console.warn(`Error setting localStorage key â€œ${key}â€:`, error);\r\n        }\r\n    };\r\n\r\n    useEffect(() =\u003e {\r\n        setStoredValue(readValue());\r\n    }, [key]);\r\n\r\n    return [storedValue, setValue] as const;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\useNotifications.ts","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\useNotifications.ts:9:9\n   7 |\n   8 |     useEffect(() =\u003e {\n\u003e  9 |         setIsSupported(\u0027Notification\u0027 in window);\n     |         ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  10 |         setHasPermission(Notification.permission === \u0027granted\u0027);\n  11 |     }, []);\n  12 |","line":9,"column":9,"nodeType":null,"endLine":9,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback } from \u0027react\u0027;\r\nimport { NotificationService } from \u0027../services/NotificationService\u0027;\r\n\r\nexport const useNotifications = () =\u003e {\r\n    const [hasPermission, setHasPermission] = useState(false);\r\n    const [isSupported, setIsSupported] = useState(false);\r\n\r\n    useEffect(() =\u003e {\r\n        setIsSupported(\u0027Notification\u0027 in window);\r\n        setHasPermission(Notification.permission === \u0027granted\u0027);\r\n    }, []);\r\n\r\n    const requestPermission = useCallback(async () =\u003e {\r\n        const granted = await NotificationService.requestPermission();\r\n        setHasPermission(granted);\r\n        return granted;\r\n    }, []);\r\n\r\n    const sendNotification = useCallback((title: string, body: string, icon?: string) =\u003e {\r\n        NotificationService.showNotification(title, body, icon);\r\n    }, []);\r\n\r\n    const sendReviewReminder = useCallback((themeTitle: string, reviewNumber: number) =\u003e {\r\n        NotificationService.showNotification(\r\n            \u0027ðŸ“š Hora de Revisar!\u0027,\r\n            `${themeTitle} - RevisÃ£o ${reviewNumber} estÃ¡ pronta`,\r\n            \u0027ðŸ“š\u0027\r\n        );\r\n    }, []);\r\n\r\n    const sendTaskReminder = useCallback((taskTitle: string, isOverdue: boolean = false) =\u003e {\r\n        NotificationService.showNotification(\r\n            isOverdue ? \u0027âš ï¸ Tarefa Atrasada!\u0027 : \u0027ðŸ“‹ Lembrete de Tarefa\u0027,\r\n            taskTitle,\r\n            isOverdue ? \u0027âš ï¸\u0027 : \u0027ðŸ“‹\u0027\r\n        );\r\n    }, []);\r\n\r\n    const sendPomodoroComplete = useCallback((mode: \u0027focus\u0027 | \u0027break\u0027) =\u003e {\r\n        const isFocus = mode === \u0027focus\u0027;\r\n        NotificationService.showNotification(\r\n            isFocus ? \u0027ðŸŽ‰ Foco Completo!\u0027 : \u0027â° Pausa Terminada!\u0027,\r\n            isFocus\r\n                ? \u0027Ã“timo trabalho! Hora de fazer uma pausa.\u0027\r\n                : \u0027Pausa terminada! Pronto para focar?\u0027,\r\n            isFocus ? \u0027ðŸŽ‰\u0027 : \u0027â°\u0027\r\n        );\r\n    }, []);\r\n\r\n    const sendDailySummary = useCallback((tasksToday: number, reviewsToday: number) =\u003e {\r\n        if (tasksToday === 0 \u0026\u0026 reviewsToday === 0) return;\r\n\r\n        const parts: string[] = [];\r\n        if (tasksToday \u003e 0) parts.push(`${tasksToday} tarefa${tasksToday !== 1 ? \u0027s\u0027 : \u0027\u0027}`);\r\n        if (reviewsToday \u003e 0) parts.push(`${reviewsToday} revisÃ£o${reviewsToday !== 1 ? \u0027Ãµes\u0027 : \u0027\u0027}`);\r\n\r\n        NotificationService.showNotification(\r\n            \u0027â˜€ï¸ Bom dia!\u0027,\r\n            `VocÃª tem ${parts.join(\u0027 e \u0027)} para hoje`,\r\n            \u0027â˜€ï¸\u0027\r\n        );\r\n    }, []);\r\n\r\n    return {\r\n        isSupported,\r\n        hasPermission,\r\n        requestPermission,\r\n        sendNotification,\r\n        sendReviewReminder,\r\n        sendTaskReminder,\r\n        sendPomodoroComplete,\r\n        sendDailySummary,\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\useOnboarding.ts","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`completeOnboarding` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\useOnboarding.ts:95:13\n  93 |             setCurrentStep(prev =\u003e prev + 1);\n  94 |         } else {\n\u003e 95 |             completeOnboarding();\n     |             ^^^^^^^^^^^^^^^^^^ `completeOnboarding` accessed before it is declared\n  96 |         }\n  97 |     }, [currentStep]);\n  98 |\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\useOnboarding.ts:111:5\n  109 |     }, []);\n  110 |\n\u003e 111 |     const completeOnboarding = useCallback(() =\u003e {\n      |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\u003e 112 |         setIsActive(false);\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\u003e 113 |         localStorage.setItem(\u0027onboarding_completed\u0027, \u0027true\u0027);\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\u003e 114 |         setIsCompleted(true);\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\u003e 115 |     }, []);\n      | ^^^^^^^^^^^^ `completeOnboarding` is declared here\n  116 |\n  117 |     const resetOnboarding = useCallback(() =\u003e {\n  118 |         localStorage.removeItem(\u0027onboarding_completed\u0027);","line":95,"column":13,"nodeType":null,"endLine":95,"endColumn":31},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: \u0027completeOnboarding\u0027. Either include it or remove the dependency array.","line":97,"column":8,"nodeType":"ArrayExpression","endLine":97,"endColumn":21,"suggestions":""}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback } from \u0027react\u0027;\r\n\r\nexport interface TourStep {\r\n    id: string;\r\n    title: string;\r\n    description: string;\r\n    target?: string; // CSS selector or element ID\r\n    placement?: \u0027top\u0027 | \u0027bottom\u0027 | \u0027left\u0027 | \u0027right\u0027 | \u0027center\u0027;\r\n    action?: {\r\n        label: string;\r\n        onClick: () =\u003e void;\r\n    };\r\n}\r\n\r\nconst TOUR_STEPS: TourStep[] = [\r\n    {\r\n        id: \u0027welcome\u0027,\r\n        title: \u0027Bem-vindo ao Study Panel! ðŸŽ“\u0027,\r\n        description: \u0027Vamos fazer um tour rÃ¡pido pelas principais funcionalidades para vocÃª comeÃ§ar a estudar de forma mais eficiente.\u0027,\r\n        placement: \u0027center\u0027,\r\n    },\r\n    {\r\n        id: \u0027dashboard\u0027,\r\n        title: \u0027Este Ã© seu painel central\u0027,\r\n        description: \u0027Aqui vocÃª vÃª suas missÃµes do dia, progresso e estatÃ­sticas em tempo real.\u0027,\r\n        target: \u0027#dashboard-main\u0027,\r\n        placement: \u0027bottom\u0027,\r\n    },\r\n    {\r\n        id: \u0027srs\u0027,\r\n        title: \u0027Sistema de RevisÃ£o EspaÃ§ada (SRS) ðŸ“š\u0027,\r\n        description: \u0027RevisÃµes otimizadas cientificamente para mÃ¡xima retenÃ§Ã£o de conhecimento a longo prazo.\u0027,\r\n        target: \u0027#srs-widget\u0027,\r\n        placement: \u0027left\u0027,\r\n    },\r\n    {\r\n        id: \u0027pomodoro\u0027,\r\n        title: \u0027Foque com a tÃ©cnica Pomodoro ðŸ…\u0027,\r\n        description: \u002725 minutos de foco intenso seguidos de 5 minutos de pausa. A ciÃªncia comprova!\u0027,\r\n        target: \u0027#pomodoro-widget\u0027,\r\n        placement: \u0027left\u0027,\r\n    },\r\n    {\r\n        id: \u0027gamification\u0027,\r\n        title: \u0027Ganhe XP e suba de nÃ­vel! ðŸ†\u0027,\r\n        description: \u0027Cada minuto focado rende 10 XP. Desbloqueie conquistas e acompanhe seu progresso.\u0027,\r\n        target: \u0027#gamification-widget\u0027,\r\n        placement: \u0027left\u0027,\r\n    },\r\n    {\r\n        id: \u0027themes\u0027,\r\n        title: \u0027Organize seus estudos em Temas\u0027,\r\n        description: \u0027Crie temas para suas matÃ©rias e subtemas para organizar o conteÃºdo.\u0027,\r\n        target: \u0027[href=\"/themes\"]\u0027,\r\n        placement: \u0027right\u0027,\r\n    },\r\n    {\r\n        id: \u0027projects\u0027,\r\n        title: \u0027Gerencie projetos profissionais ðŸ’¼\u0027,\r\n        description: \u0027Separe projetos de trabalho dos seus estudos acadÃªmicos.\u0027,\r\n        target: \u0027[href=\"/projects\"]\u0027,\r\n        placement: \u0027right\u0027,\r\n    },\r\n    {\r\n        id: \u0027complete\u0027,\r\n        title: \u0027VocÃª estÃ¡ pronto! ðŸŽ‰\u0027,\r\n        description: \u0027Explore livremente e aproveite todas as funcionalidades. Bons estudos!\u0027,\r\n        placement: \u0027center\u0027,\r\n    },\r\n];\r\n\r\nexport const useOnboarding = () =\u003e {\r\n    const [isActive, setIsActive] = useState(false);\r\n    const [currentStep, setCurrentStep] = useState(0);\r\n    const [isCompleted, setIsCompleted] = useState(false);\r\n\r\n    // Check if onboarding was completed\r\n    useEffect(() =\u003e {\r\n        const completed = localStorage.getItem(\u0027onboarding_completed\u0027);\r\n        if (completed === \u0027true\u0027) {\r\n            setIsCompleted(true);\r\n        } else {\r\n            // Auto-start onboarding for new users after a short delay\r\n            const timer = setTimeout(() =\u003e {\r\n                setIsActive(true);\r\n            }, 1500);\r\n            return () =\u003e clearTimeout(timer);\r\n        }\r\n    }, []);\r\n\r\n    const nextStep = useCallback(() =\u003e {\r\n        if (currentStep \u003c TOUR_STEPS.length - 1) {\r\n            setCurrentStep(prev =\u003e prev + 1);\r\n        } else {\r\n            completeOnboarding();\r\n        }\r\n    }, [currentStep]);\r\n\r\n    const prevStep = useCallback(() =\u003e {\r\n        if (currentStep \u003e 0) {\r\n            setCurrentStep(prev =\u003e prev - 1);\r\n        }\r\n    }, [currentStep]);\r\n\r\n    const skipOnboarding = useCallback(() =\u003e {\r\n        setIsActive(false);\r\n        localStorage.setItem(\u0027onboarding_completed\u0027, \u0027true\u0027);\r\n        setIsCompleted(true);\r\n    }, []);\r\n\r\n    const completeOnboarding = useCallback(() =\u003e {\r\n        setIsActive(false);\r\n        localStorage.setItem(\u0027onboarding_completed\u0027, \u0027true\u0027);\r\n        setIsCompleted(true);\r\n    }, []);\r\n\r\n    const resetOnboarding = useCallback(() =\u003e {\r\n        localStorage.removeItem(\u0027onboarding_completed\u0027);\r\n        setCurrentStep(0);\r\n        setIsActive(true);\r\n        setIsCompleted(false);\r\n    }, []);\r\n\r\n    return {\r\n        isActive,\r\n        currentStep,\r\n        totalSteps: TOUR_STEPS.length,\r\n        currentStepData: TOUR_STEPS[currentStep],\r\n        nextStep,\r\n        prevStep,\r\n        skipOnboarding,\r\n        completeOnboarding,\r\n        resetOnboarding,\r\n        isCompleted,\r\n        progress: ((currentStep + 1) / TOUR_STEPS.length) * 100,\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\useOptimization.ts","messages":[{"ruleId":"react-hooks/use-memo","severity":2,"message":"Error: Expected the first argument to be an inline function expression\n\nExpected the first argument to be an inline function expression.\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\useOptimization.ts:36:9\n  34 |\n  35 |     return useCallback(\n\u003e 36 |         ((...args) =\u003e {\n     |         ^^^^^^^^^^^^^^^\n\u003e 37 |             if (Date.now() - lastRan.current \u003e= delay) {\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\u003e 38 |                 callback(...args);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\u003e 39 |                 lastRan.current = Date.now();\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\u003e 40 |             }\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\u003e 41 |         }) as T,\n     | ^^^^^^^^^^^^^^^^ Expected the first argument to be an inline function expression\n  42 |         [callback, delay]\n  43 |     );\n  44 | }","line":36,"column":9,"nodeType":null,"endLine":41,"endColumn":16},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\useOptimization.ts:82:9\n  80 |\n  81 |         // Set initial value\n\u003e 82 |         setMatches(mediaQuery.matches);\n     |         ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  83 |\n  84 |         // Listen for changes\n  85 |         if (mediaQuery.addEventListener) {","line":82,"column":9,"nodeType":null,"endLine":82,"endColumn":19},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\useOptimization.ts:132:12\n  130 |     }, [value]);\n  131 |\n\u003e 132 |     return ref.current;\n      |            ^^^^^^^^^^^ Cannot access ref value during render\n  133 | }\n  134 |\n  135 | /**","line":132,"column":12,"nodeType":null,"endLine":132,"endColumn":23},{"ruleId":"react-hooks/use-memo","severity":2,"message":"Error: Expected the first argument to be an inline function expression\n\nExpected the first argument to be an inline function expression.\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\useOptimization.ts:148:24\n  146 |     }, [fn]);\n  147 |\n\u003e 148 |     return useCallback(((...args) =\u003e ref.current(...args)) as T, []);\n      |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Expected the first argument to be an inline function expression\n  149 | }\n  150 |\n  151 | /**","line":148,"column":24,"nodeType":null,"endLine":148,"endColumn":64}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState, useRef, useCallback } from \u0027react\u0027;\r\n\r\n/**\r\n * Hook for debouncing values to reduce unnecessary re-renders and API calls\r\n * @param value - The value to debounce\r\n * @param delay - Delay in milliseconds (default: 500ms)\r\n */\r\nexport function useDebounce\u003cT\u003e(value: T, delay: number = 500): T {\r\n    const [debouncedValue, setDebouncedValue] = useState\u003cT\u003e(value);\r\n\r\n    useEffect(() =\u003e {\r\n        const handler = setTimeout(() =\u003e {\r\n            setDebouncedValue(value);\r\n        }, delay);\r\n\r\n        return () =\u003e {\r\n            clearTimeout(handler);\r\n        };\r\n    }, [value, delay]);\r\n\r\n    return debouncedValue;\r\n}\r\n\r\n/**\r\n * Hook for throttling function calls\r\n * @param callback - Function to throttle\r\n * @param delay - Delay in milliseconds (default: 500ms)\r\n */\r\nexport function useThrottle\u003cT extends (...args: unknown[]) =\u003e unknown\u003e(\r\n    callback: T,\r\n    delay: number = 500\r\n): T {\r\n    const lastRan = useRef(Date.now());\r\n\r\n    return useCallback(\r\n        ((...args) =\u003e {\r\n            if (Date.now() - lastRan.current \u003e= delay) {\r\n                callback(...args);\r\n                lastRan.current = Date.now();\r\n            }\r\n        }) as T,\r\n        [callback, delay]\r\n    );\r\n}\r\n\r\n/**\r\n * Hook to track if component is mounted\r\n * Useful for preventing state updates on unmounted components\r\n */\r\nexport function useIsMounted(): () =\u003e boolean {\r\n    const isMounted = useRef(false);\r\n\r\n    useEffect(() =\u003e {\r\n        isMounted.current = true;\r\n        return () =\u003e {\r\n            isMounted.current = false;\r\n        };\r\n    }, []);\r\n\r\n    return useCallback(() =\u003e isMounted.current, []);\r\n}\r\n\r\n/**\r\n * Hook for media queries\r\n * @param query - Media query string\r\n */\r\nexport function useMediaQuery(query: string): boolean {\r\n    const [matches, setMatches] = useState(() =\u003e {\r\n        if (typeof window !== \u0027undefined\u0027) {\r\n            return window.matchMedia(query).matches;\r\n        }\r\n        return false;\r\n    });\r\n\r\n    useEffect(() =\u003e {\r\n        if (typeof window === \u0027undefined\u0027) return;\r\n\r\n        const mediaQuery = window.matchMedia(query);\r\n        const handler = (event: MediaQueryListEvent) =\u003e setMatches(event.matches);\r\n\r\n        // Set initial value\r\n        setMatches(mediaQuery.matches);\r\n\r\n        // Listen for changes\r\n        if (mediaQuery.addEventListener) {\r\n            mediaQuery.addEventListener(\u0027change\u0027, handler);\r\n            return () =\u003e mediaQuery.removeEventListener(\u0027change\u0027, handler);\r\n        } else {\r\n            // Fallback for older browsers\r\n            mediaQuery.addListener(handler);\r\n            return () =\u003e mediaQuery.removeListener(handler);\r\n        }\r\n    }, [query]);\r\n\r\n    return matches;\r\n}\r\n\r\n/**\r\n * Hook for detecting clicks outside an element\r\n * @param callback - Function to call when clicking outside\r\n */\r\nexport function useClickOutside\u003cT extends HTMLElement = HTMLElement\u003e(\r\n    callback: () =\u003e void\r\n): React.RefObject\u003cT | null\u003e {\r\n    const ref = useRef\u003cT | null\u003e(null);\r\n\r\n    useEffect(() =\u003e {\r\n        const handleClick = (event: MouseEvent) =\u003e {\r\n            if (ref.current \u0026\u0026 !ref.current.contains(event.target as Node)) {\r\n                callback();\r\n            }\r\n        };\r\n\r\n        document.addEventListener(\u0027mousedown\u0027, handleClick);\r\n        return () =\u003e document.removeEventListener(\u0027mousedown\u0027, handleClick);\r\n    }, [callback]);\r\n\r\n    return ref;\r\n}\r\n\r\n/**\r\n * Hook for managing previous value\r\n * @param value - Current value\r\n */\r\nexport function usePrevious\u003cT\u003e(value: T): T | undefined {\r\n    const ref = useRef\u003cT | undefined\u003e(undefined);\r\n\r\n    useEffect(() =\u003e {\r\n        ref.current = value;\r\n    }, [value]);\r\n\r\n    return ref.current;\r\n}\r\n\r\n/**\r\n * Hook for creating a stable callback that doesn\u0027t change between renders\r\n * Similar to useCallback but doesn\u0027t require dependencies\r\n */\r\nexport function useEventCallback\u003cT extends (...args: unknown[]) =\u003e unknown\u003e(\r\n    fn: T\r\n): T {\r\n    const ref = useRef(fn);\r\n\r\n    useEffect(() =\u003e {\r\n        ref.current = fn;\r\n    }, [fn]);\r\n\r\n    return useCallback(((...args) =\u003e ref.current(...args)) as T, []);\r\n}\r\n\r\n/**\r\n * Hook for local storage with state synchronization\r\n * @param key - Storage key\r\n * @param initialValue - Initial value if key doesn\u0027t exist\r\n */\r\nexport function useLocalStorage\u003cT\u003e(\r\n    key: string,\r\n    initialValue: T\r\n): [T, (value: T | ((val: T) =\u003e T)) =\u003e void] {\r\n    // State to store our value\r\n    const [storedValue, setStoredValue] = useState\u003cT\u003e(() =\u003e {\r\n        if (typeof window === \u0027undefined\u0027) {\r\n            return initialValue;\r\n        }\r\n        try {\r\n            const item = window.localStorage.getItem(key);\r\n            return item ? JSON.parse(item) : initialValue;\r\n        } catch (error) {\r\n            console.error(`Error reading localStorage key \"${key}\":`, error);\r\n            return initialValue;\r\n        }\r\n    });\r\n\r\n    // Return a wrapped version of useState\u0027s setter function that persists to localStorage\r\n    const setValue = useCallback(\r\n        (value: T | ((val: T) =\u003e T)) =\u003e {\r\n            try {\r\n                // Allow value to be a function so we have same API as useState\r\n                const valueToStore = value instanceof Function ? value(storedValue) : value;\r\n                setStoredValue(valueToStore);\r\n                if (typeof window !== \u0027undefined\u0027) {\r\n                    window.localStorage.setItem(key, JSON.stringify(valueToStore));\r\n                }\r\n            } catch (error) {\r\n                console.error(`Error setting localStorage key \"${key}\":`, error);\r\n            }\r\n        },\r\n        [key, storedValue]\r\n    );\r\n\r\n    return [storedValue, setValue];\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\usePomodoro.ts","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\usePomodoro.ts:64:13\n  62 |             }, 1000);\n  63 |         } else if (timeLeft === 0) {\n\u003e 64 |             handleTimerComplete();\n     |             ^^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  65 |         }\n  66 |\n  67 |         return () =\u003e clearInterval(interval);","line":64,"column":13,"nodeType":null,"endLine":64,"endColumn":32}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef, useCallback } from \u0027react\u0027;\r\n\r\ntype Mode = \u0027focus\u0027 | \u0027shortBreak\u0027 | \u0027longBreak\u0027;\r\n\r\nconst SETTINGS = {\r\n    focus: 25 * 60,\r\n    shortBreak: 5 * 60,\r\n    longBreak: 15 * 60,\r\n    cyclesForLongBreak: 4,\r\n};\r\n\r\nexport const usePomodoro = () =\u003e {\r\n    const [mode, setMode] = useState\u003cMode\u003e(\u0027focus\u0027);\r\n    const [timeLeft, setTimeLeft] = useState(SETTINGS.focus);\r\n    const [isActive, setIsActive] = useState(false);\r\n    const [cycles, setCycles] = useState(0);\r\n\r\n    // Audio ref (we\u0027ll create an Audio object)\r\n    const audioRef = useRef\u003cHTMLAudioElement | null\u003e(null);\r\n\r\n    useEffect(() =\u003e {\r\n        audioRef.current = new Audio(\u0027https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3\u0027); // Simple clear bell\r\n    }, []);\r\n\r\n    const playSound = useCallback(() =\u003e {\r\n        if (audioRef.current) {\r\n            audioRef.current.currentTime = 0;\r\n            audioRef.current.play().catch(() =\u003e { });\r\n        }\r\n    }, []);\r\n\r\n    const switchMode = useCallback((nextMode: Mode) =\u003e {\r\n        setMode(nextMode);\r\n        setTimeLeft(SETTINGS[nextMode]);\r\n        setIsActive(false);\r\n    }, []);\r\n\r\n    const handleTimerComplete = useCallback(() =\u003e {\r\n        playSound();\r\n\r\n        if (mode === \u0027focus\u0027) {\r\n            const newCycles = cycles + 1;\r\n            setCycles(newCycles);\r\n\r\n            if (newCycles % SETTINGS.cyclesForLongBreak === 0) {\r\n                switchMode(\u0027longBreak\u0027);\r\n            } else {\r\n                switchMode(\u0027shortBreak\u0027);\r\n            }\r\n        } else {\r\n            // Break is over, back to work!\r\n            switchMode(\u0027focus\u0027);\r\n        }\r\n    }, [mode, cycles, playSound, switchMode]);\r\n\r\n    useEffect(() =\u003e {\r\n        let interval: ReturnType\u003ctypeof setInterval\u003e;\r\n\r\n        if (isActive \u0026\u0026 timeLeft \u003e 0) {\r\n            interval = setInterval(() =\u003e {\r\n                setTimeLeft((time) =\u003e time - 1);\r\n            }, 1000);\r\n        } else if (timeLeft === 0) {\r\n            handleTimerComplete();\r\n        }\r\n\r\n        return () =\u003e clearInterval(interval);\r\n    }, [isActive, timeLeft, handleTimerComplete]);\r\n\r\n    const toggleTimer = () =\u003e setIsActive(!isActive);\r\n\r\n    const resetTimer = () =\u003e {\r\n        setIsActive(false);\r\n        setTimeLeft(SETTINGS[mode]);\r\n    };\r\n\r\n    const skipTimer = () =\u003e {\r\n        handleTimerComplete();\r\n    };\r\n\r\n    return {\r\n        mode,\r\n        timeLeft,\r\n        isActive,\r\n        cycles,\r\n        toggleTimer,\r\n        resetTimer,\r\n        skipTimer,\r\n        settings: SETTINGS\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\useSRSLogic.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\useTasks.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027useToast\u0027 is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":18},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":94,"column":61,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":94,"endColumn":62,"suggestions":" "},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":94,"column":66,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":94,"endColumn":67,"suggestions":" "}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { renderHook, act } from \u0027@testing-library/react\u0027;\r\nimport { describe, it, expect, vi, beforeEach } from \u0027vitest\u0027;\r\nimport { useTasks } from \u0027./useTasks\u0027;\r\nimport { SyncQueueService } from \u0027../services/SyncQueueService\u0027;\r\nimport { useToast } from \u0027../context/ToastContext\u0027;\r\nimport { XP_VALUES } from \u0027../config/gamification\u0027;\r\nimport { format } from \u0027date-fns\u0027;\r\n\r\n// Mock dependencies\r\nvi.mock(\u0027../services/SyncQueueService\u0027, () =\u003e ({\r\n    SyncQueueService: {\r\n        enqueue: vi.fn(),\r\n    },\r\n}));\r\n\r\nvi.mock(\u0027../context/ToastContext\u0027, () =\u003e ({\r\n    useToast: vi.fn(() =\u003e ({\r\n        showToast: vi.fn(),\r\n    })),\r\n}));\r\n\r\nvi.mock(\u0027../utils/celebration\u0027, () =\u003e ({\r\n    celebrate: vi.fn(),\r\n}));\r\n\r\nvi.mock(\u0027../utils/summaries\u0027, () =\u003e ({\r\n    addCompletionSummary: vi.fn(),\r\n    addSessionSummary: vi.fn(),\r\n}));\r\n\r\nvi.mock(\u0027../utils/deletedItemsBlacklist\u0027, () =\u003e ({\r\n    addToBlacklist: vi.fn(),\r\n    removeFromBlacklist: vi.fn(),\r\n}));\r\n\r\n// Mock crypto.randomUUID\r\nvi.stubGlobal(\u0027crypto\u0027, {\r\n    randomUUID: () =\u003e \u0027task-uuid-\u0027 + Math.random().toString(36).substring(2)\r\n});\r\n\r\ndescribe(\u0027useTasks hook\u0027, () =\u003e {\r\n    const mockUser = { id: \u0027user-123\u0027, email: \u0027test@example.com\u0027 };\r\n    const mockGamification = { level: 1, xp: 0, nextLevelXp: 100 };\r\n    const awardXP = vi.fn();\r\n    const updateStats = vi.fn();\r\n\r\n    beforeEach(() =\u003e {\r\n        vi.clearAllMocks();\r\n        localStorage.clear();\r\n    });\r\n\r\n    it(\u0027should initialize with tasks from localStorage\u0027, () =\u003e {\r\n        const initialTasks = [{ id: \u00271\u0027, title: \u0027Test Task\u0027, status: \u0027pending\u0027, priority: \u0027medium\u0027, type: \u0027day\u0027 }];\r\n        localStorage.setItem(\u0027study_tasks_backup\u0027, JSON.stringify(initialTasks));\r\n\r\n        const { result } = renderHook(() =\u003e useTasks({\r\n            user: mockUser as any,\r\n            gamification: mockGamification as any,\r\n            awardXP,\r\n            updateStats\r\n        }));\r\n\r\n        expect(result.current.tasks).toEqual(initialTasks);\r\n    });\r\n\r\n    it(\u0027should add a new task and trigger sync\u0027, async () =\u003e {\r\n        const { result } = renderHook(() =\u003e useTasks({\r\n            user: mockUser as any,\r\n            gamification: mockGamification as any,\r\n            awardXP,\r\n            updateStats\r\n        }));\r\n\r\n        const newTaskData = {\r\n            title: \u0027New Task\u0027,\r\n            type: \u0027day\u0027,\r\n            priority: \u0027high\u0027 as const,\r\n            date: format(new Date(), \u0027yyyy-MM-dd\u0027)\r\n        };\r\n\r\n        await act(async () =\u003e {\r\n            await result.current.addTask(newTaskData as any);\r\n        });\r\n\r\n        expect(result.current.tasks).toHaveLength(1);\r\n        expect(result.current.tasks[0].title).toBe(\u0027New Task\u0027);\r\n        expect(awardXP).toHaveBeenCalledWith(XP_VALUES.TASK * 0.1);\r\n        expect(SyncQueueService.enqueue).toHaveBeenCalledWith(expect.objectContaining({\r\n            type: \u0027ADD\u0027,\r\n            table: \u0027tasks\u0027\r\n        }));\r\n    });\r\n\r\n    it(\u0027should fail to add a task with future date for type \\\"day\\\"\u0027, async () =\u003e {\r\n        const { result } = renderHook(() =\u003e useTasks({\r\n            user: mockUser as any,\r\n            gamification: mockGamification as any,\r\n            awardXP,\r\n            updateStats\r\n        }));\r\n\r\n        const futureTask = {\r\n            title: \u0027Future Task\u0027,\r\n            type: \u0027day\u0027,\r\n            priority: \u0027low\u0027 as const,\r\n            date: \u00272099-12-31\u0027\r\n        };\r\n\r\n        await act(async () =\u003e {\r\n            await result.current.addTask(futureTask as any);\r\n        });\r\n\r\n        expect(result.current.tasks).toHaveLength(0);\r\n    });\r\n\r\n    it(\u0027should delete a task and trigger sync\u0027, async () =\u003e {\r\n        const initialTasks = [{ id: \u0027task-1\u0027, title: \u0027Delete Me\u0027, type: \u0027day\u0027, priority: \u0027medium\u0027 }];\r\n        localStorage.setItem(\u0027study_tasks_backup\u0027, JSON.stringify(initialTasks));\r\n\r\n        const { result } = renderHook(() =\u003e useTasks({\r\n            user: mockUser as any,\r\n            gamification: mockGamification as any,\r\n            awardXP,\r\n            updateStats\r\n        }));\r\n\r\n        await act(async () =\u003e {\r\n            await result.current.deleteTask(\u0027task-1\u0027);\r\n        });\r\n\r\n        expect(result.current.tasks).toHaveLength(0);\r\n        expect(SyncQueueService.enqueue).toHaveBeenCalledWith(expect.objectContaining({\r\n            type: \u0027DELETE\u0027,\r\n            table: \u0027tasks\u0027\r\n        }));\r\n    });\r\n\r\n    it(\u0027should update a task\u0027, async () =\u003e {\r\n        const initialTasks = [{ id: \u00271\u0027, title: \u0027Old\u0027, type: \u0027day\u0027, priority: \u0027low\u0027 }];\r\n        localStorage.setItem(\u0027study_tasks_backup\u0027, JSON.stringify(initialTasks));\r\n\r\n        const { result } = renderHook(() =\u003e useTasks({\r\n            user: mockUser as any,\r\n            gamification: mockGamification as any,\r\n            awardXP,\r\n            updateStats\r\n        }));\r\n\r\n        await act(async () =\u003e {\r\n            await result.current.updateTask(\u00271\u0027, { title: \u0027New\u0027 });\r\n        });\r\n\r\n        expect(result.current.tasks[0].title).toBe(\u0027New\u0027);\r\n    });\r\n\r\n    it(\u0027should toggle task status and award XP\u0027, async () =\u003e {\r\n        const initialTasks = [{\r\n            id: \u00271\u0027,\r\n            title: \u0027Task\u0027,\r\n            status: \u0027pending\u0027,\r\n            type: \u0027day\u0027,\r\n            priority: \u0027medium\u0027,\r\n            completionHistory: []\r\n        }];\r\n        localStorage.setItem(\u0027study_tasks_backup\u0027, JSON.stringify(initialTasks));\r\n\r\n        const { result } = renderHook(() =\u003e useTasks({\r\n            user: mockUser as any,\r\n            gamification: mockGamification as any,\r\n            awardXP,\r\n            updateStats\r\n        }));\r\n\r\n        await act(async () =\u003e {\r\n            await result.current.toggleTask(\u00271\u0027);\r\n        });\r\n\r\n        expect(result.current.tasks[0].status).toBe(\u0027completed\u0027);\r\n        expect(awardXP).toHaveBeenCalledWith(XP_VALUES.TASK);\r\n    });\r\n\r\n    it(\u0027should fail to add a task if validation fails\u0027, async () =\u003e {\r\n        const { result } = renderHook(() =\u003e useTasks({\r\n            user: mockUser as any,\r\n            gamification: mockGamification as any,\r\n            awardXP,\r\n            updateStats\r\n        }));\r\n\r\n        const invalidTask = { title: \u0027\u0027 }; // Title required\r\n\r\n        await act(async () =\u003e {\r\n            await result.current.addTask(invalidTask as any);\r\n        });\r\n\r\n        expect(result.current.tasks).toHaveLength(0);\r\n    });\r\n\r\n    it(\u0027should add completion summary when toggling task to complete\u0027, async () =\u003e {\r\n        const initialTasks = [{\r\n            id: \u00271\u0027,\r\n            title: \u0027Task\u0027,\r\n            status: \u0027pending\u0027,\r\n            type: \u0027day\u0027,\r\n            priority: \u0027medium\u0027,\r\n            completionHistory: []\r\n        }];\r\n        localStorage.setItem(\u0027study_tasks_backup\u0027, JSON.stringify(initialTasks));\r\n\r\n        const { result } = renderHook(() =\u003e useTasks({\r\n            user: mockUser as any,\r\n            gamification: mockGamification as any,\r\n            awardXP,\r\n            updateStats\r\n        }));\r\n\r\n        await act(async () =\u003e {\r\n            await result.current.toggleTask(\u00271\u0027);\r\n        });\r\n\r\n        const { addCompletionSummary } = await import(\u0027../utils/summaries\u0027);\r\n        expect(addCompletionSummary).toHaveBeenCalled();\r\n    });\r\n\r\n    it(\u0027should handle JSON parse error during initialization\u0027, () =\u003e {\r\n        localStorage.setItem(\u0027study_tasks_backup\u0027, \u0027invalid[\u0027);\r\n        const consoleSpy = vi.spyOn(console, \u0027error\u0027).mockImplementation(() =\u003e { });\r\n\r\n        const { result } = renderHook(() =\u003e useTasks({\r\n            user: mockUser as any,\r\n            gamification: mockGamification as any,\r\n            awardXP,\r\n            updateStats\r\n        }));\r\n\r\n        expect(result.current.tasks).toEqual([]);\r\n        consoleSpy.mockRestore();\r\n    });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\useTasks.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\useTemplates.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\useThemes.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\hooks\\useThemes.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027_subthemes\u0027 is assigned a value but never used.","line":155,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":155,"endColumn":38},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027_durationMinutes\u0027 is assigned a value but never used.","line":214,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":214,"endColumn":50}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from \u0027react\u0027;\r\nimport { logger } from \u0027../utils/logger\u0027;\r\nimport type { Theme, Subtheme, Review } from \u0027../types\u0027;\r\nimport type { User } from \u0027../types/sync\u0027;\r\nimport type { GamificationState, GameStats } from \u0027../types/gamification\u0027;\r\nimport { SyncQueueService } from \u0027../services/SyncQueueService\u0027;\r\nimport { SRSService } from \u0027../services/SRSService\u0027;\r\nimport { XP_VALUES } from \u0027../config/gamification\u0027;\r\nimport { celebrate } from \u0027../utils/celebration\u0027;\r\nimport { format } from \u0027date-fns\u0027;\r\nimport { parseLocalDate } from \u0027../utils/dateHelpers\u0027;\r\nimport { useToast } from \u0027../context/ToastContext\u0027;\r\nimport { addReviewSummary, addCompletionSummary } from \u0027../utils/summaries\u0027;\r\n\r\nconst calculateInitialSubthemeState = (\r\n    startDate: string | undefined,\r\n    idx: number,\r\n    difficulty: string | undefined\r\n) =\u003e {\r\n    let introDate: string | undefined = undefined;\r\n    let status: \u0027queue\u0027 | \u0027active\u0027 = \u0027queue\u0027;\r\n    let reviews: Review[] = [];\r\n\r\n    if (startDate \u0026\u0026 difficulty !== \u0027module\u0027) {\r\n        const todayStr = format(new Date(), \u0027yyyy-MM-dd\u0027);\r\n        const introObj = parseLocalDate(startDate);\r\n        introObj.setDate(introObj.getDate() + idx);\r\n        introDate = format(introObj, \u0027yyyy-MM-dd\u0027);\r\n\r\n        if (idx === 0 \u0026\u0026 introDate \u003c= todayStr) {\r\n            status = \u0027active\u0027;\r\n        }\r\n\r\n        const offsets = [1, 3, 7, 15, 30];\r\n        reviews = offsets.map((offset, reviewIdx) =\u003e {\r\n            const reviewDateObj = new Date(introObj);\r\n            reviewDateObj.setDate(reviewDateObj.getDate() + offset);\r\n            return {\r\n                number: reviewIdx + 1,\r\n                date: format(reviewDateObj, \u0027yyyy-MM-dd\u0027),\r\n                status: \u0027pending\u0027 as const\r\n            };\r\n        });\r\n    }\r\n\r\n    return { introDate, status, reviews };\r\n};\r\n\r\ninterface UseThemesProps {\r\n    user: User | null;\r\n    gamification: GamificationState;\r\n    awardXP: (amount: number) =\u003e void;\r\n    updateStats: (updates: Partial\u003cGameStats\u003e) =\u003e void;\r\n    playSFX: (type: \u0027success\u0027 | \u0027xp\u0027 | \u0027achievement\u0027 | \u0027levelUp\u0027) =\u003e void;\r\n}\r\n\r\nexport const useThemes = ({ user, gamification, awardXP, updateStats, playSFX }: UseThemesProps) =\u003e {\r\n    const { showToast } = useToast();\r\n    // Local-First State Initialization (Load backup immediately)\r\n    const [themes, setThemes] = useState\u003cTheme[]\u003e(() =\u003e {\r\n        try {\r\n            const saved = localStorage.getItem(\u0027study_themes_backup\u0027);\r\n            if (!saved) return [];\r\n\r\n            const parsedThemes = JSON.parse(saved);\r\n            return parsedThemes;\r\n        } catch (e) {\r\n            logger.error(\"Failed to parse study_themes_backup\", e);\r\n            return [];\r\n        }\r\n    });\r\n\r\n    // Persist backups whenever state changes\r\n    useEffect(() =\u003e {\r\n        localStorage.setItem(\u0027study_themes_backup\u0027, JSON.stringify(themes));\r\n    }, [themes]);\r\n\r\n    // Data fetching logic moved to StudyContext\r\n\r\n    const addTheme = async (title: string, subthemesInit: { title: string; duration?: number; difficulty?: \u0027beginner\u0027 | \u0027intermediate\u0027 | \u0027advanced\u0027 | \u0027module\u0027 }[], options: { icon?: string, imageUrl?: string, color?: string, priority?: \u0027low\u0027 | \u0027medium\u0027 | \u0027high\u0027, startDate?: string, subtitle?: string, deadline?: string, category?: \u0027study\u0027 | \u0027project\u0027 } = {}) =\u003e {\r\n        const { icon: _icon, imageUrl: _imageUrl, color, priority: _priority, startDate, deadline, category } = options;\r\n\r\n        if (!user) {\r\n            logger.error(\"Add Theme failed: No user logged in\");\r\n            showToast(\"Erro: UsuÃ¡rio nÃ£o identificado. Tente recarregar a pÃ¡gina.\", \"error\");\r\n            return;\r\n        }\r\n        // ValidaÃ§Ã£o bÃ¡sica de datas (formato YYYY-MM-DD)\r\n        const dateRegex = /^\\d{4}-\\d{2}-\\d{2}$/;\r\n        if (startDate \u0026\u0026 !dateRegex.test(startDate)) {\r\n            showToast(\u0027Data de inÃ­cio invÃ¡lida. Use o formato YYYY-MM-DD.\u0027, \u0027error\u0027);\r\n            return;\r\n        }\r\n        if (deadline \u0026\u0026 !dateRegex.test(deadline)) {\r\n            showToast(\u0027Data de tÃ©rmino invÃ¡lida. Use o formato YYYY-MM-DD.\u0027, \u0027error\u0027);\r\n            return;\r\n        }\r\n\r\n        // 1. Create Theme Object\r\n        const newThemeId = crypto.randomUUID();\r\n        const newTheme: Theme = {\r\n            id: newThemeId,\r\n            title,\r\n            color,\r\n            createdAt: Date.now(),\r\n            priority: _priority,\r\n            icon: _icon,\r\n            imageUrl: _imageUrl,\r\n            startDate,\r\n            deadline,\r\n            category: category || \u0027study\u0027, // Default to study\r\n            subthemes: []\r\n        };\r\n\r\n        // 2. Create Subthemes Objects\r\n        const newSubthemes: Subtheme[] = subthemesInit.map((s, idx) =\u003e {\r\n            const { introDate, status, reviews } = calculateInitialSubthemeState(startDate, idx, s.difficulty);\r\n\r\n            return {\r\n                id: crypto.randomUUID(),\r\n                theme_id: newThemeId,\r\n                title: s.title,\r\n                status,\r\n                introductionDate: introDate,\r\n                reviews: reviews,\r\n                sessions: [],\r\n                durationMinutes: s.duration,\r\n                difficulty: s.difficulty,\r\n                order_index: idx\r\n            };\r\n        });\r\n\r\n        newTheme.subthemes = newSubthemes;\r\n\r\n        // 3. Optimistic Update with Auto-Activation\r\n        try {\r\n            setThemes(prev =\u003e {\r\n                const allThemes = [...prev, newTheme];\r\n                // Try to activate immediately if possible\r\n                const today = SRSService.getToday();\r\n                const result = SRSService.processDailyUpdates(allThemes, today);\r\n                return result ? result.updatedThemes : allThemes;\r\n            });\r\n        } catch (e) {\r\n            logger.error(\u0027Erro ao processar atualizaÃ§Ãµes diÃ¡rias:\u0027, e);\r\n            // Reverte a inserÃ§Ã£o do tema recÃ©m criado\r\n            setThemes(prev =\u003e prev.filter(t =\u003e t.id !== newThemeId));\r\n            showToast(\u0027Erro ao criar tema.\u0027, \u0027error\u0027);\r\n            return;\r\n        }\r\n\r\n        // 4. Queue Sync\r\n        // Add Theme\r\n        const themeOpId = crypto.randomUUID();\r\n        const { subthemes: _subthemes, ...themeData } = newTheme;\r\n\r\n        SyncQueueService.enqueue({\r\n            id: themeOpId,\r\n            type: \u0027ADD\u0027,\r\n            table: \u0027themes\u0027,\r\n            data: { ...themeData, user_id: user.id }\r\n        });\r\n\r\n        // Add Subthemes (Queue individually)\r\n        newSubthemes.forEach((st, idx) =\u003e {\r\n            const { durationMinutes, ...stData } = st;\r\n            SyncQueueService.enqueue({\r\n                type: \u0027ADD\u0027,\r\n                table: \u0027subthemes\u0027,\r\n                dependentOn: themeOpId,\r\n                data: { ...stData, duration_minutes: durationMinutes, user_id: user.id, order_index: idx }\r\n            });\r\n        });\r\n\r\n        const todayStr = format(new Date(), \u0027yyyy-MM-dd\u0027);\r\n        if (startDate \u0026\u0026 startDate \u003e todayStr) {\r\n            const startDateObj = new Date(startDate + \u0027T00:00:00\u0027);\r\n            if (!isNaN(startDateObj.getTime())) {\r\n                showToast(`Tema agendado para iniciar em ${format(startDateObj, \u0027dd/MM\u0027)}!`, \"success\");\r\n            } else {\r\n                showToast(\u0027Data de inÃ­cio invÃ¡lida.\u0027, \u0027error\u0027);\r\n            }\r\n        } else {\r\n            showToast(\"Tema criado com sucesso!\", \"success\");\r\n        }\r\n    };\r\n\r\n\r\n    const updateTheme = async (id: string, updates: Partial\u003cTheme\u003e) =\u003e {\r\n        if (!user) return;\r\n        setThemes(prev =\u003e prev.map(t =\u003e t.id === id ? { ...t, ...updates } : t));\r\n\r\n        SyncQueueService.enqueue({\r\n            type: \u0027UPDATE\u0027,\r\n            table: \u0027themes\u0027,\r\n            data: { id, ...updates, user_id: user.id }\r\n        });\r\n    };\r\n\r\n    const addSubtheme = async (themeId: string, title: string, duration?: number) =\u003e {\r\n        if (!user) return;\r\n        const newSub: Subtheme = {\r\n            id: crypto.randomUUID(),\r\n            theme_id: themeId,\r\n            title,\r\n            status: \u0027queue\u0027,\r\n            reviews: [],\r\n            sessions: [],\r\n            durationMinutes: duration,\r\n        };\r\n\r\n        setThemes(prev =\u003e prev.map(t =\u003e t.id === themeId ? { ...t, subthemes: [...t.subthemes, newSub] } : t));\r\n\r\n        const { durationMinutes: _durationMinutes, ...subData } = newSub;\r\n        SyncQueueService.enqueue({\r\n            type: \u0027ADD\u0027,\r\n            table: \u0027subthemes\u0027,\r\n            data: { ...subData, duration_minutes: duration, user_id: user.id }\r\n        });\r\n    };\r\n\r\n    const deleteSubtheme = async (themeId: string, subthemeId: string) =\u003e {\r\n        setThemes(prev =\u003e prev.map(t =\u003e t.id === themeId ? { ...t, subthemes: t.subthemes.filter(st =\u003e st.id !== subthemeId) } : t));\r\n        if (user) {\r\n            SyncQueueService.enqueue({\r\n                type: \u0027DELETE\u0027,\r\n                table: \u0027subthemes\u0027,\r\n                data: { id: subthemeId, user_id: user.id }\r\n            });\r\n        }\r\n    };\r\n\r\n    // Delete a theme and all its subthemes, ensuring no leftover data\r\n    const deleteTheme = async (themeId: string) =\u003e {\r\n        const previous = [...themes];\r\n        const theme = themes.find(t =\u003e t.id === themeId);\r\n        const subIds = theme?.subthemes.map(st =\u003e st.id) ?? [];\r\n        // Optimistic UI removal\r\n        setThemes(prev =\u003e prev.filter(t =\u003e t.id !== themeId));\r\n        showToast(\u0027Tema excluÃ­do com sucesso!\u0027, \u0027success\u0027);\r\n        // Enfileirar exclusÃµes em uma Ãºnica operaÃ§Ã£o atÃ´mica\r\n        try {\r\n            if (user) {\r\n                // Excluir tema\r\n                SyncQueueService.enqueue({\r\n                    type: \u0027DELETE\u0027,\r\n                    table: \u0027themes\u0027,\r\n                    data: { id: themeId, user_id: user.id }\r\n                });\r\n                // Excluir subtemas associados\r\n                subIds.forEach(subId =\u003e {\r\n                    SyncQueueService.enqueue({\r\n                        type: \u0027DELETE\u0027,\r\n                        table: \u0027subthemes\u0027,\r\n                        data: { id: subId, user_id: user.id }\r\n                    });\r\n                });\r\n            }\r\n        } catch (e) {\r\n            logger.error(\u0027Erro ao excluir tema ou subtemas:\u0027, e);\r\n            // Reverte UI caso algo falhe\r\n            setThemes(previous);\r\n            showToast(\u0027Erro ao excluir tema.\u0027, \u0027error\u0027);\r\n        }\r\n    };\r\n\r\n    const completeReview = async (\r\n        subthemeId: string,\r\n        reviewNumber: number = 0,\r\n        type: \u0027review\u0027 | \u0027intro\u0027 = \u0027review\u0027,\r\n        difficulty: \u0027easy\u0027 | \u0027medium\u0027 | \u0027hard\u0027 = \u0027medium\u0027,\r\n        summary?: string\r\n    ) =\u003e {\r\n        if (!user) return;\r\n\r\n        // PRIORIDADE MÃXIMA: Bloquear dias futuros\r\n        const now = new Date();\r\n        const todayStr = format(now, \u0027yyyy-MM-dd\u0027);\r\n\r\n        // Centralize subtheme lookup\r\n        const allSubthemes = themes.flatMap(t =\u003e t.subthemes);\r\n        const subtheme = allSubthemes.find(st =\u003e st.id === subthemeId);\r\n\r\n        if (!subtheme) return;\r\n\r\n        // Check the specific dates\r\n        if (type === \u0027review\u0027) {\r\n            const review = subtheme.reviews.find(r =\u003e r.number === reviewNumber);\r\n            if (review \u0026\u0026 review.date \u003e todayStr) {\r\n                showToast(\"VocÃª nÃ£o pode concluir revisÃµes de dias futuros!\", \"error\");\r\n                return;\r\n            }\r\n        } else if (type === \u0027intro\u0027) {\r\n            if (subtheme.introductionDate \u0026\u0026 subtheme.introductionDate \u003e todayStr) {\r\n                showToast(\"VocÃª nÃ£o pode iniciar estudos agendados para o futuro!\", \"error\");\r\n                return;\r\n            }\r\n        }\r\n\r\n        let xpAwarded = 0;\r\n        let targetSubtheme: Subtheme | null = null;\r\n\r\n        if (type === \u0027intro\u0027) {\r\n            const updatedThemes = themes.map(t =\u003e ({\r\n                ...t,\r\n                subthemes: t.subthemes.map(st =\u003e {\r\n                    if (st.id === subthemeId) {\r\n                        const updated: Subtheme = {\r\n                            ...st,\r\n                            status: \u0027active\u0027 as const,\r\n                            introductionDate: format(new Date(), \u0027yyyy-MM-dd\u0027)\r\n                        };\r\n\r\n                        // Adicionar resumo para introduÃ§Ã£o\r\n                        const currentSummaries = st.summaries || [];\r\n                        updated.summaries = addCompletionSummary(\r\n                            currentSummaries,\r\n                            summary || `IntroduÃ§Ã£o ao tema concluÃ­da em ${format(new Date(), \u0027dd/MM/yyyy \\\u0027Ã s\\\u0027 HH:mm\u0027)}`,\r\n                            \u0027study\u0027,\r\n                            { id: st.id, type: \u0027theme\u0027, title: st.title }\r\n                        );\r\n\r\n                        targetSubtheme = updated;\r\n                        return updated;\r\n                    }\r\n                    return st;\r\n                })\r\n            }));\r\n            setThemes(updatedThemes);\r\n            xpAwarded = XP_VALUES.INTRO;\r\n        } else {\r\n            const { updatedThemes, awarded } = SRSService.completeReview(themes, subthemeId, reviewNumber, difficulty);\r\n            if (awarded) {\r\n                // Adicionar resumo para revisÃ£o\r\n                const themesWithSummary = updatedThemes.map(t =\u003e ({\r\n                    ...t,\r\n                    subthemes: t.subthemes.map(st =\u003e {\r\n                        if (st.id === subthemeId) {\r\n                            const currentSummaries = st.summaries || [];\r\n                            const updatedSt = {\r\n                                ...st,\r\n                                summaries: addReviewSummary(\r\n                                    currentSummaries,\r\n                                    reviewNumber,\r\n                                    summary || `RevisÃ£o espaciada ${reviewNumber} concluÃ­da com dificuldade ${difficulty === \u0027easy\u0027 ? \u0027fÃ¡cil\u0027 : difficulty === \u0027hard\u0027 ? \u0027difÃ­cil\u0027 : \u0027mÃ©dia\u0027}`,\r\n                                    \u0027study\u0027,\r\n                                    { id: st.id, type: \u0027theme\u0027, title: st.title }\r\n                                )\r\n                            };\r\n                            targetSubtheme = updatedSt;\r\n                            return updatedSt;\r\n                        }\r\n                        return st;\r\n                    })\r\n                }));\r\n\r\n                setThemes(themesWithSummary);\r\n                xpAwarded = XP_VALUES.REVIEW;\r\n            }\r\n        }\r\n\r\n        if (targetSubtheme) {\r\n            const finalSubtheme = targetSubtheme as Subtheme;\r\n\r\n            // Add summary to the specific review if provided\r\n            if (summary \u0026\u0026 type === \u0027review\u0027) {\r\n                finalSubtheme.reviews = finalSubtheme.reviews.map(r =\u003e\r\n                    r.number === reviewNumber ? { ...r, summary } : r\r\n                );\r\n            }\r\n\r\n            SyncQueueService.enqueue({\r\n                type: \u0027UPDATE\u0027,\r\n                table: \u0027subthemes\u0027,\r\n                data: {\r\n                    id: subthemeId,\r\n                    reviews: finalSubtheme.reviews,\r\n                    status: finalSubtheme.status,\r\n                    introductionDate: finalSubtheme.introductionDate,\r\n                    summaries: finalSubtheme.summaries,\r\n                    user_id: user.id\r\n                }\r\n            });\r\n        }\r\n\r\n        if (xpAwarded \u003e 0) {\r\n            awardXP(xpAwarded);\r\n            playSFX(\u0027success\u0027);\r\n            updateStats({ reviewsCompleted: (gamification.stats?.reviewsCompleted || 0) + 1 });\r\n            celebrate();\r\n        }\r\n    };\r\n\r\n    const updateSubthemeContent = async (subthemeId: string, content: string) =\u003e {\r\n        if (!user) return;\r\n        // ValidaÃ§Ã£o de conteÃºdo vazio\r\n        if (!content.trim()) {\r\n            showToast(\u0027ConteÃºdo vazio nÃ£o pode ser salvo.\u0027, \u0027error\u0027);\r\n            return;\r\n        }\r\n        // Optimistic Update\r\n        setThemes(prev =\u003e prev.map(t =\u003e {\r\n            const found = t.subthemes.some(st =\u003e st.id === subthemeId);\r\n            if (found) {\r\n                return {\r\n                    ...t,\r\n                    subthemes: t.subthemes.map(st =\u003e st.id === subthemeId ? { ...st, text_content: content } : st)\r\n                };\r\n            }\r\n            return t;\r\n        }));\r\n\r\n        // Sync Queue\r\n        SyncQueueService.enqueue({\r\n            type: \u0027UPDATE\u0027,\r\n            table: \u0027subthemes\u0027,\r\n            data: {\r\n                id: subthemeId,\r\n                text_content: content,\r\n                user_id: user.id\r\n            }\r\n        });\r\n    };\r\n\r\n    return {\r\n        themes,\r\n        setThemes,\r\n        addTheme,\r\n        deleteTheme,\r\n        updateTheme,\r\n        addSubtheme,\r\n        deleteSubtheme,\r\n        completeReview,\r\n        updateSubthemeContent\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\layouts\\MainLayout.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Suspense\u0027 is defined but never used.","line":1,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":54},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027lazy\u0027 is defined but never used.","line":1,"column":56,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":60},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Zap\u0027 is defined but never used.","line":3,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Sparkles\u0027 is defined but never used.","line":4,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Flame\u0027 is defined but never used.","line":5,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":10},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useMemo has unnecessary dependencies: \u0027goals\u0027, \u0027projects\u0027, \u0027tasks\u0027, and \u0027themes\u0027. Either exclude them or remove the dependency array.","line":69,"column":8,"nodeType":"ArrayExpression","endLine":69,"endColumn":57,"suggestions":""},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\luizf\\antigraty\\study-panel\\src\\layouts\\MainLayout.tsx:96:13\n  94 |     useEffect(() =\u003e {\n  95 |         if (activeFocus) {\n\u003e 96 |             setIsMobileMenuOpen(false);\n     |             ^^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  97 |         }\n  98 |     }, [activeFocus]);\n  99 |","line":96,"column":13,"nodeType":null,"endLine":96,"endColumn":32}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef, Suspense, lazy } from \u0027react\u0027;\r\nimport {\r\n    Zap, // Keep if used (actually CheckSquare/Target etc might still be used if passed as props? No, logic moved.)\r\n    Sparkles, // Check usages\r\n    Flame\r\n} from \u0027lucide-react\u0027;\r\n// Removing format, ptBR as well if unused\r\nimport { cn } from \u0027../lib/utils\u0027;\r\nimport { useAuth } from \u0027../context/AuthContext\u0027;\r\nimport { useStudy } from \u0027../context/StudyContext\u0027;\r\nimport { usePomodoroContext } from \u0027../context/PomodoroContext\u0027; // Added import\r\nimport { useAudio } from \u0027../context/AudioContext\u0027;\r\nimport { LayoutModals } from \u0027../components/layout/LayoutModals\u0027;\r\nimport { useLayoutModals } from \u0027../hooks/useLayoutModals\u0027;\r\nimport { Sidebar } from \u0027../components/layout/Sidebar\u0027;\r\nimport { Header } from \u0027../components/layout/Header\u0027;\r\nimport { useNavigate, useLocation } from \u0027react-router-dom\u0027;\r\nimport { useCalendarEvents } from \u0027../features/calendar/hooks/useCalendarEvents\u0027;\r\nimport { useProjectContext } from \u0027../context/ProjectProvider\u0027;\r\nimport { MobileBottomNav } from \u0027../components/layout/MobileBottomNav\u0027;\r\nimport { InstallPWAHint } from \u0027../components/InstallPWAHint\u0027;\r\nimport { GlobalActionBar } from \u0027../components/layout/GlobalActionBar\u0027;\r\nimport { PomodoroWidget } from \u0027../features/pomodoro/PomodoroWidget\u0027;\r\nimport { useDevice } from \u0027../hooks/useDevice\u0027;\r\nimport { OfflineIndicator } from \u0027../components/ui/OfflineIndicator\u0027;\r\n\r\n\r\ninterface MainLayoutProps {\r\n    children: React.ReactNode;\r\n    isSummaryModalOpen: boolean;\r\n    setIsSummaryModalOpen: (isOpen: boolean) =\u003e void;\r\n    isMissionModalOpen: boolean;\r\n    setIsMissionModalOpen: (isOpen: boolean) =\u003e void;\r\n}\r\n\r\n\r\n// ...\r\n\r\nexport const MainLayout: React.FC\u003cMainLayoutProps\u003e = ({\r\n    children,\r\n    isSummaryModalOpen,\r\n    setIsSummaryModalOpen,\r\n    isMissionModalOpen,\r\n    setIsMissionModalOpen\r\n}) =\u003e {\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n\r\n    // Derive activeTab from URL\r\n    // e.g. /dashboard -\u003e dashboard, / -\u003e dashboard\r\n    const path = location.pathname.substring(1);\r\n    const activeTab = path || \u0027dashboard\u0027;\r\n\r\n    const onTabChange = (tab: string) =\u003e {\r\n        navigate(`/${tab}`);\r\n    };\r\n\r\n    const { activeFocus, syncStatus, zenMode, toggleZenMode, clearSyncQueue, themes, tasks, goals } = useStudy();\r\n    const { projects } = useProjectContext();\r\n    const { user, logout } = useAuth();\r\n    const { isIOS, isPWA, safeAreaTopClass, safeAreaBottomClass } = useDevice();\r\n    const [time, setTime] = useState(new Date());\r\n    const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\r\n\r\n    // --- MISSION \u0026 PROJECT COUNTS ---\r\n    const { getEventsForDay } = useCalendarEvents({ themes, tasks, goals, projects });\r\n    const todayEvents = React.useMemo(() =\u003e {\r\n        return getEventsForDay(new Date());\r\n    }, [themes, tasks, goals, projects, getEventsForDay]);\r\n\r\n    const missionCount = React.useMemo(() =\u003e {\r\n        const pendingTasks = todayEvents.tasks.filter(t =\u003e t.status === \u0027pending\u0027).length;\r\n        const pendingGoals = todayEvents.goals.filter(g =\u003e !g.isCompletedToday).length;\r\n        const pendingReviews = todayEvents.reviews.filter(r =\u003e r.status !== \u0027completed\u0027).length;\r\n        const pendingIntros = todayEvents.intros.length;\r\n        return pendingTasks + pendingGoals + pendingReviews + pendingIntros;\r\n    }, [todayEvents]);\r\n\r\n    const projectCount = React.useMemo(() =\u003e {\r\n        // Count goals that are linked to themes of category \u0027project\u0027\r\n        const themeProjectIds = themes.filter(t =\u003e t.category === \u0027project\u0027).map(t =\u003e t.id);\r\n        const linkedGoalsCount = goals.filter(g =\u003e g.relatedThemeId \u0026\u0026 themeProjectIds.includes(g.relatedThemeId)).length;\r\n\r\n        const standaloneProjectsCount = projects.length;\r\n        return linkedGoalsCount + standaloneProjectsCount;\r\n    }, [themes, goals, projects]);\r\n\r\n    // Use Layout Modals Hook\r\n    const modals = useLayoutModals(!!activeFocus, setIsSummaryModalOpen, isMissionModalOpen, setIsMissionModalOpen);\r\n\r\n    // Auto-close overlaying UI when Focus Mode starts (logic moved to hook mostly, but sidebar/mobilemenu manual handling might be needed if not in hook)\r\n    // Hook handles: summary, mission, task, goal, theme, sidebar.\r\n    // We still have MobileMenu here.\r\n    useEffect(() =\u003e {\r\n        if (activeFocus) {\r\n            setIsMobileMenuOpen(false);\r\n        }\r\n    }, [activeFocus]);\r\n\r\n\r\n    useEffect(() =\u003e {\r\n        const timer = setInterval(() =\u003e setTime(new Date()), 1000);\r\n        return () =\u003e clearInterval(timer);\r\n    }, []);\r\n\r\n    // Scroll Detection for Header\r\n    const mainRef = useRef\u003cHTMLDivElement\u003e(null);\r\n    const [isHeaderVisible, setIsHeaderVisible] = useState(true);\r\n    const lastScrollY = useRef(0);\r\n\r\n    useEffect(() =\u003e {\r\n        const handleScroll = () =\u003e {\r\n            const currentScrollY = mainRef.current?.scrollTop || 0;\r\n\r\n            // Header only visible at the very top to avoid clashing with sticky subtitles/calendar\r\n            if (currentScrollY \u003c 10) {\r\n                setIsHeaderVisible(true);\r\n            } else if (currentScrollY \u003e lastScrollY.current + 50) {\r\n                // Large down scroll always hides\r\n                setIsHeaderVisible(false);\r\n            } else if (currentScrollY \u003c lastScrollY.current - 100) {\r\n                // Only show on significant up-scroll if we want that, \r\n                // but user asked to \"oculte o de cima\", so we\u0027ll keep it hidden except at top.\r\n                setIsHeaderVisible(false);\r\n            }\r\n\r\n            lastScrollY.current = currentScrollY;\r\n        };\r\n\r\n        const mainElement = mainRef.current;\r\n        if (mainElement) {\r\n            mainElement.addEventListener(\u0027scroll\u0027, handleScroll, { passive: true });\r\n        }\r\n\r\n        return () =\u003e {\r\n            if (mainElement) {\r\n                mainElement.removeEventListener(\u0027scroll\u0027, handleScroll);\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    const { settings: pomoSettings, isActive, mode } = usePomodoroContext();\r\n    const { startAudio, stopAudio, isPlaying } = useAudio();\r\n\r\n    // Auto-start/stop audio based on Pomodoro state\r\n    const prevIsActive = useRef(isActive);\r\n    useEffect(() =\u003e {\r\n        // DISABLED: Auto-start audio - users can manually enable in Pomodoro widget\r\n        // if (isActive \u0026\u0026 mode === \u0027focus\u0027 \u0026\u0026 !prevIsActive.current) {\r\n        //     startAudio();\r\n        // }\r\n        // When focus session stops (isActive goes from true to false)\r\n        if (!isActive \u0026\u0026 prevIsActive.current \u0026\u0026 isPlaying) {\r\n            stopAudio();\r\n        }\r\n        prevIsActive.current = isActive;\r\n    }, [isActive, mode, startAudio, stopAudio, isPlaying]);\r\n\r\n    const isStrictFocus = pomoSettings.strictMode \u0026\u0026 isActive \u0026\u0026 mode === \u0027focus\u0027;\r\n    const showSidebar = (!zenMode \u0026\u0026 !isStrictFocus) \u0026\u0026 (modals.state.isSidebarOpen || window.innerWidth \u003e= 768);\r\n\r\n    return (\r\n        \u003cdiv className=\"flex h-screen bg-slate-950 text-slate-100 overflow-hidden relative\" style={{ scrollbarGutter: \u0027stable\u0027 }}\u003e\r\n\r\n            {/* Sidebar Desktop */}\r\n            \u003cSidebar\r\n                activeTab={activeTab}\r\n                onTabChange={onTabChange}\r\n                zenMode={zenMode}\r\n                user={user}\r\n                logout={logout}\r\n                showSidebar={showSidebar}\r\n            /\u003e\r\n\r\n            {/* Main Content */}\r\n            \u003cdiv className=\"flex-1 flex flex-col h-full overflow-hidden relative\"\u003e\r\n                {/* Header */}\r\n                \u003cHeader\r\n                    isPWA={isPWA}\r\n                    isIOS={isIOS}\r\n                    safeAreaTopClass={safeAreaTopClass}\r\n                    isHeaderVisible={isHeaderVisible}\r\n                    isMobileMenuOpen={isMobileMenuOpen}\r\n                    setIsMobileMenuOpen={setIsMobileMenuOpen}\r\n                    zenMode={zenMode}\r\n                    toggleZenMode={toggleZenMode}\r\n                    setIsMissionModalOpen={modals.actions.setIsMissionModalOpen} // Use action from hook\r\n                    setIsSummaryModalOpen={setIsSummaryModalOpen}\r\n                    setIsTaskModalOpen={modals.actions.setIsTaskModalOpen} // Use action from hook\r\n                    setIsSidebarOpen={modals.actions.setIsSidebarOpen}\r\n                    setIsThemeModalOpen={modals.actions.setIsThemeModalOpen}\r\n                    syncStatus={syncStatus}\r\n                    clearSyncQueue={clearSyncQueue}\r\n                    time={time}\r\n                    user={user}\r\n                    onTabChange={onTabChange}\r\n                    logout={logout}\r\n                    missionCount={missionCount}\r\n                    projectCount={projectCount}\r\n                /\u003e\r\n\r\n                {/* Modals */}\r\n                \u003cLayoutModals\r\n                    modals={modals}\r\n                    isSummaryModalOpen={isSummaryModalOpen}\r\n                    setIsSummaryModalOpen={setIsSummaryModalOpen}\r\n                    zenMode={zenMode}\r\n                /\u003e\r\n\r\n\r\n\r\n                {/* Scrollable Area */}\r\n                \u003cmain\r\n                    ref={mainRef}\r\n                    className={cn(\r\n                        \"flex-1 overflow-y-scroll custom-scrollbar overscroll-none px-4 md:px-8 relative\",\r\n                        isPWA \u0026\u0026 isIOS ? \"pt-24 pb-32\" : \"pt-20 pb-24 md:pb-8\", // Adjust usage padding\r\n                        safeAreaBottomClass // Ensure content doesn\u0027t get cut by home bar\r\n                    )}\r\n                \u003e\r\n                    {/* Zen Mode Backdrop Override */}\r\n                    {zenMode \u0026\u0026 \u003cdiv className=\"fixed inset-0 bg-slate-950/20 backdrop-grayscale pointer-events-none z-0\" /\u003e}\r\n\r\n                    \u003cdiv className=\"max-w-6xl mx-auto w-full relative z-10 h-full flex flex-col\"\u003e\r\n                        {children}\r\n                    \u003c/div\u003e\r\n                \u003c/main\u003e\r\n\r\n                {/* Mobile Bottom Navigation (Visible only on mobile) */}\r\n                \u003cdiv className={cn(\"md:hidden\", safeAreaBottomClass)}\u003e\r\n                    \u003cMobileBottomNav\r\n                        activeTab={activeTab}\r\n                        onTabChange={onTabChange}\r\n                        onOpenMission={() =\u003e modals.actions.setIsMissionModalOpen(true)}\r\n                        missionCount={missionCount}\r\n                    /\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* Hints */}\r\n                \u003cInstallPWAHint /\u003e\r\n\r\n                \u003cGlobalActionBar /\u003e\r\n                \u003cPomodoroWidget /\u003e\r\n                \u003cOfflineIndicator /\u003e\r\n\r\n            \u003c/div \u003e\r\n        \u003c/div \u003e\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\lib\\imageOptimizer.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\lib\\srs.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\lib\\storage.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\lib\\supabase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\lib\\validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\pages\\LandingPage.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027Check\u0027 is defined but never used.","line":8,"column":33,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":38},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027ArrowRight\u0027 is defined but never used.","line":8,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":50},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027y2\u0027 is assigned a value but never used.","line":17,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":13}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { motion, useScroll, useTransform } from \u0027framer-motion\u0027;\r\n// Note: App.tsx uses simple state \u0027activeTab\u0027 inside AppContent, but top level Auth render is binary (Login or App).\r\n// We will need to adjust App.tsx to support Landing -\u003e Login routing. For now, let\u0027s build the component.\r\n\r\n// Icons\r\nimport {\r\n    Zap, Brain, Shield, Rocket, Check, ArrowRight,\r\n    Layout, Calendar, Target, Github, Instagram, Twitter\r\n} from \u0027lucide-react\u0027;\r\n\r\nexport const LandingPage = ({ onGetStarted }: { onGetStarted: () =\u003e void }) =\u003e {\r\n\r\n    // Scroll Parallax\r\n    const { scrollY } = useScroll();\r\n    const y1 = useTransform(scrollY, [0, 500], [0, 200]);\r\n    const y2 = useTransform(scrollY, [0, 500], [0, -150]);\r\n\r\n    return (\r\n        \u003cdiv className=\"min-h-screen bg-slate-950 font-sans text-slate-100 overflow-x-hidden selection:bg-blue-500/30\"\u003e\r\n\r\n            {/* --- Navbar --- */}\r\n            \u003cnav className=\"fixed top-0 w-full z-50 bg-slate-950/80 backdrop-blur-md border-b border-slate-800/50\"\u003e\r\n                \u003cdiv className=\"max-w-7xl mx-auto px-6 h-20 flex items-center justify-between\"\u003e\r\n                    \u003cdiv className=\"flex items-center gap-3\"\u003e\r\n                        \u003cdiv className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-600 to-indigo-700 flex items-center justify-center shadow-lg shadow-blue-500/20\"\u003e\r\n                            \u003cspan className=\"text-xl\"\u003eâš¡\u003c/span\u003e\r\n                        \u003c/div\u003e\r\n                        \u003cspan className=\"font-bold text-xl tracking-tight\"\u003eRevisÃ£o \u003cspan className=\"text-blue-400\"\u003ePRO\u003c/span\u003e\u003c/span\u003e\r\n                    \u003c/div\u003e\r\n                    \u003cdiv className=\"flex items-center gap-6\"\u003e\r\n                        \u003cbutton onClick={onGetStarted} className=\"hidden md:block text-slate-300 hover:text-white font-medium transition-colors\"\u003eEntrar\u003c/button\u003e\r\n                        \u003cbutton\r\n                            onClick={onGetStarted}\r\n                            className=\"bg-white text-slate-950 px-6 py-2.5 rounded-full font-bold hover:bg-blue-50 transition-all shadow-lg hover:shadow-blue-500/20\"\r\n                        \u003e\r\n                            ComeÃ§ar GrÃ¡tis\r\n                        \u003c/button\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n            \u003c/nav\u003e\r\n\r\n            {/* --- Hero Section --- */}\r\n            \u003csection className=\"relative pt-32 pb-32 md:pt-48 md:pb-48 overflow-hidden\"\u003e\r\n                {/* Background FX */}\r\n                \u003cdiv className=\"absolute inset-0 pointer-events-none\"\u003e\r\n                    \u003cdiv className=\"absolute top-0 left-1/4 w-[500px] h-[500px] bg-blue-600/20 blur-[120px] rounded-full mix-blend-screen animate-pulse\" /\u003e\r\n                    \u003cdiv className=\"absolute bottom-0 right-1/4 w-[500px] h-[500px] bg-purple-600/10 blur-[120px] rounded-full mix-blend-screen\" /\u003e\r\n                    \u003cdiv className=\"absolute inset-0 bg-[url(\u0027https://grainy-gradients.vercel.app/noise.svg\u0027)] opacity-20 mix-blend-overlay\" /\u003e\r\n                \u003c/div\u003e\r\n\r\n                \u003cdiv className=\"max-w-7xl mx-auto px-6 relative z-10 text-center\"\u003e\r\n                    \u003cmotion.div\r\n                        initial={{ opacity: 0, y: 20 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        transition={{ duration: 0.8 }}\r\n                    \u003e\r\n                        \u003cspan className=\"inline-block px-4 py-1.5 rounded-full bg-blue-500/10 border border-blue-500/20 text-blue-400 font-bold text-sm mb-6 tracking-wide\"\u003e\r\n                            ðŸš€ V 1.0 DISPONÃVEL AGORA\r\n                        \u003c/span\u003e\r\n                        \u003ch1 className=\"text-5xl md:text-7xl font-black text-white tracking-tight mb-8 leading-[1.1]\"\u003e\r\n                            Estude Menos. \u003cbr /\u003e\r\n                            \u003cspan className=\"text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500\"\u003e\r\n                                Aprenda 10x Mais.\r\n                            \u003c/span\u003e\r\n                        \u003c/h1\u003e\r\n                        \u003cp className=\"text-xl text-slate-400 max-w-2xl mx-auto mb-10 leading-relaxed\"\u003e\r\n                            A Ãºnica plataforma que une \u003cstrong\u003eRepetiÃ§Ã£o EspaÃ§ada (SRS)\u003c/strong\u003e, GamificaÃ§Ã£o AvanÃ§ada e OrganizaÃ§Ã£o em uma interface premiada.\r\n                        \u003c/p\u003e\r\n\r\n                        \u003cdiv className=\"flex flex-col md:flex-row items-center justify-center gap-4\"\u003e\r\n                            \u003cbutton\r\n                                onClick={onGetStarted}\r\n                                className=\"w-full md:w-auto px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white rounded-2xl font-bold text-lg shadow-xl shadow-blue-500/25 transition-all hover:scale-105 flex items-center justify-center gap-2\"\r\n                            \u003e\r\n                                \u003cRocket className=\"w-5 h-5\" /\u003e\r\n                                Criar Conta Gratuita\r\n                            \u003c/button\u003e\r\n                            \u003ca href=\"#features\" className=\"w-full md:w-auto px-8 py-4 bg-slate-800/50 hover:bg-slate-800 text-white rounded-2xl font-bold text-lg border border-slate-800/50 transition-all flex items-center justify-center gap-2\"\u003e\r\n                                Saber Mais\r\n                            \u003c/a\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/motion.div\u003e\r\n                \u003c/div\u003e\r\n\r\n                {/* Hero UI Mockup */}\r\n                \u003cmotion.div\r\n                    style={{ y: y1 }}\r\n                    className=\"mt-20 max-w-6xl mx-auto px-6\"\r\n                \u003e\r\n                    \u003cdiv className=\"relative rounded-3xl border border-slate-800/50 bg-slate-900/50 backdrop-blur-xl shadow-2xl overflow-hidden aspect-video group\"\u003e\r\n                        \u003cdiv className=\"absolute inset-0 bg-gradient-to-br from-blue-500/5 via-transparent to-purple-500/5\" /\u003e\r\n                        {/* Placeholder for App Screenshot */}\r\n                        \u003cdiv className=\"absolute inset-0 flex items-center justify-center\"\u003e\r\n                            \u003cdiv className=\"text-center\"\u003e\r\n                                \u003cspan className=\"text-6xl mb-4 block\"\u003eâš¡\u003c/span\u003e\r\n                                \u003cp className=\"text-slate-500 font-mono text-sm\"\u003eInterface do Painel Principal\u003c/p\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n\r\n                        {/* Fake UI Elements for \"feeling\" */}\r\n                        \u003cdiv className=\"absolute top-8 left-8 right-8 bottom-8 border border-slate-800/50 rounded-2xl p-6 grid grid-cols-12 gap-6 opacity-50\"\u003e\r\n                            \u003cdiv className=\"col-span-3 bg-slate-900/40 rounded-xl h-full\" /\u003e\r\n                            \u003cdiv className=\"col-span-9 space-y-6\"\u003e\r\n                                \u003cdiv className=\"h-32 bg-gradient-to-r from-blue-900/20 to-indigo-900/20 rounded-xl\" /\u003e\r\n                                \u003cdiv className=\"grid grid-cols-3 gap-6\"\u003e\r\n                                    \u003cdiv className=\"h-40 bg-slate-900/40 rounded-xl\" /\u003e\r\n                                    \u003cdiv className=\"h-40 bg-slate-900/40 rounded-xl\" /\u003e\r\n                                    \u003cdiv className=\"h-40 bg-slate-900/40 rounded-xl\" /\u003e\r\n                                \u003c/div\u003e\r\n                            \u003c/div\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/motion.div\u003e\r\n            \u003c/section\u003e\r\n\r\n            {/* --- Features Grid --- */}\r\n            \u003csection id=\"features\" className=\"py-32 bg-slate-950 relative\"\u003e\r\n                \u003cdiv className=\"max-w-7xl mx-auto px-6\"\u003e\r\n                    \u003cdiv className=\"text-center mb-24\"\u003e\r\n                        \u003ch2 className=\"text-3xl md:text-5xl font-black text-white mb-6\"\u003eTudo que vocÃª precisa.\u003c/h2\u003e\r\n                        \u003cp className=\"text-slate-400 text-lg\"\u003eEsqueÃ§a planilhas e apps complicados.\u003c/p\u003e\r\n                    \u003c/div\u003e\r\n\r\n                    \u003cdiv className=\"grid md:grid-cols-3 gap-8\"\u003e\r\n                        \u003cFeatureCard\r\n                            icon={\u003cBrain className=\"w-8 h-8 text-pink-400\" /\u003e}\r\n                            title=\"SRS Inteligente\"\r\n                            desc=\"O algoritmo agenda suas revisÃµes automaticamente (1, 7, 15, 30 dias). Nunca mais esqueÃ§a o que estudou.\"\r\n                        /\u003e\r\n                        \u003cFeatureCard\r\n                            icon={\u003cZap className=\"w-8 h-8 text-amber-400\" /\u003e}\r\n                            title=\"GamificaÃ§Ã£o Real\"\r\n                            desc=\"Ganhe XP, suba de nÃ­vel e desbloqueie conquistas. Estudar vira um jogo viciante.\"\r\n                        /\u003e\r\n                        \u003cFeatureCard\r\n                            icon={\u003cLayout className=\"w-8 h-8 text-emerald-400\" /\u003e}\r\n                            title=\"OrganizaÃ§Ã£o Visual\"\r\n                            desc=\"Temas, subtemas e matÃ©rias organizados em um painel lindo e intuitivo.\"\r\n                        /\u003e\r\n                        \u003cFeatureCard\r\n                            icon={\u003cTarget className=\"w-8 h-8 text-blue-400\" /\u003e}\r\n                            title=\"Metas \u0026 HÃ¡bitos\"\r\n                            desc=\"Defina objetivos claros e acompanhe seu progresso diÃ¡rio com grÃ¡ficos detalhados.\"\r\n                        /\u003e\r\n                        \u003cFeatureCard\r\n                            icon={\u003cCalendar className=\"w-8 h-8 text-purple-400\" /\u003e}\r\n                            title=\"Agenda AutomÃ¡tica\"\r\n                            desc=\"Saiba exatamente o que revisar hoje. O sistema monta seu cronograma sozinho.\"\r\n                        /\u003e\r\n                        \u003cFeatureCard\r\n                            icon={\u003cShield className=\"w-8 h-8 text-red-400\" /\u003e}\r\n                            title=\"Modo Zen\"\r\n                            desc=\"Bloqueie distraÃ§Ãµes e foque no conteÃºdo com nosso timer Pomodoro integrado.\"\r\n                        /\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n            \u003c/section\u003e\r\n\r\n            {/* --- CTA Section --- */}\r\n            \u003csection className=\"py-32 relative overflow-hidden\"\u003e\r\n                \u003cdiv className=\"absolute inset-0 bg-blue-900/20\" /\u003e\r\n                \u003cdiv className=\"absolute inset-0 bg-gradient-to-b from-slate-950 via-transparent to-slate-950\" /\u003e\r\n\r\n                \u003cdiv className=\"max-w-4xl mx-auto px-6 relative z-10 text-center\"\u003e\r\n                    \u003ch2 className=\"text-4xl md:text-6xl font-black text-white mb-8\"\u003e\r\n                        Pronto para evoluir?\r\n                    \u003c/h2\u003e\r\n                    \u003cp className=\"text-xl text-slate-300 mb-12\"\u003e\r\n                        Junte-se a usuÃ¡rios que jÃ¡ transformaram sua rotina de estudos.\r\n                        Acesso completo e gratuito.\r\n                    \u003c/p\u003e\r\n                    \u003cbutton\r\n                        onClick={onGetStarted}\r\n                        className=\"px-10 py-5 bg-white text-slate-950 rounded-2xl font-black text-xl hover:scale-105 transition-transform shadow-2xl shadow-white/20\"\r\n                    \u003e\r\n                        ComeÃ§ar Agora\r\n                    \u003c/button\u003e\r\n                    \u003cp className=\"mt-6 text-slate-500 text-sm\"\u003eNÃ£o requer cartÃ£o de crÃ©dito â€¢ 100% Gratuito\u003c/p\u003e\r\n                \u003c/div\u003e\r\n            \u003c/section\u003e\r\n\r\n            {/* --- Footer --- */}\r\n            \u003cfooter className=\"py-12 border-t border-slate-800/50 bg-slate-950\"\u003e\r\n                \u003cdiv className=\"max-w-7xl mx-auto px-6 flex flex-col md:flex-row items-center justify-between gap-6\"\u003e\r\n                    \u003cdiv className=\"flex items-center gap-2 opacity-50\"\u003e\r\n                        \u003cspan className=\"text-lg\"\u003eâš¡\u003c/span\u003e\r\n                        \u003cspan className=\"font-bold\"\u003eRevisÃ£o PRO\u003c/span\u003e\r\n                    \u003c/div\u003e\r\n                    \u003cdiv className=\"text-slate-500 text-sm\"\u003e\r\n                        Â© 2024 Study Panel. ConstruÃ­do com â¤ï¸ para estudantes.\r\n                    \u003c/div\u003e\r\n                    \u003cdiv className=\"flex gap-6\"\u003e\r\n                        \u003cSocialIcon icon={\u003cTwitter className=\"w-5 h-5\" /\u003e} /\u003e\r\n                        \u003cSocialIcon icon={\u003cInstagram className=\"w-5 h-5\" /\u003e} /\u003e\r\n                        \u003cSocialIcon icon={\u003cGithub className=\"w-5 h-5\" /\u003e} /\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n            \u003c/footer\u003e\r\n        \u003c/div\u003e\r\n    );\r\n};\r\n\r\nconst FeatureCard = ({ icon, title, desc }: { icon: any, title: string, desc: string }) =\u003e (\r\n    \u003cdiv className=\"p-8 rounded-3xl bg-slate-900/40 border border-slate-800/50 hover:border-slate-800/50 hover:bg-white/10 transition-all group\"\u003e\r\n        \u003cdiv className=\"mb-6 p-4 rounded-2xl bg-slate-950 w-fit group-hover:scale-110 transition-transform\"\u003e\r\n            {icon}\r\n        \u003c/div\u003e\r\n        \u003ch3 className=\"text-xl font-bold text-white mb-3\"\u003e{title}\u003c/h3\u003e\r\n        \u003cp className=\"text-slate-400 leading-relaxed\"\u003e{desc}\u003c/p\u003e\r\n    \u003c/div\u003e\r\n);\r\n\r\nconst SocialIcon = ({ icon }: { icon: any }) =\u003e (\r\n    \u003ca href=\"#\" className=\"text-slate-500 hover:text-white transition-colors\"\u003e\r\n        {icon}\r\n    \u003c/a\u003e\r\n)\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\pages\\Privacy.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\pages\\SummaryDemo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\pages\\Terms.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\pwa.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\schemas\\validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\services\\GamificationService.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027subDays\u0027 is defined but never used.","line":3,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":25}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect, vi, beforeEach, afterEach } from \u0027vitest\u0027;\r\nimport { GamificationService } from \u0027./GamificationService\u0027;\r\nimport { format, subDays } from \u0027date-fns\u0027;\r\n\r\ndescribe(\u0027GamificationService\u0027, () =\u003e {\r\n    beforeEach(() =\u003e {\r\n        vi.useFakeTimers();\r\n    });\r\n\r\n    afterEach(() =\u003e {\r\n        vi.useRealTimers();\r\n    });\r\n\r\n    it(\u0027should provide initial state with level 1\u0027, () =\u003e {\r\n        const state = GamificationService.getInitialState();\r\n        expect(state.level.level).toBe(1);\r\n        expect(state.level.totalXp).toBe(0);\r\n        expect(state.streak.current).toBe(1);\r\n    });\r\n\r\n    describe(\u0027awardXP\u0027, () =\u003e {\r\n        it(\u0027should increment current and total XP\u0027, () =\u003e {\r\n            const state = GamificationService.getInitialState();\r\n            const { newState } = GamificationService.awardXP(state, 100);\r\n\r\n            expect(newState.level.currentXp).toBe(100);\r\n            expect(newState.level.totalXp).toBe(100);\r\n        });\r\n\r\n        it(\u0027should level up when reaching nextLevelXp\u0027, () =\u003e {\r\n            const state = GamificationService.getInitialState();\r\n            // Initial nextLevelXp is 500\r\n            const { newState } = GamificationService.awardXP(state, 550);\r\n\r\n            expect(newState.level.level).toBe(2);\r\n            expect(newState.level.currentXp).toBe(50);\r\n            expect(newState.level.nextLevelXp).toBeGreaterThan(500);\r\n        });\r\n\r\n        it(\u0027should clamp negative XP\u0027, () =\u003e {\r\n            const state = GamificationService.getInitialState();\r\n            const { newState } = GamificationService.awardXP(state, -100);\r\n\r\n            expect(newState.level.currentXp).toBe(0);\r\n            expect(newState.level.totalXp).toBe(0);\r\n        });\r\n\r\n        it(\u0027should increment streak if awarding XP on a new day (yesterday was last login)\u0027, () =\u003e {\r\n            const today = new Date(2025, 0, 2);\r\n            const yesterday = new Date(2025, 0, 1);\r\n\r\n            vi.setSystemTime(today);\r\n            const state = GamificationService.getInitialState();\r\n            state.streak.lastLoginDate = format(yesterday, \u0027yyyy-MM-dd\u0027);\r\n            state.stats.lastXpDate = format(yesterday, \u0027yyyy-MM-dd\u0027);\r\n\r\n            const { newState } = GamificationService.awardXP(state, 100);\r\n\r\n            expect(newState.streak.current).toBe(2);\r\n            expect(newState.streak.lastLoginDate).toBe(format(today, \u0027yyyy-MM-dd\u0027));\r\n        });\r\n\r\n        it(\u0027should reset streak if awarding XP after more than 1 day of gap\u0027, () =\u003e {\r\n            const today = new Date(2025, 0, 5);\r\n            const longAgo = new Date(2025, 0, 1);\r\n\r\n            vi.setSystemTime(today);\r\n            const state = GamificationService.getInitialState();\r\n            state.streak.current = 5;\r\n            state.streak.lastLoginDate = format(longAgo, \u0027yyyy-MM-dd\u0027);\r\n            state.stats.lastXpDate = format(longAgo, \u0027yyyy-MM-dd\u0027);\r\n\r\n            const { newState } = GamificationService.awardXP(state, 100);\r\n\r\n            expect(newState.streak.current).toBe(1);\r\n        });\r\n    });\r\n\r\n    describe(\u0027achievements\u0027, () =\u003e {\r\n        it(\u0027should unlock \"Primeiros Passos\" when total XP reaches 100\u0027, () =\u003e {\r\n            const state = GamificationService.getInitialState();\r\n            const { newState, newUnlock } = GamificationService.awardXP(state, 120);\r\n\r\n            expect(newUnlock?.id).toBe(\u0027first_steps\u0027);\r\n            expect(newState.achievements.some(a =\u003e a.id === \u0027first_steps\u0027)).toBe(true);\r\n        });\r\n\r\n        it(\u0027should not unlock same achievement twice\u0027, () =\u003e {\r\n            const state = GamificationService.getInitialState();\r\n            const { newState: state1 } = GamificationService.awardXP(state, 120);\r\n            const { newState: state2, newUnlock } = GamificationService.awardXP(state1, 20);\r\n\r\n            expect(newUnlock).toBeNull();\r\n            expect(state2.achievements.length).toBe(1);\r\n        });\r\n\r\n        it(\u0027should unlock streak achievements\u0027, () =\u003e {\r\n            const today = new Date(2025, 0, 3);\r\n            const yesterday = new Date(2025, 0, 2);\r\n            vi.setSystemTime(today);\r\n\r\n            const state = GamificationService.getInitialState();\r\n            state.streak.current = 2; // Almost there\r\n            state.streak.lastLoginDate = format(yesterday, \u0027yyyy-MM-dd\u0027);\r\n            state.stats.lastXpDate = format(yesterday, \u0027yyyy-MM-dd\u0027);\r\n\r\n            const { newState } = GamificationService.awardXP(state, 10);\r\n\r\n            expect(newState.streak.current).toBe(3);\r\n            expect(newState.achievements.some(a =\u003e a.id === \u0027streak_3\u0027)).toBe(true);\r\n        });\r\n    });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\services\\GamificationService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027GameStreak\u0027 is defined but never used.","line":2,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":38},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027UserLevel\u0027 is defined but never used.","line":2,"column":70,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":79}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { format, subDays } from \u0027date-fns\u0027;\r\nimport type { Achievement, GameStreak, GamificationState, GameStats, UserLevel } from \u0027../types/gamification\u0027;\r\nimport { ACHIEVEMENTS_LIST } from \u0027../config/gamification\u0027;\r\n\r\nexport class GamificationService {\r\n    static getToday(): string {\r\n        return format(new Date(), \u0027yyyy-MM-dd\u0027);\r\n    }\r\n\r\n    static getInitialState(): GamificationState {\r\n        return {\r\n            level: { level: 1, currentXp: 0, nextLevelXp: 500, totalXp: 0 },\r\n            streak: { current: 1, max: 1, lastLoginDate: this.getToday() },\r\n            achievements: [],\r\n            stats: {\r\n                reviewsCompleted: 0,\r\n                tasksCompleted: 0,\r\n                goalsCompleted: 0,\r\n                habitsCompleted: 0,\r\n                totalFocusMinutes: 0,\r\n                dailyXp: 0,\r\n                lastXpDate: this.getToday(),\r\n                dailyHistory: {}\r\n            }\r\n        };\r\n    }\r\n\r\n    static checkAchievements(currentStats: GameStats, currentLevel: number, currentStreak: number, currentAchievements: Achievement[]): Achievement[] {\r\n        const unlocked: Achievement[] = [];\r\n\r\n        ACHIEVEMENTS_LIST.forEach(config =\u003e {\r\n            // Skip if already unlocked\r\n            if (currentAchievements \u0026\u0026 currentAchievements.some(a =\u003e a.id === config.id)) return;\r\n\r\n            let conditionMet = false;\r\n            const { type, target } = config.condition;\r\n\r\n            switch (type) {\r\n                case \u0027xp\u0027:\r\n                    // We don\u0027t have total XP in stats easily accessible without full state, \r\n                    // but usually \u0027xp\u0027 achievements are checked against level or total.\r\n                    // For safety, let\u0027s assume \u0027xp\u0027 target means Total XP here or just ignore if data missing\r\n                    // Actually, let\u0027s map \u0027xp\u0027 to Level checks for simplicity or remove XP achievements if vague.\r\n                    // Or check external stat if we had it.\r\n                    // Implementation Detail: We\u0027ll skip \u0027xp\u0027 here and rely on awardXP checking it.\r\n                    break;\r\n                case \u0027reviews\u0027:\r\n                    conditionMet = currentStats.reviewsCompleted \u003e= target;\r\n                    break;\r\n                case \u0027tasks\u0027:\r\n                    conditionMet = currentStats.tasksCompleted \u003e= target;\r\n                    break;\r\n                case \u0027streak\u0027:\r\n                    conditionMet = currentStreak \u003e= target;\r\n                    break;\r\n            }\r\n\r\n            if (conditionMet) {\r\n                unlocked.push({\r\n                    ...config,\r\n                    unlockedAt: new Date().toISOString()\r\n                });\r\n            }\r\n        });\r\n\r\n        return unlocked;\r\n    }\r\n\r\n    static updateStats(state: GamificationState, updates: Partial\u003cGameStats\u003e): { newState: GamificationState, newUnlock: Achievement | null } {\r\n        const today = this.getToday();\r\n        const currentStats = { ...state.stats };\r\n\r\n        // Daily XP Reset\r\n        if (currentStats.lastXpDate !== today) {\r\n            currentStats.dailyXp = 0;\r\n            currentStats.lastXpDate = today;\r\n        }\r\n\r\n        const newStats = { ...currentStats, ...updates };\r\n        if (!newStats.dailyHistory) newStats.dailyHistory = {};\r\n\r\n        const newUnlocks = this.checkAchievements(newStats, state.level.level, state.streak?.current || 1, state.achievements || []);\r\n\r\n        return {\r\n            newState: {\r\n                ...state,\r\n                stats: newStats,\r\n                achievements: [...(state.achievements || []), ...newUnlocks]\r\n            },\r\n            newUnlock: newUnlocks.length \u003e 0 ? newUnlocks[0] : null\r\n        };\r\n    }\r\n\r\n    static checkStreak(state: GamificationState): { newState: GamificationState, newUnlock: Achievement | null } {\r\n        const today = this.getToday();\r\n        const streak = { ...state.streak };\r\n        const yesterday = format(subDays(new Date(), 1), \u0027yyyy-MM-dd\u0027);\r\n\r\n        // Check if already updated today\r\n        if (streak.lastLoginDate === today) {\r\n            return { newState: state, newUnlock: null };\r\n        }\r\n\r\n        // Logic\r\n        if (streak.lastLoginDate === yesterday) {\r\n            streak.current += 1;\r\n            streak.max = Math.max(streak.current, streak.max);\r\n        } else {\r\n            // Only reset if it\u0027s strictly older than yesterday (missed a day)\r\n            // If it\u0027s empty/null (new user), we treat as 1\r\n            streak.current = 1;\r\n        }\r\n        streak.lastLoginDate = today;\r\n\r\n        // Reset Daily Stats\r\n        const stats = { ...state.stats };\r\n        if (stats.lastXpDate !== today) {\r\n            stats.dailyXp = 0;\r\n            stats.lastXpDate = today;\r\n        }\r\n\r\n        // Check Achievements (e.g. 7 day streak)\r\n        const newUnlocks = this.checkAchievements(stats, state.level.level, streak.current, state.achievements || []);\r\n\r\n        return {\r\n            newState: {\r\n                ...state,\r\n                streak,\r\n                stats,\r\n                achievements: [...(state.achievements || []), ...newUnlocks]\r\n            },\r\n            newUnlock: newUnlocks.length \u003e 0 ? newUnlocks[0] : null\r\n        };\r\n    }\r\n\r\n    static awardXP(state: GamificationState, amount: number): { newState: GamificationState, newUnlock: Achievement | null } {\r\n        // 1. First ensure streak/day is up to date\r\n        const { newState: stateWithStreak, newUnlock: streakUnlock } = this.checkStreak(state);\r\n\r\n        let { level, currentXp, nextLevelXp, totalXp } = stateWithStreak.level;\r\n        const currentStats = { ...stateWithStreak.stats };\r\n\r\n        currentXp += amount;\r\n        totalXp += amount;\r\n\r\n        // Prevent negative XP (Clamping)\r\n        if (currentXp \u003c 0) currentXp = 0;\r\n        if (totalXp \u003c 0) totalXp = 0;\r\n\r\n        currentStats.dailyXp += amount;\r\n\r\n        // Level Up Checking\r\n        if (currentXp \u003e= nextLevelXp) {\r\n            currentXp -= nextLevelXp;\r\n            level += 1;\r\n            nextLevelXp = Math.floor(nextLevelXp * 1.2); // Balanced curve\r\n        }\r\n\r\n        const newUnlocks = this.checkAchievements(currentStats, level, stateWithStreak.streak.current, stateWithStreak.achievements || []);\r\n\r\n        // Combine unlocks (Streak unlock + XP unlock)\r\n        const allUnlocks = [...newUnlocks];\r\n        if (streakUnlock) allUnlocks.push(streakUnlock);\r\n\r\n        // Also check XP specific achievements\r\n        ACHIEVEMENTS_LIST.filter(a =\u003e a.condition.type === \u0027xp\u0027).forEach(a =\u003e {\r\n            if (!stateWithStreak.achievements?.some(ex =\u003e ex.id === a.id) \u0026\u0026 totalXp \u003e= a.condition.target) {\r\n                if (!allUnlocks.some(u =\u003e u.id === a.id)) {\r\n                    allUnlocks.push({ ...a, unlockedAt: new Date().toISOString() });\r\n                }\r\n            }\r\n        });\r\n\r\n        return {\r\n            newState: {\r\n                ...stateWithStreak,\r\n                level: { level, currentXp, nextLevelXp, totalXp },\r\n                stats: currentStats,\r\n                achievements: [...(stateWithStreak.achievements || []), ...allUnlocks]\r\n            },\r\n            newUnlock: allUnlocks.length \u003e 0 ? allUnlocks[0] : null\r\n        };\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\services\\NotificationService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\services\\SRSService.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027addDays\u0027 is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027format\u0027 is defined but never used.","line":4,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":25}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect, vi, beforeEach, afterEach } from \u0027vitest\u0027;\r\nimport { SRSService } from \u0027./SRSService\u0027;\r\nimport type { Theme, Subtheme, Review } from \u0027../types\u0027;\r\nimport { addDays, format } from \u0027date-fns\u0027;\r\n\r\ndescribe(\u0027SRSService\u0027, () =\u003e {\r\n    // Helper to create mock themes\r\n    const createMockTheme = (subthemes: Subtheme[] = []): Theme =\u003e ({\r\n        id: \u0027theme-1\u0027,\r\n        title: \u0027Test Theme\u0027,\r\n        icon: \u0027test\u0027,\r\n        imageUrl: \u0027test\u0027,\r\n        color: \u0027blue\u0027,\r\n        priority: \u0027medium\u0027,\r\n        createdAt: Date.now(),\r\n        subthemes\r\n    });\r\n\r\n    const createMockSubtheme = (id: string, status: \u0027queue\u0027 | \u0027active\u0027 | \u0027completed\u0027 = \u0027queue\u0027, reviews: Review[] = []): Subtheme =\u003e ({\r\n        id,\r\n        // theme_id removed as it is not part of Subtheme interface based on lint error\r\n        title: `Subtheme ${id}`,\r\n        status,\r\n        reviews,\r\n        introductionDate: status === \u0027active\u0027 ? \u00272025-01-01\u0027 : undefined\r\n    });\r\n\r\n    beforeEach(() =\u003e {\r\n        // Reset time before each test\r\n        vi.useFakeTimers();\r\n    });\r\n\r\n    afterEach(() =\u003e {\r\n        vi.useRealTimers();\r\n    });\r\n\r\n    describe(\u0027processDailyUpdates\u0027, () =\u003e {\r\n        it(\u0027should activate the first queued subtheme if nothing was introduced today\u0027, () =\u003e {\r\n            // Mock Today: 2025-01-01\r\n            const today = new Date(2025, 0, 1);\r\n            vi.setSystemTime(today);\r\n            const todayStr = \u00272025-01-01\u0027;\r\n\r\n            const sub1 = createMockSubtheme(\u0027sub-1\u0027, \u0027queue\u0027);\r\n            const sub2 = createMockSubtheme(\u0027sub-2\u0027, \u0027queue\u0027);\r\n            const themes = [createMockTheme([sub1, sub2])];\r\n\r\n            const result = SRSService.processDailyUpdates(themes, \u00272024-12-31\u0027);\r\n\r\n            expect(result).not.toBeNull();\r\n            expect(result?.processedDate).toBe(todayStr);\r\n\r\n            const updatedSub1 = result?.updatedThemes[0].subthemes[0];\r\n            expect(updatedSub1?.status).toBe(\u0027active\u0027);\r\n            expect(updatedSub1?.introductionDate).toBe(todayStr);\r\n            expect(updatedSub1?.reviews.length).toBe(5); // 5 Standard intervals\r\n\r\n            // Check first review date (Offset 1 day)\r\n            // If today is 2025-01-01, review 1 should be 2025-01-02\r\n            expect(updatedSub1?.reviews[0].date).toBe(\u00272025-01-02\u0027);\r\n\r\n            // Sub 2 should remain queued\r\n            expect(result?.updatedThemes[0].subthemes[1].status).toBe(\u0027queue\u0027);\r\n        });\r\n\r\n        it(\u0027should NOT activate anything if a subtheme was already introduced today\u0027, () =\u003e {\r\n            const today = new Date(2025, 0, 1);\r\n            vi.setSystemTime(today);\r\n            const todayStr = \u00272025-01-01\u0027;\r\n\r\n            // Subtheme already active introduced today\r\n            const sub1 = createMockSubtheme(\u0027sub-1\u0027, \u0027active\u0027);\r\n            sub1.introductionDate = todayStr;\r\n            const sub2 = createMockSubtheme(\u0027sub-2\u0027, \u0027queue\u0027);\r\n\r\n            const themes = [createMockTheme([sub1, sub2])];\r\n\r\n            const result = SRSService.processDailyUpdates(themes, \u00272024-12-31\u0027);\r\n\r\n            // Should return null (no updates needed) or just date update if date was old?\r\n            // The service returns null if today matches OR hasIntroToday.\r\n            // If hasIntroToday but lastProcessed is old, it returns themes unchanged but new date.\r\n\r\n            expect(result).not.toBeNull();\r\n            expect(result?.updatedThemes).toEqual(themes); // Content check, not reference\r\n            expect(result?.processedDate).toBe(todayStr);\r\n        });\r\n\r\n        it(\u0027should calculate correct intervals [1, 2, 4, 8, 15]\u0027, () =\u003e {\r\n            const today = new Date(2025, 0, 1);\r\n            vi.setSystemTime(today);\r\n\r\n            const sub1 = createMockSubtheme(\u0027sub-1\u0027, \u0027queue\u0027);\r\n            const themes = [createMockTheme([sub1])];\r\n\r\n            const result = SRSService.processDailyUpdates(themes, \u00272024-12-31\u0027);\r\n            const reviews = result?.updatedThemes[0].subthemes[0].reviews;\r\n\r\n            if (!reviews) throw new Error(\u0027Reviews not created\u0027);\r\n\r\n            // Expected Dates based on 2025-01-01 (acumulative)\r\n            // +1  -\u003e 2025-01-02\r\n            // +2  -\u003e 2025-01-04\r\n            // +4  -\u003e 2025-01-08\r\n            // +8  -\u003e 2025-01-16\r\n            // +15 -\u003e 2025-01-31\r\n\r\n            expect(reviews[0].date).toBe(\u00272025-01-02\u0027);\r\n            expect(reviews[1].date).toBe(\u00272025-01-04\u0027);\r\n            expect(reviews[2].date).toBe(\u00272025-01-08\u0027);\r\n            expect(reviews[3].date).toBe(\u00272025-01-16\u0027);\r\n            expect(reviews[4].date).toBe(\u00272025-01-31\u0027);\r\n        });\r\n\r\n        it(\u0027should handle leap years correctly (Feb 2024)\u0027, () =\u003e {\r\n            // Feb 28, 2024 (Leap year)\r\n            const date = new Date(2024, 1, 28);\r\n            vi.setSystemTime(date);\r\n\r\n            const sub1 = createMockSubtheme(\u0027sub-leap\u0027, \u0027queue\u0027);\r\n            const themes = [createMockTheme([sub1])];\r\n\r\n            const result = SRSService.processDailyUpdates(themes, \u00272024-02-27\u0027);\r\n            const reviews = result?.updatedThemes[0].subthemes[0].reviews;\r\n\r\n            if (!reviews) throw new Error(\u0027Reviews not created\u0027);\r\n\r\n            // Today is 2024-02-28\r\n            // +1 day -\u003e 2024-02-29 (Leap day)\r\n            // +3 days -\u003e 2024-03-02\r\n            expect(reviews[0].date).toBe(\u00272024-02-29\u0027);\r\n            expect(reviews[1].date).toBe(\u00272024-03-02\u0027);\r\n        });\r\n\r\n        it(\u0027should only activate one subtheme per day even across multiple themes\u0027, () =\u003e {\r\n            const today = new Date(2025, 0, 1);\r\n            vi.setSystemTime(today);\r\n\r\n            const theme1 = createMockTheme([createMockSubtheme(\u0027t1-s1\u0027, \u0027queue\u0027)]);\r\n            const theme2 = createMockTheme([createMockSubtheme(\u0027t2-s1\u0027, \u0027queue\u0027)]);\r\n            theme2.id = \u0027theme-2\u0027;\r\n\r\n            const result = SRSService.processDailyUpdates([theme1, theme2], \u00272024-12-31\u0027);\r\n\r\n            const updatedTheme1 = result?.updatedThemes.find(t =\u003e t.id === \u0027theme-1\u0027);\r\n            const updatedTheme2 = result?.updatedThemes.find(t =\u003e t.id === \u0027theme-2\u0027);\r\n\r\n            // Only one should be active\r\n            const activeCount =\r\n                (updatedTheme1?.subthemes.filter(s =\u003e s.status === \u0027active\u0027).length || 0) +\r\n                (updatedTheme2?.subthemes.filter(s =\u003e s.status === \u0027active\u0027).length || 0);\r\n\r\n            expect(activeCount).toBe(1);\r\n        });\r\n    });\r\n\r\n    describe(\u0027completeReview\u0027, () =\u003e {\r\n        it(\u0027should mark review as completed\u0027, () =\u003e {\r\n            const today = new Date(2025, 0, 2); // Review day\r\n            vi.setSystemTime(today);\r\n            const todayStr = \u00272025-01-02\u0027;\r\n\r\n            const review1: Review = { number: 1, date: todayStr, status: \u0027pending\u0027 };\r\n            const sub1 = createMockSubtheme(\u0027sub-1\u0027, \u0027active\u0027, [review1]);\r\n            const themes = [createMockTheme([sub1])];\r\n\r\n            const { updatedThemes, awarded } = SRSService.completeReview(themes, \u0027sub-1\u0027, 1);\r\n\r\n            expect(awarded).toBe(true);\r\n            const updatedSub = updatedThemes[0].subthemes[0];\r\n            expect(updatedSub.reviews[0].status).toBe(\u0027completed\u0027);\r\n        });\r\n\r\n        it(\u0027should NOT complete future reviews\u0027, () =\u003e {\r\n            const today = new Date(2025, 0, 1); // Before review day\r\n            vi.setSystemTime(today);\r\n\r\n            const review1: Review = { number: 1, date: \u00272025-01-02\u0027, status: \u0027pending\u0027 };\r\n            const sub1 = createMockSubtheme(\u0027sub-1\u0027, \u0027active\u0027, [review1]);\r\n            const themes = [createMockTheme([sub1])];\r\n\r\n            const { updatedThemes, awarded } = SRSService.completeReview(themes, \u0027sub-1\u0027, 1);\r\n\r\n            expect(awarded).toBe(false);\r\n            expect(updatedThemes[0].subthemes[0].reviews[0].status).toBe(\u0027pending\u0027);\r\n        });\r\n    });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\services\\SRSService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027parseISO\u0027 is defined but never used.","line":1,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":35}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { addDays, format, parseISO } from \u0027date-fns\u0027;\r\nimport type { Theme, Subtheme, Review } from \u0027../types\u0027;\r\n\r\nexport class SRSService {\r\n    // Default intervals (in days) from the previous review\r\n    // Review 1: +1d (Day 1)\r\n    // Review 2: +2d (Day 3)\r\n    // Review 3: +4d (Day 7)\r\n    // Review 4: +8d (Day 15)\r\n    // Review 5: +15d (Day 30)\r\n    private static DEFAULT_STEP_INTERVALS = [1, 2, 4, 8, 15];\r\n\r\n    static getToday(): string {\r\n        return format(new Date(), \u0027yyyy-MM-dd\u0027);\r\n    }\r\n\r\n    /**\r\n     * Calculates the next interval based on difficulty and current step\r\n     * Logic:\r\n     * - Hard: Step interval * 0.8 (min 1 day increase)\r\n     * - Medium: Step interval * 1.0 (standard)\r\n     * - Easy: Step interval * 1.5\r\n     */\r\n    static calculateNextInterval(stepIndex: number, difficulty: \u0027easy\u0027 | \u0027medium\u0027 | \u0027hard\u0027 = \u0027medium\u0027): number {\r\n        const base = this.DEFAULT_STEP_INTERVALS[stepIndex] || 15;\r\n\r\n        switch (difficulty) {\r\n            case \u0027easy\u0027: return Math.ceil(base * 1.8);\r\n            case \u0027hard\u0027: return Math.max(1, Math.floor(base * 0.7));\r\n            default: return base;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Updates subtheme activation logic\r\n     */\r\n    static processDailyUpdates(themes: Theme[], lastProcessedDate: string): { updatedThemes: Theme[], processedDate: string } | null {\r\n        const today = this.getToday();\r\n        const hasIntroToday = themes.some(t =\u003e\r\n            t.subthemes.some(st =\u003e st.introductionDate === today)\r\n        );\r\n\r\n        if (hasIntroToday \u0026\u0026 lastProcessedDate === today) return null;\r\n\r\n        let activated = false;\r\n        const updatedThemes = themes.map(theme =\u003e {\r\n            if (activated || hasIntroToday) return theme;\r\n\r\n            const queueIndex = theme.subthemes.findIndex(st =\u003e st.status === \u0027queue\u0027);\r\n            if (queueIndex !== -1) {\r\n                const subtheme = theme.subthemes[queueIndex];\r\n\r\n                // Initial reviews generation (standard medium)\r\n                let lastDate = new Date();\r\n                const reviews: Review[] = this.DEFAULT_STEP_INTERVALS.map((interval, idx) =\u003e {\r\n                    lastDate = addDays(lastDate, interval);\r\n                    return {\r\n                        number: idx + 1,\r\n                        date: format(lastDate, \u0027yyyy-MM-dd\u0027),\r\n                        status: \u0027pending\u0027\r\n                    };\r\n                });\r\n\r\n                const updatedSubtheme: Subtheme = {\r\n                    ...subtheme,\r\n                    status: \u0027active\u0027,\r\n                    introductionDate: today,\r\n                    reviews: reviews\r\n                };\r\n\r\n                const newSubthemes = [...theme.subthemes];\r\n                newSubthemes[queueIndex] = updatedSubtheme;\r\n\r\n                activated = true;\r\n                return { ...theme, subthemes: newSubthemes };\r\n            }\r\n            return theme;\r\n        });\r\n\r\n        if (activated || lastProcessedDate !== today) {\r\n            return { updatedThemes: updatedThemes, processedDate: today };\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Completes a review and intelligently reschedules subsequent ones\r\n     */\r\n    static completeReview(\r\n        themes: Theme[],\r\n        subthemeId: string,\r\n        reviewNumber: number,\r\n        difficulty: \u0027easy\u0027 | \u0027medium\u0027 | \u0027hard\u0027 = \u0027medium\u0027\r\n    ): { updatedThemes: Theme[], awarded: boolean } {\r\n        const today = new Date();\r\n        let awarded = false;\r\n\r\n        const updatedThemes = themes.map(t =\u003e ({\r\n            ...t,\r\n            subthemes: t.subthemes.map(st =\u003e {\r\n                if (st.id !== subthemeId) return st;\r\n\r\n                const reviewIdx = st.reviews.findIndex(r =\u003e r.number === reviewNumber);\r\n                if (reviewIdx === -1) return st;\r\n\r\n                // 0. Date check: Only allow completing if date is today or earlier\r\n                const review = st.reviews[reviewIdx];\r\n                if (review.date \u003e format(today, \u0027yyyy-MM-dd\u0027)) return st;\r\n\r\n                const newReviews = [...st.reviews];\r\n\r\n                // 1. Mark current as completed\r\n                newReviews[reviewIdx] = {\r\n                    ...newReviews[reviewIdx],\r\n                    status: \u0027completed\u0027,\r\n                    completedAt: today.toISOString(),\r\n                    difficulty: difficulty\r\n                };\r\n                awarded = true;\r\n\r\n                // 2. Reschedule SUBSEQUENT reviews if any\r\n                // We take the current completion date as the new anchor\r\n                let anchorDate = today;\r\n\r\n                for (let i = reviewIdx + 1; i \u003c newReviews.length; i++) {\r\n                    // Calculate next interval based on the difficulty of the JUST completed review\r\n                    // But wait, it\u0027s more expressive if we only apply difficulty to the IMMEDIATE next one\r\n                    // and subsequent ones keep their standard relative distance?\r\n                    // Actually, let\u0027s apply a \"shifted\" schedule.\r\n\r\n                    const nextInterval = this.calculateNextInterval(i, i === reviewIdx + 1 ? difficulty : \u0027medium\u0027);\r\n                    anchorDate = addDays(anchorDate, nextInterval);\r\n\r\n                    newReviews[i] = {\r\n                        ...newReviews[i],\r\n                        date: format(anchorDate, \u0027yyyy-MM-dd\u0027)\r\n                    };\r\n                }\r\n\r\n                const allDone = newReviews.every(r =\u003e r.status === \u0027completed\u0027);\r\n                return {\r\n                    ...st,\r\n                    reviews: newReviews,\r\n                    status: allDone ? \u0027completed\u0027 : st.status\r\n                };\r\n            })\r\n        }));\r\n\r\n        return { updatedThemes, awarded };\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\services\\SyncQueueService.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\services\\SyncQueueService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027SupabaseError\u0027 is defined but never used.","line":4,"column":56,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":69},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027e\u0027 is defined but never used.","line":47,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":47,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027_\u0027 is defined but never used.","line":220,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":220,"endColumn":47}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { supabase } from \u0027../lib/supabase\u0027;\r\nimport { SyncService } from \u0027./SyncService\u0027;\r\nimport { syncLogger } from \u0027../utils/logger\u0027;\r\nimport type { DbPayload, PartialDbPayload, SyncStatus, SupabaseError } from \u0027../types/sync\u0027;\r\n\r\nexport interface SyncOp {\r\n    id: string; // Unique ID for the operation\r\n    type: \u0027ADD\u0027 | \u0027UPDATE\u0027 | \u0027DELETE\u0027;\r\n    table: \u0027themes\u0027 | \u0027tasks\u0027 | \u0027goals\u0027 | \u0027subthemes\u0027 | \u0027profiles\u0027;\r\n    data: PartialDbPayload; // Partial payload for flexibility\r\n    timestamp: number;\r\n    retryCount: number;\r\n    lastError?: string;\r\n    nextRetryTime?: number;\r\n    dependentOn?: string;\r\n}\r\n\r\nconst QUEUE_STORAGE_KEY = \u0027sync_queue_v1\u0027;\r\nconst QUEUE_VERSION = \u0027v2\u0027; // Bump to invalidate old queues\r\nconst MAX_RETRIES = 5;\r\nconst MAX_QUEUE_SIZE = 100; // Prevent unbounded growth\r\n\r\nexport class SyncQueueService {\r\n    private static queue: SyncOp[] = [];\r\n    private static isProcessing = false;\r\n    private static statusListeners: ((status: \u0027synced\u0027 | \u0027syncing\u0027 | \u0027offline\u0027 | \u0027error\u0027) =\u003e void)[] = [];\r\n\r\n    // --- Queue Management ---\r\n\r\n    static loadQueue() {\r\n        const saved = localStorage.getItem(QUEUE_STORAGE_KEY);\r\n        const savedVersion = localStorage.getItem(\u0027sync_queue_version\u0027);\r\n\r\n        // Version Check: If version mismatch, nuke the queue to prevent stuck poison pills\r\n        if (savedVersion !== QUEUE_VERSION) {\r\n            syncLogger.info(\"Version mismatch or first run. Clearing old queue.\");\r\n            this.clearQueue();\r\n            localStorage.setItem(\u0027sync_queue_version\u0027, QUEUE_VERSION);\r\n            return;\r\n        }\r\n\r\n        if (saved) {\r\n            try {\r\n                this.queue = JSON.parse(saved);\r\n                // Sanitize: Remove potentially corrupted ops with null data\r\n                this.queue = this.queue.filter(op =\u003e op \u0026\u0026 op.data);\r\n            } catch (e) {\r\n                this.queue = [];\r\n            }\r\n        }\r\n    }\r\n\r\n    static saveQueue() {\r\n        localStorage.setItem(QUEUE_STORAGE_KEY, JSON.stringify(this.queue));\r\n        this.notifyStatus();\r\n    }\r\n\r\n    static clearQueue() {\r\n        this.queue = [];\r\n        this.saveQueue();\r\n    }\r\n\r\n    static enqueue(op: Omit\u003cSyncOp, \u0027id\u0027 | \u0027timestamp\u0027 | \u0027retryCount\u0027\u003e \u0026 { id?: string }) {\r\n        const operation: SyncOp = {\r\n            ...op,\r\n            id: op.id || crypto.randomUUID(),\r\n            timestamp: Date.now(),\r\n            retryCount: 0\r\n        };\r\n\r\n        // Enforce max queue size to prevent memory issues\r\n        if (this.queue.length \u003e= MAX_QUEUE_SIZE) {\r\n            syncLogger.warn(`Queue size limit (${MAX_QUEUE_SIZE}) reached. Dropping oldest operation.`);\r\n            this.queue.shift(); // Remove oldest to make space\r\n        }\r\n\r\n        this.queue.push(operation);\r\n        this.saveQueue();\r\n        this.processQueue(); // Try to process immediately\r\n    }\r\n\r\n    // --- Processing ---\r\n\r\n    static removeDependentOps(parentId: string) {\r\n        // Filter out any operations that depend on the failed parentId\r\n        const initialLength = this.queue.length;\r\n        this.queue = this.queue.filter(op =\u003e op.dependentOn !== parentId);\r\n        if (this.queue.length !== initialLength) {\r\n            this.saveQueue();\r\n        }\r\n    }\r\n\r\n    private static isFatalError(error: { message?: string, code?: string }): boolean {\r\n        // Check for common fatal Supabase/Postgres errors\r\n        // 23505: Unique violation (already exists) - We should probably assume success or skip\r\n        // 23503: Foreign key violation (parent doesn\u0027t exist) - If parent creation failed, this is fatal.\r\n        // 400: Bad Request (Validation failed)\r\n        // 401: Unauthorized (RLS) - Maybe not fatal if token refreshes? But often is.\r\n        // 409: Conflict\r\n\r\n        const msg = error.message || \u0027\u0027;\r\n        const code = error.code || \u0027\u0027;\r\n\r\n        if (code === \u002723505\u0027) return true; // Unique violation\r\n        if (code === \u002723503\u0027) return true; // FK violation\r\n        if (code === \u002742P01\u0027) return true; // Undefined table\r\n        if (code === \u002742703\u0027) return true; // Undefined column (e.g. user_id in subthemes)\r\n        if (msg.includes(\u0027duplicate key value\u0027)) return true;\r\n        if (msg.includes(\u0027violates foreign key constraint\u0027)) return true;\r\n        if (msg.includes(\u0027Could not find the\u0027)) return true; // Schema cache error\r\n\r\n        return false;\r\n    }\r\n\r\n    static async processQueue() {\r\n        if (this.isProcessing) return;\r\n        if (this.queue.length === 0) {\r\n            this.notifyStatus();\r\n            return;\r\n        }\r\n\r\n        if (!navigator.onLine) {\r\n            this.notifyStatus();\r\n            return;\r\n        }\r\n\r\n        this.isProcessing = true;\r\n        this.notifyStatus();\r\n\r\n        // ðŸš€ BATCH PROCESSING: Group operations by table and type for efficiency\r\n        const processedOps: string[] = [];\r\n\r\n        try {\r\n            // Group operations by table and type\r\n            const groupedOps = new Map\u003cstring, SyncOp[]\u003e();\r\n\r\n            for (const op of SyncQueueService.queue) {\r\n                // Check Backoff\r\n                if (op.nextRetryTime \u0026\u0026 Date.now() \u003c op.nextRetryTime) {\r\n                    continue; // Skip this op for now\r\n                }\r\n\r\n                const key = `${op.table}_${op.type}`;\r\n                if (!groupedOps.has(key)) {\r\n                    groupedOps.set(key, []);\r\n                }\r\n                groupedOps.get(key)!.push(op);\r\n            }\r\n\r\n            // Process each group as a batch\r\n            for (const [key, ops] of groupedOps.entries()) {\r\n                if (ops.length === 0) continue;\r\n\r\n                const [table, type] = key.split(\u0027_\u0027) as [string, \u0027ADD\u0027 | \u0027UPDATE\u0027 | \u0027DELETE\u0027];\r\n\r\n                try {\r\n                    if (type === \u0027ADD\u0027 \u0026\u0026 ops.length \u003e 1) {\r\n                        // Batch INSERT\r\n                        const payloads = ops.map(op =\u003e SyncQueueService.cleanPayload(SyncQueueService.preparePayload(op.table, op.data as any)));\r\n                        const result = await supabase.from(table).insert(payloads);\r\n\r\n                        if (result?.error) {\r\n                            throw { message: result.error.message, code: result.error.code };\r\n                        }\r\n\r\n                        // Mark all as processed\r\n                        ops.forEach(op =\u003e processedOps.push(op.id));\r\n                    } else {\r\n                        // Process individually (UPDATE and DELETE, or single ADD)\r\n                        for (const op of ops) {\r\n                            await SyncQueueService.executeOp(op);\r\n                            processedOps.push(op.id);\r\n                        }\r\n                    }\r\n                } catch (error: any) {\r\n                    syncLogger.error(`Batch failed for ${key}:`, error);\r\n\r\n                    // Handle errors for the batch\r\n                    for (const op of ops) {\r\n                        if (SyncQueueService.isFatalError(error)) {\r\n                            syncLogger.warn(`Fatal error for op ${op.id}. Dropping.`);\r\n                            processedOps.push(op.id);\r\n                            SyncQueueService.removeDependentOps(op.id);\r\n                        } else {\r\n                            op.retryCount++;\r\n                            op.lastError = error.message || \u0027Unknown error\u0027;\r\n\r\n                            if (op.retryCount \u003e= MAX_RETRIES) {\r\n                                processedOps.push(op.id);\r\n                                SyncQueueService.removeDependentOps(op.id);\r\n                            } else {\r\n                                // ðŸš€ OPTIMIZED: Linear backoff instead of exponential\r\n                                const delay = Math.min(500 * op.retryCount, 5000);\r\n                                op.nextRetryTime = Date.now() + delay;\r\n\r\n                                // Schedule retry\r\n                                setTimeout(() =\u003e SyncQueueService.processQueue(), delay);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Remove processed ops from queue\r\n            this.queue = this.queue.filter(op =\u003e !processedOps.includes(op.id));\r\n            this.saveQueue();\r\n\r\n        } catch (error) {\r\n            syncLogger.error(\u0027Queue processing error:\u0027, error);\r\n        }\r\n\r\n        this.isProcessing = false;\r\n        this.notifyStatus();\r\n    }\r\n\r\n    // Helper to strip undefined values so partial updates work\r\n    private static cleanPayload(payload: Record\u003cstring, any\u003e) {\r\n        if (!payload) return {};\r\n        return Object.fromEntries(\r\n            Object.entries(payload).filter(([_, v]) =\u003e v !== undefined)\r\n        );\r\n    }\r\n\r\n    static async executeOp(op: SyncOp) {\r\n        // ðŸš€ OPTIMIZED: Removed redundant conflict check\r\n        // Let Supabase handle conflicts naturally with updated_at and RLS\r\n\r\n        let result;\r\n\r\n        if (op.type === \u0027ADD\u0027) {\r\n            const payload = SyncQueueService.cleanPayload(SyncQueueService.preparePayload(op.table, op.data as any));\r\n            result = await supabase.from(op.table).insert(payload);\r\n        } else if (op.type === \u0027UPDATE\u0027) {\r\n            const rawPayload = SyncQueueService.preparePayload(op.table, op.data as any);\r\n            const payload = SyncQueueService.cleanPayload(rawPayload);\r\n\r\n            // Don\u0027t update ID or created_at usually\r\n            delete payload.id;\r\n            delete payload.created_at;\r\n            // Always update \u0027updated_at\u0027 to now if not present? Supabase might handle it.\r\n\r\n            result = await supabase.from(op.table).update(payload).eq(\u0027id\u0027, op.data.id);\r\n        } else if (op.type === \u0027DELETE\u0027) {\r\n            syncLogger.debug(`Executing DELETE for ${op.table} ID: ${op.data.id}`);\r\n            result = await supabase.from(op.table).delete().eq(\u0027id\u0027, op.data.id);\r\n\r\n            // ðŸ›¡ï¸ Enhanced DELETE validation\r\n            if (result?.error) {\r\n                syncLogger.error(`DELETE failed for ${op.table} ID: ${op.data.id}`, result.error);\r\n                throw { message: result.error.message, code: result.error.code };\r\n            }\r\n\r\n            // Verify deletion actually happened by checking affected rows\r\n            if (result \u0026\u0026 result.status \u0026\u0026 result.status !== 204 \u0026\u0026 result.status !== 200) {\r\n                syncLogger.error(`DELETE returned unexpected status ${result.status} for ${op.table} ID: ${op.data.id}`);\r\n                throw { message: `DELETE failed with status ${result.status}`, code: \u0027DELETE_STATUS_ERR\u0027 };\r\n            }\r\n\r\n            syncLogger.debug(`DELETE successful for ${op.table} ID: ${op.data.id}`);\r\n        }\r\n\r\n        // Final error check\r\n        if (result?.error) {\r\n            throw { message: result.error.message, code: result.error.code };\r\n        }\r\n    }\r\n\r\n    // Helper to map generic types to DB columns using SyncService\r\n    private static preparePayload(table: string, data: DbPayload): any {\r\n        if (!data) return {}; // Guard against null data passed to mappers\r\n        // We reuse SyncService static methods if possible\r\n\r\n        switch (table) {\r\n            case \u0027tasks\u0027: return SyncService.mapTaskToDb(data as any);\r\n            case \u0027goals\u0027: return SyncService.mapGoalToDb(data as any);\r\n            case \u0027themes\u0027: return SyncService.mapThemeToDb(data as any);\r\n            case \u0027subthemes\u0027: return SyncService.mapSubthemeToDb(data as any);\r\n            case \u0027profiles\u0027: return data;\r\n            default: return data;\r\n        }\r\n    }\r\n\r\n    // --- Status ---\r\n\r\n    static getStatus(): \u0027synced\u0027 | \u0027syncing\u0027 | \u0027offline\u0027 | \u0027error\u0027 {\r\n        if (!navigator.onLine) return \u0027offline\u0027;\r\n        // Only show \u0027error\u0027 if we\u0027ve retried multiple times (persistent failure)\r\n        // Transient failures (retryCount \u003c= 3) will show as \u0027syncing\u0027\r\n        if (this.queue.some(op =\u003e op.retryCount \u003e 3)) return \u0027error\u0027;\r\n        if (this.queue.length \u003e 0 || this.isProcessing) return \u0027syncing\u0027;\r\n        return \u0027synced\u0027;\r\n    }\r\n\r\n    static subscribe(listener: (status: SyncStatus) =\u003e void) {\r\n        this.statusListeners.push(listener);\r\n        listener(this.getStatus());\r\n        return () =\u003e {\r\n            this.statusListeners = this.statusListeners.filter(l =\u003e l !== listener);\r\n        };\r\n    }\r\n\r\n    private static notifyStatus() {\r\n        const s = this.getStatus();\r\n        this.statusListeners.forEach(l =\u003e l(s));\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\services\\SyncService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027supabase\u0027 is defined but never used.","line":1,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027e\u0027 is defined but never used.","line":116,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":116,"endColumn":23}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { supabase } from \u0027../lib/supabase\u0027;\r\nimport type { Task, Goal, Theme, Subtheme } from \u0027../types\u0027;\r\n\r\nexport interface SyncItem {\r\n    id: string;\r\n    table: string;\r\n    action: \u0027insert\u0027 | \u0027update\u0027 | \u0027delete\u0027;\r\n    data: any;\r\n    priority: number;\r\n    attempts: number;\r\n    lastAttempt?: number;\r\n}\r\n\r\nexport class SyncService {\r\n    private queue: SyncItem[] = [];\r\n    private isProcessing = false;\r\n    private maxAttempts = 5;\r\n    private storageKey = \u0027sync_queue_v2\u0027;\r\n\r\n    constructor() {\r\n        this.loadQueue();\r\n        if (typeof window !== \u0027undefined\u0027) {\r\n            window.addEventListener(\u0027online\u0027, () =\u003e this.processQueue());\r\n        }\r\n    }\r\n\r\n    // --- Static Mappers (Restored for SyncQueueService) ---\r\n\r\n    static mapTaskToDb(task: Task \u0026 { user_id?: string }) {\r\n        return {\r\n            id: task.id,\r\n            title: task.title,\r\n            type: task.type,\r\n            status: task.status,\r\n            priority: task.priority,\r\n            date: task.date,\r\n            start_date: task.startDate,\r\n            end_date: task.endDate,\r\n            recurrence: task.recurrence,\r\n            image_url: task.imageUrl,\r\n            duration_minutes: task.durationMinutes,\r\n            time_spent: task.timeSpent,\r\n            completion_history: task.completionHistory,\r\n            sessions: task.sessions,\r\n            summaries: task.summaries,\r\n            user_id: task.user_id\r\n        };\r\n    }\r\n\r\n    static mapGoalToDb(goal: Goal \u0026 { user_id?: string }) {\r\n        return {\r\n            id: goal.id,\r\n            title: goal.title,\r\n            type: goal.type,\r\n            category: goal.category,\r\n            progress: goal.progress,\r\n            priority: goal.priority,\r\n            deadline: goal.deadline,\r\n            image_url: goal.imageUrl,\r\n            duration_minutes: goal.durationMinutes,\r\n            time_spent: goal.timeSpent,\r\n            completion_history: goal.completionHistory,\r\n            checklist: goal.checklist,\r\n            summaries: goal.summaries,\r\n            user_id: goal.user_id,\r\n            related_theme_id: goal.relatedThemeId,\r\n            is_habit: goal.isHabit,\r\n            start_date: goal.startDate,\r\n            recurrence: goal.recurrence\r\n        };\r\n    }\r\n\r\n    static mapThemeToDb(theme: Theme \u0026 { user_id?: string }) {\r\n        return {\r\n            id: theme.id,\r\n            title: theme.title,\r\n            icon: theme.icon,\r\n            color: theme.color,\r\n            category: theme.category,\r\n            start_date: theme.startDate,\r\n            deadline: theme.deadline,\r\n            notification_time: theme.notificationTime,\r\n            image_url: theme.imageUrl,\r\n            priority: theme.priority,\r\n            summaries: theme.summaries,\r\n            user_id: theme.user_id\r\n        };\r\n    }\r\n\r\n    static mapSubthemeToDb(sub: Subtheme \u0026 { theme_id?: string; user_id?: string }) {\r\n        return {\r\n            id: sub.id,\r\n            theme_id: sub.theme_id,\r\n            title: sub.title,\r\n            status: sub.status,\r\n            introduction_date: sub.introductionDate,\r\n            reviews: sub.reviews,\r\n            duration_minutes: sub.durationMinutes,\r\n            time_spent: sub.timeSpent,\r\n            difficulty: sub.difficulty,\r\n            text_content: sub.text_content,\r\n            summaries: sub.summaries,\r\n            user_id: sub.user_id,\r\n            order_index: sub.order_index\r\n        };\r\n    }\r\n\r\n    // --- Instance Methods for New Resilient Sync (to be integrated or used by SyncQueueService) ---\r\n\r\n    private loadQueue() {\r\n        if (typeof localStorage === \u0027undefined\u0027) return;\r\n        const saved = localStorage.getItem(this.storageKey);\r\n        if (saved) {\r\n            try {\r\n                this.queue = JSON.parse(saved);\r\n            } catch (e) {\r\n                this.queue = [];\r\n            }\r\n        }\r\n    }\r\n\r\n    private saveQueue() {\r\n        if (typeof localStorage === \u0027undefined\u0027) return;\r\n        localStorage.setItem(this.storageKey, JSON.stringify(this.queue));\r\n    }\r\n\r\n    async enqueue(item: Omit\u003cSyncItem, \u0027attempts\u0027 | \u0027lastAttempt\u0027\u003e) {\r\n        this.queue.push({ ...item, attempts: 0 });\r\n        this.saveQueue();\r\n        this.processQueue();\r\n    }\r\n\r\n    private async processQueue() {\r\n        if (this.isProcessing || this.queue.length === 0 || !navigator.onLine) return;\r\n        this.isProcessing = true;\r\n        // Logic for processing queue would go here if we used this instance\r\n        this.isProcessing = false;\r\n    }\r\n}\r\n\r\nexport const syncService = new SyncService();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\setupTests.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\test\\setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\types\\GoalItem.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\types\\gamification.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\types\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\types\\summary-helpers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\types\\sync.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\utils\\__tests__\\exportData.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\utils\\__tests__\\logger.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\utils\\celebration.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\utils\\csvExport.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\utils\\dateHelpers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\utils\\deletedItemsBlacklist.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\utils\\exportData.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027error\u0027 is defined but never used.","line":76,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":76,"endColumn":27}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Utility functions for data export and import\r\n */\r\n\r\nexport interface BackupData {\r\n    timestamp: string;\r\n    profile?: any;\r\n    settings?: any;\r\n    themes: any[];\r\n    tasks: any[];\r\n    goals: any[];\r\n    gamification: any;\r\n    zenMode?: boolean;\r\n}\r\n\r\n/**\r\n * Export all data to JSON file\r\n */\r\nexport const exportToJSON = (data: BackupData): void =\u003e {\r\n    const blob = new Blob([JSON.stringify(data, null, 2)], {\r\n        type: \u0027application/json\u0027\r\n    });\r\n    const url = URL.createObjectURL(blob);\r\n    const link = document.createElement(\u0027a\u0027);\r\n    link.href = url;\r\n    link.download = `study-panel-backup-${new Date().toISOString().split(\u0027T\u0027)[0]}.json`;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n    URL.revokeObjectURL(url);\r\n};\r\n\r\n/**\r\n * Validate imported backup data structure\r\n */\r\nexport const validateBackupData = (data: any): { valid: boolean; error?: string } =\u003e {\r\n    // Check if it\u0027s a valid object\r\n    if (typeof data !== \u0027object\u0027 || data === null) {\r\n        return { valid: false, error: \u0027Arquivo invÃ¡lido: nÃ£o Ã© um objeto JSON\u0027 };\r\n    }\r\n\r\n    // Check for required fields\r\n    const requiredFields = [\u0027themes\u0027, \u0027tasks\u0027, \u0027goals\u0027, \u0027gamification\u0027];\r\n    for (const field of requiredFields) {\r\n        if (!(field in data)) {\r\n            return { valid: false, error: `Arquivo invÃ¡lido: campo \"${field}\" nÃ£o encontrado` };\r\n        }\r\n    }\r\n\r\n    // Check if arrays are actually arrays\r\n    if (!Array.isArray(data.themes)) {\r\n        return { valid: false, error: \u0027Arquivo invÃ¡lido: \"themes\" nÃ£o Ã© um array\u0027 };\r\n    }\r\n    if (!Array.isArray(data.tasks)) {\r\n        return { valid: false, error: \u0027Arquivo invÃ¡lido: \"tasks\" nÃ£o Ã© um array\u0027 };\r\n    }\r\n    if (!Array.isArray(data.goals)) {\r\n        return { valid: false, error: \u0027Arquivo invÃ¡lido: \"goals\" nÃ£o Ã© um array\u0027 };\r\n    }\r\n\r\n    return { valid: true };\r\n};\r\n\r\n/**\r\n * Read and parse JSON file\r\n */\r\nexport const readJSONFile = (file: File): Promise\u003cany\u003e =\u003e {\r\n    return new Promise((resolve, reject) =\u003e {\r\n        const reader = new FileReader();\r\n\r\n        reader.onload = (e) =\u003e {\r\n            try {\r\n                const text = e.target?.result as string;\r\n                const data = JSON.parse(text);\r\n                resolve(data);\r\n            } catch (error) {\r\n                reject(new Error(\u0027Erro ao ler o arquivo: JSON invÃ¡lido\u0027));\r\n            }\r\n        };\r\n\r\n        reader.onerror = () =\u003e {\r\n            reject(new Error(\u0027Erro ao ler o arquivo\u0027));\r\n        };\r\n\r\n        reader.readAsText(file);\r\n    });\r\n};\r\n\r\n/**\r\n * Format file size for display\r\n */\r\nexport const formatFileSize = (bytes: number): string =\u003e {\r\n    if (bytes \u003c 1024) return bytes + \u0027 B\u0027;\r\n    if (bytes \u003c 1024 * 1024) return (bytes / 1024).toFixed(1) + \u0027 KB\u0027;\r\n    return (bytes / (1024 * 1024)).toFixed(1) + \u0027 MB\u0027;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\utils\\icalExport.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"\u0027type\u0027 is defined but never used.","line":7,"column":54,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":58}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { Task, Goal } from \u0027../types\u0027;\r\nimport { format, parseISO } from \u0027date-fns\u0027;\r\n\r\n/**\r\n * Generate iCal format string for tasks/goals\r\n */\r\nexport const generateiCal = (items: (Task | Goal)[], type: \u0027task\u0027 | \u0027goal\u0027): string =\u003e {\r\n    const events = items.map(item =\u003e {\r\n        const isTask = \u0027type\u0027 in item \u0026\u0026 (item.type === \u0027day\u0027 || item.type === \u0027period\u0027);\r\n        const startDate = isTask ? (item as Task).date || (item as Task).startDate : (item as Goal).startDate;\r\n        const endDate = isTask ? (item as Task).endDate : (item as Goal).deadline;\r\n\r\n        if (!startDate) return null;\r\n\r\n        const start = parseISO(startDate);\r\n        const end = endDate ? parseISO(endDate) : start;\r\n\r\n        // Format: YYYYMMDDTHHMMSSZ\r\n        const formatDate = (date: Date) =\u003e {\r\n            return format(date, \"yyyyMMdd\u0027T\u0027HHmmss\u0027Z\u0027\");\r\n        };\r\n\r\n        const summary = item.title.replace(/\\n/g, \u0027 \u0027);\r\n        const description = (\u0027summary\u0027 in item ? item.summary : \u0027\u0027) || \u0027\u0027;\r\n        const uid = `${item.id}@studypanel.app`;\r\n\r\n        return `BEGIN:VEVENT\r\nUID:${uid}\r\nDTSTAMP:${formatDate(new Date())}\r\nDTSTART:${formatDate(start)}\r\nDTEND:${formatDate(end)}\r\nSUMMARY:${summary}\r\nDESCRIPTION:${description.replace(/\\n/g, \u0027\\\\n\u0027)}\r\nSTATUS:${\u0027status\u0027 in item \u0026\u0026 item.status === \u0027completed\u0027 ? \u0027COMPLETED\u0027 : \u0027CONFIRMED\u0027}\r\nEND:VEVENT`;\r\n    }).filter(Boolean);\r\n\r\n    const calendar = `BEGIN:VCALENDAR\r\nVERSION:2.0\r\nPRODID:-//Study Panel//Study Management App//EN\r\nCALSCALE:GREGORIAN\r\nMETHOD:PUBLISH\r\n${events.join(\u0027\\n\u0027)}\r\nEND:VCALENDAR`;\r\n\r\n    return calendar;\r\n};\r\n\r\n/**\r\n * Download iCal file\r\n */\r\nexport const downloadiCal = (icalContent: string, filename: string) =\u003e {\r\n    const blob = new Blob([icalContent], { type: \u0027text/calendar;charset=utf-8\u0027 });\r\n    const link = document.createElement(\u0027a\u0027);\r\n    const url = URL.createObjectURL(blob);\r\n\r\n    link.setAttribute(\u0027href\u0027, url);\r\n    link.setAttribute(\u0027download\u0027, `${filename}.ics`);\r\n    link.style.visibility = \u0027hidden\u0027;\r\n\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\utils\\logger.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\utils\\summaries.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\utils\\webVitals.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\luizf\\antigraty\\study-panel\\src\\vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}],"Count":226}
