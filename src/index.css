@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Design Tokens */
    --radius-sm: 0.375rem;
    --radius-md: 0.5rem;
    --radius-lg: 0.75rem;
    --radius-xl: 1rem;
    --radius-2xl: 1.5rem;

    /* Spacing */
    --spacing-xs: 0.5rem;
    --spacing-sm: 0.75rem;
    --spacing-md: 1rem;
    --spacing-lg: 1.5rem;
    --spacing-xl: 2rem;

    /* Transitions */
    --transition-fast: 150ms;
    --transition-base: 250ms;
    --transition-slow: 400ms;

    /* Z-index */
    --z-dropdown: 1000;
    --z-modal: 1050;
    --z-tooltip: 1100;
    --z-notification: 1200;
  }

  html {
    background-color: #020617 !important;
    background: radial-gradient(circle at center, #1e293b 0%, #020617 100%) !important;
    min-height: 100vh;
    min-height: 100dvh;
    overflow-x: hidden;
    max-width: 100vw;
    width: 100%;
    /* Safe area support for iOS/Android */
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }

  body {
    @apply h-full w-full overflow-hidden bg-slate-950 text-slate-100 font-sans antialiased;
    font-family: 'Inter', 'system-ui', '-apple-system', sans-serif;
    background-color: #020617 !important;
    background: radial-gradient(circle at center, #1e293b 0%, #020617 100%) !important;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow-x: hidden;
    max-width: 100vw;
    width: 100%;
    overscroll-behavior-y: none;
    /* Prevent bounce effect */
    min-height: 100vh;
    min-height: 100dvh;
    /* Dynamic viewport height for mobile */
    position: relative;
  }

  #root {
    min-height: 100vh;
    min-height: 100dvh;
    background-color: #020617;
    background: radial-gradient(circle at center, #1e293b 0%, #020617 100%);
    overflow-x: hidden;
    max-width: 100vw;
    width: 100%;
    height: 100%;
  }

  /* Previne qualquer fundo branco em mobile */
  @media screen and (max-width: 768px) {

    html,
    body,
    #root {
      background-color: #020617 !important;
    }

    input,
    select,
    textarea {
      font-size: 16px !important;
    }

    /* Hide scrollbar but maintain scroll functionality on mobile */
    ::-webkit-scrollbar {
      width: 0px;
      height: 0px;
      display: none;
    }

    * {
      scrollbar-width: none;
      -ms-overflow-style: none;
    }

    /* ===== MELHORIAS DE TOQUE MOBILE ===== */

    /* Área mínima de toque recomendada (44x44px) */
    button,
    a,
    [role="button"],
    input[type="checkbox"],
    input[type="radio"],
    .clickable {
      min-width: 44px;
      min-height: 44px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    /* Feedback visual ao toque */
    button,
    a,
    [role="button"] {
      -webkit-tap-highlight-color: rgba(59, 130, 246, 0.15);
      tap-highlight-color: rgba(59, 130, 246, 0.15);
      transition: transform 0.1s ease, opacity 0.1s ease;
    }

    button:active,
    a:active,
    [role="button"]:active {
      transform: scale(0.97);
      opacity: 0.85;
    }

    /* Otimizar touch-action para melhor responsividade */
    button,
    a,
    [role="button"],
    input,
    select,
    textarea {
      touch-action: manipulation;
      /* Previne double-tap zoom */
    }

    /* Scrollable areas devem permitir scroll */
    [class*="overflow"],
    [class*="scroll"] {
      touch-action: pan-y pan-x;
      -webkit-overflow-scrolling: touch;
      /* Scroll suave no iOS */
    }

    /* Remover delay de 300ms no toque (navegadores antigos) */
    a,
    button,
    input,
    select,
    textarea,
    [role="button"] {
      -ms-touch-action: manipulation;
      touch-action: manipulation;
    }

    /* Melhorar hit area de ícones pequenos */
    svg,
    img {
      pointer-events: none;
      /* Deixa o toque passar para o parent button/link */
    }

    /* Feedback em cards/items tocáveis */
    [class*="Card"],
    [class*="card"],
    [class*="item"] {
      -webkit-tap-highlight-color: rgba(59, 130, 246, 0.1);
      transition: transform 0.15s ease;
    }

    [class*="Card"]:active,
    [class*="card"]:active,
    [class*="item"]:active {
      transform: scale(0.99);
    }

    /* Prevenir seleção de texto ao tocar */
    button,
    [role="button"],
    .no-select {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    /* Melhorar espaçamento entre elementos tocáveis */
    button+button,
    a+a,
    [role="button"]+[role="button"] {
      margin-left: 8px;
    }
  }

  ::selection {
    @apply bg-primary-500/30 text-white;
  }

  /* Hide scrollbar but maintain scroll functionality on ALL platforms */
  ::-webkit-scrollbar {
    width: 0px;
    height: 0px;
    display: none;
  }

  ::-webkit-scrollbar-track {
    display: none;
  }

  ::-webkit-scrollbar-thumb {
    display: none;
  }

  /* Firefox scrollbar - hide */
  * {
    scrollbar-width: none;
    scrollbar-color: transparent transparent;
  }

  /* IE/Edge - hide */
  * {
    -ms-overflow-style: none;
  }

  /* Custom scrollbar class - subtle and elegant */
  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: rgba(59, 130, 246, 0.3) transparent;
    -ms-overflow-style: auto;
  }

  .custom-scrollbar::-webkit-scrollbar {
    display: block;
    width: 4px;
    height: 4px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(59, 130, 246, 0.2);
    border-radius: 10px;
    display: block;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
    display: block;
  }

  #root {
    @apply h-full w-full;
  }

  * {
    -webkit-tap-highlight-color: transparent;
  }

  /* Garante que todos os botões tenham conteúdo centralizado */
  button {
    text-align: center;
    justify-content: center;
  }

  button:not(.no-auto-center) {
    display: inline-flex;
    align-items: center;
  }

  /* Focus visible improvements */
  *:focus-visible {
    @apply outline-none ring-2 ring-primary-500 ring-offset-2 ring-offset-slate-950;
  }
}

@layer components {

  /* Unified Glassmorphism */
  .glass-card {
    @apply bg-slate-900/40 backdrop-blur-md border border-slate-800/50 shadow-glass;
    transition: all var(--transition-base) ease-in-out;
  }

  .glass-card:hover {
    @apply border-slate-800/50 shadow-glass-lg;
  }

  /* Premium Glass Effect */
  .glass-card-premium {
    @apply bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl border border-slate-800/50 shadow-premium;
    transition: all var(--transition-base) ease-in-out;
  }

  .glass-card-premium:hover {
    @apply border-slate-700/50 shadow-premium-lg;
  }

  /* Button Base Styles */
  .btn-base {
    @apply px-4 py-2 rounded-lg font-medium transition-all duration-200;
    @apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-950;
  }

  .btn-primary {
    @apply btn-base bg-primary-600 hover:bg-primary-700 text-white;
    @apply focus:ring-primary-500 shadow-md hover:shadow-lg;
  }

  .btn-success {
    @apply btn-base bg-success-600 hover:bg-success-700 text-white;
    @apply focus:ring-success-500 shadow-md hover:shadow-lg;
  }

  .btn-ghost {
    @apply btn-base bg-transparent hover:bg-white/5 text-slate-300 hover:text-white;
    @apply focus:ring-white/20;
  }

  /* Input Base Styles */
  .input-base {
    @apply w-full px-4 py-2 rounded-lg bg-slate-900/50 border border-slate-800/50;
    @apply text-slate-100 placeholder-slate-500;
    @apply focus:outline-none focus:border-primary-500 focus:ring-1 focus:ring-primary-500;
    @apply transition-all duration-200;
  }

  /* Card Styles */
  .card {
    @apply glass-card rounded-xl p-4;
  }

  .card-premium {
    @apply glass-card-premium rounded-xl p-6;
  }

  /* Text Utilities */
  .text-gradient {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-primary-400 to-primary-600;
  }

  .text-gradient-success {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-success-400 to-success-600;
  }

  .text-glow {
    text-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
  }

  .text-glow-primary {
    text-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
  }

  .text-glow-success {
    text-shadow: 0 0 20px rgba(16, 185, 129, 0.5);
  }

  /* Effects */
  .active-glow {
    box-shadow: 0 0 15px rgba(16, 185, 129, 0.4);
  }

  .hover-lift {
    @apply transition-transform duration-200 hover:-translate-y-1;
  }

  .hover-scale {
    @apply transition-transform duration-200 hover:scale-105;
  }

  /* Loading States */
  .skeleton {
    @apply bg-slate-800/50 animate-pulse rounded;
  }

  /* Shimmer Effect */
  .shimmer {
    background: linear-gradient(110deg,
        transparent 25%,
        rgba(255, 255, 255, 0.1) 50%,
        transparent 75%);
    background-size: 200% 100%;
    animation: shimmer 2s linear infinite;
  }
}

@layer utilities {
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom, 0);
  }

  .pt-safe {
    padding-top: env(safe-area-inset-top, 0);
  }

  .mt-safe {
    margin-top: env(safe-area-inset-top, 0);
  }

  .mb-safe {
    margin-bottom: env(safe-area-inset-bottom, 0);
  }

  /* Perspective Utilities */
  .perspective-1000 {
    perspective: 1000px;
  }

  .perspective-2000 {
    perspective: 2000px;
  }

  .transform-style-3d {
    transform-style: preserve-3d;
  }

  .backface-hidden {
    backface-visibility: hidden;
  }

  .rotate-y-180 {
    transform: rotateY(180deg);
  }

  /* Truncate Utilities */
  .truncate-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .truncate-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Backdrop Utilities */
  .backdrop-premium {
    @apply backdrop-blur-xl bg-slate-950/80;
  }

  /* Animation Delays */
  .animation-delay-100 {
    animation-delay: 100ms;
  }

  .animation-delay-200 {
    animation-delay: 200ms;
  }

  .animation-delay-300 {
    animation-delay: 300ms;
  }

  .animation-delay-500 {
    animation-delay: 500ms;
  }
}

/* Print Styles */
@media print {
  .no-print {
    display: none !important;
  }
}